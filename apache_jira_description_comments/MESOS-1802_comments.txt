Hey [~tnachen], are you working on this? We're doing some backlog grooming!

This is still happening.

https://builds.apache.org/job/Mesos/COMPILER=gcc,CONFIGURATION=--verbose,OS=ubuntu%3A14.04,label_exp=docker%7C%7CHadoop/1204/changes

{code}

[ RUN      ] HealthCheckTest.HealthStatusChange
I1109 19:00:52.094830 29603 leveldb.cpp:176] Opened db in 282.154657ms
I1109 19:00:52.187214 29603 leveldb.cpp:183] Compacted db in 92.28671ms
I1109 19:00:52.187328 29603 leveldb.cpp:198] Created db iterator in 31318ns
I1109 19:00:52.187345 29603 leveldb.cpp:204] Seeked to beginning of db in 3925ns
I1109 19:00:52.187357 29603 leveldb.cpp:273] Iterated through 0 keys in the db in 386ns
I1109 19:00:52.187417 29603 replica.cpp:780] Replica recovered with log positions 0 -> 0 with 1 holes and 0 unlearned
I1109 19:00:52.188252 29628 recover.cpp:449] Starting replica recovery
I1109 19:00:52.188861 29628 recover.cpp:475] Replica is in EMPTY status
I1109 19:00:52.190914 29626 replica.cpp:676] Replica in EMPTY status received a broadcasted recover request from (1864)@172.17.14.49:60889
I1109 19:00:52.191453 29632 recover.cpp:195] Received a recover response from a replica in EMPTY status
I1109 19:00:52.192078 29632 recover.cpp:566] Updating replica status to STARTING
I1109 19:00:52.199542 29624 master.cpp:367] Master 34506b61-7fc1-4e5e-821c-e5f5650782e0 (61f7c652bdf2) started on 172.17.14.49:60889
I1109 19:00:52.200220 29624 master.cpp:369] Flags at startup: --acls="" --allocation_interval="1secs" --allocator="HierarchicalDRF" --authenticate="true" --authenticate_slaves="true" --authenticators="crammd5" --authorizers="local" --credentials="/tmp/z7oqX0/credentials" --framework_sorter="drf" --help="false" --hostname_lookup="true" --initialize_driver_logging="true" --log_auto_initialize="true" --logbufsecs="0" --logging_level="INFO" --max_slave_ping_timeouts="5" --quiet="false" --recovery_slave_removal_limit="100%" --registry="replicated_log" --registry_fetch_timeout="1mins" --registry_store_timeout="25secs" --registry_strict="true" --root_submissions="true" --slave_ping_timeout="15secs" --slave_reregister_timeout="10mins" --user_sorter="drf" --version="false" --webui_dir="/mesos/mesos-0.26.0/_inst/share/mesos/webui" --work_dir="/tmp/z7oqX0/master" --zk_session_timeout="10secs"
I1109 19:00:52.200584 29624 master.cpp:414] Master only allowing authenticated frameworks to register
I1109 19:00:52.200597 29624 master.cpp:419] Master only allowing authenticated slaves to register
I1109 19:00:52.200606 29624 credentials.hpp:37] Loading credentials for authentication from '/tmp/z7oqX0/credentials'
I1109 19:00:52.200917 29624 master.cpp:458] Using default 'crammd5' authenticator
I1109 19:00:52.201328 29624 master.cpp:495] Authorization enabled
I1109 19:00:52.201648 29622 hierarchical.cpp:140] Initialized hierarchical allocator process
I1109 19:00:52.201715 29622 whitelist_watcher.cpp:79] No whitelist given
I1109 19:00:52.204258 29624 master.cpp:1606] The newly elected leader is master@172.17.14.49:60889 with id 34506b61-7fc1-4e5e-821c-e5f5650782e0
I1109 19:00:52.204290 29624 master.cpp:1619] Elected as the leading master!
I1109 19:00:52.204308 29624 master.cpp:1379] Recovering from registrar
I1109 19:00:52.204457 29637 registrar.cpp:309] Recovering registrar
I1109 19:00:52.257841 29632 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 65.359249ms
I1109 19:00:52.257933 29632 replica.cpp:323] Persisted replica status to STARTING
I1109 19:00:52.258283 29631 recover.cpp:475] Replica is in STARTING status
I1109 19:00:52.259827 29630 replica.cpp:676] Replica in STARTING status received a broadcasted recover request from (1865)@172.17.14.49:60889
I1109 19:00:52.260082 29628 recover.cpp:195] Received a recover response from a replica in STARTING status
I1109 19:00:52.260671 29630 recover.cpp:566] Updating replica status to VOTING
I1109 19:00:52.369948 29628 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 109.102187ms
I1109 19:00:52.370046 29628 replica.cpp:323] Persisted replica status to VOTING
I1109 19:00:52.370317 29628 recover.cpp:580] Successfully joined the Paxos group
I1109 19:00:52.370551 29628 recover.cpp:464] Recover process terminated
I1109 19:00:52.371186 29629 log.cpp:661] Attempting to start the writer
I1109 19:00:52.372530 29629 replica.cpp:496] Replica received implicit promise request from (1866)@172.17.14.49:60889 with proposal 1
I1109 19:00:52.505920 29629 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 133.338727ms
I1109 19:00:52.505997 29629 replica.cpp:345] Persisted promised to 1
I1109 19:00:52.506805 29634 coordinator.cpp:240] Coordinator attempting to fill missing positions
I1109 19:00:52.508029 29622 replica.cpp:391] Replica received explicit promise request from (1867)@172.17.14.49:60889 for position 0 with proposal 2
I1109 19:00:52.587518 29622 leveldb.cpp:343] Persisting action (8 bytes) to leveldb took 79.418401ms
I1109 19:00:52.587616 29622 replica.cpp:715] Persisted action at 0
I1109 19:00:52.589311 29622 replica.cpp:540] Replica received write request for position 0 from (1868)@172.17.14.49:60889
I1109 19:00:52.589390 29622 leveldb.cpp:438] Reading position from leveldb took 41754ns
I1109 19:00:52.660668 29622 leveldb.cpp:343] Persisting action (14 bytes) to leveldb took 71.221465ms
I1109 19:00:52.660756 29622 replica.cpp:715] Persisted action at 0
I1109 19:00:52.661685 29625 replica.cpp:694] Replica received learned notice for position 0 from @0.0.0.0:0
I1109 19:00:52.706508 29625 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 44.76317ms
I1109 19:00:52.706595 29625 replica.cpp:715] Persisted action at 0
I1109 19:00:52.706634 29625 replica.cpp:700] Replica learned NOP action at position 0
I1109 19:00:52.707479 29625 log.cpp:677] Writer started with ending position 0
I1109 19:00:52.708673 29631 leveldb.cpp:438] Reading position from leveldb took 62378ns
I1109 19:00:52.709760 29628 registrar.cpp:342] Successfully fetched the registry (0B) in 505.250304ms
I1109 19:00:52.709918 29628 registrar.cpp:441] Applied 1 operations in 46159ns; attempting to update the 'registry'
I1109 19:00:52.710719 29626 log.cpp:685] Attempting to append 176 bytes to the log
I1109 19:00:52.710878 29622 coordinator.cpp:350] Coordinator attempting to write APPEND action at position 1
I1109 19:00:52.711644 29634 replica.cpp:540] Replica received write request for position 1 from (1869)@172.17.14.49:60889
I1109 19:00:52.757084 29634 leveldb.cpp:343] Persisting action (195 bytes) to leveldb took 45.376201ms
I1109 19:00:52.757189 29634 replica.cpp:715] Persisted action at 1
I1109 19:00:52.758299 29636 replica.cpp:694] Replica received learned notice for position 1 from @0.0.0.0:0
I1109 19:00:52.799000 29636 leveldb.cpp:343] Persisting action (197 bytes) to leveldb took 40.641232ms
I1109 19:00:52.799090 29636 replica.cpp:715] Persisted action at 1
I1109 19:00:52.799129 29636 replica.cpp:700] Replica learned APPEND action at position 1
I1109 19:00:52.801550 29632 registrar.cpp:486] Successfully updated the 'registry' in 91.542016ms
I1109 19:00:52.801815 29632 registrar.cpp:372] Successfully recovered registrar
I1109 19:00:52.802433 29634 master.cpp:1416] Recovered 0 slaves from the Registry (137B) ; allowing 10mins for slaves to re-register
I1109 19:00:52.802548 29632 log.cpp:704] Attempting to truncate the log to 1
I1109 19:00:52.802938 29632 coordinator.cpp:350] Coordinator attempting to write TRUNCATE action at position 2
I1109 19:00:52.804299 29632 replica.cpp:540] Replica received write request for position 2 from (1870)@172.17.14.49:60889
I1109 19:00:52.832676 29632 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 28.304266ms
I1109 19:00:52.832762 29632 replica.cpp:715] Persisted action at 2
I1109 19:00:52.833796 29627 replica.cpp:694] Replica received learned notice for position 2 from @0.0.0.0:0
I1109 19:00:52.881970 29627 leveldb.cpp:343] Persisting action (18 bytes) to leveldb took 48.117789ms
I1109 19:00:52.882125 29627 leveldb.cpp:401] Deleting ~1 keys from leveldb took 71118ns
I1109 19:00:52.882160 29627 replica.cpp:715] Persisted action at 2
I1109 19:00:52.882472 29627 replica.cpp:700] Replica learned TRUNCATE action at position 2
I1109 19:00:52.886776 29603 containerizer.cpp:142] Using isolation: posix/cpu,posix/mem,filesystem/posix
W1109 19:00:52.887220 29603 backend.cpp:50] Failed to create 'bind' backend: BindBackend requires root privileges
I1109 19:00:52.892428 29636 slave.cpp:191] Slave started on 59)@172.17.14.49:60889
I1109 19:00:52.892465 29636 slave.cpp:192] Flags at startup: --appc_store_dir="/tmp/mesos/store/appc" --authenticatee="crammd5" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/tmp/HealthCheckTest_HealthStatusChange_xdqiRg/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_kill_orphans="true" --docker_local_archives_dir="/tmp/mesos/images/docker" --docker_puller="local" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --docker_store_dir="/tmp/mesos/store/docker" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/tmp/HealthCheckTest_HealthStatusChange_xdqiRg/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="false" --hostname_lookup="true" --image_provisioner_backend="copy" --initialize_driver_logging="true" --isolation="posix/cpu,posix/mem" --launcher_dir="/mesos/mesos-0.26.0/_build/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resources="cpus:2;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --systemd_runtime_directory="/run/systemd/system" --version="false" --work_dir="/tmp/HealthCheckTest_HealthStatusChange_xdqiRg"
I1109 19:00:52.892906 29636 credentials.hpp:85] Loading credential for authentication from '/tmp/HealthCheckTest_HealthStatusChange_xdqiRg/credential'
I1109 19:00:52.893141 29636 slave.cpp:322] Slave using credential for: test-principal
I1109 19:00:52.893776 29636 slave.cpp:392] Slave resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I1109 19:00:52.893852 29636 slave.cpp:400] Slave attributes: [  ]
I1109 19:00:52.893865 29636 slave.cpp:405] Slave hostname: 61f7c652bdf2
I1109 19:00:52.893874 29636 slave.cpp:410] Slave checkpoint: true
I1109 19:00:52.894933 29603 sched.cpp:166] Version: 0.26.0
I1109 19:00:52.895546 29629 state.cpp:54] Recovering state from '/tmp/HealthCheckTest_HealthStatusChange_xdqiRg/meta'
I1109 19:00:52.895649 29630 sched.cpp:264] New master detected at master@172.17.14.49:60889
I1109 19:00:52.895730 29630 sched.cpp:320] Authenticating with master master@172.17.14.49:60889
I1109 19:00:52.895752 29630 sched.cpp:327] Using default CRAM-MD5 authenticatee
I1109 19:00:52.896075 29630 authenticatee.cpp:123] Creating new client SASL connection
I1109 19:00:52.896335 29626 status_update_manager.cpp:202] Recovering status update manager
I1109 19:00:52.896419 29636 master.cpp:5150] Authenticating scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889
I1109 19:00:52.896545 29623 authenticator.cpp:415] Starting authentication session for crammd5_authenticatee(164)@172.17.14.49:60889
I1109 19:00:52.896879 29623 authenticator.cpp:100] Creating new server SASL connection
I1109 19:00:52.897099 29623 authenticatee.cpp:214] Received SASL authentication mechanisms: CRAM-MD5
I1109 19:00:52.897128 29623 authenticatee.cpp:240] Attempting to authenticate with mechanism 'CRAM-MD5'
I1109 19:00:52.897286 29637 authenticator.cpp:205] Received SASL authentication start
I1109 19:00:52.897351 29637 authenticator.cpp:327] Authentication requires more steps
I1109 19:00:52.897400 29630 containerizer.cpp:384] Recovering containerizer
I1109 19:00:52.897434 29637 authenticatee.cpp:260] Received SASL authentication step
I1109 19:00:52.897555 29637 authenticator.cpp:233] Received SASL authentication step
I1109 19:00:52.897585 29637 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: '61f7c652bdf2' server FQDN: '61f7c652bdf2' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false 
I1109 19:00:52.897600 29637 auxprop.cpp:181] Looking up auxiliary property '*userPassword'
I1109 19:00:52.897655 29637 auxprop.cpp:181] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
I1109 19:00:52.897689 29637 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: '61f7c652bdf2' server FQDN: '61f7c652bdf2' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true 
I1109 19:00:52.897703 29637 auxprop.cpp:131] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
I1109 19:00:52.897713 29637 auxprop.cpp:131] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
I1109 19:00:52.897733 29637 authenticator.cpp:319] Authentication success
I1109 19:00:52.897814 29626 authenticatee.cpp:300] Authentication success
I1109 19:00:52.898047 29625 sched.cpp:409] Successfully authenticated with master master@172.17.14.49:60889
I1109 19:00:52.898072 29625 sched.cpp:716] Sending SUBSCRIBE call to master@172.17.14.49:60889
I1109 19:00:52.898152 29625 sched.cpp:749] Will retry registration in 663.938562ms if necessary
I1109 19:00:52.898216 29637 master.cpp:5180] Successfully authenticated principal 'test-principal' at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889
I1109 19:00:52.898265 29625 authenticator.cpp:433] Authentication session cleanup for crammd5_authenticatee(164)@172.17.14.49:60889
I1109 19:00:52.898396 29637 master.cpp:2176] Received SUBSCRIBE call for framework 'default' at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889
I1109 19:00:52.898465 29637 master.cpp:1645] Authorizing framework principal 'test-principal' to receive offers for role '*'
I1109 19:00:52.898475 29625 slave.cpp:4230] Finished recovery
I1109 19:00:52.898919 29637 master.cpp:2247] Subscribing framework default with checkpointing disabled and capabilities [  ]
I1109 19:00:52.899102 29625 slave.cpp:4387] Querying resource estimator for oversubscribable resources
I1109 19:00:52.899441 29625 hierarchical.cpp:185] Added framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:52.899560 29625 hierarchical.cpp:971] No resources available to allocate!
I1109 19:00:52.899654 29632 status_update_manager.cpp:176] Pausing sending status updates
I1109 19:00:52.899659 29637 sched.cpp:643] Framework registered with 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:52.899585 29633 slave.cpp:729] New master detected at master@172.17.14.49:60889
I1109 19:00:52.899716 29637 sched.cpp:657] Scheduler::registered took 22789ns
I1109 19:00:52.899736 29633 slave.cpp:792] Authenticating with master master@172.17.14.49:60889
I1109 19:00:52.899755 29633 slave.cpp:797] Using default CRAM-MD5 authenticatee
I1109 19:00:52.899827 29625 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:00:52.899948 29625 hierarchical.cpp:870] Performed allocation for 0 slaves in 424469ns
I1109 19:00:52.899956 29634 authenticatee.cpp:123] Creating new client SASL connection
I1109 19:00:52.899889 29633 slave.cpp:765] Detecting new master
I1109 19:00:52.900290 29623 master.cpp:5150] Authenticating slave(59)@172.17.14.49:60889
I1109 19:00:52.900306 29633 slave.cpp:4401] Received oversubscribable resources  from the resource estimator
I1109 19:00:52.900372 29634 authenticator.cpp:415] Starting authentication session for crammd5_authenticatee(165)@172.17.14.49:60889
I1109 19:00:52.900554 29622 authenticator.cpp:100] Creating new server SASL connection
I1109 19:00:52.900802 29622 authenticatee.cpp:214] Received SASL authentication mechanisms: CRAM-MD5
I1109 19:00:52.900884 29622 authenticatee.cpp:240] Attempting to authenticate with mechanism 'CRAM-MD5'
I1109 19:00:52.901053 29622 authenticator.cpp:205] Received SASL authentication start
I1109 19:00:52.901101 29622 authenticator.cpp:327] Authentication requires more steps
I1109 19:00:52.901276 29622 authenticatee.cpp:260] Received SASL authentication step
I1109 19:00:52.901412 29622 authenticator.cpp:233] Received SASL authentication step
I1109 19:00:52.901515 29622 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: '61f7c652bdf2' server FQDN: '61f7c652bdf2' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false 
I1109 19:00:52.901583 29622 auxprop.cpp:181] Looking up auxiliary property '*userPassword'
I1109 19:00:52.901626 29622 auxprop.cpp:181] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
I1109 19:00:52.901651 29622 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: '61f7c652bdf2' server FQDN: '61f7c652bdf2' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true 
I1109 19:00:52.901662 29622 auxprop.cpp:131] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
I1109 19:00:52.901670 29622 auxprop.cpp:131] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
I1109 19:00:52.901686 29622 authenticator.cpp:319] Authentication success
I1109 19:00:52.901823 29622 authenticatee.cpp:300] Authentication success
I1109 19:00:52.902007 29622 master.cpp:5180] Successfully authenticated principal 'test-principal' at slave(59)@172.17.14.49:60889
I1109 19:00:52.902092 29622 authenticator.cpp:433] Authentication session cleanup for crammd5_authenticatee(165)@172.17.14.49:60889
I1109 19:00:52.902946 29633 slave.cpp:860] Successfully authenticated with master master@172.17.14.49:60889
I1109 19:00:52.903100 29633 slave.cpp:1254] Will retry registration in 492605ns if necessary
I1109 19:00:52.903314 29627 master.cpp:3859] Registering slave at slave(59)@172.17.14.49:60889 (61f7c652bdf2) with id 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0
I1109 19:00:52.903866 29629 registrar.cpp:441] Applied 1 operations in 68516ns; attempting to update the 'registry'
I1109 19:00:52.904614 29633 slave.cpp:1254] Will retry registration in 839715ns if necessary
I1109 19:00:52.904727 29636 log.cpp:685] Attempting to append 345 bytes to the log
I1109 19:00:52.904736 29623 master.cpp:3847] Ignoring register slave message from slave(59)@172.17.14.49:60889 (61f7c652bdf2) as admission is already in progress
I1109 19:00:52.904885 29634 coordinator.cpp:350] Coordinator attempting to write APPEND action at position 3
I1109 19:00:52.905652 29633 replica.cpp:540] Replica received write request for position 3 from (1882)@172.17.14.49:60889
I1109 19:00:52.906004 29624 slave.cpp:1254] Will retry registration in 50.877167ms if necessary
I1109 19:00:52.906114 29629 master.cpp:3847] Ignoring register slave message from slave(59)@172.17.14.49:60889 (61f7c652bdf2) as admission is already in progress
I1109 19:00:52.957790 29623 slave.cpp:1254] Will retry registration in 148.906602ms if necessary
I1109 19:00:52.958108 29623 master.cpp:3847] Ignoring register slave message from slave(59)@172.17.14.49:60889 (61f7c652bdf2) as admission is already in progress
I1109 19:00:52.963148 29633 leveldb.cpp:343] Persisting action (364 bytes) to leveldb took 57.434275ms
I1109 19:00:52.963251 29633 replica.cpp:715] Persisted action at 3
I1109 19:00:52.964395 29623 replica.cpp:694] Replica received learned notice for position 3 from @0.0.0.0:0
I1109 19:00:53.025077 29623 leveldb.cpp:343] Persisting action (366 bytes) to leveldb took 60.616045ms
I1109 19:00:53.025174 29623 replica.cpp:715] Persisted action at 3
I1109 19:00:53.025214 29623 replica.cpp:700] Replica learned APPEND action at position 3
I1109 19:00:53.027107 29624 registrar.cpp:486] Successfully updated the 'registry' in 123.156224ms
I1109 19:00:53.027403 29636 log.cpp:704] Attempting to truncate the log to 3
I1109 19:00:53.027645 29636 coordinator.cpp:350] Coordinator attempting to write TRUNCATE action at position 4
I1109 19:00:53.028303 29625 slave.cpp:3169] Received ping from slave-observer(56)@172.17.14.49:60889
I1109 19:00:53.028708 29627 replica.cpp:540] Replica received write request for position 4 from (1883)@172.17.14.49:60889
I1109 19:00:53.028769 29631 master.cpp:3927] Registered slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 at slave(59)@172.17.14.49:60889 (61f7c652bdf2) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I1109 19:00:53.028837 29623 slave.cpp:904] Registered with master master@172.17.14.49:60889; given slave ID 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0
I1109 19:00:53.028861 29623 fetcher.cpp:79] Clearing fetcher cache
I1109 19:00:53.028920 29625 hierarchical.cpp:335] Added slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 (61f7c652bdf2) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (allocated: )
I1109 19:00:53.029285 29623 slave.cpp:927] Checkpointing SlaveInfo to '/tmp/HealthCheckTest_HealthStatusChange_xdqiRg/meta/slaves/34506b61-7fc1-4e5e-821c-e5f5650782e0-S0/slave.info'
I1109 19:00:53.029700 29623 slave.cpp:963] Forwarding total oversubscribed resources 
I1109 19:00:53.029793 29623 status_update_manager.cpp:183] Resuming sending status updates
I1109 19:00:53.029832 29625 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:00:53.029875 29625 hierarchical.cpp:886] Performed allocation for slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 in 916734ns
I1109 19:00:53.029930 29623 master.cpp:4269] Received update of slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 at slave(59)@172.17.14.49:60889 (61f7c652bdf2) with total oversubscribed resources 
I1109 19:00:53.030433 29625 hierarchical.cpp:391] Slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 (61f7c652bdf2) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
I1109 19:00:53.030494 29623 master.cpp:4979] Sending 1 offers to framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (default) at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889
I1109 19:00:53.030859 29625 hierarchical.cpp:971] No resources available to allocate!
I1109 19:00:53.030895 29625 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:00:53.030910 29625 hierarchical.cpp:886] Performed allocation for slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 in 427184ns
I1109 19:00:53.031009 29634 sched.cpp:813] Scheduler::resourceOffers took 155158ns
I1109 19:00:53.032750 29623 master.cpp:2915] Processing ACCEPT call for offers: [ 34506b61-7fc1-4e5e-821c-e5f5650782e0-O0 ] on slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 at slave(59)@172.17.14.49:60889 (61f7c652bdf2) for framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (default) at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889
I1109 19:00:53.032804 29623 master.cpp:2711] Authorizing framework principal 'test-principal' to launch task 1 as user 'mesos'
I1109 19:00:53.034595 29635 master.hpp:176] Adding task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 (61f7c652bdf2)
I1109 19:00:53.034788 29635 master.cpp:3245] Launching task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (default) at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 at slave(59)@172.17.14.49:60889 (61f7c652bdf2)
I1109 19:00:53.035286 29622 slave.cpp:1294] Got assigned task 1 for framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:53.036186 29622 slave.cpp:1410] Launching task 1 for framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:53.036998 29622 paths.cpp:417] Trying to chown '/tmp/HealthCheckTest_HealthStatusChange_xdqiRg/slaves/34506b61-7fc1-4e5e-821c-e5f5650782e0-S0/frameworks/34506b61-7fc1-4e5e-821c-e5f5650782e0-0000/executors/1/runs/fa569209-1433-470c-ba09-34756185229a' to user 'mesos'
I1109 19:00:53.040652 29622 slave.cpp:4999] Launching executor 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 with resources cpus(*):0.1; mem(*):32 in work directory '/tmp/HealthCheckTest_HealthStatusChange_xdqiRg/slaves/34506b61-7fc1-4e5e-821c-e5f5650782e0-S0/frameworks/34506b61-7fc1-4e5e-821c-e5f5650782e0-0000/executors/1/runs/fa569209-1433-470c-ba09-34756185229a'
I1109 19:00:53.041373 29628 containerizer.cpp:618] Starting container 'fa569209-1433-470c-ba09-34756185229a' for executor '1' of framework '34506b61-7fc1-4e5e-821c-e5f5650782e0-0000'
I1109 19:00:53.041410 29622 slave.cpp:1628] Queuing task '1' for executor ''1' of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000'
I1109 19:00:53.041533 29622 slave.cpp:682] Successfully attached file '/tmp/HealthCheckTest_HealthStatusChange_xdqiRg/slaves/34506b61-7fc1-4e5e-821c-e5f5650782e0-S0/frameworks/34506b61-7fc1-4e5e-821c-e5f5650782e0-0000/executors/1/runs/fa569209-1433-470c-ba09-34756185229a'
I1109 19:00:53.053426 29630 launcher.cpp:134] Forked child with pid '2245' for container 'fa569209-1433-470c-ba09-34756185229a'
I1109 19:00:53.059900 29627 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 31.125935ms
I1109 19:00:53.059988 29627 replica.cpp:715] Persisted action at 4
I1109 19:00:53.061278 29635 replica.cpp:694] Replica received learned notice for position 4 from @0.0.0.0:0
I1109 19:00:53.110086 29635 leveldb.cpp:343] Persisting action (18 bytes) to leveldb took 48.75579ms
I1109 19:00:53.110260 29635 leveldb.cpp:401] Deleting ~2 keys from leveldb took 89854ns
I1109 19:00:53.110287 29635 replica.cpp:715] Persisted action at 4
I1109 19:00:53.110322 29635 replica.cpp:700] Replica learned TRUNCATE action at position 4
I1109 19:00:53.202918 29631 hierarchical.cpp:971] No resources available to allocate!
I1109 19:00:53.202997 29631 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:00:53.203024 29631 hierarchical.cpp:870] Performed allocation for 1 slaves in 598550ns
I1109 19:00:53.227322 29629 slave.cpp:2405] Got registration for executor '1' of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 from executor(1)@172.17.14.49:60202
I1109 19:00:53.230358 29633 slave.cpp:1793] Sending queued task '1' to executor ''1' of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 at executor(1)@172.17.14.49:60202'
I1109 19:00:53.392653 29636 containerizer.cpp:1257] Executor for container 'fa569209-1433-470c-ba09-34756185229a' has exited
I1109 19:00:53.392715 29636 containerizer.cpp:1074] Destroying container 'fa569209-1433-470c-ba09-34756185229a'
I1109 19:00:53.396560 29635 slave.cpp:3553] Executor '1' of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 exited with status 134
I1109 19:00:53.396731 29635 slave.cpp:2762] Handling status update TASK_FAILED (UUID: ac5509fc-0172-4dca-9d66-1a76810277ae) for task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 from @0.0.0.0:0
I1109 19:00:53.396927 29635 slave.cpp:5298] Terminating task 1
W1109 19:00:53.397447 29628 containerizer.cpp:966] Ignoring update for unknown container: fa569209-1433-470c-ba09-34756185229a
I1109 19:00:53.397917 29627 status_update_manager.cpp:322] Received status update TASK_FAILED (UUID: ac5509fc-0172-4dca-9d66-1a76810277ae) for task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:53.397963 29627 status_update_manager.cpp:499] Creating StatusUpdate stream for task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:53.398464 29627 status_update_manager.cpp:376] Forwarding update TASK_FAILED (UUID: ac5509fc-0172-4dca-9d66-1a76810277ae) for task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 to the slave
I1109 19:00:53.398849 29628 slave.cpp:3087] Forwarding the update TASK_FAILED (UUID: ac5509fc-0172-4dca-9d66-1a76810277ae) for task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 to master@172.17.14.49:60889
I1109 19:00:53.399086 29628 slave.cpp:3005] Status update manager successfully handled status update TASK_FAILED (UUID: ac5509fc-0172-4dca-9d66-1a76810277ae) for task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:53.399317 29623 master.cpp:4414] Status update TASK_FAILED (UUID: ac5509fc-0172-4dca-9d66-1a76810277ae) for task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 from slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 at slave(59)@172.17.14.49:60889 (61f7c652bdf2)
I1109 19:00:53.399370 29623 master.cpp:4462] Forwarding status update TASK_FAILED (UUID: ac5509fc-0172-4dca-9d66-1a76810277ae) for task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:53.399559 29623 master.cpp:6066] Updating the state of task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (latest state: TASK_FAILED, status update state: TASK_FAILED)
I1109 19:00:53.399818 29628 sched.cpp:921] Scheduler::statusUpdate took 144121ns
../../src/tests/health_check_tests.cpp:480: Failure
Value of: statusRunning.get().state()
  Actual: TASK_FAILED
Expected: TASK_RUNNING
I1109 19:00:53.400254 29626 hierarchical.cpp:739] Recovered cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: ) on slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 from framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:53.400329 29623 master.cpp:3571] Processing ACKNOWLEDGE call ac5509fc-0172-4dca-9d66-1a76810277ae for task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (default) at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889 on slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0
I1109 19:00:53.400390 29623 master.cpp:6132] Removing task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 on slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 at slave(59)@172.17.14.49:60889 (61f7c652bdf2)
I1109 19:00:53.400840 29626 status_update_manager.cpp:394] Received status update acknowledgement (UUID: ac5509fc-0172-4dca-9d66-1a76810277ae) for task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:53.401018 29626 status_update_manager.cpp:530] Cleaning up status update stream for task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:53.401381 29633 slave.cpp:2345] Status update manager successfully handled status update acknowledgement (UUID: ac5509fc-0172-4dca-9d66-1a76810277ae) for task 1 of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:53.401428 29633 slave.cpp:5339] Completing task 1
I1109 19:00:53.401460 29633 slave.cpp:3657] Cleaning up executor '1' of framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 at executor(1)@172.17.14.49:60202
I1109 19:00:53.401671 29631 gc.cpp:56] Scheduling '/tmp/HealthCheckTest_HealthStatusChange_xdqiRg/slaves/34506b61-7fc1-4e5e-821c-e5f5650782e0-S0/frameworks/34506b61-7fc1-4e5e-821c-e5f5650782e0-0000/executors/1/runs/fa569209-1433-470c-ba09-34756185229a' for gc 6.99999535184days in the future
I1109 19:00:53.401804 29633 slave.cpp:3745] Cleaning up framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:53.401814 29631 gc.cpp:56] Scheduling '/tmp/HealthCheckTest_HealthStatusChange_xdqiRg/slaves/34506b61-7fc1-4e5e-821c-e5f5650782e0-S0/frameworks/34506b61-7fc1-4e5e-821c-e5f5650782e0-0000/executors/1' for gc 6.99999535011556days in the future
I1109 19:00:53.401914 29627 status_update_manager.cpp:284] Closing status update streams for framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:00:53.402007 29630 gc.cpp:56] Scheduling '/tmp/HealthCheckTest_HealthStatusChange_xdqiRg/slaves/34506b61-7fc1-4e5e-821c-e5f5650782e0-S0/frameworks/34506b61-7fc1-4e5e-821c-e5f5650782e0-0000' for gc 6.99999534828741days in the future
I1109 19:00:54.205024 29629 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:00:54.205111 29629 hierarchical.cpp:870] Performed allocation for 1 slaves in 1.036657ms
I1109 19:00:54.205626 29636 master.cpp:4979] Sending 1 offers to framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (default) at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889
I1109 19:00:54.206218 29628 sched.cpp:813] Scheduler::resourceOffers took 27139ns
I1109 19:00:55.206257 29636 hierarchical.cpp:971] No resources available to allocate!
I1109 19:00:55.206348 29636 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:00:55.206382 29636 hierarchical.cpp:870] Performed allocation for 1 slaves in 709301ns
I1109 19:00:56.207715 29625 hierarchical.cpp:971] No resources available to allocate!
I1109 19:00:56.207803 29625 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:00:56.207834 29625 hierarchical.cpp:870] Performed allocation for 1 slaves in 707048ns
I1109 19:00:57.209532 29626 hierarchical.cpp:971] No resources available to allocate!
I1109 19:00:57.209610 29626 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:00:57.209638 29626 hierarchical.cpp:870] Performed allocation for 1 slaves in 601219ns
I1109 19:00:58.211696 29628 hierarchical.cpp:971] No resources available to allocate!
I1109 19:00:58.211796 29628 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:00:58.211830 29628 hierarchical.cpp:870] Performed allocation for 1 slaves in 784177ns
I1109 19:00:59.212745 29622 hierarchical.cpp:971] No resources available to allocate!
I1109 19:00:59.212826 29622 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:00:59.212854 29622 hierarchical.cpp:870] Performed allocation for 1 slaves in 669442ns
I1109 19:01:00.214867 29637 hierarchical.cpp:971] No resources available to allocate!
I1109 19:01:00.214956 29637 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:01:00.214992 29637 hierarchical.cpp:870] Performed allocation for 1 slaves in 736461ns
I1109 19:01:01.216673 29634 hierarchical.cpp:971] No resources available to allocate!
I1109 19:01:01.216763 29634 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:01:01.216800 29634 hierarchical.cpp:870] Performed allocation for 1 slaves in 794520ns
I1109 19:01:02.218780 29634 hierarchical.cpp:971] No resources available to allocate!
I1109 19:01:02.218878 29634 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:01:02.218919 29634 hierarchical.cpp:870] Performed allocation for 1 slaves in 800091ns
I1109 19:01:03.220408 29630 hierarchical.cpp:971] No resources available to allocate!
I1109 19:01:03.220509 29630 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:01:03.220541 29630 hierarchical.cpp:870] Performed allocation for 1 slaves in 793742ns
I1109 19:01:04.222898 29637 hierarchical.cpp:971] No resources available to allocate!
I1109 19:01:04.223003 29637 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:01:04.223045 29637 hierarchical.cpp:870] Performed allocation for 1 slaves in 885294ns
I1109 19:01:05.224395 29631 hierarchical.cpp:971] No resources available to allocate!
I1109 19:01:05.224472 29631 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:01:05.224503 29631 hierarchical.cpp:870] Performed allocation for 1 slaves in 685482ns
I1109 19:01:06.225836 29626 hierarchical.cpp:971] No resources available to allocate!
I1109 19:01:06.225935 29626 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:01:06.225970 29626 hierarchical.cpp:870] Performed allocation for 1 slaves in 855878ns
I1109 19:01:07.227568 29624 hierarchical.cpp:971] No resources available to allocate!
I1109 19:01:07.227658 29624 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:01:07.227699 29624 hierarchical.cpp:870] Performed allocation for 1 slaves in 667674ns
I1109 19:01:07.901265 29625 slave.cpp:4387] Querying resource estimator for oversubscribable resources
I1109 19:01:07.901639 29635 slave.cpp:4401] Received oversubscribable resources  from the resource estimator
I1109 19:01:08.029749 29637 slave.cpp:3169] Received ping from slave-observer(56)@172.17.14.49:60889
I1109 19:01:08.229215 29624 hierarchical.cpp:971] No resources available to allocate!
I1109 19:01:08.229305 29624 hierarchical.cpp:1064] No inverse offers to send out!
I1109 19:01:08.229336 29624 hierarchical.cpp:870] Performed allocation for 1 slaves in 730966ns
../../src/tests/health_check_tests.cpp:482: Failure
Failed to wait 15secs for statusHealth1
../../src/tests/health_check_tests.cpp:471: Failure
Actual function call count doesn't match EXPECT_CALL(sched, statusUpdate(&driver, _))...
         Expected: to be called 4 times
           Actual: called once - unsatisfied and active
I1109 19:01:08.404537 29636 master.cpp:1122] Framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (default) at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889 disconnected
I1109 19:01:08.405421 29636 master.cpp:2472] Disconnecting framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (default) at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889
I1109 19:01:08.405673 29636 master.cpp:2496] Deactivating framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (default) at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889
I1109 19:01:08.406396 29627 hierarchical.cpp:263] Deactivated framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
W1109 19:01:08.407588 29636 master.hpp:1540] Master attempted to send message to disconnected framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (default) at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889
I1109 19:01:08.407769 29636 master.cpp:1146] Giving framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (default) at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889 0ns to failover
I1109 19:01:08.407088 29627 hierarchical.cpp:739] Recovered cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: ) on slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0 from framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:01:08.410311 29633 master.cpp:4827] Framework failover timeout, removing framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (default) at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889
I1109 19:01:08.410362 29633 master.cpp:5559] Removing framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 (default) at scheduler-3176fdc7-ed93-4501-810e-6a9ac59907b0@172.17.14.49:60889
I1109 19:01:08.410769 29633 slave.cpp:2009] Asked to shut down framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000 by master@172.17.14.49:60889
W1109 19:01:08.410820 29633 slave.cpp:2024] Cannot shut down unknown framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:01:08.411039 29633 hierarchical.cpp:220] Removed framework 34506b61-7fc1-4e5e-821c-e5f5650782e0-0000
I1109 19:01:08.411375 29603 master.cpp:922] Master terminating
I1109 19:01:08.412467 29633 hierarchical.cpp:364] Removed slave 34506b61-7fc1-4e5e-821c-e5f5650782e0-S0
I1109 19:01:08.412521 29633 slave.cpp:3215] master@172.17.14.49:60889 exited
W1109 19:01:08.412542 29633 slave.cpp:3218] Master disconnected! Waiting for a new master to be elected
I1109 19:01:08.430963 29637 slave.cpp:601] Slave terminating
[  FAILED  ] HealthCheckTest.HealthStatusChange (16622 ms)
{code}

Looks like this is still an issue. Just saw this on the ASF CI, Ubuntu 14.04 with gcc:

{code}
[ RUN      ] HealthCheckTest.HealthStatusChange
I0125 15:22:26.282974 31962 leveldb.cpp:174] Opened db in 83.974532ms
I0125 15:22:26.329022 31962 leveldb.cpp:181] Compacted db in 45.96014ms
I0125 15:22:26.329654 31962 leveldb.cpp:196] Created db iterator in 28398ns
I0125 15:22:26.330154 31962 leveldb.cpp:202] Seeked to beginning of db in 4095ns
I0125 15:22:26.330663 31962 leveldb.cpp:271] Iterated through 0 keys in the db in 468ns
I0125 15:22:26.331181 31962 replica.cpp:779] Replica recovered with log positions 0 -> 0 with 1 holes and 0 unlearned
I0125 15:22:26.332582 31988 recover.cpp:447] Starting replica recovery
I0125 15:22:26.333237 31991 recover.cpp:473] Replica is in EMPTY status
I0125 15:22:26.336228 31993 replica.cpp:673] Replica in EMPTY status received a broadcasted recover request from (2239)@172.17.0.2:52355
I0125 15:22:26.336789 31992 recover.cpp:193] Received a recover response from a replica in EMPTY status
I0125 15:22:26.338047 31992 recover.cpp:564] Updating replica status to STARTING
I0125 15:22:26.350210 31982 master.cpp:374] Master 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be (6a3fa6c4588a) started on 172.17.0.2:52355
I0125 15:22:26.350651 31982 master.cpp:376] Flags at startup: --acls="" --allocation_interval="1secs" --allocator="HierarchicalDRF" --authenticate="true" --authenticate_http="true" --authenticate_slaves="true" --authenticators="crammd5" --authorizers="local" --credentials="/tmp/inJ0ZL/credentials" --framework_sorter="drf" --help="false" --hostname_lookup="true" --http_authenticators="basic" --initialize_driver_logging="true" --log_auto_initialize="true" --logbufsecs="0" --logging_level="INFO" --max_completed_frameworks="50" --max_completed_tasks_per_framework="1000" --max_slave_ping_timeouts="5" --quiet="false" --recovery_slave_removal_limit="100%" --registry="replicated_log" --registry_fetch_timeout="1mins" --registry_store_timeout="25secs" --registry_strict="true" --root_submissions="true" --slave_ping_timeout="15secs" --slave_reregister_timeout="10mins" --user_sorter="drf" --version="false" --webui_dir="/mesos/mesos-0.27.0/_inst/share/mesos/webui" --work_dir="/tmp/inJ0ZL/master" --zk_session_timeout="10secs"
I0125 15:22:26.352558 31982 master.cpp:421] Master only allowing authenticated frameworks to register
I0125 15:22:26.352833 31982 master.cpp:426] Master only allowing authenticated slaves to register
I0125 15:22:26.353160 31982 credentials.hpp:35] Loading credentials for authentication from '/tmp/inJ0ZL/credentials'
I0125 15:22:26.356725 31982 master.cpp:466] Using default 'crammd5' authenticator
I0125 15:22:26.357357 31982 master.cpp:535] Using default 'basic' HTTP authenticator
I0125 15:22:26.357851 31982 master.cpp:569] Authorization enabled
I0125 15:22:26.359246 31986 hierarchical.cpp:144] Initialized hierarchical allocator process
I0125 15:22:26.359474 31992 whitelist_watcher.cpp:77] No whitelist given
I0125 15:22:26.364750 31991 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 25.971673ms
I0125 15:22:26.365209 31991 replica.cpp:320] Persisted replica status to STARTING
I0125 15:22:26.365898 31991 recover.cpp:473] Replica is in STARTING status
I0125 15:22:26.369220 31993 replica.cpp:673] Replica in STARTING status received a broadcasted recover request from (2241)@172.17.0.2:52355
I0125 15:22:26.370393 31991 recover.cpp:193] Received a recover response from a replica in STARTING status
I0125 15:22:26.371255 31993 recover.cpp:564] Updating replica status to VOTING
I0125 15:22:26.372786 31982 master.cpp:1710] The newly elected leader is master@172.17.0.2:52355 with id 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be
I0125 15:22:26.373251 31982 master.cpp:1723] Elected as the leading master!
I0125 15:22:26.373553 31982 master.cpp:1468] Recovering from registrar
I0125 15:22:26.374184 31991 registrar.cpp:307] Recovering registrar
I0125 15:22:26.398006 31993 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 26.052513ms
I0125 15:22:26.398576 31993 replica.cpp:320] Persisted replica status to VOTING
I0125 15:22:26.399235 31982 recover.cpp:578] Successfully joined the Paxos group
I0125 15:22:26.399518 31982 recover.cpp:462] Recover process terminated
I0125 15:22:26.400599 31993 log.cpp:659] Attempting to start the writer
I0125 15:22:26.402815 31992 replica.cpp:493] Replica received implicit promise request from (2242)@172.17.0.2:52355 with proposal 1
I0125 15:22:26.423198 31992 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 19.954945ms
I0125 15:22:26.423651 31992 replica.cpp:342] Persisted promised to 1
I0125 15:22:26.425547 31992 coordinator.cpp:238] Coordinator attempting to fill missing positions
I0125 15:22:26.427817 31993 replica.cpp:388] Replica received explicit promise request from (2243)@172.17.0.2:52355 for position 0 with proposal 2
I0125 15:22:26.448343 31993 leveldb.cpp:341] Persisting action (8 bytes) to leveldb took 20.029847ms
I0125 15:22:26.448870 31993 replica.cpp:712] Persisted action at 0
I0125 15:22:26.450934 31995 replica.cpp:537] Replica received write request for position 0 from (2244)@172.17.0.2:52355
I0125 15:22:26.451378 31995 leveldb.cpp:436] Reading position from leveldb took 118656ns
I0125 15:22:26.473486 31995 leveldb.cpp:341] Persisting action (14 bytes) to leveldb took 21.791896ms
I0125 15:22:26.473932 31995 replica.cpp:712] Persisted action at 0
I0125 15:22:26.475330 31995 replica.cpp:691] Replica received learned notice for position 0 from @0.0.0.0:0
I0125 15:22:26.498622 31995 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 22.966725ms
I0125 15:22:26.499091 31995 replica.cpp:712] Persisted action at 0
I0125 15:22:26.499519 31995 replica.cpp:697] Replica learned NOP action at position 0
I0125 15:22:26.501288 31994 log.cpp:675] Writer started with ending position 0
I0125 15:22:26.503401 31994 leveldb.cpp:436] Reading position from leveldb took 64755ns
I0125 15:22:26.505323 31986 registrar.cpp:340] Successfully fetched the registry (0B) in 130.733056ms
I0125 15:22:26.505962 31986 registrar.cpp:439] Applied 1 operations in 57111ns; attempting to update the 'registry'
I0125 15:22:26.507951 31994 log.cpp:683] Attempting to append 170 bytes to the log
I0125 15:22:26.508689 31981 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 1
I0125 15:22:26.510378 31994 replica.cpp:537] Replica received write request for position 1 from (2245)@172.17.0.2:52355
I0125 15:22:26.532110 31994 leveldb.cpp:341] Persisting action (189 bytes) to leveldb took 21.385759ms
I0125 15:22:26.532683 31994 replica.cpp:712] Persisted action at 1
I0125 15:22:26.534441 31987 replica.cpp:691] Replica received learned notice for position 1 from @0.0.0.0:0
I0125 15:22:26.557276 31987 leveldb.cpp:341] Persisting action (191 bytes) to leveldb took 22.49124ms
I0125 15:22:26.557835 31987 replica.cpp:712] Persisted action at 1
I0125 15:22:26.558156 31987 replica.cpp:697] Replica learned APPEND action at position 1
I0125 15:22:26.560673 31987 registrar.cpp:484] Successfully updated the 'registry' in 54.236928ms
I0125 15:22:26.561043 31984 log.cpp:702] Attempting to truncate the log to 1
I0125 15:22:26.561795 31984 coordinator.cpp:348] Coordinator attempting to write TRUNCATE action at position 2
I0125 15:22:26.563083 31984 replica.cpp:537] Replica received write request for position 2 from (2246)@172.17.0.2:52355
I0125 15:22:26.563714 31987 registrar.cpp:370] Successfully recovered registrar
I0125 15:22:26.564749 31987 master.cpp:1520] Recovered 0 slaves from the Registry (131B) ; allowing 10mins for slaves to re-register
I0125 15:22:26.565105 31990 hierarchical.cpp:171] Skipping recovery of hierarchical allocator: nothing to recover
I0125 15:22:26.588583 31984 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 25.162931ms
I0125 15:22:26.589154 31984 replica.cpp:712] Persisted action at 2
I0125 15:22:26.590899 31984 replica.cpp:691] Replica received learned notice for position 2 from @0.0.0.0:0
I0125 15:22:26.615885 31984 leveldb.cpp:341] Persisting action (18 bytes) to leveldb took 24.588268ms
I0125 15:22:26.616564 31984 leveldb.cpp:399] Deleting ~1 keys from leveldb took 197510ns
I0125 15:22:26.616847 31984 replica.cpp:712] Persisted action at 2
I0125 15:22:26.617198 31984 replica.cpp:697] Replica learned TRUNCATE action at position 2
I0125 15:22:26.623775 31962 containerizer.cpp:143] Using isolation: posix/cpu,posix/mem,filesystem/posix
W0125 15:22:26.625557 31962 backend.cpp:48] Failed to create 'bind' backend: BindBackend requires root privileges
I0125 15:22:26.646574 31985 slave.cpp:192] Slave started on 62)@172.17.0.2:52355
I0125 15:22:26.647231 31985 slave.cpp:193] Flags at startup: --appc_store_dir="/tmp/mesos/store/appc" --authenticatee="crammd5" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/tmp/HealthCheckTest_HealthStatusChange_uxXuR2/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_auth_server="https://auth.docker.io" --docker_kill_orphans="true" --docker_puller_timeout="60" --docker_registry="https://registry-1.docker.io" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --docker_store_dir="/tmp/mesos/store/docker" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/tmp/HealthCheckTest_HealthStatusChange_uxXuR2/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="false" --hostname_lookup="true" --image_provisioner_backend="copy" --initialize_driver_logging="true" --isolation="posix/cpu,posix/mem" --launcher_dir="/mesos/mesos-0.27.0/_build/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resources="cpus:2;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --systemd_runtime_directory="/run/systemd/system" --version="false" --work_dir="/tmp/HealthCheckTest_HealthStatusChange_uxXuR2"
I0125 15:22:26.648396 31985 credentials.hpp:83] Loading credential for authentication from '/tmp/HealthCheckTest_HealthStatusChange_uxXuR2/credential'
I0125 15:22:26.649049 31985 slave.cpp:323] Slave using credential for: test-principal
I0125 15:22:26.649721 31985 resources.cpp:564] Parsing resources as JSON failed: cpus:2;mem:1024;disk:1024;ports:[31000-32000]
Trying semicolon-delimited string format instead
I0125 15:22:26.650990 31985 slave.cpp:463] Slave resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0125 15:22:26.651430 31985 slave.cpp:471] Slave attributes: [  ]
I0125 15:22:26.651746 31985 slave.cpp:476] Slave hostname: 6a3fa6c4588a
I0125 15:22:26.654419 31996 state.cpp:58] Recovering state from '/tmp/HealthCheckTest_HealthStatusChange_uxXuR2/meta'
I0125 15:22:26.655592 31996 status_update_manager.cpp:200] Recovering status update manager
I0125 15:22:26.656435 31988 containerizer.cpp:390] Recovering containerizer
I0125 15:22:26.659112 31988 provisioner.cpp:245] Provisioner recovery complete
I0125 15:22:26.660279 31986 slave.cpp:4495] Finished recovery
I0125 15:22:26.661286 31986 slave.cpp:4667] Querying resource estimator for oversubscribable resources
I0125 15:22:26.662472 31986 slave.cpp:795] New master detected at master@172.17.0.2:52355
I0125 15:22:26.662765 31993 status_update_manager.cpp:174] Pausing sending status updates
I0125 15:22:26.663326 31986 slave.cpp:858] Authenticating with master master@172.17.0.2:52355
I0125 15:22:26.663650 31986 slave.cpp:863] Using default CRAM-MD5 authenticatee
I0125 15:22:26.664311 31992 authenticatee.cpp:121] Creating new client SASL connection
I0125 15:22:26.665274 31987 master.cpp:5521] Authenticating slave(62)@172.17.0.2:52355
I0125 15:22:26.665814 31987 authenticator.cpp:413] Starting authentication session for crammd5_authenticatee(171)@172.17.0.2:52355
I0125 15:22:26.666512 31987 authenticator.cpp:98] Creating new server SASL connection
I0125 15:22:26.668195 31986 slave.cpp:831] Detecting new master
I0125 15:22:26.668895 31992 authenticatee.cpp:212] Received SASL authentication mechanisms: CRAM-MD5
I0125 15:22:26.669280 31992 authenticatee.cpp:238] Attempting to authenticate with mechanism 'CRAM-MD5'
I0125 15:22:26.669106 31986 slave.cpp:4681] Received oversubscribable resources  from the resource estimator
I0125 15:22:26.670027 31992 authenticator.cpp:203] Received SASL authentication start
I0125 15:22:26.670344 31992 authenticator.cpp:325] Authentication requires more steps
I0125 15:22:26.670738 31992 authenticatee.cpp:258] Received SASL authentication step
I0125 15:22:26.671170 31992 authenticator.cpp:231] Received SASL authentication step
I0125 15:22:26.671408 31992 auxprop.cpp:107] Request to lookup properties for user: 'test-principal' realm: '6a3fa6c4588a' server FQDN: '6a3fa6c4588a' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false 
I0125 15:22:26.671649 31992 auxprop.cpp:179] Looking up auxiliary property '*userPassword'
I0125 15:22:26.671952 31992 auxprop.cpp:179] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
I0125 15:22:26.672349 31992 auxprop.cpp:107] Request to lookup properties for user: 'test-principal' realm: '6a3fa6c4588a' server FQDN: '6a3fa6c4588a' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true 
I0125 15:22:26.672575 31992 auxprop.cpp:129] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
I0125 15:22:26.672735 31992 auxprop.cpp:129] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
I0125 15:22:26.673010 31992 authenticator.cpp:317] Authentication success
I0125 15:22:26.673619 31992 authenticatee.cpp:298] Authentication success
I0125 15:22:26.673836 31991 master.cpp:5551] Successfully authenticated principal 'test-principal' at slave(62)@172.17.0.2:52355
I0125 15:22:26.673940 31982 authenticator.cpp:431] Authentication session cleanup for crammd5_authenticatee(171)@172.17.0.2:52355
I0125 15:22:26.675019 31992 slave.cpp:926] Successfully authenticated with master master@172.17.0.2:52355
I0125 15:22:26.675532 31992 slave.cpp:1320] Will retry registration in 17.342244ms if necessary
I0125 15:22:26.675969 31984 master.cpp:4235] Registering slave at slave(62)@172.17.0.2:52355 (6a3fa6c4588a) with id 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0
I0125 15:22:26.676969 31984 registrar.cpp:439] Applied 1 operations in 85189ns; attempting to update the 'registry'
I0125 15:22:26.678900 31984 log.cpp:683] Attempting to append 339 bytes to the log
I0125 15:22:26.679414 31990 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 3
I0125 15:22:26.680824 31990 replica.cpp:537] Replica received write request for position 3 from (2260)@172.17.0.2:52355
I0125 15:22:26.685106 31962 sched.cpp:164] Version: 0.27.0
I0125 15:22:26.686100 31982 sched.cpp:268] New master detected at master@172.17.0.2:52355
I0125 15:22:26.686529 31982 sched.cpp:324] Authenticating with master master@172.17.0.2:52355
I0125 15:22:26.686744 31982 sched.cpp:331] Using default CRAM-MD5 authenticatee
I0125 15:22:26.687468 31982 authenticatee.cpp:121] Creating new client SASL connection
I0125 15:22:26.688256 31987 master.cpp:5521] Authenticating scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355
I0125 15:22:26.688662 31984 authenticator.cpp:413] Starting authentication session for crammd5_authenticatee(172)@172.17.0.2:52355
I0125 15:22:26.689288 31988 authenticator.cpp:98] Creating new server SASL connection
I0125 15:22:26.690136 31982 authenticatee.cpp:212] Received SASL authentication mechanisms: CRAM-MD5
I0125 15:22:26.690374 31982 authenticatee.cpp:238] Attempting to authenticate with mechanism 'CRAM-MD5'
I0125 15:22:26.690583 31982 authenticator.cpp:203] Received SASL authentication start
I0125 15:22:26.690655 31982 authenticator.cpp:325] Authentication requires more steps
I0125 15:22:26.690773 31996 authenticatee.cpp:258] Received SASL authentication step
I0125 15:22:26.690978 31982 authenticator.cpp:231] Received SASL authentication step
I0125 15:22:26.691009 31982 auxprop.cpp:107] Request to lookup properties for user: 'test-principal' realm: '6a3fa6c4588a' server FQDN: '6a3fa6c4588a' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false 
I0125 15:22:26.691040 31982 auxprop.cpp:179] Looking up auxiliary property '*userPassword'
I0125 15:22:26.691094 31982 auxprop.cpp:179] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
I0125 15:22:26.691155 31982 auxprop.cpp:107] Request to lookup properties for user: 'test-principal' realm: '6a3fa6c4588a' server FQDN: '6a3fa6c4588a' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true 
I0125 15:22:26.691174 31982 auxprop.cpp:129] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
I0125 15:22:26.691201 31982 auxprop.cpp:129] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
I0125 15:22:26.691220 31982 authenticator.cpp:317] Authentication success
I0125 15:22:26.691395 31991 authenticatee.cpp:298] Authentication success
I0125 15:22:26.691468 31986 master.cpp:5551] Successfully authenticated principal 'test-principal' at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355
I0125 15:22:26.691907 31981 sched.cpp:413] Successfully authenticated with master master@172.17.0.2:52355
I0125 15:22:26.691933 31981 sched.cpp:722] Sending SUBSCRIBE call to master@172.17.0.2:52355
I0125 15:22:26.692033 31981 sched.cpp:755] Will retry registration in 49.26057ms if necessary
I0125 15:22:26.692239 31981 master.cpp:2278] Received SUBSCRIBE call for framework 'default' at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355
I0125 15:22:26.692302 31981 master.cpp:1749] Authorizing framework principal 'test-principal' to receive offers for role '*'
I0125 15:22:26.692577 31981 master.cpp:2349] Subscribing framework default with checkpointing disabled and capabilities [  ]
I0125 15:22:26.693334 31986 sched.cpp:649] Framework registered with 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:26.693387 31986 sched.cpp:663] Scheduler::registered took 26089ns
I0125 15:22:26.693548 31981 hierarchical.cpp:265] Added framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:26.693622 31981 hierarchical.cpp:1355] No resources available to allocate!
I0125 15:22:26.693662 31981 hierarchical.cpp:1450] No inverse offers to send out!
I0125 15:22:26.693691 31981 hierarchical.cpp:1090] Performed allocation for 0 slaves in 123384ns
I0125 15:22:26.693852 31982 authenticator.cpp:431] Authentication session cleanup for crammd5_authenticatee(172)@172.17.0.2:52355
I0125 15:22:26.700639 31989 slave.cpp:1320] Will retry registration in 839715ns if necessary
I0125 15:22:26.701162 31989 master.cpp:4223] Ignoring register slave message from slave(62)@172.17.0.2:52355 (6a3fa6c4588a) as admission is already in progress
I0125 15:22:26.703377 31993 slave.cpp:1320] Will retry registration in 50.877167ms if necessary
I0125 15:22:26.703589 31993 master.cpp:4223] Ignoring register slave message from slave(62)@172.17.0.2:52355 (6a3fa6c4588a) as admission is already in progress
I0125 15:22:26.709228 31990 leveldb.cpp:341] Persisting action (358 bytes) to leveldb took 28.107677ms
I0125 15:22:26.709779 31990 replica.cpp:712] Persisted action at 3
I0125 15:22:26.711303 31994 replica.cpp:691] Replica received learned notice for position 3 from @0.0.0.0:0
I0125 15:22:26.741838 31994 leveldb.cpp:341] Persisting action (360 bytes) to leveldb took 30.474075ms
I0125 15:22:26.742066 31994 replica.cpp:712] Persisted action at 3
I0125 15:22:26.742287 31994 replica.cpp:697] Replica learned APPEND action at position 3
I0125 15:22:26.746264 31983 registrar.cpp:484] Successfully updated the 'registry' in 68.914944ms
I0125 15:22:26.746861 31983 log.cpp:702] Attempting to truncate the log to 3
I0125 15:22:26.748200 31981 coordinator.cpp:348] Coordinator attempting to write TRUNCATE action at position 4
I0125 15:22:26.748806 31986 hierarchical.cpp:471] Added slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 (6a3fa6c4588a) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (allocated: )
I0125 15:22:26.748986 31984 slave.cpp:970] Registered with master master@172.17.0.2:52355; given slave ID 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0
I0125 15:22:26.750226 31984 fetcher.cpp:81] Clearing fetcher cache
I0125 15:22:26.750797 31984 slave.cpp:993] Checkpointing SlaveInfo to '/tmp/HealthCheckTest_HealthStatusChange_uxXuR2/meta/slaves/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0/slave.info'
I0125 15:22:26.750919 31995 status_update_manager.cpp:181] Resuming sending status updates
I0125 15:22:26.751628 31984 slave.cpp:1029] Forwarding total oversubscribed resources 
I0125 15:22:26.751771 31984 slave.cpp:3435] Received ping from slave-observer(59)@172.17.0.2:52355
I0125 15:22:26.753825 31986 hierarchical.cpp:1450] No inverse offers to send out!
I0125 15:22:26.753902 31986 hierarchical.cpp:1110] Performed allocation for slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 in 4.623741ms
I0125 15:22:26.748070 31983 master.cpp:4303] Registered slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 at slave(62)@172.17.0.2:52355 (6a3fa6c4588a) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0125 15:22:26.754299 31984 replica.cpp:537] Replica received write request for position 4 from (2261)@172.17.0.2:52355
I0125 15:22:26.754783 31983 master.cpp:4644] Received update of slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 at slave(62)@172.17.0.2:52355 (6a3fa6c4588a) with total oversubscribed resources 
I0125 15:22:26.755764 31996 hierarchical.cpp:527] Slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 (6a3fa6c4588a) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
I0125 15:22:26.756073 31996 hierarchical.cpp:1355] No resources available to allocate!
I0125 15:22:26.756146 31996 hierarchical.cpp:1450] No inverse offers to send out!
I0125 15:22:26.756183 31996 hierarchical.cpp:1110] Performed allocation for slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 in 353455ns
I0125 15:22:26.756825 31983 master.cpp:5350] Sending 1 offers to framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (default) at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355
I0125 15:22:26.757510 31983 sched.cpp:819] Scheduler::resourceOffers took 172909ns
I0125 15:22:26.760304 31993 master.cpp:3136] Processing ACCEPT call for offers: [ 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-O0 ] on slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 at slave(62)@172.17.0.2:52355 (6a3fa6c4588a) for framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (default) at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355
I0125 15:22:26.760391 31993 master.cpp:2823] Authorizing framework principal 'test-principal' to launch task 1 as user 'mesos'
I0125 15:22:26.763656 31993 master.hpp:176] Adding task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 (6a3fa6c4588a)
I0125 15:22:26.764000 31993 master.cpp:3621] Launching task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (default) at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 at slave(62)@172.17.0.2:52355 (6a3fa6c4588a)
I0125 15:22:26.764678 31993 slave.cpp:1360] Got assigned task 1 for framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:26.765007 31993 resources.cpp:564] Parsing resources as JSON failed: cpus:0.1;mem:32
Trying semicolon-delimited string format instead
I0125 15:22:26.766017 31993 slave.cpp:1479] Launching task 1 for framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:26.766172 31993 resources.cpp:564] Parsing resources as JSON failed: cpus:0.1;mem:32
Trying semicolon-delimited string format instead
I0125 15:22:26.776538 31993 paths.cpp:472] Trying to chown '/tmp/HealthCheckTest_HealthStatusChange_uxXuR2/slaves/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0/frameworks/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000/executors/1/runs/0e4ce8de-c0bb-4498-810e-b154badfc094' to user 'mesos'
I0125 15:22:26.784256 31984 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 29.869861ms
I0125 15:22:26.784363 31984 replica.cpp:712] Persisted action at 4
I0125 15:22:26.786635 31989 replica.cpp:691] Replica received learned notice for position 4 from @0.0.0.0:0
I0125 15:22:26.789561 31993 slave.cpp:5281] Launching executor 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 with resources cpus(*):0.1; mem(*):32 in work directory '/tmp/HealthCheckTest_HealthStatusChange_uxXuR2/slaves/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0/frameworks/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000/executors/1/runs/0e4ce8de-c0bb-4498-810e-b154badfc094'
I0125 15:22:26.790385 31985 containerizer.cpp:649] Starting container '0e4ce8de-c0bb-4498-810e-b154badfc094' for executor '1' of framework '8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000'
I0125 15:22:26.790431 31993 slave.cpp:1697] Queuing task '1' for executor '1' of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:26.791306 31993 slave.cpp:748] Successfully attached file '/tmp/HealthCheckTest_HealthStatusChange_uxXuR2/slaves/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0/frameworks/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000/executors/1/runs/0e4ce8de-c0bb-4498-810e-b154badfc094'
I0125 15:22:26.797827 31985 launcher.cpp:132] Forked child with pid '4766' for container '0e4ce8de-c0bb-4498-810e-b154badfc094'
I0125 15:22:26.818343 31989 leveldb.cpp:341] Persisting action (18 bytes) to leveldb took 31.617937ms
I0125 15:22:26.819110 31989 leveldb.cpp:399] Deleting ~2 keys from leveldb took 169424ns
I0125 15:22:26.819483 31989 replica.cpp:712] Persisted action at 4
I0125 15:22:26.819918 31989 replica.cpp:697] Replica learned TRUNCATE action at position 4
I0125 15:22:27.212316 31988 slave.cpp:2642] Got registration for executor '1' of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from executor(1)@172.17.0.2:56551
I0125 15:22:27.217492 31996 slave.cpp:1862] Sending queued task '1' to executor '1' of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 at executor(1)@172.17.0.2:56551
I0125 15:22:27.254505 31982 slave.cpp:3001] Handling status update TASK_RUNNING (UUID: c14708bc-7cdb-47be-ae75-0d1bd8bd1561) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from executor(1)@172.17.0.2:56551
I0125 15:22:27.255272 31982 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: c14708bc-7cdb-47be-ae75-0d1bd8bd1561) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.255687 31982 status_update_manager.cpp:497] Creating StatusUpdate stream for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.256330 31982 status_update_manager.cpp:374] Forwarding update TASK_RUNNING (UUID: c14708bc-7cdb-47be-ae75-0d1bd8bd1561) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to the slave
I0125 15:22:27.257153 31982 slave.cpp:3353] Forwarding the update TASK_RUNNING (UUID: c14708bc-7cdb-47be-ae75-0d1bd8bd1561) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to master@172.17.0.2:52355
I0125 15:22:27.258007 31994 master.cpp:4789] Status update TASK_RUNNING (UUID: c14708bc-7cdb-47be-ae75-0d1bd8bd1561) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 at slave(62)@172.17.0.2:52355 (6a3fa6c4588a)
I0125 15:22:27.258328 31994 master.cpp:4837] Forwarding status update TASK_RUNNING (UUID: c14708bc-7cdb-47be-ae75-0d1bd8bd1561) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.258908 31990 sched.cpp:927] Scheduler::statusUpdate took 131399ns
I0125 15:22:27.259495 31994 master.cpp:6445] Updating the state of task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
I0125 15:22:27.260234 31994 master.cpp:3947] Processing ACKNOWLEDGE call c14708bc-7cdb-47be-ae75-0d1bd8bd1561 for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (default) at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355 on slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0
I0125 15:22:27.260895 31982 slave.cpp:3247] Status update manager successfully handled status update TASK_RUNNING (UUID: c14708bc-7cdb-47be-ae75-0d1bd8bd1561) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.261179 31982 slave.cpp:3263] Sending acknowledgement for status update TASK_RUNNING (UUID: c14708bc-7cdb-47be-ae75-0d1bd8bd1561) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to executor(1)@172.17.0.2:56551
I0125 15:22:27.261868 31982 status_update_manager.cpp:392] Received status update acknowledgement (UUID: c14708bc-7cdb-47be-ae75-0d1bd8bd1561) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.262595 31982 slave.cpp:2411] Status update manager successfully handled status update acknowledgement (UUID: c14708bc-7cdb-47be-ae75-0d1bd8bd1561) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.361070 31986 hierarchical.cpp:1355] No resources available to allocate!
I0125 15:22:27.361371 31986 hierarchical.cpp:1450] No inverse offers to send out!
I0125 15:22:27.361552 31986 hierarchical.cpp:1090] Performed allocation for 1 slaves in 826625ns
I0125 15:22:27.604053 31986 slave.cpp:3001] Handling status update TASK_RUNNING (UUID: 0d1cba72-f04b-4623-bd93-49fd10d02e18) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from executor(1)@172.17.0.2:56551
I0125 15:22:27.605211 31981 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: 0d1cba72-f04b-4623-bd93-49fd10d02e18) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.605792 31981 status_update_manager.cpp:374] Forwarding update TASK_RUNNING (UUID: 0d1cba72-f04b-4623-bd93-49fd10d02e18) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to the slave
I0125 15:22:27.606716 31981 slave.cpp:3353] Forwarding the update TASK_RUNNING (UUID: 0d1cba72-f04b-4623-bd93-49fd10d02e18) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to master@172.17.0.2:52355
I0125 15:22:27.607311 31981 slave.cpp:3247] Status update manager successfully handled status update TASK_RUNNING (UUID: 0d1cba72-f04b-4623-bd93-49fd10d02e18) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.608062 31981 slave.cpp:3263] Sending acknowledgement for status update TASK_RUNNING (UUID: 0d1cba72-f04b-4623-bd93-49fd10d02e18) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to executor(1)@172.17.0.2:56551
I0125 15:22:27.607839 31983 master.cpp:4789] Status update TASK_RUNNING (UUID: 0d1cba72-f04b-4623-bd93-49fd10d02e18) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 at slave(62)@172.17.0.2:52355 (6a3fa6c4588a)
I0125 15:22:27.608814 31983 master.cpp:4837] Forwarding status update TASK_RUNNING (UUID: 0d1cba72-f04b-4623-bd93-49fd10d02e18) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.609424 31983 master.cpp:6445] Updating the state of task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
I0125 15:22:27.610005 31990 sched.cpp:927] Scheduler::statusUpdate took 136834ns
I0125 15:22:27.611498 31990 master.cpp:3947] Processing ACKNOWLEDGE call 0d1cba72-f04b-4623-bd93-49fd10d02e18 for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (default) at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355 on slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0
I0125 15:22:27.612169 31990 status_update_manager.cpp:392] Received status update acknowledgement (UUID: 0d1cba72-f04b-4623-bd93-49fd10d02e18) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.612839 31990 slave.cpp:2411] Status update manager successfully handled status update acknowledgement (UUID: 0d1cba72-f04b-4623-bd93-49fd10d02e18) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.621296 31987 process.cpp:3141] Handling HTTP event for process 'master' with path: '/master/state'
I0125 15:22:27.622369 31987 http.cpp:503] HTTP GET for /master/state from 172.17.0.2:35405
I0125 15:22:27.635979 31993 process.cpp:3141] Handling HTTP event for process 'slave(62)' with path: '/slave(62)/state'
I0125 15:22:27.636605 31993 http.cpp:190] HTTP GET for /slave(62)/state from 172.17.0.2:35406
I0125 15:22:27.723979 31985 slave.cpp:3001] Handling status update TASK_RUNNING (UUID: 652cd5e4-98fb-4050-8778-b8fb47bee8c1) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from executor(1)@172.17.0.2:56551
I0125 15:22:27.725005 31982 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: 652cd5e4-98fb-4050-8778-b8fb47bee8c1) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.725406 31982 status_update_manager.cpp:374] Forwarding update TASK_RUNNING (UUID: 652cd5e4-98fb-4050-8778-b8fb47bee8c1) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to the slave
I0125 15:22:27.726119 31985 slave.cpp:3353] Forwarding the update TASK_RUNNING (UUID: 652cd5e4-98fb-4050-8778-b8fb47bee8c1) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to master@172.17.0.2:52355
I0125 15:22:27.726804 31991 master.cpp:4789] Status update TASK_RUNNING (UUID: 652cd5e4-98fb-4050-8778-b8fb47bee8c1) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 at slave(62)@172.17.0.2:52355 (6a3fa6c4588a)
I0125 15:22:27.726954 31991 master.cpp:4837] Forwarding status update TASK_RUNNING (UUID: 652cd5e4-98fb-4050-8778-b8fb47bee8c1) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.727339 31991 master.cpp:6445] Updating the state of task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
I0125 15:22:27.727805 31986 sched.cpp:927] Scheduler::statusUpdate took 133105ns
I0125 15:22:27.728729 31991 master.cpp:3947] Processing ACKNOWLEDGE call 652cd5e4-98fb-4050-8778-b8fb47bee8c1 for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (default) at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355 on slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0
I0125 15:22:27.729161 31985 slave.cpp:3247] Status update manager successfully handled status update TASK_RUNNING (UUID: 652cd5e4-98fb-4050-8778-b8fb47bee8c1) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.729310 31985 slave.cpp:3263] Sending acknowledgement for status update TASK_RUNNING (UUID: 652cd5e4-98fb-4050-8778-b8fb47bee8c1) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to executor(1)@172.17.0.2:56551
I0125 15:22:27.730073 31986 status_update_manager.cpp:392] Received status update acknowledgement (UUID: 652cd5e4-98fb-4050-8778-b8fb47bee8c1) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.730661 31985 slave.cpp:2411] Status update manager successfully handled status update acknowledgement (UUID: 652cd5e4-98fb-4050-8778-b8fb47bee8c1) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.736881 31991 process.cpp:3141] Handling HTTP event for process 'master' with path: '/master/state'
I0125 15:22:27.737740 31991 http.cpp:503] HTTP GET for /master/state from 172.17.0.2:35410
I0125 15:22:27.798907 31987 process.cpp:3141] Handling HTTP event for process 'slave(62)' with path: '/slave(62)/state'
I0125 15:22:27.800882 31987 http.cpp:190] HTTP GET for /slave(62)/state from 172.17.0.2:35411
I0125 15:22:27.860637 31995 slave.cpp:3001] Handling status update TASK_RUNNING (UUID: 43e96c29-fc0f-4eb0-9e49-5c8c36c146d4) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from executor(1)@172.17.0.2:56551
I0125 15:22:27.861495 31995 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: 43e96c29-fc0f-4eb0-9e49-5c8c36c146d4) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.861948 31995 status_update_manager.cpp:374] Forwarding update TASK_RUNNING (UUID: 43e96c29-fc0f-4eb0-9e49-5c8c36c146d4) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to the slave
I0125 15:22:27.862629 31995 slave.cpp:3353] Forwarding the update TASK_RUNNING (UUID: 43e96c29-fc0f-4eb0-9e49-5c8c36c146d4) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to master@172.17.0.2:52355
I0125 15:22:27.863328 31995 slave.cpp:3247] Status update manager successfully handled status update TASK_RUNNING (UUID: 43e96c29-fc0f-4eb0-9e49-5c8c36c146d4) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.863790 31989 master.cpp:4789] Status update TASK_RUNNING (UUID: 43e96c29-fc0f-4eb0-9e49-5c8c36c146d4) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 at slave(62)@172.17.0.2:52355 (6a3fa6c4588a)
I0125 15:22:27.864204 31989 master.cpp:4837] Forwarding status update TASK_RUNNING (UUID: 43e96c29-fc0f-4eb0-9e49-5c8c36c146d4) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.864610 31989 master.cpp:6445] Updating the state of task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
I0125 15:22:27.866212 31989 sched.cpp:927] Scheduler::statusUpdate took 1.126092ms
I0125 15:22:27.866664 31989 master.cpp:3947] Processing ACKNOWLEDGE call 43e96c29-fc0f-4eb0-9e49-5c8c36c146d4 for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (default) at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355 on slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0
I0125 15:22:27.864078 31995 slave.cpp:3263] Sending acknowledgement for status update TASK_RUNNING (UUID: 43e96c29-fc0f-4eb0-9e49-5c8c36c146d4) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to executor(1)@172.17.0.2:56551
I0125 15:22:27.867688 31995 status_update_manager.cpp:392] Received status update acknowledgement (UUID: 43e96c29-fc0f-4eb0-9e49-5c8c36c146d4) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.868309 31995 slave.cpp:2411] Status update manager successfully handled status update acknowledgement (UUID: 43e96c29-fc0f-4eb0-9e49-5c8c36c146d4) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.900404 31987 process.cpp:3141] Handling HTTP event for process 'master' with path: '/master/state'
I0125 15:22:27.900969 31987 http.cpp:503] HTTP GET for /master/state from 172.17.0.2:35413
I0125 15:22:27.979339 31989 slave.cpp:3001] Handling status update TASK_RUNNING (UUID: 80d4fae5-4d58-4441-9bab-7fc118d66c6b) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from executor(1)@172.17.0.2:56551
I0125 15:22:27.979832 31989 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: 80d4fae5-4d58-4441-9bab-7fc118d66c6b) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.980032 31989 status_update_manager.cpp:374] Forwarding update TASK_RUNNING (UUID: 80d4fae5-4d58-4441-9bab-7fc118d66c6b) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to the slave
I0125 15:22:27.982230 31996 slave.cpp:3353] Forwarding the update TASK_RUNNING (UUID: 80d4fae5-4d58-4441-9bab-7fc118d66c6b) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to master@172.17.0.2:52355
I0125 15:22:27.982642 31996 slave.cpp:3247] Status update manager successfully handled status update TASK_RUNNING (UUID: 80d4fae5-4d58-4441-9bab-7fc118d66c6b) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.982692 31996 slave.cpp:3263] Sending acknowledgement for status update TASK_RUNNING (UUID: 80d4fae5-4d58-4441-9bab-7fc118d66c6b) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to executor(1)@172.17.0.2:56551
I0125 15:22:27.983098 31996 master.cpp:4789] Status update TASK_RUNNING (UUID: 80d4fae5-4d58-4441-9bab-7fc118d66c6b) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 at slave(62)@172.17.0.2:52355 (6a3fa6c4588a)
I0125 15:22:27.983160 31996 master.cpp:4837] Forwarding status update TASK_RUNNING (UUID: 80d4fae5-4d58-4441-9bab-7fc118d66c6b) for task 1 in health state unhealthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.983333 31996 master.cpp:6445] Updating the state of task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
../../src/tests/health_check_tests.cpp:529: Failure
Mock function called more times than expected - returning directly.
    Function call: statusUpdate(0x7fffa28454b0, @0x2abda2aab650 112-byte object <70-5E E8-97 BD-2A 00-00 00-00 00-00 00-00 00-00 80-A5 00-E4 BD-2A 00-00 70-5E 0D-02 00-00 00-00 01-00 00-00 02-00 00-00 70-5E 0D-02 00-00 00-00 50-A5 00-E4 BD-2A 00-00 00-37 00-E4 BD-2A 00-00 00-00 00-00 00-2A 00-00 C4-0A FA-6C 8F-A9 D5-41 30-37 00-E4 BD-2A 00-00 00-00 00-00 00-00 00-00 C0-3C 00-E4 BD-2A 00-00 00-00 00-00 CB-17 00-00>)
         Expected: to be called 4 times
           Actual: called 5 times - over-saturated and active
I0125 15:22:27.983691 31996 sched.cpp:927] Scheduler::statusUpdate took 187029ns
I0125 15:22:27.983927 31996 master.cpp:3947] Processing ACKNOWLEDGE call 80d4fae5-4d58-4441-9bab-7fc118d66c6b for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (default) at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355 on slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0
I0125 15:22:27.984235 31996 status_update_manager.cpp:392] Received status update acknowledgement (UUID: 80d4fae5-4d58-4441-9bab-7fc118d66c6b) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.984541 31996 slave.cpp:2411] Status update manager successfully handled status update acknowledgement (UUID: 80d4fae5-4d58-4441-9bab-7fc118d66c6b) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:27.985502 31993 process.cpp:3141] Handling HTTP event for process 'slave(62)' with path: '/slave(62)/state'
I0125 15:22:27.986088 31993 http.cpp:190] HTTP GET for /slave(62)/state from 172.17.0.2:35416
I0125 15:22:28.028769 31985 slave.cpp:3001] Handling status update TASK_RUNNING (UUID: dce2e149-f1fd-40db-8def-f9d8627d71ee) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from executor(1)@172.17.0.2:56551
I0125 15:22:28.031385 31985 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: dce2e149-f1fd-40db-8def-f9d8627d71ee) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:28.031640 31985 status_update_manager.cpp:374] Forwarding update TASK_RUNNING (UUID: dce2e149-f1fd-40db-8def-f9d8627d71ee) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to the slave
I0125 15:22:28.033169 31985 slave.cpp:3353] Forwarding the update TASK_RUNNING (UUID: dce2e149-f1fd-40db-8def-f9d8627d71ee) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to master@172.17.0.2:52355
I0125 15:22:28.033386 31985 slave.cpp:3247] Status update manager successfully handled status update TASK_RUNNING (UUID: dce2e149-f1fd-40db-8def-f9d8627d71ee) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:28.033438 31985 slave.cpp:3263] Sending acknowledgement for status update TASK_RUNNING (UUID: dce2e149-f1fd-40db-8def-f9d8627d71ee) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 to executor(1)@172.17.0.2:56551
I0125 15:22:28.033969 31985 master.cpp:4789] Status update TASK_RUNNING (UUID: dce2e149-f1fd-40db-8def-f9d8627d71ee) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 at slave(62)@172.17.0.2:52355 (6a3fa6c4588a)
I0125 15:22:28.034020 31985 master.cpp:4837] Forwarding status update TASK_RUNNING (UUID: dce2e149-f1fd-40db-8def-f9d8627d71ee) for task 1 in health state healthy of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:28.035220 31985 master.cpp:6445] Updating the state of task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
../../src/tests/health_check_tests.cpp:529: Failure
Mock function called more times than expected - returning directly.
    Function call: statusUpdate(0x7fffa28454b0, @0x2abda14a0650 112-byte object <70-5E E8-97 BD-2A 00-00 00-00 00-00 00-00 00-00 C0-30 00-C8 BD-2A 00-00 70-5E 0D-02 00-00 00-00 01-00 00-00 02-00 00-00 70-5E 0D-02 00-00 00-00 B0-36 02-C8 BD-2A 00-00 20-31 00-C8 BD-2A 00-00 00-00 00-00 01-2A 00-00 87-A2 00-6D 8F-A9 D5-41 70-53 00-C8 BD-2A 00-00 00-00 00-00 00-00 00-00 D0-FE 01-C8 BD-2A 00-00 00-00 00-00 CB-17 00-00>)
         Expected: to be called 4 times
           Actual: called 6 times - over-saturated and active
I0125 15:22:28.035569 31985 sched.cpp:927] Scheduler::statusUpdate took 158172ns
I0125 15:22:28.035837 31985 master.cpp:3947] Processing ACKNOWLEDGE call dce2e149-f1fd-40db-8def-f9d8627d71ee for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (default) at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355 on slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0
I0125 15:22:28.037189 31985 status_update_manager.cpp:392] Received status update acknowledgement (UUID: dce2e149-f1fd-40db-8def-f9d8627d71ee) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:28.037554 31985 slave.cpp:2411] Status update manager successfully handled status update acknowledgement (UUID: dce2e149-f1fd-40db-8def-f9d8627d71ee) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
../../src/tests/health_check_tests.cpp:631: Failure
Value of: (find).get()
  Actual: 16-byte object <05-00 00-00 01-7F 00-00 90-05 82-03 00-00 00-00>
Expected: true
Which is: true
I0125 15:22:28.052209 31962 sched.cpp:1851] Asked to stop the driver
I0125 15:22:28.061291 31993 sched.cpp:1089] Stopping framework '8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000'
I0125 15:22:28.061614 31986 master.cpp:5921] Processing TEARDOWN call for framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (default) at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355
I0125 15:22:28.061651 31986 master.cpp:5933] Removing framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (default) at scheduler-10a860ea-cc32-46dd-922b-0f44bf7b1cb1@172.17.0.2:52355
I0125 15:22:28.061858 31986 master.cpp:6445] Updating the state of task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 (latest state: TASK_KILLED, status update state: TASK_KILLED)
I0125 15:22:28.062573 31986 master.cpp:6511] Removing task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 on slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 at slave(62)@172.17.0.2:52355 (6a3fa6c4588a)
I0125 15:22:28.063097 31986 hierarchical.cpp:375] Deactivated framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:28.063694 31986 hierarchical.cpp:886] Recovered cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: ) on slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0 from framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:28.063850 31986 hierarchical.cpp:326] Removed framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:28.063923 31986 slave.cpp:2078] Asked to shut down framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 by master@172.17.0.2:52355
I0125 15:22:28.063966 31986 slave.cpp:2103] Shutting down framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:28.064034 31986 slave.cpp:4128] Shutting down executor '1' of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 at executor(1)@172.17.0.2:56551
I0125 15:22:28.065841 31984 master.cpp:1025] Master terminating
I0125 15:22:28.066727 31985 hierarchical.cpp:502] Removed slave 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0
I0125 15:22:28.074441 31984 slave.cpp:3481] master@172.17.0.2:52355 exited
W0125 15:22:28.074491 31984 slave.cpp:3484] Master disconnected! Waiting for a new master to be elected
I0125 15:22:28.087342 31989 containerizer.cpp:1227] Destroying container '0e4ce8de-c0bb-4498-810e-b154badfc094'
I0125 15:22:28.089411 31987 slave.cpp:3001] Handling status update TASK_KILLED (UUID: 2b7bb0b4-b336-4a4b-8d86-aafb7a564442) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 from executor(1)@172.17.0.2:56551
W0125 15:22:28.089488 31987 slave.cpp:3054] Ignoring status update TASK_KILLED (UUID: 2b7bb0b4-b336-4a4b-8d86-aafb7a564442) for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 for terminating framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:28.120442 31991 slave.cpp:3481] executor(1)@172.17.0.2:56551 exited
I0125 15:22:28.184353 31996 containerizer.cpp:1443] Executor for container '0e4ce8de-c0bb-4498-810e-b154badfc094' has exited
I0125 15:22:28.188390 31996 provisioner.cpp:306] Ignoring destroy request for unknown container 0e4ce8de-c0bb-4498-810e-b154badfc094
I0125 15:22:28.188851 31996 slave.cpp:3816] Executor '1' of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 terminated with signal Killed
I0125 15:22:28.188913 31996 slave.cpp:3920] Cleaning up executor '1' of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000 at executor(1)@172.17.0.2:56551
I0125 15:22:28.189599 31996 slave.cpp:4008] Cleaning up framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:28.189793 31996 gc.cpp:54] Scheduling '/tmp/HealthCheckTest_HealthStatusChange_uxXuR2/slaves/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0/frameworks/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000/executors/1/runs/0e4ce8de-c0bb-4498-810e-b154badfc094' for gc 6.99999781114667days in the future
I0125 15:22:28.189967 31996 gc.cpp:54] Scheduling '/tmp/HealthCheckTest_HealthStatusChange_uxXuR2/slaves/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0/frameworks/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000/executors/1' for gc 6.99999780626074days in the future
I0125 15:22:28.190261 31982 status_update_manager.cpp:282] Closing status update streams for framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:28.190332 31982 status_update_manager.cpp:528] Cleaning up status update stream for task 1 of framework 8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000
I0125 15:22:28.190115 31996 gc.cpp:54] Scheduling '/tmp/HealthCheckTest_HealthStatusChange_uxXuR2/slaves/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-S0/frameworks/8bd61c8a-63c9-4f67-99a4-d6ce2e3f77be-0000' for gc 6.99999780428444days in the future
I0125 15:22:28.191551 31962 slave.cpp:667] Slave terminating
[  FAILED  ] HealthCheckTest.HealthStatusChange (2002 ms)
{code}

Just saw this on an Arch Linux VM (Virtualbox):

{noformat}
[ RUN      ] HealthCheckTest.HealthStatusChange
/mesos-2/src/tests/health_check_tests.cpp:529: Failure
Mock function called more times than expected - returning directly.
    Function call: statusUpdate(0x7ffd37ae9bd0, @0x7f2afcdf20a0 112-byte object <70-9D F0-08 2B-7F 00-00 00-00 00-00 00-00 00-00 A0-6D 01-CC 2A-7F 00-00 20-EC 1E-02 00-00 00-00 01-00 00-00 02-00 00-00 20-EC 1E-02 00-00 00-00 60-C4 01-CC 2A-7F 00-00 C0-C3 01-CC 2A-7F 00-00 00-00 00-00 00-00 00-00 0C-74 DD-41 00-AB D5-41 20-C5 01-CC 2A-7F 00-00 00-00 00-00 00-00 00-00 B0-20 00-CC 2A-7F 00-00 00-00 00-00 CB-17 00-00>)
         Expected: to be called 4 times
           Actual: called 5 times - over-saturated and active
/mesos-2/src/tests/health_check_tests.cpp:529: Failure
Mock function called more times than expected - returning directly.
    Function call: statusUpdate(0x7ffd37ae9bd0, @0x7f2afb5ef0a0 112-byte object <70-9D F0-08 2B-7F 00-00 00-00 00-00 00-00 00-00 C0-6E 02-D4 2A-7F 00-00 20-EC 1E-02 00-00 00-00 01-00 00-00 02-00 00-00 20-EC 1E-02 00-00 00-00 10-08 02-D4 2A-7F 00-00 10-09 02-D4 2A-7F 00-00 00-00 00-00 01-00 00-00 2D-D0 E3-41 00-AB D5-41 10-07 02-D4 2A-7F 00-00 00-00 00-00 00-00 00-00 D0-07 02-D4 2A-7F 00-00 00-00 00-00 CB-17 00-00>)
         Expected: to be called 4 times
           Actual: called 6 times - over-saturated and active
/mesos-2/src/tests/health_check_tests.cpp:529: Failure
Mock function called more times than expected - returning directly.
    Function call: statusUpdate(0x7ffd37ae9bd0, @0x7f2afcdf20a0 112-byte object <70-9D F0-08 2B-7F 00-00 00-00 00-00 00-00 00-00 90-C5 01-CC 2A-7F 00-00 20-EC 1E-02 00-00 00-00 01-00 00-00 02-00 00-00 20-EC 1E-02 00-00 00-00 00-83 02-CC 2A-7F 00-00 A0-6D 01-CC 2A-7F 00-00 00-00 00-00 00-00 00-00 F5-F7 EA-41 00-AB D5-41 20-4D 00-CC 2A-7F 00-00 00-00 00-00 00-00 00-00 F0-C5 01-CC 2A-7F 00-00 00-00 00-00 CB-17 00-00>)
         Expected: to be called 4 times
           Actual: called 7 times - over-saturated and active
/mesos-2/src/tests/health_check_tests.cpp:529: Failure
Mock function called more times than expected - returning directly.
    Function call: statusUpdate(0x7ffd37ae9bd0, @0x7f2afa5ed0a0 112-byte object <70-9D F0-08 2B-7F 00-00 00-00 00-00 00-00 00-00 A0-89 01-E8 2A-7F 00-00 20-EC 1E-02 00-00 00-00 01-00 00-00 02-00 00-00 20-EC 1E-02 00-00 00-00 60-34 00-E8 2A-7F 00-00 B0-98 01-E8 2A-7F 00-00 00-00 00-00 01-00 00-00 02-0E F2-41 00-AB D5-41 90-BF 00-E8 2A-7F 00-00 00-00 00-00 00-00 00-00 80-B1 00-E8 2A-7F 00-00 00-00 00-00 CB-17 00-00>)
         Expected: to be called 4 times
           Actual: called 8 times - over-saturated and active
/mesos-2/src/tests/health_check_tests.cpp:529: Failure
Mock function called more times than expected - returning directly.
    Function call: statusUpdate(0x7ffd37ae9bd0, @0x7f2afc5f10a0 112-byte object <70-9D F0-08 2B-7F 00-00 00-00 00-00 00-00 00-00 50-58 02-DC 2A-7F 00-00 20-EC 1E-02 00-00 00-00 01-00 00-00 02-00 00-00 20-EC 1E-02 00-00 00-00 B0-1E 01-DC 2A-7F 00-00 40-1F 01-DC 2A-7F 00-00 00-00 00-00 00-00 00-00 4B-76 F8-41 00-AB D5-41 A0-95 02-DC 2A-7F 00-00 00-00 00-00 00-00 00-00 30-3F 01-DC 2A-7F 00-00 00-00 00-00 CB-17 00-00>)
         Expected: to be called 4 times
           Actual: called 9 times - over-saturated and active
/mesos-2/src/tests/health_check_tests.cpp:529: Failure
Mock function called more times than expected - returning directly.
    Function call: statusUpdate(0x7ffd37ae9bd0, @0x7f2afb5ef0a0 112-byte object <70-9D F0-08 2B-7F 00-00 00-00 00-00 00-00 00-00 50-65 03-D4 2A-7F 00-00 20-EC 1E-02 00-00 00-00 01-00 00-00 02-00 00-00 20-EC 1E-02 00-00 00-00 80-06 02-D4 2A-7F 00-00 20-06 02-D4 2A-7F 00-00 00-00 00-00 01-00 00-00 FC-17 FF-41 00-AB D5-41 10-09 02-D4 2A-7F 00-00 00-00 00-00 00-00 00-00 E0-63 03-D4 2A-7F 00-00 00-00 00-00 CB-17 00-00>)
         Expected: to be called 4 times
           Actual: called 10 times - over-saturated and active
/mesos-2/src/tests/health_check_tests.cpp:529: Failure
Mock function called more times than expected - returning directly.
    Function call: statusUpdate(0x7ffd37ae9bd0, @0x7f2afadee0a0 112-byte object <70-9D F0-08 2B-7F 00-00 00-00 00-00 00-00 00-00 10-A5 05-D8 2A-7F 00-00 20-EC 1E-02 00-00 00-00 01-00 00-00 02-00 00-00 20-EC 1E-02 00-00 00-00 60-1C 06-D8 2A-7F 00-00 C0-FF 0A-D8 2A-7F 00-00 00-00 00-00 00-00 00-00 C3-82 05-42 00-AB D5-41 F0-EB 06-D8 2A-7F 00-00 00-00 00-00 00-00 00-00 E0-FB 06-D8 2A-7F 00-00 00-00 00-00 CB-17 00-00>)
         Expected: to be called 4 times
           Actual: called 11 times - over-saturated and active
/mesos-2/src/tests/health_check_tests.cpp:529: Failure
Mock function called more times than expected - returning directly.
    Function call: statusUpdate(0x7ffd37ae9bd0, @0x7f2af9dec0a0 112-byte object <70-9D F0-08 2B-7F 00-00 00-00 00-00 00-00 00-00 B0-44 06-EC 2A-7F 00-00 20-EC 1E-02 00-00 00-00 01-00 00-00 02-00 00-00 20-EC 1E-02 00-00 00-00 C0-3A 00-EC 2A-7F 00-00 90-73 05-EC 2A-7F 00-00 00-00 00-00 01-00 00-00 E4-10 0C-42 00-AB D5-41 20-43 06-EC 2A-7F 00-00 00-00 00-00 00-00 00-00 A0-11 01-EC 2A-7F 00-00 00-00 00-00 CB-17 00-00>)
         Expected: to be called 4 times
           Actual: called 12 times - over-saturated and active
/mesos-2/src/tests/health_check_tests.cpp:529: Failure
Mock function called more times than expected - returning directly.
    Function call: statusUpdate(0x7ffd37ae9bd0, @0x7f2afbdf00a0 112-byte object <70-9D F0-08 2B-7F 00-00 00-00 00-00 00-00 00-00 B0-59 06-E0 2A-7F 00-00 20-EC 1E-02 00-00 00-00 01-00 00-00 02-00 00-00 20-EC 1E-02 00-00 00-00 10-5A 06-E0 2A-7F 00-00 40-C8 01-E0 2A-7F 00-00 00-00 00-00 00-00 00-00 E7-6F 12-42 00-AB D5-41 B0-C7 01-E0 2A-7F 00-00 00-00 00-00 00-00 00-00 30-79 01-E0 2A-7F 00-00 00-00 00-00 CB-17 00-00>)
         Expected: to be called 4 times
           Actual: called 13 times - over-saturated and active
/mesos-2/src/tests/health_check_tests.cpp:529: Failure
Mock function called more times than expected - returning directly.
    Function call: statusUpdate(0x7ffd37ae9bd0, @0x7f2afc5f10a0 112-byte object <70-9D F0-08 2B-7F 00-00 00-00 00-00 00-00 00-00 F0-6B 05-DC 2A-7F 00-00 20-EC 1E-02 00-00 00-00 01-00 00-00 02-00 00-00 20-EC 1E-02 00-00 00-00 E0-9A 02-DC 2A-7F 00-00 D0-3E 01-DC 2A-7F 00-00 00-00 00-00 01-00 00-00 42-EC 18-42 00-AB D5-41 10-94 01-DC 2A-7F 00-00 00-00 00-00 00-00 00-00 50-6C 05-DC 2A-7F 00-00 00-00 00-00 CB-17 00-00>)
         Expected: to be called 4 times
           Actual: called 14 times - over-saturated and active
[  FAILED  ] HealthCheckTest.HealthStatusChange (5608 ms)
{noformat}

Could it easy reproduce in your env? For example, after xxx cycles the failure happens for sure. Last time I try run a lot cycles in a CentOS 7(physical machine), but it runs well.

Fails pretty reliably for me: ~3 failures in 35 test runs. If you'd like more information, just let me know.

Yes, [~neilc] do you have the stdout and stderr log?

Hi [~haosdent@gmail.com] -- I attached the output of {{--verbose}} for a failing run as a file associated with this issue.

Thank you very much. Let me try to get more information from you log.

Patch: https://reviews.apache.org/r/46307/

According to another flaky log provided by [~neilc] (Thanks a lot!)
{code}
[ RUN      ] HealthCheckTest.HealthStatusChange
I0420 00:33:12.691145 15381 cluster.cpp:149] Creating default 'local' authorizer
I0420 00:33:12.691897 15381 leveldb.cpp:174] Opened db in 620608ns
I0420 00:33:12.692211 15381 leveldb.cpp:181] Compacted db in 283038ns
I0420 00:33:12.692265 15381 leveldb.cpp:196] Created db iterator in 15184ns
I0420 00:33:12.692273 15381 leveldb.cpp:202] Seeked to beginning of db in 2161ns
I0420 00:33:12.692281 15381 leveldb.cpp:271] Iterated through 0 keys in the db in 1084ns
I0420 00:33:12.692312 15381 replica.cpp:779] Replica recovered with log positions 0 -> 0 with 1 holes and 0 unlearned
I0420 00:33:12.693172 15398 recover.cpp:447] Starting replica recovery
I0420 00:33:12.693435 15400 recover.cpp:473] Replica is in EMPTY status
I0420 00:33:12.695106 15400 replica.cpp:673] Replica in EMPTY status received a broadcasted recover request from (3755)@10.0.2.15:41408
I0420 00:33:12.695829 15400 recover.cpp:193] Received a recover response from a replica in EMPTY status
I0420 00:33:12.696321 15398 recover.cpp:564] Updating replica status to STARTING
I0420 00:33:12.696807 15402 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 101090ns
I0420 00:33:12.696836 15402 replica.cpp:320] Persisted replica status to STARTING
I0420 00:33:12.696964 15402 recover.cpp:473] Replica is in STARTING status
I0420 00:33:12.697968 15400 replica.cpp:673] Replica in STARTING status received a broadcasted recover request from (3756)@10.0.2.15:41408
I0420 00:33:12.698274 15400 recover.cpp:193] Received a recover response from a replica in STARTING status
I0420 00:33:12.698691 15400 recover.cpp:564] Updating replica status to VOTING
I0420 00:33:12.698882 15400 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 62549ns
I0420 00:33:12.698938 15400 replica.cpp:320] Persisted replica status to VOTING
I0420 00:33:12.699002 15400 recover.cpp:578] Successfully joined the Paxos group
I0420 00:33:12.699128 15400 recover.cpp:462] Recover process terminated
I0420 00:33:12.721339 15401 master.cpp:382] Master 7cf5923c-3d03-4ed6-826a-efa97f54e765 (archlinux.vagrant.vm) started on 10.0.2.15:41408
I0420 00:33:12.721387 15401 master.cpp:384] Flags at startup: --acls="" --allocation_interval="1secs" --allocator="HierarchicalDRF" --authenticate="true" --authenticate_http="true" --authenticate_http_frameworks="true" --authenticate_slaves="true" --authenticators="crammd5" --authorizers="local" --credentials="/tmp/9zoT36/credentials" --framework_sorter="drf" --help="false" --hostname_lookup="true" --http_authenticators="basic" --http_framework_authenticators="basic" --initialize_driver_logging="true" --log_auto_initialize="true" --logbufsecs="0" --logging_level="INFO" --max_completed_frameworks="50" --max_completed_tasks_per_framework="1000" --max_slave_ping_timeouts="5" --quiet="false" --recovery_slave_removal_limit="100%" --registry="replicated_log" --registry_fetch_timeout="1mins" --registry_store_timeout="100secs" --registry_strict="true" --root_submissions="true" --slave_ping_timeout="15secs" --slave_reregister_timeout="10mins" --user_sorter="drf" --version="false" --webui_dir="/usr/local/share/mesos/webui" --work_dir="/tmp/9zoT36/master" --zk_session_timeout="10secs"
I0420 00:33:12.721667 15401 master.cpp:433] Master only allowing authenticated frameworks to register
I0420 00:33:12.721736 15401 master.cpp:439] Master only allowing authenticated agents to register
I0420 00:33:12.721745 15401 master.cpp:445] Master only allowing authenticated HTTP frameworks to register
I0420 00:33:12.721750 15401 credentials.hpp:37] Loading credentials for authentication from '/tmp/9zoT36/credentials'
I0420 00:33:12.722005 15401 master.cpp:489] Using default 'crammd5' authenticator
I0420 00:33:12.723206 15401 master.cpp:560] Using default 'basic' HTTP authenticator
I0420 00:33:12.723458 15401 master.cpp:640] Using default 'basic' HTTP framework authenticator
I0420 00:33:12.723574 15401 master.cpp:687] Authorization enabled
I0420 00:33:12.725332 15399 master.cpp:1932] The newly elected leader is master@10.0.2.15:41408 with id 7cf5923c-3d03-4ed6-826a-efa97f54e765
I0420 00:33:12.725376 15399 master.cpp:1945] Elected as the leading master!
I0420 00:33:12.725389 15399 master.cpp:1632] Recovering from registrar
I0420 00:33:12.725544 15399 registrar.cpp:331] Recovering registrar
I0420 00:33:12.726506 15399 log.cpp:524] Attempting to start the writer
I0420 00:33:12.727424 15399 replica.cpp:493] Replica received implicit promise request from (3759)@10.0.2.15:41408 with proposal 1
I0420 00:33:12.727517 15399 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 50404ns
I0420 00:33:12.727541 15399 replica.cpp:342] Persisted promised to 1
I0420 00:33:12.728299 15395 coordinator.cpp:238] Coordinator attempting to fill missing positions
I0420 00:33:12.735360 15402 replica.cpp:388] Replica received explicit promise request from (3760)@10.0.2.15:41408 for position 0 with proposal 2
I0420 00:33:12.735448 15402 leveldb.cpp:341] Persisting action (8 bytes) to leveldb took 51677ns
I0420 00:33:12.735525 15402 replica.cpp:712] Persisted action at 0
I0420 00:33:12.736783 15399 replica.cpp:537] Replica received write request for position 0 from (3761)@10.0.2.15:41408
I0420 00:33:12.736955 15399 leveldb.cpp:436] Reading position from leveldb took 27734ns
I0420 00:33:12.737108 15399 leveldb.cpp:341] Persisting action (14 bytes) to leveldb took 40858ns
I0420 00:33:12.737249 15399 replica.cpp:712] Persisted action at 0
I0420 00:33:12.738021 15398 replica.cpp:691] Replica received learned notice for position 0 from @0.0.0.0:0
I0420 00:33:12.738092 15398 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 35952ns
I0420 00:33:12.738131 15398 replica.cpp:712] Persisted action at 0
I0420 00:33:12.738145 15398 replica.cpp:697] Replica learned NOP action at position 0
I0420 00:33:12.739038 15395 log.cpp:540] Writer started with ending position 0
I0420 00:33:12.740397 15400 leveldb.cpp:436] Reading position from leveldb took 43374ns
I0420 00:33:12.741741 15397 registrar.cpp:364] Successfully fetched the registry (0B) in 16.1408ms
I0420 00:33:12.741844 15397 registrar.cpp:463] Applied 1 operations in 22449ns; attempting to update the 'registry'
I0420 00:33:12.742624 15397 log.cpp:548] Attempting to append 185 bytes to the log
I0420 00:33:12.742825 15399 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 1
I0420 00:33:12.743827 15399 replica.cpp:537] Replica received write request for position 1 from (3762)@10.0.2.15:41408
I0420 00:33:12.744009 15399 leveldb.cpp:341] Persisting action (204 bytes) to leveldb took 59247ns
I0420 00:33:12.744189 15399 replica.cpp:712] Persisted action at 1
I0420 00:33:12.745023 15397 replica.cpp:691] Replica received learned notice for position 1 from @0.0.0.0:0
I0420 00:33:12.745139 15397 leveldb.cpp:341] Persisting action (206 bytes) to leveldb took 65024ns
I0420 00:33:12.745167 15397 replica.cpp:712] Persisted action at 1
I0420 00:33:12.745183 15397 replica.cpp:697] Replica learned APPEND action at position 1
I0420 00:33:12.746696 15395 registrar.cpp:508] Successfully updated the 'registry' in 4.788992ms
I0420 00:33:12.746841 15395 registrar.cpp:394] Successfully recovered registrar
I0420 00:33:12.746913 15401 log.cpp:567] Attempting to truncate the log to 1
I0420 00:33:12.747383 15399 coordinator.cpp:348] Coordinator attempting to write TRUNCATE action at position 2
I0420 00:33:12.747747 15395 master.cpp:1740] Recovered 0 agents from the Registry (146B) ; allowing 10mins for agents to re-register
I0420 00:33:12.749722 15397 replica.cpp:537] Replica received write request for position 2 from (3763)@10.0.2.15:41408
I0420 00:33:12.749837 15397 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 51623ns
I0420 00:33:12.749862 15397 replica.cpp:712] Persisted action at 2
I0420 00:33:12.750529 15400 replica.cpp:691] Replica received learned notice for position 2 from @0.0.0.0:0
I0420 00:33:12.750602 15400 leveldb.cpp:341] Persisting action (18 bytes) to leveldb took 34873ns
I0420 00:33:12.750695 15400 leveldb.cpp:399] Deleting ~1 keys from leveldb took 23637ns
I0420 00:33:12.750730 15400 replica.cpp:712] Persisted action at 2
I0420 00:33:12.750746 15400 replica.cpp:697] Replica learned TRUNCATE action at position 2
I0420 00:33:12.761435 15381 containerizer.cpp:174] Using isolation: posix/cpu,posix/mem,filesystem/posix,network/cni
W0420 00:33:12.762092 15381 backend.cpp:66] Failed to create 'bind' backend: BindBackend requires root privileges
I0420 00:33:12.810016 15400 slave.cpp:201] Agent started on 76)@10.0.2.15:41408
I0420 00:33:12.810070 15400 slave.cpp:202] Flags at startup: --appc_simple_discovery_uri_prefix="http://" --appc_store_dir="/tmp/mesos/store/appc" --authenticate_http="true" --authenticatee="crammd5" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/tmp/HealthCheckTest_HealthStatusChange_T3YdIF/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_kill_orphans="true" --docker_registry="https://registry-1.docker.io" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --docker_store_dir="/tmp/mesos/store/docker" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/tmp/HealthCheckTest_HealthStatusChange_T3YdIF/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="true" --hostname_lookup="true" --http_authenticators="basic" --http_command_executor="false" --http_credentials="/tmp/HealthCheckTest_HealthStatusChange_T3YdIF/http_credentials" --image_provisioner_backend="copy" --initialize_driver_logging="true" --isolation="posix/cpu,posix/mem" --launcher_dir="/home/vagrant/build-mesos-default-opts/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resources="cpus:2;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --systemd_enable_support="true" --systemd_runtime_directory="/run/systemd/system" --version="false" --work_dir="/tmp/HealthCheckTest_HealthStatusChange_T3YdIF"
I0420 00:33:12.810362 15400 credentials.hpp:86] Loading credential for authentication from '/tmp/HealthCheckTest_HealthStatusChange_T3YdIF/credential'
I0420 00:33:12.810511 15400 slave.cpp:339] Agent using credential for: test-principal
I0420 00:33:12.810564 15400 credentials.hpp:37] Loading credentials for authentication from '/tmp/HealthCheckTest_HealthStatusChange_T3YdIF/http_credentials'
I0420 00:33:12.810765 15400 slave.cpp:391] Using default 'basic' HTTP authenticator
I0420 00:33:12.839030 15400 slave.cpp:590] Agent resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0420 00:33:12.839357 15400 slave.cpp:598] Agent attributes: [  ]
I0420 00:33:12.839551 15400 slave.cpp:603] Agent hostname: archlinux.vagrant.vm
I0420 00:33:12.841415 15400 state.cpp:57] Recovering state from '/tmp/HealthCheckTest_HealthStatusChange_T3YdIF/meta'
I0420 00:33:12.841830 15400 status_update_manager.cpp:200] Recovering status update manager
I0420 00:33:12.842087 15397 containerizer.cpp:439] Recovering containerizer
I0420 00:33:12.843364 15395 provisioner.cpp:245] Provisioner recovery complete
I0420 00:33:12.843719 15395 slave.cpp:4800] Finished recovery
I0420 00:33:12.844300 15395 slave.cpp:945] New master detected at master@10.0.2.15:41408
I0420 00:33:12.844360 15401 status_update_manager.cpp:174] Pausing sending status updates
I0420 00:33:12.844458 15395 slave.cpp:1008] Authenticating with master master@10.0.2.15:41408
I0420 00:33:12.844509 15395 slave.cpp:1013] Using default CRAM-MD5 authenticatee
I0420 00:33:12.844620 15395 slave.cpp:981] Detecting new master
I0420 00:33:12.844779 15395 authenticatee.cpp:121] Creating new client SASL connection
I0420 00:33:12.845008 15395 master.cpp:5801] Authenticating slave(76)@10.0.2.15:41408
I0420 00:33:12.845345 15395 authenticator.cpp:98] Creating new server SASL connection
I0420 00:33:12.845471 15395 authenticatee.cpp:212] Received SASL authentication mechanisms: CRAM-MD5
I0420 00:33:12.845504 15395 authenticatee.cpp:238] Attempting to authenticate with mechanism 'CRAM-MD5'
I0420 00:33:12.845552 15395 authenticator.cpp:203] Received SASL authentication start
I0420 00:33:12.845609 15395 authenticator.cpp:325] Authentication requires more steps
I0420 00:33:12.845657 15395 authenticatee.cpp:258] Received SASL authentication step
I0420 00:33:12.845787 15395 authenticator.cpp:231] Received SASL authentication step
I0420 00:33:12.845851 15395 authenticator.cpp:317] Authentication success
I0420 00:33:12.846011 15400 authenticatee.cpp:298] Authentication success
I0420 00:33:12.846009 15396 master.cpp:5831] Successfully authenticated principal 'test-principal' at slave(76)@10.0.2.15:41408
I0420 00:33:12.846340 15400 slave.cpp:1078] Successfully authenticated with master master@10.0.2.15:41408
I0420 00:33:12.846705 15396 master.cpp:4512] Registering agent at slave(76)@10.0.2.15:41408 (archlinux.vagrant.vm) with id 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0
I0420 00:33:12.847108 15396 registrar.cpp:463] Applied 1 operations in 45782ns; attempting to update the 'registry'
I0420 00:33:12.847733 15400 log.cpp:548] Attempting to append 362 bytes to the log
I0420 00:33:12.848198 15401 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 3
I0420 00:33:12.848323 15400 master.cpp:4500] Ignoring register agent message from slave(76)@10.0.2.15:41408 (archlinux.vagrant.vm) as admission is already in progress
I0420 00:33:12.849373 15402 replica.cpp:537] Replica received write request for position 3 from (3779)@10.0.2.15:41408
I0420 00:33:12.849591 15402 leveldb.cpp:341] Persisting action (381 bytes) to leveldb took 56531ns
I0420 00:33:12.849700 15402 replica.cpp:712] Persisted action at 3
I0420 00:33:12.850530 15402 replica.cpp:691] Replica received learned notice for position 3 from @0.0.0.0:0
I0420 00:33:12.850774 15402 leveldb.cpp:341] Persisting action (383 bytes) to leveldb took 37554ns
I0420 00:33:12.850862 15402 replica.cpp:712] Persisted action at 3
I0420 00:33:12.850985 15402 replica.cpp:697] Replica learned APPEND action at position 3
I0420 00:33:12.852195 15402 registrar.cpp:508] Successfully updated the 'registry' in 4.989952ms
I0420 00:33:12.852668 15395 log.cpp:567] Attempting to truncate the log to 3
I0420 00:33:12.852953 15401 coordinator.cpp:348] Coordinator attempting to write TRUNCATE action at position 4
I0420 00:33:12.853283 15397 master.cpp:4580] Registered agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0 at slave(76)@10.0.2.15:41408 (archlinux.vagrant.vm) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0420 00:33:12.853458 15397 hierarchical.cpp:473] Added agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0 (archlinux.vagrant.vm) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (allocated: )
I0420 00:33:12.853458 15396 slave.cpp:1122] Registered with master master@10.0.2.15:41408; given agent ID 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0
I0420 00:33:12.854084 15396 slave.cpp:1182] Forwarding total oversubscribed resources
I0420 00:33:12.854123 15398 status_update_manager.cpp:181] Resuming sending status updates
I0420 00:33:12.854295 15402 master.cpp:4924] Received update of agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0 at slave(76)@10.0.2.15:41408 (archlinux.vagrant.vm) with total oversubscribed resources
I0420 00:33:12.854722 15402 hierarchical.cpp:531] Agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0 (archlinux.vagrant.vm) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: )
I0420 00:33:12.855062 15396 replica.cpp:537] Replica received write request for position 4 from (3780)@10.0.2.15:41408
I0420 00:33:12.855365 15396 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 130625ns
I0420 00:33:12.855507 15396 replica.cpp:712] Persisted action at 4
I0420 00:33:12.856474 15398 replica.cpp:691] Replica received learned notice for position 4 from @0.0.0.0:0
I0420 00:33:12.856557 15398 leveldb.cpp:341] Persisting action (18 bytes) to leveldb took 37939ns
I0420 00:33:12.856595 15398 leveldb.cpp:399] Deleting ~2 keys from leveldb took 15093ns
I0420 00:33:12.856617 15398 replica.cpp:712] Persisted action at 4
I0420 00:33:12.856632 15398 replica.cpp:697] Replica learned TRUNCATE action at position 4
I0420 00:33:12.895501 15381 sched.cpp:224] Version: 0.29.0
I0420 00:33:12.896266 15397 sched.cpp:328] New master detected at master@10.0.2.15:41408
I0420 00:33:12.896371 15397 sched.cpp:384] Authenticating with master master@10.0.2.15:41408
I0420 00:33:12.896396 15397 sched.cpp:391] Using default CRAM-MD5 authenticatee
I0420 00:33:12.896672 15399 authenticatee.cpp:121] Creating new client SASL connection
I0420 00:33:12.896965 15399 master.cpp:5801] Authenticating scheduler-5bd5e446-a017-45d9-8193-be7d23002487@10.0.2.15:41408
I0420 00:33:12.897411 15399 authenticator.cpp:98] Creating new server SASL connection
I0420 00:33:12.897600 15399 authenticatee.cpp:212] Received SASL authentication mechanisms: CRAM-MD5
I0420 00:33:12.897644 15399 authenticatee.cpp:238] Attempting to authenticate with mechanism 'CRAM-MD5'
I0420 00:33:12.897754 15399 authenticator.cpp:203] Received SASL authentication start
I0420 00:33:12.897883 15399 authenticator.cpp:325] Authentication requires more steps
I0420 00:33:12.898066 15399 authenticatee.cpp:258] Received SASL authentication step
I0420 00:33:12.898208 15399 authenticator.cpp:231] Received SASL authentication step
I0420 00:33:12.898401 15399 authenticator.cpp:317] Authentication success
I0420 00:33:12.898542 15399 master.cpp:5831] Successfully authenticated principal 'test-principal' at scheduler-5bd5e446-a017-45d9-8193-be7d23002487@10.0.2.15:41408
I0420 00:33:12.898576 15400 authenticatee.cpp:298] Authentication success
I0420 00:33:12.898938 15400 sched.cpp:474] Successfully authenticated with master master@10.0.2.15:41408
I0420 00:33:12.899281 15400 master.cpp:2463] Received SUBSCRIBE call for framework 'default' at scheduler-5bd5e446-a017-45d9-8193-be7d23002487@10.0.2.15:41408
I0420 00:33:12.899384 15400 master.cpp:1971] Authorizing framework principal 'test-principal' to receive offers for role '*'
I0420 00:33:12.899658 15395 master.cpp:2539] Subscribing framework default with checkpointing disabled and capabilities [  ]
I0420 00:33:12.900406 15395 sched.cpp:706] Framework registered with 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:12.900682 15400 hierarchical.cpp:264] Added framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:12.901666 15399 master.cpp:5630] Sending 1 offers to framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (default) at scheduler-5bd5e446-a017-45d9-8193-be7d23002487@10.0.2.15:41408
I0420 00:33:12.903337 15401 master.cpp:3410] Processing ACCEPT call for offers: [ 7cf5923c-3d03-4ed6-826a-efa97f54e765-O0 ] on agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0 at slave(76)@10.0.2.15:41408 (archlinux.vagrant.vm) for framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (default) at scheduler-5bd5e446-a017-45d9-8193-be7d23002487@10.0.2.15:41408
I0420 00:33:12.903411 15401 master.cpp:3013] Authorizing framework principal 'test-principal' to launch task 1 as user 'vagrant'
I0420 00:33:12.904501 15399 master.hpp:177] Adding task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0 (archlinux.vagrant.vm)
I0420 00:33:12.904616 15399 master.cpp:3895] Launching task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (default) at scheduler-5bd5e446-a017-45d9-8193-be7d23002487@10.0.2.15:41408 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0 at slave(76)@10.0.2.15:41408 (archlinux.vagrant.vm)
I0420 00:33:12.904985 15401 slave.cpp:1514] Got assigned task 1 for framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:12.905398 15401 slave.cpp:1633] Launching task 1 for framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:12.905660 15401 paths.cpp:528] Trying to chown '/tmp/HealthCheckTest_HealthStatusChange_T3YdIF/slaves/7cf5923c-3d03-4ed6-826a-efa97f54e765-S0/frameworks/7cf5923c-3d03-4ed6-826a-efa97f54e765-0000/executors/1/runs/8e9198d4-5a23-40f2-b372-8130ec375783' to user 'vagrant'
I0420 00:33:12.909620 15401 slave.cpp:5620] Launching executor 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 with resources cpus(*):0.1; mem(*):32 in work directory '/tmp/HealthCheckTest_HealthStatusChange_T3YdIF/slaves/7cf5923c-3d03-4ed6-826a-efa97f54e765-S0/frameworks/7cf5923c-3d03-4ed6-826a-efa97f54e765-0000/executors/1/runs/8e9198d4-5a23-40f2-b372-8130ec375783'
I0420 00:33:12.910140 15401 slave.cpp:1851] Queuing task '1' for executor '1' of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:12.910404 15395 containerizer.cpp:698] Starting container '8e9198d4-5a23-40f2-b372-8130ec375783' for executor '1' of framework '7cf5923c-3d03-4ed6-826a-efa97f54e765-0000'
I0420 00:33:12.914448 15395 launcher.cpp:123] Forked child with pid '20895' for container '8e9198d4-5a23-40f2-b372-8130ec375783'
I0420 00:33:13.059639 20895 exec.cpp:150] Version: 0.29.0
I0420 00:33:13.065830 15399 slave.cpp:2842] Got registration for executor '1' of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 from executor(1)@10.0.2.15:37107
I0420 00:33:13.067417 15402 slave.cpp:2016] Sending queued task '1' to executor '1' of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 at executor(1)@10.0.2.15:37107
I0420 00:33:13.068193 20923 exec.cpp:225] Executor registered on agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0
Registered executor on archlinux.vagrant.vm
Starting task 1
sh -c 'sleep 120'
Forked command at 20931
Launching health check process: /home/vagrant/build-mesos-default-opts/src/mesos-health-check --executor=(1)@10.0.2.15:37107 --health_check_json={"command":{"shell":true,"value":"rm \/tmp\/1NKfr1 || (touch \/tmp\/1NKfr1 && exit 1)"},"consecutive_failures":3,"delay_seconds":0.0,"grace_period_seconds":0.0,"interval_seconds":0.0,"timeout_seconds":20.0} --task_id=1
Health check process launched at pid: 20932
I0420 00:33:13.075927 15396 slave.cpp:3201] Handling status update TASK_RUNNING (UUID: 02c2030b-ec12-485c-83e8-5ae201178bea) for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 from executor(1)@10.0.2.15:37107
I0420 00:33:13.077280 15396 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: 02c2030b-ec12-485c-83e8-5ae201178bea) for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:13.077841 15396 slave.cpp:3599] Forwarding the update TASK_RUNNING (UUID: 02c2030b-ec12-485c-83e8-5ae201178bea) for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 to master@10.0.2.15:41408
I0420 00:33:13.077960 15396 slave.cpp:3509] Sending acknowledgement for status update TASK_RUNNING (UUID: 02c2030b-ec12-485c-83e8-5ae201178bea) for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 to executor(1)@10.0.2.15:37107
I0420 00:33:13.078277 15397 master.cpp:5069] Status update TASK_RUNNING (UUID: 02c2030b-ec12-485c-83e8-5ae201178bea) for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 from agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0 at slave(76)@10.0.2.15:41408 (archlinux.vagrant.vm)
I0420 00:33:13.078330 15397 master.cpp:5117] Forwarding status update TASK_RUNNING (UUID: 02c2030b-ec12-485c-83e8-5ae201178bea) for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:13.078431 15397 master.cpp:6725] Updating the state of task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
I0420 00:33:13.079056 15397 master.cpp:4224] Processing ACKNOWLEDGE call 02c2030b-ec12-485c-83e8-5ae201178bea for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (default) at scheduler-5bd5e446-a017-45d9-8193-be7d23002487@10.0.2.15:41408 on agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0
I0420 00:33:13.079445 15396 status_update_manager.cpp:392] Received status update acknowledgement (UUID: 02c2030b-ec12-485c-83e8-5ae201178bea) for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
Received task health update, healthy: true
I0420 00:33:13.302896 15396 slave.cpp:3201] Handling status update TASK_RUNNING (UUID: 8506a0b4-03cd-435c-bdfa-b88fffe1d977) for task 1 in health state healthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 from executor(1)@10.0.2.15:37107
I0420 00:33:13.304239 15396 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: 8506a0b4-03cd-435c-bdfa-b88fffe1d977) for task 1 in health state healthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:13.304553 15396 slave.cpp:3599] Forwarding the update TASK_RUNNING (UUID: 8506a0b4-03cd-435c-bdfa-b88fffe1d977) for task 1 in health state healthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 to master@10.0.2.15:41408
I0420 00:33:13.304700 15396 slave.cpp:3509] Sending acknowledgement for status update TASK_RUNNING (UUID: 8506a0b4-03cd-435c-bdfa-b88fffe1d977) for task 1 in health state healthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 to executor(1)@10.0.2.15:37107
I0420 00:33:13.305068 15396 master.cpp:5069] Status update TASK_RUNNING (UUID: 8506a0b4-03cd-435c-bdfa-b88fffe1d977) for task 1 in health state healthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 from agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0 at slave(76)@10.0.2.15:41408 (archlinux.vagrant.vm)
I0420 00:33:13.305097 15396 master.cpp:5117] Forwarding status update TASK_RUNNING (UUID: 8506a0b4-03cd-435c-bdfa-b88fffe1d977) for task 1 in health state healthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:13.305197 15396 master.cpp:6725] Updating the state of task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
I0420 00:33:13.306653 15396 master.cpp:4224] Processing ACKNOWLEDGE call 8506a0b4-03cd-435c-bdfa-b88fffe1d977 for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (default) at scheduler-5bd5e446-a017-45d9-8193-be7d23002487@10.0.2.15:41408 on agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0
I0420 00:33:13.307194 15395 status_update_manager.cpp:392] Received status update acknowledgement (UUID: 8506a0b4-03cd-435c-bdfa-b88fffe1d977) for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
rm: cannot remove '/tmp/1NKfr1': No such file or directory
I0420 00:33:13.308562 15401 http.cpp:313] HTTP GET for /master/state from 10.0.2.15:44472
I0420 00:33:13.314609 15396 http.cpp:178] HTTP GET for /slave(76)/state from 10.0.2.15:44474
Received task health update, healthy: false
I0420 00:33:13.489945 15396 slave.cpp:3201] Handling status update TASK_RUNNING (UUID: 34c9cab0-3f63-4ee6-b2a0-5db4e406afbd) for task 1 in health state unhealthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 from executor(1)@10.0.2.15:37107
I0420 00:33:13.492075 15399 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: 34c9cab0-3f63-4ee6-b2a0-5db4e406afbd) for task 1 in health state unhealthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:13.492472 15400 slave.cpp:3599] Forwarding the update TASK_RUNNING (UUID: 34c9cab0-3f63-4ee6-b2a0-5db4e406afbd) for task 1 in health state unhealthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 to master@10.0.2.15:41408
I0420 00:33:13.492743 15400 slave.cpp:3509] Sending acknowledgement for status update TASK_RUNNING (UUID: 34c9cab0-3f63-4ee6-b2a0-5db4e406afbd) for task 1 in health state unhealthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 to executor(1)@10.0.2.15:37107
I0420 00:33:13.492822 15397 master.cpp:5069] Status update TASK_RUNNING (UUID: 34c9cab0-3f63-4ee6-b2a0-5db4e406afbd) for task 1 in health state unhealthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 from agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0 at slave(76)@10.0.2.15:41408 (archlinux.vagrant.vm)
I0420 00:33:13.492871 15397 master.cpp:5117] Forwarding status update TASK_RUNNING (UUID: 34c9cab0-3f63-4ee6-b2a0-5db4e406afbd) for task 1 in health state unhealthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:13.493135 15397 master.cpp:6725] Updating the state of task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
I0420 00:33:13.493801 15398 master.cpp:4224] Processing ACKNOWLEDGE call 34c9cab0-3f63-4ee6-b2a0-5db4e406afbd for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (default) at scheduler-5bd5e446-a017-45d9-8193-be7d23002487@10.0.2.15:41408 on agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0
I0420 00:33:13.494067 15399 status_update_manager.cpp:392] Received status update acknowledgement (UUID: 34c9cab0-3f63-4ee6-b2a0-5db4e406afbd) for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:13.497138 15400 http.cpp:313] HTTP GET for /master/state from 10.0.2.15:44478
Received task health update, healthy: true
I0420 00:33:13.502598 15400 slave.cpp:3201] Handling status update TASK_RUNNING (UUID: e19c76cc-096a-4398-b616-afb628b8e5b8) for task 1 in health state healthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 from executor(1)@10.0.2.15:37107
I0420 00:33:13.504456 15400 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: e19c76cc-096a-4398-b616-afb628b8e5b8) for task 1 in health state healthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:13.505009 15400 slave.cpp:3599] Forwarding the update TASK_RUNNING (UUID: e19c76cc-096a-4398-b616-afb628b8e5b8) for task 1 in health state healthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 to master@10.0.2.15:41408
I0420 00:33:13.505167 15400 slave.cpp:3509] Sending acknowledgement for status update TASK_RUNNING (UUID: e19c76cc-096a-4398-b616-afb628b8e5b8) for task 1 in health state healthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 to executor(1)@10.0.2.15:37107
I0420 00:33:13.505524 15400 master.cpp:5069] Status update TASK_RUNNING (UUID: e19c76cc-096a-4398-b616-afb628b8e5b8) for task 1 in health state healthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 from agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0 at slave(76)@10.0.2.15:41408 (archlinux.vagrant.vm)
I0420 00:33:13.505602 15400 master.cpp:5117] Forwarding status update TASK_RUNNING (UUID: e19c76cc-096a-4398-b616-afb628b8e5b8) for task 1 in health state healthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:13.505738 15400 master.cpp:6725] Updating the state of task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
I0420 00:33:13.505985 15400 master.cpp:4224] Processing ACKNOWLEDGE call e19c76cc-096a-4398-b616-afb628b8e5b8 for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (default) at scheduler-5bd5e446-a017-45d9-8193-be7d23002487@10.0.2.15:41408 on agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0
I0420 00:33:13.506142 15400 status_update_manager.cpp:392] Received status update acknowledgement (UUID: e19c76cc-096a-4398-b616-afb628b8e5b8) for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
rm: cannot remove '/tmp/1NKfr1': No such file or directory
I0420 00:33:13.508203 15400 http.cpp:178] HTTP GET for /slave(76)/state from 10.0.2.15:44482
../../mesos/src/tests/health_check_tests.cpp:647: Failure
Value of: (find).get()
  Actual: 16-byte object <05-00 00-00 00-00 00-00 90-C4 2D-03 00-00 00-00>
Expected: false
Which is: false
*** Aborted at 1461076393 (unix time) try "date -d @1461076393" if you are using GNU date ***
PC: @          0x1899ba0 testing::UnitTest::AddTestPartResult()
*** SIGSEGV (@0x0) received by PID 15381 (TID 0x7f0aa958a7c0) from PID 0; stack trace: ***
    @     0x7f0aa3259e80 (unknown)
    @          0x1899ba0 testing::UnitTest::AddTestPartResult()
    @          0x188e319 testing::internal::AssertHelper::operator=()
    @           0xdfa79a mesos::internal::tests::HealthCheckTest_HealthStatusChange_Test::TestBody()
    @          0x18b7e16 testing::internal::HandleSehExceptionsInMethodIfSupported<>()
    @          0x18b2e52 testing::internal::HandleExceptionsInMethodIfSupported<>()
    @          0x189379e testing::Test::Run()
    @          0x1893f56 testing::TestInfo::Run()
    @          0x18945a7 testing::TestCase::Run()
    @          0x189b0e5 testing::internal::UnitTestImpl::RunAllTests()
    @          0x18b8add testing::internal::HandleSehExceptionsInMethodIfSupported<>()
    @          0x18b3992 testing::internal::HandleExceptionsInMethodIfSupported<>()
    @          0x1899dc1 testing::UnitTest::Run()
Received task health update, healthy: false
    @           0xf9375c RUN_ALL_TESTS()
I0420 00:33:13.603853 15399 slave.cpp:3201] Handling status update TASK_RUNNING (UUID: 1b2154a8-6f83-4b4a-a811-1db971288986) for task 1 in health state unhealthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 from executor(1)@10.0.2.15:37107
    @           0xf93378 main
    @     0x7f0aa27b7710 __libc_start_main
I0420 00:33:13.605831 15399 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: 1b2154a8-6f83-4b4a-a811-1db971288986) for task 1 in health state unhealthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:13.606142 15399 slave.cpp:3599] Forwarding the update TASK_RUNNING (UUID: 1b2154a8-6f83-4b4a-a811-1db971288986) for task 1 in health state unhealthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 to master@10.0.2.15:41408
I0420 00:33:13.606263 15399 slave.cpp:3509] Sending acknowledgement for status update TASK_RUNNING (UUID: 1b2154a8-6f83-4b4a-a811-1db971288986) for task 1 in health state unhealthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 to executor(1)@10.0.2.15:37107
I0420 00:33:13.606644 15399 master.cpp:5069] Status update TASK_RUNNING (UUID: 1b2154a8-6f83-4b4a-a811-1db971288986) for task 1 in health state unhealthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 from agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0 at slave(76)@10.0.2.15:41408 (archlinux.vagrant.vm)
I0420 00:33:13.606685 15399 master.cpp:5117] Forwarding status update TASK_RUNNING (UUID: 1b2154a8-6f83-4b4a-a811-1db971288986) for task 1 in health state unhealthy of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
I0420 00:33:13.606780 15399 master.cpp:6725] Updating the state of task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
I0420 00:33:13.607326 15399 master.cpp:4224] Processing ACKNOWLEDGE call 1b2154a8-6f83-4b4a-a811-1db971288986 for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000 (default) at scheduler-5bd5e446-a017-45d9-8193-be7d23002487@10.0.2.15:41408 on agent 7cf5923c-3d03-4ed6-826a-efa97f54e765-S0
I0420 00:33:13.607579 15399 status_update_manager.cpp:392] Received status update acknowledgement (UUID: 1b2154a8-6f83-4b4a-a811-1db971288986) for task 1 of framework 7cf5923c-3d03-4ed6-826a-efa97f54e765-0000
    @           0xa644d9 _start
    @                0x0 (unknown)
I0420 00:33:13.701517 20926 exec.cpp:481] Agent exited ... shutting down
Segmentation fault (core dumped)
vagrant@archlinux:~/build-mesos-default-opts$ Received task health update, healthy: true
Shutting down
Sending SIGTERM to process tree at pid 20931
E0420 00:33:13.705188 20930 process.cpp:1963] Failed to shutdown socket with fd 11: Transport endpoint is not connected
rm: cannot remove '/tmp/1NKfr1': No such file or directory
Sent SIGTERM to the following process trees:
[
--- 20931 sleep 120
]
Command terminated with signal Terminated (pid: 20931)
E0420 00:33:13.786746 20930 process.cpp:1963] Failed to shutdown socket with fd 8: Transport endpoint is not connected
{code}

This test case have another tricky part. We could not guarantee the http queries order match the statusUpdate order. When we send http queries, master have already received the statusUpdate multiple times.

And because {{mesos-health-check}} is launched by {{subprocess}}, could not controlled by {{Clock::pause()}}. Seems not way to ensure http queries are match expected behaviour in this test case. 

I prefer to drop the http status check in the test cases, because I still don't have any clues to guarantee the http queries order match the statusUpdate order. [~neilc] [~bmahler] [~tnachen] Do you think this proposal is doable?

Patch:

| Ignored subsequent status update in HealthStatusChange tests. | https://reviews.apache.org/r/46307/ |
| Dropped http status check in HealthCheckTest.HealthStatusChange. | https://reviews.apache.org/r/47088/ |

I can reproduce it relatively easy by running _parallel_ {{make check}}. Here is a fresh log:
{noformat}
[ RUN      ] HealthCheckTest.HealthStatusChange
I1124 23:20:48.351884 4284416 exec.cpp:162] Version: 1.2.0
I1124 23:20:48.375592 3747840 exec.cpp:237] Executor registered on agent 6db7ef4d-7211-47be-98ba-ad590b528c69-S0
Received SUBSCRIBED event
Subscribed executor on alexr.speedportneo09012801000249
Received LAUNCH event
Starting task 1
/Users/alex/Projects/mesos/build/parallel/src/mesos-containerizer launch --command="{"shell":true,"value":"sleep 120"}" --help="false"
Forked command at 73286
Received task health update, healthy: true
rm: /private/tmp/z1PbfH/rG7Gha: No such file or directory
W1124 23:20:48.544631 3211264 health_checker.cpp:245] Health check failed 1 times consecutively: COMMAND health check failed: Command returned exited with status 1
Received task health update, healthy: false
Received task health update, healthy: true
rm: /private/tmp/z1PbfH/rG7Gha: No such file or directory
../../../src/tests/health_check_tests.cpp:790: Failure
Value of: (find).get()
  Actual: 16-byte object <05-00 00-00 00-00 00-00 60-A9 62-1B B2-7F 00-00>
Expected: false
Which is: false
I1124 23:20:48.732457 4284416 exec.cpp:414] Executor asked to shutdown
Received SHUTDOWN event
Shutting down
Sending SIGTERM to process tree at pid 73286
W1124 23:20:48.747885 1064960 health_checker.cpp:245] Health check failed 1 times consecutively: COMMAND health check failed: Command returned exited with status 1
rm: /private/tmp/z1PbfH/rG7Gha: No such file or directory
W1124 23:20:48.948562 3747840 health_checker.cpp:245] Health check failed 1 times consecutively: COMMAND health check failed: Command returned exited with status 1
Sent SIGTERM to the following process trees:
[ 
--- 73286 sleep 120
]
Scheduling escalation to SIGKILL in 3secs from now
[  FAILED  ] HealthCheckTest.HealthStatusChange (1639 ms)
{noformat}

These lines
{noformat}
Received task health update, healthy: true
rm: /private/tmp/z1PbfH/rG7Gha: No such file or directory
../../../src/tests/health_check_tests.cpp:790: Failure
{noformat}
obviously hint that we've queried the HTTP endpoint _after_ the next health status change.

{noformat}
Commit: a7a1ced113ee6a6633bbb0d78f401d0c01e5205b [a7a1ced]
Author: haosdent huang <haosdent@gmail.com>
Date: 25 November 2016 at 16:32:48 GMT+1
Committer: Alexander Rukletsov <alexr@apache.org>

Ignored subsequent status update in HealthStatusChange tests.

In HealthStatusChange test cases, we launch a task that toggles between
healthy and unhealthy, and will never be killed because no consecutive
health failures occur. We need to ignore subsequent status updates: it
is possible to continue to receive status updates before we stop the
driver.

Review: https://reviews.apache.org/r/46307/
{noformat}
{noformat}
Commit: 83863c7d56ca91f5aa3f5df2dd4887d589462eaf [83863c7]
Author: haosdent huang <haosdent@gmail.com>
Date: 25 November 2016 at 16:33:07 GMT+1
Committer: Alexander Rukletsov <alexr@apache.org>
Commit Date: 25 November 2016 at 16:38:49 GMT+1

Dropped http status check in HealthCheckTest.HealthStatusChange.

Drop http status check because so far we could not guarantee the
http queries order match the `statusUpdate` order or arrive in
sync, i.e., before the next status update has been processed.

Review: https://reviews.apache.org/r/47088/
{noformat}

