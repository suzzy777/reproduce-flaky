The {{SafeMode}} needs to track whether there are enough blocks so that the NN can get out of the safemode. These fields can moved to the {{BlockManager}} class.