Assert before waitProcedure() assumes that procedure executer is still running but this assumption is incorrect.