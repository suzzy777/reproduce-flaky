There're multiple places in C++ tests where zookeeper client handle (zkhandle_t) doesn't get closed correctly causing intermittent segmentations faults.
e.g. In multi threaded tests IO thread remains open in these client which could when trying to log something in a log file which is already closed by the test.
Another catch is when the test is trying to validate an already closed client: the client struct cannot be accessed after the memory has been freed.