I think it's not yet supported/recommended to run hive with java >=9 
IIRC it have stopped somewhere around that we need tez to be able to run with jdk9 first
HIVE-17632 => HIVE-17909 => TEZ-3860

It looks like the issue is with how the casting works in Java 9+, so changing 
{{metastoreUris = (URI[]) uriList.toArray()}}
to
{{metastoreUris = uriList.toArray(new URI[uriList.size()])}}
and changing {{List uriList}} to {{List<URI> uriList}} 
should make the {{ClassCastException}} stop happening.

I've tried to attach the patches, but nothing is happening.

try assigning the issue to yourself

That worked, thanks. Also, HiveMetaStoreClient was moved somewhere else in Hive 3. Any chance you know where?

it should be around {{standalone-metastore/...}}
I think it would be better to submit the patch for the master branch; and after that start backporting to the other branches

Ok, I just added the patch for master. I'll add the ones for {{branch-3}} and {{branch-3.1}} soon.

The only way I could test this change was by adding the same test for different JDK versioned projects:
{code:java}
@Test
public void test() throws URISyntaxException {
  URI[] metastoreUris = { new URI("thrift://localhost0:9083"),
                          new URI("thrift://localhost1:9083"),
                          new URI("thrift://localhost2:9083") };
  List<URI> uriList = Arrays.asList(metastoreUris);
  Collections.shuffle(uriList);
  metastoreUris = uriList.toArray(new URI[uriList.size()]);
  System.out.println(metastoreUris[0]);
}
{code}
I tested it with Java 7, 8 and 11 and they all passed.


Are any tests supposed to run on these patches?

| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | {color:red} patch {color} | {color:red}  0m 11s{color} | {color:red} /data/hiveptest/logs/PreCommit-HIVE-Build-18451/patches/PreCommit-HIVE-Build-18451.patch does not apply to master. Rebase required? Wrong Branch? See http://cwiki.apache.org/confluence/display/Hive/HowToContribute for help. {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-18451/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.



The test used the patch for branch-3 on master (according to http://104.198.109.242/logs/PreCommit-HIVE-Build-18451/patches/PreCommit-HIVE-Build-18451.patch) so I deleted the previous patches and then submitted only the master. After the tests run, I'll add the other patches.



Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12979417/HIVE-21508.branch-3.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 142 failed/errored test(s), 14408 tests executed
*Failed tests:*
{noformat}
TestAddPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestAddPartitionsFromPartSpec - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestAdminUser - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestAggregateStatsCache - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestAlterPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestAlterTableMetadata - did not produce a TEST-*.xml file (likely timed out) (batchId=253)
TestAppendPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestAutoPurgeTables - did not produce a TEST-*.xml file (likely timed out) (batchId=253)
TestBeeLineDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestCachedStore - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestCatalogCaching - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestCatalogNonDefaultClient - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestCatalogNonDefaultSvr - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestCatalogOldClient - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestCatalogs - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestCheckConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestCloseableThreadLocal - did not produce a TEST-*.xml file (likely timed out) (batchId=334)
TestDataSourceProviderFactory - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestDatabases - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDeadline - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestDefaultConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDropPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestEmbeddedHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=231)
TestExchangePartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestFMSketchSerialization - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestFilterHooks - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestForeignKey - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestFunctions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestGetPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestGetPartitionsUsingProjectionAndFilterSpecs - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestGetTableMeta - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestHLLNoBias - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHLLSerialization - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHdfsUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestHiveAlterHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestHiveMetaStoreGetMetaConf - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestHiveMetaStorePartitionSpecs - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestHiveMetaStoreSchemaMethods - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestHiveMetaStoreTimeout - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestHiveMetaStoreTxns - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestHiveMetaStoreWithEnvironmentContext - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestHiveMetaToolCommandLine - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestHiveMetastoreCli - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestHmsServerAuthorization - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestHyperLogLog - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHyperLogLogDense - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHyperLogLogMerge - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHyperLogLogSparse - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestJSONMessageDeserializer - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestKuduCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=266)
TestKuduInputFormat - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestKuduNegativeCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=266)
TestKuduOutputFormat - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestKuduPredicateHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestKuduSerDe - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestListPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestLocationQueries - did not produce a TEST-*.xml file (likely timed out) (batchId=253)
TestLockRequestBuilder - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestMarkPartition - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMarkPartitionRemote - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreConnectionUrlHook - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaStoreEndFunctionListener - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestMetaStoreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestMetaStoreEventListenerOnlyOnCommit - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreEventListenerWithOldConf - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreInitListener - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreListenersError - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreSchemaFactory - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaStoreSchemaInfo - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreServerUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaToolTaskExecuteJDOQLQuery - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaToolTaskListFSRoot - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaToolTaskUpdateLocation - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetastoreConf - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestMetastoreSchemaTool - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetrics - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestMiniDruidCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestMiniDruidKafkaCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestMinimrCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=96)
	[infer_bucket_sort_num_buckets.q,infer_bucket_sort_reducers_power_two.q,parallel_orderby.q,bucket_num_reducers_acid.q,scriptfile1.q,infer_bucket_sort_map_operators.q,infer_bucket_sort_merge.q,root_dir_external_table.q,infer_bucket_sort_dyn_part.q,udf_using.q]
TestMsckCheckPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestNotNullConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestObjectStore - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestObjectStoreInitRetry - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestObjectStoreSchemaMethods - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestObjectStoreStatementVerify - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestOldSchema - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestPartitionManagement - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestPartitionNameWhitelistValidation - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestPartitionProjectionEvaluator - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestPreUpgradeTool - did not produce a TEST-*.xml file (likely timed out) (batchId=334)
TestPrimaryKey - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestRawStoreProxy - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestRemoteHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestRemoteHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestRemoteHiveMetaStoreZK - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestRemoteHiveMetaStoreZKBindHost - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRemoteUGIHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestReplicationScenariosAcidTables - did not produce a TEST-*.xml file (likely timed out) (batchId=253)
TestRetriesInRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestRunOptions - did not produce a TEST-*.xml file (likely timed out) (batchId=334)
TestRuntimeStats - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestSchemaToolForMetastore - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestSchemaToolTaskDrop - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestSemanticAnalyzerHookLoading - did not produce a TEST-*.xml file (likely timed out) (batchId=253)
TestSetUGIOnBothClientServer - did not produce a TEST-*.xml file (likely timed out) (batchId=229)
TestSetUGIOnOnlyClient - did not produce a TEST-*.xml file (likely timed out) (batchId=227)
TestSetUGIOnOnlyServer - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestSparkStatistics - did not produce a TEST-*.xml file (likely timed out) (batchId=253)
TestSparseEncodeHash - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestStats - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestStatsSetupConst - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestTableIterable - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestTablesCreateDropAlterTruncate - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestTablesGetExists - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestTablesList - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestTezPerfCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestTxnHandlerNegative - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestTxnUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestUniqueConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[load_static_ptn_into_bucketed_table] (batchId=21)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[mm_all] (batchId=71)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[mm_all] (batchId=154)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[current_date_timestamp] (batchId=169)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[external_jdbc_auth] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[load_data_using_job] (batchId=160)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multi_in_clause] (batchId=176)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[results_cache_2] (batchId=179)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sharedwork] (batchId=176)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[subquery_views] (batchId=160)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sysdb] (batchId=167)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=187)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=188)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=189)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=190)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[subquery_subquery_chain] (batchId=97)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_12] (batchId=124)
org.apache.hadoop.hive.ql.TestWarehouseExternalDir.testManagedPaths (batchId=251)
org.apache.hadoop.hive.ql.parse.TestSQL11ReservedKeyWordsNegative$TestSQL11ReservedKeyWordsNegativeParametrized.testNegative[REAL] (batchId=303)
org.apache.hive.service.TestHS2ImpersonationWithRemoteMS.testImpersonation (batchId=259)
org.apache.hive.spark.client.rpc.TestRpc.testServerPort (batchId=327)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/18451/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/18451/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-18451/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 142 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12979417 - PreCommit-HIVE-Build

[~kgyrtkirk] Please can you confirm if those are normal test results?
I also didn't add any test for this change because this is mostly a syntax change.

| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | {color:red} patch {color} | {color:red}  0m 13s{color} | {color:red} /data/hiveptest/logs/PreCommit-HIVE-Build-18463/patches/PreCommit-HIVE-Build-18463.patch does not apply to master. Rebase required? Wrong Branch? See http://cwiki.apache.org/confluence/display/Hive/HowToContribute for help. {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-18463/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.





Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12979556/HIVE-21508.branch-3.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 135 failed/errored test(s), 14435 tests executed
*Failed tests:*
{noformat}
TestAddPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestAddPartitionsFromPartSpec - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestAdminUser - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestAggregateStatsCache - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestAlterPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestAppendPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestBeeLineDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestCachedStore - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestCatalogCaching - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestCatalogNonDefaultClient - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestCatalogNonDefaultSvr - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestCatalogOldClient - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestCatalogs - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestCheckConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestCloseableThreadLocal - did not produce a TEST-*.xml file (likely timed out) (batchId=334)
TestDataSourceProviderFactory - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestDatabases - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDeadline - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestDefaultConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDropPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestEmbeddedHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=231)
TestExchangePartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestFMSketchSerialization - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestFilterHooks - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestForeignKey - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestFunctions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestGetPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestGetPartitionsUsingProjectionAndFilterSpecs - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestGetTableMeta - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestHLLNoBias - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHLLSerialization - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHdfsUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestHiveAlterHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestHiveMetaStoreGetMetaConf - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestHiveMetaStorePartitionSpecs - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestHiveMetaStoreSchemaMethods - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestHiveMetaStoreTimeout - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestHiveMetaStoreTxns - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestHiveMetaStoreWithEnvironmentContext - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestHiveMetaToolCommandLine - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestHiveMetastoreCli - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestHmsServerAuthorization - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestHyperLogLog - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHyperLogLogDense - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHyperLogLogMerge - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHyperLogLogSparse - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestJSONMessageDeserializer - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestKuduCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=266)
TestKuduInputFormat - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestKuduNegativeCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=266)
TestKuduOutputFormat - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestKuduPredicateHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestKuduSerDe - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestListPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestLockRequestBuilder - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestMarkPartition - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMarkPartitionRemote - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreConnectionUrlHook - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaStoreEndFunctionListener - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestMetaStoreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestMetaStoreEventListenerOnlyOnCommit - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreEventListenerWithOldConf - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreInitListener - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreListenersError - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreSchemaFactory - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaStoreSchemaInfo - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreServerUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaToolTaskExecuteJDOQLQuery - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaToolTaskListFSRoot - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaToolTaskUpdateLocation - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetastoreConf - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestMetastoreSchemaTool - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetrics - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestMiniDruidCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestMiniDruidKafkaCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestMsckCheckPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestNotNullConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestObjectStore - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestObjectStoreInitRetry - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestObjectStoreSchemaMethods - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestObjectStoreStatementVerify - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestOldSchema - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestPartitionManagement - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestPartitionNameWhitelistValidation - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestPartitionProjectionEvaluator - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestPreUpgradeTool - did not produce a TEST-*.xml file (likely timed out) (batchId=334)
TestPrimaryKey - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestRawStoreProxy - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestRemoteHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestRemoteHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestRemoteHiveMetaStoreZK - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestRemoteHiveMetaStoreZKBindHost - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRemoteUGIHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestRetriesInRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestRunOptions - did not produce a TEST-*.xml file (likely timed out) (batchId=334)
TestRuntimeStats - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestSchemaToolForMetastore - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestSchemaToolTaskDrop - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestSetUGIOnBothClientServer - did not produce a TEST-*.xml file (likely timed out) (batchId=229)
TestSetUGIOnOnlyClient - did not produce a TEST-*.xml file (likely timed out) (batchId=227)
TestSetUGIOnOnlyServer - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestSparseEncodeHash - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestStats - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestStatsSetupConst - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestTableIterable - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestTablesCreateDropAlterTruncate - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestTablesGetExists - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestTablesList - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestTezPerfCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestTxnHandlerNegative - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestTxnUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestUniqueConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[load_static_ptn_into_bucketed_table] (batchId=21)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[mm_all] (batchId=71)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[mm_all] (batchId=154)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[current_date_timestamp] (batchId=169)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[external_jdbc_auth] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[load_data_using_job] (batchId=160)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multi_in_clause] (batchId=176)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[results_cache_2] (batchId=179)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sharedwork] (batchId=176)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[subquery_views] (batchId=160)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sysdb] (batchId=167)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=187)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=188)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=189)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=190)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[subquery_subquery_chain] (batchId=97)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_12] (batchId=124)
org.apache.hadoop.hive.ql.TestWarehouseExternalDir.testManagedPaths (batchId=251)
org.apache.hadoop.hive.ql.parse.TestSQL11ReservedKeyWordsNegative$TestSQL11ReservedKeyWordsNegativeParametrized.testNegative[REAL] (batchId=303)
org.apache.hive.service.TestHS2ImpersonationWithRemoteMS.testImpersonation (batchId=259)
org.apache.hive.spark.client.rpc.TestRpc.testServerPort (batchId=327)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/18463/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/18463/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-18463/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 135 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12979556 - PreCommit-HIVE-Build



Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12979556/HIVE-21508.branch-3.patch

{color:red}ERROR:{color} -1 due to build exiting with an error

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/18464/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/18464/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-18464/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Tests exited with: Exception: Patch URL https://issues.apache.org/jira/secure/attachment/12979556/HIVE-21508.branch-3.patch was found in seen patch url's cache and a test was probably run already on it. Aborting...
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12979556 - PreCommit-HIVE-Build

Is there anything I should do about the builds? I don't really understand what's happening with these failing builds.

[~ananamj]: Add one patch every time (wait for the results), since the test infra runs only on the last file. Also I would start with the master branch, since other branches are often not clean.

 

Thanks,

Peter 

[~pvary] Ok, I'll do that, thanks!

| (/) *{color:green}+1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
|| || || || {color:brown} Prechecks {color} ||
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
|| || || || {color:brown} master Compile Tests {color} ||
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  6m 47s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 23s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 10s{color} | {color:green} master passed {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  1m 51s{color} | {color:blue} standalone-metastore/metastore-common in master has 32 extant Findbugs warnings. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 42s{color} | {color:green} master passed {color} |
|| || || || {color:brown} Patch Compile Tests {color} ||
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 26s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 23s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 23s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 10s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 58s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 43s{color} | {color:green} the patch passed {color} |
|| || || || {color:brown} Other Tests {color} ||
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 10s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 14m  1s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |
| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.43-2+deb8u5 (2017-09-19) x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-18504/dev-support/hive-personality.sh |
| git revision | master / 1b04924 |
| Default Java | 1.8.0_111 |
| findbugs | v3.0.0 |
| modules | C: standalone-metastore/metastore-common U: standalone-metastore/metastore-common |
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-18504/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.



Looks like the master patch was ok. Can this be merged?



Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12979838/HIVE-21508.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 16749 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[llap_acid2] (batchId=163)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/18504/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/18504/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-18504/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12979838 - PreCommit-HIVE-Build

Local tests pass for hive-cli on branch-2.3 (with the change made) so I'm not sure what's happening with that build. 

I'll wait before I add another patch. Maybe it's better to upload a patch, wait for results, merge and then upload another patch. Do you think that's reasonable, [~pvary]?



Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12979845/HIVE-21508.1.branch-2.3.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 8 failed/errored test(s), 10587 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynamic_semijoin_reduction] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[mergejoin] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorized_dynamic_semijoin_reduction2] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorized_dynamic_semijoin_reduction] (batchId=142)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=110)
org.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion02 (batchId=264)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidConversion02 (batchId=276)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion02 (batchId=273)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/18507/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/18507/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-18507/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12979845 - PreCommit-HIVE-Build

[~ananamj]: Maybe a flaky test. By the current policy we need a green run before committing anything

[~pvary] Ok, that sounds fair. I've added an updated version of master since there have been a few commits added yesterday.

| (/) *{color:green}+1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
|| || || || {color:brown} Prechecks {color} ||
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
|| || || || {color:brown} master Compile Tests {color} ||
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  8m 46s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 31s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 12s{color} | {color:green} master passed {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  2m 36s{color} | {color:blue} standalone-metastore/metastore-common in master has 32 extant Findbugs warnings. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 56s{color} | {color:green} master passed {color} |
|| || || || {color:brown} Patch Compile Tests {color} ||
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 32s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  0m 31s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green}  0m 31s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 12s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  2m 41s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 55s{color} | {color:green} the patch passed {color} |
|| || || || {color:brown} Other Tests {color} ||
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 14s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 18m 30s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |
| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.43-2+deb8u5 (2017-09-19) x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-18521/dev-support/hive-personality.sh |
| git revision | master / 1dfa2d8 |
| Default Java | 1.8.0_111 |
| findbugs | v3.0.0 |
| modules | C: standalone-metastore/metastore-common U: standalone-metastore/metastore-common |
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-18521/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.





Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12979945/HIVE-21508.1.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:green}SUCCESS:{color} +1 due to 16751 tests passed

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/18521/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/18521/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-18521/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12979945 - PreCommit-HIVE-Build

This looks like it passed. [~pvary], is the "_-1 due to no test(s) being added or modified_" ok for this change?

+1 for HIVE-21508.1.patch

[~ananamj]: We need to 1 day after the +1, and then I can commit.

Thanks,

Peter

[~pvary]: Thanks, that sounds great! I'll continue with the patch for branch-2.3.



Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12979972/HIVE-21508.2.branch-2.3.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 8 failed/errored test(s), 10587 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[dynamic_semijoin_reduction] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[mergejoin] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorized_dynamic_semijoin_reduction2] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorized_dynamic_semijoin_reduction] (batchId=142)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=108)
org.apache.hadoop.hive.ql.TestTxnCommands2.testNonAcidToAcidConversion02 (batchId=264)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdate.testNonAcidToAcidConversion02 (batchId=276)
org.apache.hadoop.hive.ql.TestTxnCommands2WithSplitUpdateAndVectorization.testNonAcidToAcidConversion02 (batchId=273)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/18528/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/18528/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-18528/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12979972 - PreCommit-HIVE-Build

[~ananamj]: Pushed the fix to master branch.

Could you please check the failing tests on branch 2.3? Are they failing without the patch as well?

Thanks,

Peter

[~pvary]: Thank you!

It looks like even without the patch, the same tests for {{ql}} fail, but {{cli}} tests pass for both versions (with and without the patch).

[~ananamj]: Pushed to branch 2.3. Do you plan to provide patch for other branches, or shall we close the jira?

Thanks,

Peter

[~pvary] Thanks, I will add patches for the other branches. 
I wasn't sure if the one for branch-2.3 was ok, which is why I haven't added the next one.



Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12980090/HIVE-21508.3.branch-2.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 12 failed/errored test(s), 10722 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_queries] (batchId=227)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[avro_tableproperty_optimize] (batchId=22)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[explaindenpendencydiffengs] (batchId=38)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[table_nonprintable] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=158)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vectorized_parquet_types] (batchId=155)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[merge_negative_5] (batchId=88)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[explaindenpendencydiffengs] (batchId=115)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vectorization_input_format_excludes] (batchId=117)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vectorized_ptf] (batchId=125)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/18550/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/18550/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-18550/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 12 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12980090 - PreCommit-HIVE-Build

The test results are weird, because locally, all the cli tests pass. I tested this with Java 8, because Java 7 gives a compilation error for {{hive-serde.TimestampWritable.java}} about package {{java.time.format}}, {{DateTimeFormatter}} and {{toLocalDateTime()}} not existing.

[~ananamj]: Pushed to branch-2

| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | {color:red} patch {color} | {color:red}  0m 17s{color} | {color:red} /data/hiveptest/logs/PreCommit-HIVE-Build-18565/patches/PreCommit-HIVE-Build-18565.patch does not apply to master. Rebase required? Wrong Branch? See http://cwiki.apache.org/confluence/display/Hive/HowToContribute for help. {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-18565/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.





Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12980178/HIVE-21508.4.branch-3.1.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 127 failed/errored test(s), 14412 tests executed
*Failed tests:*
{noformat}
TestAddPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestAddPartitionsFromPartSpec - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestAdminUser - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestAggregateStatsCache - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestAlterPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestAppendPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestBeeLineDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=273)
TestCachedStore - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestCatalogCaching - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestCatalogNonDefaultClient - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestCatalogNonDefaultSvr - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestCatalogOldClient - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestCatalogs - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestCheckConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestCloseableThreadLocal - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestDataSourceProviderFactory - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestDatabaseName - did not produce a TEST-*.xml file (likely timed out) (batchId=195)
TestDatabases - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestDeadline - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestDefaultConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestDropPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=273)
TestEmbeddedHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=229)
TestExchangePartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestFMSketchSerialization - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestFilterHooks - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestForeignKey - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestFunctions - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestGetPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestGetPartitionsUsingProjectionAndFilterSpecs - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestGetTableMeta - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestHLLNoBias - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestHLLSerialization - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestHdfsUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestHiveAlterHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestHiveMetaStoreGetMetaConf - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestHiveMetaStorePartitionSpecs - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestHiveMetaStoreSchemaMethods - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestHiveMetaStoreTimeout - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestHiveMetaStoreTxns - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestHiveMetaStoreWithEnvironmentContext - did not produce a TEST-*.xml file (likely timed out) (batchId=231)
TestHiveMetaToolCommandLine - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestHiveMetastoreCli - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestHmsServerAuthorization - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestHyperLogLog - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestHyperLogLogDense - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestHyperLogLogMerge - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestHyperLogLogSparse - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestJSONMessageDeserializer - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestKuduCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=264)
TestKuduInputFormat - did not produce a TEST-*.xml file (likely timed out) (batchId=330)
TestKuduNegativeCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=264)
TestKuduOutputFormat - did not produce a TEST-*.xml file (likely timed out) (batchId=330)
TestKuduPredicateHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=330)
TestKuduSerDe - did not produce a TEST-*.xml file (likely timed out) (batchId=330)
TestListPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestLockRequestBuilder - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestMarkPartition - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMarkPartitionRemote - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMetaStoreConnectionUrlHook - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetaStoreEndFunctionListener - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestMetaStoreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestMetaStoreEventListenerOnlyOnCommit - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMetaStoreEventListenerWithOldConf - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMetaStoreInitListener - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMetaStoreListenersError - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMetaStoreSchemaFactory - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetaStoreSchemaInfo - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMetaStoreServerUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetaToolTaskExecuteJDOQLQuery - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetaToolTaskListFSRoot - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetaToolTaskUpdateLocation - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetastoreConf - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestMetastoreSchemaTool - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetrics - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestMiniDruidCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=273)
TestMiniDruidKafkaCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=273)
TestMsckCheckPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestNotNullConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestObjectStore - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestObjectStoreInitRetry - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestObjectStoreSchemaMethods - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestObjectStoreStatementVerify - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestOldSchema - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestPartitionManagement - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestPartitionNameWhitelistValidation - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestPartitionProjectionEvaluator - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestPreUpgradeTool - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestPrimaryKey - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestRawStoreProxy - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestRemoteHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestRemoteHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=224)
TestRemoteHiveMetaStoreZK - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestRemoteHiveMetaStoreZKBindHost - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestRemoteUGIHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestRetriesInRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestRunOptions - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestRuntimeStats - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestSchemaToolForMetastore - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestSchemaToolTaskDrop - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestSetUGIOnBothClientServer - did not produce a TEST-*.xml file (likely timed out) (batchId=227)
TestSetUGIOnOnlyClient - did not produce a TEST-*.xml file (likely timed out) (batchId=225)
TestSetUGIOnOnlyServer - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparseEncodeHash - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestStats - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestStatsSetupConst - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestTableIterable - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestTableName - did not produce a TEST-*.xml file (likely timed out) (batchId=195)
TestTablesCreateDropAlterTruncate - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestTablesGetExists - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestTablesList - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestTezPerfCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=273)
TestTxnHandlerNegative - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestTxnUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestUniqueConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[load_static_ptn_into_bucketed_table] (batchId=21)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[load_data_using_job] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[results_cache_2] (batchId=177)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[results_cache_with_masking] (batchId=173)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sharedwork] (batchId=174)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[subquery_views] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[orc_merge9] (batchId=185)
org.apache.hadoop.hive.ql.TestWarehouseExternalDir.testManagedPaths (batchId=249)
org.apache.hive.jdbc.TestTriggersTezSessionPoolManager.testTriggerCustomCreatedDynamicPartitions (batchId=261)
org.apache.hive.service.TestHS2ImpersonationWithRemoteMS.testImpersonation (batchId=258)
org.apache.hive.spark.client.rpc.TestRpc.testServerPort (batchId=325)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/18565/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/18565/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-18565/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 127 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12980178 - PreCommit-HIVE-Build

[~pvary]: Thank you for pushing the patch for branch-2.

I added another patch for branch-3.1 to start tests. Hopefully this time there won't be this many tests failing.

| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | {color:red} patch {color} | {color:red}  0m 11s{color} | {color:red} /data/hiveptest/logs/PreCommit-HIVE-Build-18584/patches/PreCommit-HIVE-Build-18584.patch does not apply to master. Rebase required? Wrong Branch? See http://cwiki.apache.org/confluence/display/Hive/HowToContribute for help. {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-18584/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.





Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12980254/HIVE-21508.5.branch-3.1.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 126 failed/errored test(s), 14412 tests executed
*Failed tests:*
{noformat}
TestAddPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestAddPartitionsFromPartSpec - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestAdminUser - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestAggregateStatsCache - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestAlterPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestAppendPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestBeeLineDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=273)
TestCachedStore - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestCatalogCaching - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestCatalogNonDefaultClient - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestCatalogNonDefaultSvr - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestCatalogOldClient - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestCatalogs - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestCheckConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestCloseableThreadLocal - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestDataSourceProviderFactory - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestDatabaseName - did not produce a TEST-*.xml file (likely timed out) (batchId=195)
TestDatabases - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestDeadline - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestDefaultConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestDropPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=273)
TestEmbeddedHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=229)
TestExchangePartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestFMSketchSerialization - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestFilterHooks - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestForeignKey - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestFunctions - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestGetPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestGetPartitionsUsingProjectionAndFilterSpecs - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestGetTableMeta - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestHLLNoBias - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestHLLSerialization - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestHdfsUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestHiveAlterHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestHiveMetaStoreGetMetaConf - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestHiveMetaStorePartitionSpecs - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestHiveMetaStoreSchemaMethods - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestHiveMetaStoreTimeout - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestHiveMetaStoreTxns - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestHiveMetaStoreWithEnvironmentContext - did not produce a TEST-*.xml file (likely timed out) (batchId=231)
TestHiveMetaToolCommandLine - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestHiveMetastoreCli - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestHmsServerAuthorization - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestHyperLogLog - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestHyperLogLogDense - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestHyperLogLogMerge - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestHyperLogLogSparse - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestJSONMessageDeserializer - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestKuduCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=264)
TestKuduInputFormat - did not produce a TEST-*.xml file (likely timed out) (batchId=330)
TestKuduNegativeCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=264)
TestKuduOutputFormat - did not produce a TEST-*.xml file (likely timed out) (batchId=330)
TestKuduPredicateHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=330)
TestKuduSerDe - did not produce a TEST-*.xml file (likely timed out) (batchId=330)
TestListPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestLockRequestBuilder - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestMarkPartition - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMarkPartitionRemote - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMetaStoreConnectionUrlHook - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetaStoreEndFunctionListener - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestMetaStoreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestMetaStoreEventListenerOnlyOnCommit - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMetaStoreEventListenerWithOldConf - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMetaStoreInitListener - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMetaStoreListenersError - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMetaStoreSchemaFactory - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetaStoreSchemaInfo - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestMetaStoreServerUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetaToolTaskExecuteJDOQLQuery - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetaToolTaskListFSRoot - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetaToolTaskUpdateLocation - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetastoreConf - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestMetastoreSchemaTool - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestMetrics - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestMiniDruidCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=273)
TestMiniDruidKafkaCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=273)
TestMsckCheckPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestNotNullConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestObjectStore - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestObjectStoreInitRetry - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestObjectStoreSchemaMethods - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestObjectStoreStatementVerify - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestOldSchema - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestPartitionManagement - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestPartitionNameWhitelistValidation - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestPartitionProjectionEvaluator - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestPreUpgradeTool - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestPrimaryKey - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestRawStoreProxy - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestRemoteHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestRemoteHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=224)
TestRemoteHiveMetaStoreZK - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestRemoteHiveMetaStoreZKBindHost - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestRemoteUGIHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestRetriesInRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestRunOptions - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestRuntimeStats - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestSchemaToolForMetastore - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestSchemaToolTaskDrop - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestSetUGIOnBothClientServer - did not produce a TEST-*.xml file (likely timed out) (batchId=227)
TestSetUGIOnOnlyClient - did not produce a TEST-*.xml file (likely timed out) (batchId=225)
TestSetUGIOnOnlyServer - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestSparseEncodeHash - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestStats - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestStatsSetupConst - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestTableIterable - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestTableName - did not produce a TEST-*.xml file (likely timed out) (batchId=195)
TestTablesCreateDropAlterTruncate - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestTablesGetExists - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestTablesList - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestTezPerfCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=273)
TestTxnHandlerNegative - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestTxnUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestUniqueConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[load_static_ptn_into_bucketed_table] (batchId=21)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[load_data_using_job] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[results_cache_2] (batchId=177)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[results_cache_with_masking] (batchId=173)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sharedwork] (batchId=174)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[subquery_views] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[orc_merge9] (batchId=185)
org.apache.hadoop.hive.ql.TestWarehouseExternalDir.testManagedPaths (batchId=249)
org.apache.hive.service.TestHS2ImpersonationWithRemoteMS.testImpersonation (batchId=258)
org.apache.hive.spark.client.rpc.TestRpc.testServerPort (batchId=325)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/18584/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/18584/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-18584/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 126 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12980254 - PreCommit-HIVE-Build

[~pvary]: Is there anything I'm doing wrong with attaching the patch? The latest patch attached is for branch-3.1, but it looks like the tests are trying to apply it to master.

[~pvary] Any advice on how I could fix this or should I just move on with branch-3?

[~ananamj]: Forget about yetus in this case. Concentrate on the Ptest (2nd comment).
For me it seems that PTest checks out 3.1 branch:
{code}
2019-09-13 14:43:02,157  INFO [StreamReader-[bash /data/hiveptest/working/scratch/source-prep.sh]] LocalCommand$CollectLogPolicy.handleOutput:101 + git checkout branch-3.1
{code}
If it is so, then we might try to run ptest without a real change in a patch to check if the 126 failining tests are unrelated.

Thanks,
Peter


[~pvary]: I'm guessing I can't check locally if the ptests fail with/without the patch, right?

What I can say though, is that locally, the tests pass, except for some tests in TestRpc, ThriftCliServiceTestWithCookie, TestLdapAtnProviderWithMiniDS, and TestHiveCli, but this happens without the patch too.

[~pvary], is there any way I can help with the patch for branch-3.1 or should I continue uploading the last one (for branch-3)?

Sorry [~ananamj]! Lost the track of this jira :(
Committed to 3.1. Can not set the fix version to 3.1.3, since that is not available yet.

Thanks, [~pvary]! And no worries, you've been really helpful with this :)

I've just added the last patch.

| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:red}-1{color} | {color:red} patch {color} | {color:red}  0m 13s{color} | {color:red} /data/hiveptest/logs/PreCommit-HIVE-Build-18650/patches/PreCommit-HIVE-Build-18650.patch does not apply to master. Rebase required? Wrong Branch? See http://cwiki.apache.org/confluence/display/Hive/HowToContribute for help. {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-18650/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.





Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12980710/HIVE-21508.6.branch-3.patch

{color:red}ERROR:{color} -1 due to no test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 135 failed/errored test(s), 14435 tests executed
*Failed tests:*
{noformat}
TestAddPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestAddPartitionsFromPartSpec - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestAdminUser - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestAggregateStatsCache - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestAlterPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestAppendPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestBeeLineDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestCachedStore - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestCatalogCaching - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestCatalogNonDefaultClient - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestCatalogNonDefaultSvr - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestCatalogOldClient - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestCatalogs - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestCheckConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestCloseableThreadLocal - did not produce a TEST-*.xml file (likely timed out) (batchId=334)
TestDataSourceProviderFactory - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestDatabases - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDeadline - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestDefaultConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestDropPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestDummy - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestEmbeddedHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=231)
TestExchangePartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestFMSketchSerialization - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestFilterHooks - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestForeignKey - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestFunctions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestGetPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestGetPartitionsUsingProjectionAndFilterSpecs - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestGetTableMeta - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestHLLNoBias - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHLLSerialization - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHdfsUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestHiveAlterHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestHiveMetaStoreGetMetaConf - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestHiveMetaStorePartitionSpecs - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestHiveMetaStoreSchemaMethods - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestHiveMetaStoreTimeout - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestHiveMetaStoreTxns - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestHiveMetaStoreWithEnvironmentContext - did not produce a TEST-*.xml file (likely timed out) (batchId=233)
TestHiveMetaToolCommandLine - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestHiveMetastoreCli - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestHmsServerAuthorization - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestHyperLogLog - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHyperLogLogDense - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHyperLogLogMerge - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestHyperLogLogSparse - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestJSONMessageDeserializer - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestKuduCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=266)
TestKuduInputFormat - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestKuduNegativeCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=266)
TestKuduOutputFormat - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestKuduPredicateHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestKuduSerDe - did not produce a TEST-*.xml file (likely timed out) (batchId=332)
TestListPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestLockRequestBuilder - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestMarkPartition - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMarkPartitionRemote - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreConnectionUrlHook - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaStoreEndFunctionListener - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestMetaStoreEventListener - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
TestMetaStoreEventListenerOnlyOnCommit - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreEventListenerWithOldConf - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreInitListener - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreListenersError - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreSchemaFactory - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaStoreSchemaInfo - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestMetaStoreServerUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaToolTaskExecuteJDOQLQuery - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaToolTaskListFSRoot - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetaToolTaskUpdateLocation - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetastoreConf - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestMetastoreSchemaTool - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestMetrics - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestMiniDruidCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestMiniDruidKafkaCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestMsckCheckPartitions - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestNotNullConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestObjectStore - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestObjectStoreInitRetry - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestObjectStoreSchemaMethods - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestObjectStoreStatementVerify - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestOldSchema - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestPartitionManagement - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestPartitionNameWhitelistValidation - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestPartitionProjectionEvaluator - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestPreUpgradeTool - did not produce a TEST-*.xml file (likely timed out) (batchId=334)
TestPrimaryKey - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestRawStoreProxy - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestRemoteHiveMetaStore - did not produce a TEST-*.xml file (likely timed out) (batchId=232)
TestRemoteHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=226)
TestRemoteHiveMetaStoreZK - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestRemoteHiveMetaStoreZKBindHost - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestRemoteUGIHiveMetaStoreIpAddress - did not produce a TEST-*.xml file (likely timed out) (batchId=236)
TestRetriesInRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestRetryingHMSHandler - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestRunOptions - did not produce a TEST-*.xml file (likely timed out) (batchId=334)
TestRuntimeStats - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestSchemaToolForMetastore - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestSchemaToolTaskDrop - did not produce a TEST-*.xml file (likely timed out) (batchId=234)
TestSetUGIOnBothClientServer - did not produce a TEST-*.xml file (likely timed out) (batchId=229)
TestSetUGIOnOnlyClient - did not produce a TEST-*.xml file (likely timed out) (batchId=227)
TestSetUGIOnOnlyServer - did not produce a TEST-*.xml file (likely timed out) (batchId=237)
TestSparseEncodeHash - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestStats - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestStatsSetupConst - did not produce a TEST-*.xml file (likely timed out) (batchId=239)
TestTableIterable - did not produce a TEST-*.xml file (likely timed out) (batchId=238)
TestTablesCreateDropAlterTruncate - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestTablesGetExists - did not produce a TEST-*.xml file (likely timed out) (batchId=230)
TestTablesList - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestTezPerfCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=275)
TestTxnHandlerNegative - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestTxnUtils - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
TestUniqueConstraint - did not produce a TEST-*.xml file (likely timed out) (batchId=228)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[load_static_ptn_into_bucketed_table] (batchId=21)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[mm_all] (batchId=71)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[mm_all] (batchId=154)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[current_date_timestamp] (batchId=169)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[external_jdbc_auth] (batchId=161)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[load_data_using_job] (batchId=160)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[multi_in_clause] (batchId=176)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[results_cache_2] (batchId=179)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sharedwork] (batchId=176)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[subquery_views] (batchId=160)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[sysdb] (batchId=167)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=187)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=188)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=189)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=190)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[subquery_subquery_chain] (batchId=97)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_12] (batchId=124)
org.apache.hadoop.hive.ql.TestWarehouseExternalDir.testManagedPaths (batchId=251)
org.apache.hadoop.hive.ql.parse.TestSQL11ReservedKeyWordsNegative$TestSQL11ReservedKeyWordsNegativeParametrized.testNegative[REAL] (batchId=303)
org.apache.hive.service.TestHS2ImpersonationWithRemoteMS.testImpersonation (batchId=259)
org.apache.hive.spark.client.rpc.TestRpc.testServerPort (batchId=327)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/18650/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/18650/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-18650/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 135 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12980710 - PreCommit-HIVE-Build

[~pvary]: This looks like it's similar to the patch for branch-3.1. Would the same check as before need to be done for ptests to see if the changes are unrelated to the failing tests?

[~pvary]: Sorry to ask again, but do you know if these failing tests are normal for this branch?  :)

[~ananamj]: Pushed to branch-3 as well...
I think we are ready.
Finally :D

And thanks for the perseverance :D

[~pvary]: That's great, and thank you too for the help and also for the perseverance :D

Hey there, 
Is there an ETA on when this fix will be released?

Could we please get this into a Hive 2.3.7 release?

+1 for including this in the upcoming Hive 2.3.7 release. Also, can we have a 2.3.7 release on feb 2020?

Released in Hive 2.3.7

The latest 3.x release (3.1.2) still has this bug. When can we expect a 3.x release that contains this fix that was resolved in 2019?

I feel your pain, from what I can tell these tickets cover JDK 9 support:

https://issues.apache.org/jira/browse/HADOOP-11123 (resolved)
https://issues.apache.org/jira/browse/HIVE-17632 (open)

and may have been superseded by

https://issues.apache.org/jira/browse/HIVE-22415 (open)

I think it would be worth asking on the Hive user or dev mailing list to get the status on these. I would like to think some of these changes could go into a 3..x release without having to wait for all of them, even just resolving some of the compilation errors that you see when using Hive as a library downstream would be a good start and don't require All The Things to be fixed.



