One of the clauses in canInvokeWithArgs is too permissive. It returns true if the declared method parameter type is a primitive, regardless of what the type of the actual parameter value is. This causes Flux to attempt to invoke the wrong methods in certain cases, which will trigger an IllegalArgumentException.