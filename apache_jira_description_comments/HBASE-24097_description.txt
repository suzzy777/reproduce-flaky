Fails on occasion, 15% of the time according to flakie report. I can reproduce it failing locally. A single method fails. I don't follow how it is supposed to work (what looks wrong to me passes...). I noticed that if I ran testRestoreSnapshot on its own, it passed but failed when run as part of the test suite so I broke it out into its own suite. Now both old and new suites pass for me locally after 20 repeats. Let me push it up. 