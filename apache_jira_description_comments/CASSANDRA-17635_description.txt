The Python dtestÂ {{repair_tests/deprecated_repair_test.py::TestDeprecatedRepairAPI::test_force_repair_range_async}} is consistently flaky in 3.0 and 3.11 since a few runs ago. It has failed the last 5 runs of 3.0 and the last 6 runs of 3.11.

Jenkins failure:
[https://ci-cassandra.apache.org/job/Cassandra-3.0/276/testReport/dtest.repair_tests.repair_test/TestRepair/test_dead_sync_initiator/]]

CircleCI failure:
[https://app.circleci.com/pipelines/github/adelapena/cassandra/1572/workflows/951099c4-3260-4c6b-ab4c-bd177ff086c3/jobs/16754]]

Error Message:
{code:java}
test teardown failure
{code}

Stacktrace:
{code:java}
Unexpected error found in node logs (see stdout for full details). Errors: [[node1] "ERROR [RepairJobTask:3] 2022-05-14 08:15:09,627 SystemDistributedKeyspace.java:222 - Error executing query UPDATE system_distributed.repair_history SET status = 'FAILED', finished_at = toTimestamp(now()), exception_message=?, exception_stacktrace=? WHERE keyspace_name = 'keyspace1' AND columnfamily_name = 'standard1' AND id = f0cfc410-d35d-11ec-94a4-d9859ca8f7a4\njava.lang.AssertionError: java.lang.InterruptedException\n\tat org.apache.cassandra.net.OutboundTcpConnection.enqueue(OutboundTcpConnection.java:187)\n\tat org.apache.cassandra.net.MessagingService.sendOneWay(MessagingService.java:794)\n\tat org.apache.cassandra.net.MessagingService.sendRR(MessagingService.java:756)\n\tat org.apache.cassandra.service.StorageProxy.sendToHintedEndpoints(StorageProxy.java:1314)\n\tat org.apache.cassandra.service.StorageProxy$2.apply(StorageProxy.java:137)\n\tat org.apache.cassandra.service.StorageProxy.performWrite(StorageProxy.java:1151)\n\tat org.apache.cassandra.service.StorageProxy.mutate(StorageProxy.java:710)\n\tat org.apache.cassandra.service.StorageProxy.mutateWithTriggers(StorageProxy.java:931)\n\tat org.apache.cassandra.cql3.statements.ModificationStatement.executeWithoutCondition(ModificationStatement.java:434)\n\tat org.apache.cassandra.cql3.statements.ModificationStatement.execute(ModificationStatement.java:420)\n\tat org.apache.cassandra.cql3.QueryProcessor.processStatement(QueryProcessor.java:219)\n\tat org.apache.cassandra.cql3.QueryProcessor.process(QueryProcessor.java:250)\n\tat org.apache.cassandra.cql3.QueryProcessor.process(QueryProcessor.java:265)\n\tat org.apache.cassandra.repair.SystemDistributedKeyspace.processSilent(SystemDistributedKeyspace.java:218)\n\tat org.apache.cassandra.repair.SystemDistributedKeyspace.failedRepairJob(SystemDistributedKeyspace.java:206)\n\tat org.apache.cassandra.repair.RepairJob$3.onFailure(RepairJob.java:132)\n\tat com.google.common.util.concurrent.Futures$6.run(Futures.java:1313)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat org.apache.cassandra.concurrent.NamedThreadFactory.lambda$threadLocalDeallocator$0(NamedThreadFactory.java:83)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.InterruptedException: null\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1220)\n\tat java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:335)\n\tat java.util.concurrent.LinkedBlockingQueue.put(LinkedBlockingQueue.java:339)\n\tat org.apache.cassandra.net.OutboundTcpConnection.enqueue(OutboundTcpConnection.java:183)\n\t... 20 common frames omitted"]
{code}