The default {{allocation_interval}} is 1 second. This means that if the host running the tests is slow, a test case might receive a resource offer that it doesn't receive when running on a faster host. We could workaround this by explicitly using {{WillRepeatedly(Return())}}, but that is a bit kludgy and obscures the intent of the test.

One way to avoid this would be to pause the clock by default in tests (MESOS-4101). That would be a quite involved change, however.

Instead, we could consider raising the default {{allocation_interval}} to a large value, such as 1 minute or longer. This would significantly reduce the chance of host performance causing test flakiness. Moreover, it would help to highlight tests that rely on real-time batch allocations for correctness: generally tests should avoid doing this (because it causes test slowness). They should instead pause the clock and then advance it by {{allocation_interval}}.