Kafka 0.10.0.0 introduced protocol changes related to the producer.  Published messages now include timestamps and compressed messages now include relative offsets.  As it is now, brokers must decompress publisher compressed messages, assign offset to them, and recompress them, which is wasteful and makes it less likely that compression will be used at all.
