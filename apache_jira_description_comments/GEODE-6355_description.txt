This uses double-checked locking, which is a broken pattern, and we should use computeIfAbsent. In getFunctionStats and getFunctionStats.