The DN needs to handle situations where it is asked to cache the same replica more than once.  (Currently, it can actually do two mmaps and mlocks.)  It also needs to handle the situation where caching a replica is cancelled before said caching completes.