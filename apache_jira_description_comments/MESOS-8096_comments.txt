There are at least 2 races in the test code around v1 scheduler/executor and driver libraries. Below only scheduler is described, executor case is the same modulo it has one more race which was fixed in MESOS-4029 for the scheduler.

h4. The scheduler might not be fully constructed before the driver library starts to use it.
When we [initialize|https://github.com/apache/mesos/blob/a85a22baa32f66ecaa13c4602a195d57f6abf9be/src/tests/mesos.hpp#L2159-L2165] the scheduler driver library, we pass an [{{events}} callback|https://github.com/apache/mesos/blob/a85a22baa32f66ecaa13c4602a195d57f6abf9be/src/tests/mesos.hpp#L2176], which [uses|https://github.com/apache/mesos/blob/a85a22baa32f66ecaa13c4602a195d57f6abf9be/src/tests/mesos.hpp#L2211] the [member variable|https://github.com/apache/mesos/blob/a85a22baa32f66ecaa13c4602a195d57f6abf9be/src/tests/mesos.hpp#L2216] of the library test wrapper. The scheduler library can start using the callback right after it is constructed, even before the library test wrapper [fully initializes|https://github.com/apache/mesos/blob/a85a22baa32f66ecaa13c4602a195d57f6abf9be/src/tests/mesos.hpp#L2180-L2181]. This leads to segfaults when {{SUBSCRIBED}} event is being passed to the not-yet-initialized scheduler.

h4. The scheduler library might be destroyed while the scheduler still uses it.
This is not fully fixed by MESOS-4029, see {{"AsyncExecutorProcess-badrun-3"}}. Passing scheduler driver's {{this}} to a scheduler [here|https://github.com/apache/mesos/blob/a85a22baa32f66ecaa13c4602a195d57f6abf9be/src/tests/mesos.hpp#L2177] is unsafe and does not guarantee that it is safe to use Mesos.

https://reviews.apache.org/r/63611/
https://reviews.apache.org/r/63612/
https://reviews.apache.org/r/63613/
https://reviews.apache.org/r/63614/
https://reviews.apache.org/r/63615/

{noformat}
Commit: 75f1274221de5169024008a4187ddb4edd3f9be3 [75f1274]
Author: Alexander Rukletsov rukletsov@gmail.com
Date: 13 November 2017 at 21:52:05 GMT+1
Committer: Alexander Rukletsov alexr@apache.org

Refactored scheduler test driver to avoid using uninitialized object.

The shared pointer to MockHTTPScheduler is initialized after the
library, while the library may start using it right after its
initialization via the events callback. This change removes the
shared pointer altogether and hence prevents possible segfaults.

Review: https://reviews.apache.org/r/63611/
{noformat}
{noformat}
Commit: f221d8ebb1846e43d8c319bdcaf2694b1601f55b [f221d8e]
Author: Alexander Rukletsov rukletsov@gmail.com
Date: 13 November 2017 at 21:52:22 GMT+1
Committer: Alexander Rukletsov alexr@apache.org

Refactored executor test driver to avoid using uninitialized object.

The shared pointer to MockHTTPExecutor is initialized after the library,
while the library may start using it right after its initialization via
the events callback. This change removes the shared pointer altogether
and hence prevents possible segfaults.

Review: https://reviews.apache.org/r/63613/
{noformat}
{noformat}
Commit: 8194e7cac77571f74c89f824ce3fe2afb5397cc5 [8194e7c]
Author: Alexander Rukletsov rukletsov@gmail.com
Date: 13 November 2017 at 21:52:28 GMT+1
Committer: Alexander Rukletsov alexr@apache.org

Removed unnecessary check in v1 scheduler library.

Review: https://reviews.apache.org/r/63614/
{noformat}
{noformat}
Commit: 57eeef05668bf73cbc3c0c38ca28dbf0b90ab8b1 [57eeef0]
Author: Alexander Rukletsov rukletsov@gmail.com
Date: 13 November 2017 at 21:52:35 GMT+1
Committer: Alexander Rukletsov alexr@apache.org

Passed scheduler as a shared pointer into the callback.

To ensure the lifetime of the scheduler is longer than the lifetime
of the scheduler library driver, pass scheduler as a shared_ptr.

Review: https://reviews.apache.org/r/63615/
{noformat}

Observed this again today on our internal CI. From {{LauncherAndIsolationParam/PersistentVolumeDefaultExecutor.ROOT_TasksSharingViaSandboxVolumes/0}}:
{code}
I0530 16:52:18.736814  1694 master.cpp:8402] Forwarding status update TASK_FINISHED (Status UUID: 85c571bb-1f02-456b-bd28-36fe8266d573) for task consumer of framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000
I0530 16:52:18.736903  1694 master.cpp:10843] Updating the state of task consumer of framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 (latest state: TASK_FINISHED, status update state: TASK_FINISHED)
I0530 16:52:18.737037  1694 process.cpp:3583] Handling HTTP event for process 'master' with path: '/master/api/v1/scheduler'
I0530 16:52:18.736802  1700 slave.cpp:5668] Task status update manager successfully handled status update TASK_FINISHED (Status UUID: 85c571bb-1f02-456b-bd28-36fe8266d573) for task consumer of framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000
I0530 16:52:18.737326  1699 scheduler.cpp:845] Enqueuing event UPDATE received from http://172.16.10.46:44244/master/api/v1/scheduler
I0530 16:52:18.737447  1701 hierarchical.cpp:1194] Recovered cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.1; mem(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32 (total: cpus:1.7; mem:928; disk:928; ports:[31000-32000]; cpus(reservations: [(DYNAMIC,default-role,test-principal)]):0.3; mem(reservations: [(DYNAMIC,default-role,test-principal)]):96; disk(reservations: [(DYNAMIC,default-role,test-principal)]):95; disk(reservations: [(DYNAMIC,default-role,test-principal)])[executor:executor_volume_path]:1, allocated: disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)])[executor:executor_volume_path]:1; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):31; mem(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32; cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.1) on agent 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-S0 from framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000
*** Aborted at 1527699138 (unix time) try "date -d @1527699138" if you are using GNU date ***
I0530 16:52:18.741678  1699 master.cpp:1408] Framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 (default) disconnected
I0530 16:52:18.741858  1699 master.cpp:3266] Deactivating framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 (default)
I0530 16:52:18.742030  1699 master.cpp:3243] Disconnecting framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 (default)
I0530 16:52:18.742187  1699 master.cpp:1423] Giving framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 (default) 0ns to failover
I0530 16:52:18.742496  1699 hierarchical.cpp:405] Deactivated framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000
I0530 16:52:18.742709  1699 process.cpp:3645] Failed to process request for '/master/api/v1/scheduler': discarded
PC: @     0x7fe52b8e6fa3 mesos::v1::scheduler::Mesos::send()
I0530 16:52:18.744056  1699 master.cpp:9231] Framework failover timeout, removing framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 (default)
I0530 16:52:18.744341  1699 master.cpp:10125] Removing framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 (default)
I0530 16:52:18.744491  1699 master.cpp:10843] Updating the state of task consumer of framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 (latest state: TASK_FINISHED, status update state: TASK_KILLED)
I0530 16:52:18.744609  1699 master.cpp:10942] Removing task consumer with resources cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.1; mem(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32 of framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 on agent 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-S0 at slave(1076)@172.16.10.46:44244 (ip-172-16-10-46.ec2.internal)
I0530 16:52:18.744737  1699 master.cpp:10843] Updating the state of task producer of framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 (latest state: TASK_FINISHED, status update state: TASK_KILLED)
I0530 16:52:18.744770  1699 master.cpp:10942] Removing task producer with resources cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.1; mem(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32 of framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 on agent 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-S0 at slave(1076)@172.16.10.46:44244 (ip-172-16-10-46.ec2.internal)
I0530 16:52:18.744904  1699 master.cpp:10973] Removing executor 'default' with resources [{"allocation_info":{"role":"default-role"},"name":"cpus","reservations":[{"principal":"test-principal","role":"default-role","type":"DYNAMIC"}],"scalar":{"value":0.1},"type":"SCALAR"},{"allocation_info":{"role":"default-role"},"name":"mem","reservations":[{"principal":"test-principal","role":"default-role","type":"DYNAMIC"}],"scalar":{"value":32.0},"type":"SCALAR"},{"allocation_info":{"role":"default-role"},"name":"disk","reservations":[{"principal":"test-principal","role":"default-role","type":"DYNAMIC"}],"scalar":{"value":31.0},"type":"SCALAR"},{"allocation_info":{"role":"default-role"},"disk":{"persistence":{"id":"executor","principal":"test-principal"},"volume":{"container_path":"executor_volume_path","mode":"RW"}},"name":"disk","reservations":[{"principal":"test-principal","role":"default-role","type":"DYNAMIC"}],"scalar":{"value":1.0},"type":"SCALAR"}] of framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 on agent 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-S0 at slave(1076)@172.16.10.46:44244 (ip-172-16-10-46.ec2.internal)
I0530 16:52:18.745318  1699 hierarchical.cpp:1194] Recovered cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.1; mem(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):31; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)])[executor:executor_volume_path]:1 (total: cpus:1.7; mem:928; disk:928; ports:[31000-32000]; cpus(reservations: [(DYNAMIC,default-role,test-principal)]):0.3; mem(reservations: [(DYNAMIC,default-role,test-principal)]):96; disk(reservations: [(DYNAMIC,default-role,test-principal)]):95; disk(reservations: [(DYNAMIC,default-role,test-principal)])[executor:executor_volume_path]:1, allocated: {}) on agent 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-S0 from framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000
I0530 16:52:18.745455  1699 hierarchical.cpp:344] Removed framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000
I0530 16:52:18.744503  1694 slave.cpp:3910] Asked to shut down framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 by master@172.16.10.46:44244
I0530 16:52:18.745507  1694 slave.cpp:3935] Shutting down framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000
I0530 16:52:18.745522  1694 slave.cpp:6656] Shutting down executor 'default' of framework 3e3515b4-76c7-437d-ae6d-fc3cc5e8a37a-0000 (via HTTP)
*** SIGSEGV (@0x0) received by PID 10934 (TID 0x7fe5213a6700) from PID 0; stack trace: ***
    @     0x7fe4f5d320f2 (unknown)
    @     0x7fe4f5d36649 (unknown)
    @     0x7fe4f5d29d88 (unknown)
    @     0x7fe528de6390 (unknown)
    @     0x7fe52b8e6fa3 mesos::v1::scheduler::Mesos::send()
    @     0x558e466e3776 _ZNK5mesos8internal5tests2v19scheduler23SendAcknowledgeActionP2INS_2v111FrameworkIDENS5_7AgentIDEE10gmock_ImplIFvPNS5_9scheduler5MesosERKNSA_12Event_UpdateEEE17gmock_PerformImplISC_SF_N7testing8internal12ExcessiveArgESL_SL_SL_SL_SL_SL_SL_EEvRKSt5tupleIJSC_SF_EET_T0_T1_T2_T3_T4_T5_T6_T7_T8_
    @     0x558e466e38f0 _ZN5mesos8internal5tests2v19scheduler23SendAcknowledgeActionP2INS_2v111FrameworkIDENS5_7AgentIDEE10gmock_ImplIFvPNS5_9scheduler5MesosERKNSA_12Event_UpdateEEE7PerformERKSt5tupleIJSC_SF_EE
    @     0x558e465d300e _ZN7testing8internal12DoBothActionI17PromiseArgActionPILi1EPN7process7PromiseIN5mesos2v19scheduler12Event_UpdateEEEENS5_8internal5tests2v19scheduler23SendAcknowledgeActionP2INS6_11FrameworkIDENS6_7AgentIDEEEE4ImplIFvPNS7_5MesosERKS8_EE7PerformERKSt5tupleIJSN_SP_EE
    @     0x558e46606397 testing::internal::FunctionMockerBase<>::UntypedPerformAction()
    @     0x558e478fab59 testing::internal::UntypedFunctionMockerBase::UntypedInvokeWith()
    @     0x558e466e5baa mesos::internal::tests::scheduler::MockHTTPScheduler<>::events()
    @     0x558e46663b06 std::_Function_handler<>::_M_invoke()
    @     0x7fe52b8ebfb8 process::AsyncExecutorProcess::execute<>()
    @     0x7fe52b8f6c3d _ZNO6lambda12CallableOnceIFvPN7process11ProcessBaseEEE10CallableFnINS_8internal7PartialIZNS1_8dispatchI7NothingNS1_20AsyncExecutorProcessERKSt8functionIFvRKSt5queueIN5mesos2v19scheduler5EventESt5dequeISH_SaISH_EEEEESL_SR_RSL_EENS1_6FutureIT_EERKNS1_3PIDIT0_EEMSX_FSU_T1_T2_EOT3_OT4_EUlSt10unique_ptrINS1_7PromiseISA_EESt14default_deleteIS1B_EEOSP_OSL_S3_E_IS1E_SP_SL_St12_PlaceholderILi1EEEEEEclEOS3_
    @     0x7fe52c593321 process::ProcessBase::consume()
    @     0x7fe52c5b143a process::ProcessManager::resume()
    @     0x7fe52c5b5186 _ZNSt6thread5_ImplISt12_Bind_simpleIFZN7process14ProcessManager12init_threadsEvEUlvE_vEEE6_M_runEv
    @     0x7fe5295c9c80 (unknown)
    @     0x7fe528ddc6ba start_thread
    @     0x7fe528b1241d (unknown)
{code}

Might be related to this issue, from {{clang-analyzer}}, courtesy of [~mcypark]:
{noformat}
src/scheduler/scheduler.cpp:911:5: warning: Call to virtual function during destruction will not dispatch to derived class [clang-analyzer-optin.cplusplus.VirtualCall]
    stop();
    ^
{noformat}
Likely a hypothetical control flow starting from {{src/tests/http_fault_tolerance_tests.cpp:872}}
{noformat}
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googlemock/include/gmock/gmock-spec-builders.h:1272:5: warning: Use of memory after it is freed [clang-analyzer-cplusplus.NewDelete]
    return function_mocker_->AddNewExpectation(
    ^
/tmp/SRC/src/tests/http_fault_tolerance_tests.cpp:872:3: note: Calling 'MockSpec::InternalExpectedAt'
  EXPECT_CALL(*scheduler, connected(_))
  ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googlemock/include/gmock/gmock-spec-builders.h:1845:32: note: expanded from macro 'EXPECT_CALL'
#define EXPECT_CALL(obj, call) GMOCK_EXPECT_CALL_IMPL_(obj, call)
                               ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googlemock/include/gmock/gmock-spec-builders.h:1844:5: note: expanded from macro 'GMOCK_EXPECT_CALL_IMPL_'
    ((obj).gmock_##call).InternalExpectedAt(__FILE__, __LINE__, #obj, #call)
    ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googlemock/include/gmock/gmock-spec-builders.h:1272:12: note: Calling 'FunctionMockerBase::AddNewExpectation'
    return function_mocker_->AddNewExpectation(
           ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googlemock/include/gmock/gmock-spec-builders.h:1609:9: note: Memory is allocated
        new TypedExpectation<F>(this, file, line, source_text, m);
        ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googlemock/include/gmock/gmock-spec-builders.h:1615:9: note: Assuming 'implicit_sequence' is equal to NULL
    if (implicit_sequence != NULL) {
        ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googlemock/include/gmock/gmock-spec-builders.h:1615:5: note: Taking false branch
    if (implicit_sequence != NULL) {
    ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googlemock/include/gmock/gmock-spec-builders.h:1619:13: note: Calling '~linked_ptr'
    return *expectation;
            ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googletest/include/gtest/internal/gtest-linked_ptr.h:153:19: note: Calling 'linked_ptr::depart'
  ~linked_ptr() { depart(); }
                  ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googletest/include/gtest/internal/gtest-linked_ptr.h:205:5: note: Taking true branch
    if (link_.depart()) delete value_;
    ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googletest/include/gtest/internal/gtest-linked_ptr.h:205:25: note: Memory is released
    if (link_.depart()) delete value_;
                        ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googletest/include/gtest/internal/gtest-linked_ptr.h:153:19: note: Returning; memory was released
  ~linked_ptr() { depart(); }
                  ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googlemock/include/gmock/gmock-spec-builders.h:1619:13: note: Returning from '~linked_ptr'
    return *expectation;
            ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googlemock/include/gmock/gmock-spec-builders.h:1272:12: note: Returning; memory was released
    return function_mocker_->AddNewExpectation(
           ^
/BUILD/3rdparty/googletest-1.8.0/src/googletest-1.8.0/googlemock/include/gmock/gmock-spec-builders.h:1272:5: note: Use of memory after it is freed
    return function_mocker_->AddNewExpectation(
    ^
{noformat}
There are what seems to be equivalent output for the following places:
{noformat}
/tmp/SRC/src/tests/uri_fetcher_tests.cpp:140:3: note: Calling 'MockSpec::InternalExpectedAt'
  EXPECT_CALL(server, test(_))
  ^
{noformat}
{noformat}
/tmp/SRC/src/tests/default_executor_tests.cpp:2042:3: note: Calling 'MockSpec::InternalExpectedAt'
  EXPECT_CALL(*scheduler, connected(_))
  ^
{noformat}
{noformat}
/tmp/SRC/src/tests/scheduler_tests.cpp:2037:3: note: Calling 'MockSpec::InternalExpectedAt'
  EXPECT_CALL(*scheduler, connected(_))
  ^
{noformat}
{noformat}
/tmp/SRC/src/tests/fetcher_tests.cpp:535:3: note: Calling 'MockSpec::InternalExpectedAt'
  EXPECT_CALL(*http.process, test(_))
  ^
{noformat}
Of all the {{EXPECT_CALL}} s in the codebase, these are the only instances that are pointed out. It is still unclear that there's an issue here, but it seems worth checking out, especially since these files are known-flaky.

Observed the same today in `MesosContainerizer/DefaultExecutorTest.ROOT_ContainerStatusForTask/0`:
{noformat}
[ RUN      ] MesosContainerizer/DefaultExecutorTest.ROOT_ContainerStatusForTask/0
[...]
I1210 18:51:52.317384  2570 default_executor.cpp:1126] Killing task 2506c623-0270-4126-aa0c-8eeda080e50d running in child container a1b3cf45-7361-484f-8095-4ae69dd5e777.17e50b81-46a7-4225-9c33-a0bf024618ec with SIGTERM signal
I1210 18:51:52.317389  2570 default_executor.cpp:1137] Scheduling escalation to SIGKILL in 3secs from now
I1210 18:51:52.317608  2570 default_executor.cpp:1126] Killing task 40e69403-db71-4902-af53-746d445a7489 running in child container a1b3cf45-7361-484f-8095-4ae69dd5e777.c544a951-c629-492a-bc09-b1a6c72740e2 with SIGTERM signal
I1210 18:51:52.317620  2570 default_executor.cpp:1137] Scheduling escalation to SIGKILL in 3secs from now
I1210 18:51:52.318428 15462 process.cpp:3588] Handling HTTP event for process 'slave(1107)' with path: '/slave(1107)/api/v1'
I1210 18:51:52.318593 15461 process.cpp:3588] Handling HTTP event for process 'slave(1107)' with path: '/slave(1107)/api/v1'
*** Aborted at 1544467912 (unix time) try "date -d @1544467912" if you are using GNU date ***
I1210 18:51:52.319488 15461 http.cpp:1157] HTTP POST for /slave(1107)/api/v1 from 172.16.10.38:60672
I1210 18:51:52.319586 15461 http.cpp:1157] HTTP POST for /slave(1107)/api/v1 from 172.16.10.38:60673
I1210 18:51:52.319697 15461 http.cpp:2797] Processing KILL_NESTED_CONTAINER call for container 'a1b3cf45-7361-484f-8095-4ae69dd5e777.17e50b81-46a7-4225-9c33-a0bf024618ec'
I1210 18:51:52.319808 15461 http.cpp:2797] Processing KILL_NESTED_CONTAINER call for container 'a1b3cf45-7361-484f-8095-4ae69dd5e777.c544a951-c629-492a-bc09-b1a6c72740e2'
I1210 18:51:52.319927 15461 containerizer.cpp:2839] Sending Terminated to container a1b3cf45-7361-484f-8095-4ae69dd5e777.17e50b81-46a7-4225-9c33-a0bf024618ec in RUNNING state
I1210 18:51:52.320010 15460 containerizer.cpp:2839] Sending Terminated to container a1b3cf45-7361-484f-8095-4ae69dd5e777.c544a951-c629-492a-bc09-b1a6c72740e2 in RUNNING state
PC: @     0x7fd51d72d013 mesos::v1::scheduler::Mesos::send()
*** SIGSEGV (@0x0) received by PID 23718 (TID 0x7fd50f38b700) from PID 0; stack trace: ***
    @     0x7fd4e614aabc (unknown)
    @     0x7fd4e614f751 (unknown)
    @     0x7fd4e6142f58 (unknown)
    @     0x7fd51a3ae890 (unknown)
    @     0x7fd51d72d013 mesos::v1::scheduler::Mesos::send()
    @     0x558cee3c1808 _ZNK5mesos8internal5tests2v19scheduler23SendAcknowledgeActionP2INS_2v111FrameworkIDENS5_7AgentIDEE10gmock_ImplIFvPNS5_9scheduler5MesosERKNSA_12Event_UpdateEEE17gmock_PerformImplISC_SF_N7testing8internal12ExcessiveArgESL_SL_SL_SL_SL_SL_SL_EEvRKSt5tupleIJSC_SF_EET_T0_T1_T2_T3_T4_T5_T6_T7_T8_
    @     0x558cee3c1990 _ZN5mesos8internal5tests2v19scheduler23SendAcknowledgeActionP2INS_2v111FrameworkIDENS5_7AgentIDEE10gmock_ImplIFvPNS5_9scheduler5MesosERKNSA_12Event_UpdateEEE7PerformERKSt5tupleIJSC_SF_EE
    @     0x558cee2c430f _ZN7testing8internal12DoBothActionI17PromiseArgActionPILi1EPN7process7PromiseIN5mesos2v19scheduler12Event_UpdateEEEENS5_8internal5tests2v19scheduler23SendAcknowledgeActionP2INS6_11FrameworkIDENS6_7AgentIDEEEE4ImplIFvPNS7_5MesosERKS8_EE7PerformERKSt5tupleIJSN_SP_EE
    @     0x558cee2e9f57 testing::internal::FunctionMockerBase<>::UntypedPerformAction()
    @     0x558cef7b184f testing::internal::UntypedFunctionMockerBase::UntypedInvokeWith()
    @     0x558cee3d075d mesos::internal::tests::scheduler::MockHTTPScheduler<>::events()
    @     0x558cee34cda0 std::_Function_handler<>::_M_invoke()
    @     0x7fd51d731098 process::AsyncExecutorProcess::execute<>()
    @     0x7fd51d74061b _ZN5cpp176invokeIZN7process8dispatchI7NothingNS1_20AsyncExecutorProcessERKSt8functionIFvRKSt5queueIN5mesos2v19scheduler5EventESt5dequeISA_SaISA_EEEEESE_SK_RSE_EENS1_6FutureIT_EERKNS1_3PIDIT0_EEMSQ_FSN_T1_T2_EOT3_OT4_EUlSt10unique_ptrINS1_7PromiseIS3_EESt14default_deleteIS14_EEOSI_OSE_PNS1_11ProcessBaseEE_IS17_SI_SE_S1B_EEEDTclcl7forwardISN_Efp_Espcl7forwardIT0_Efp0_EEEOSN_DpOS1D_
    @     0x7fd51e5205d1 process::ProcessBase::consume()
    @     0x7fd51e537543 process::ProcessManager::resume()
    @     0x7fd51e53d116 _ZNSt6thread5_ImplISt12_Bind_simpleIFZN7process14ProcessManager12init_threadsEvEUlvE_vEEE6_M_runEv
    @     0x7fd51ab89970 (unknown)
    @     0x7fd51a3a7064 start_thread
    @     0x7fd51a0dc62d (unknown)
E1210 18:51:52.501421  2574 default_executor.cpp:801] Connection for waiting on child container a1b3cf45-7361-484f-8095-4ae69dd5e777.17e50b81-46a7-4225-9c33-a0bf024618ec of task '2506c623-0270-4126-aa0c-8eeda080e50d' interrupted: Disconnected
{noformat}

Observed with {{MesosContainerizer/DefaultExecutorTest.ROOT_INTERNET_CURL_DockerTaskWithFileURI/0}}:
{noformat}
01:06:55 I1214 01:06:55.865653 29390 scheduler.cpp:845] Enqueuing event UPDATE received from http://172.16.10.62:35809/master/api/v1/scheduler
01:06:55 I1214 01:06:55.865679 29387 slave.cpp:5689] Task status update manager successfully handled status update TASK_FINISHED (Status UUID: 21f8cdb2-04a0-4780-8d89-54776d3e68ac) for task 555ef8a2-cb55-47de-a8f6-c2763c6de745 of framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000
01:06:55 *** Aborted at 1544749615 (unix time) try "date -d @1544749615" if you are using GNU date ***
01:06:55 PC: @     0x7fab0ad11d23 mesos::v1::scheduler::Mesos::send()
01:06:55 I1214 01:06:55.869730 29392 master.cpp:1390] Framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000 (default) disconnected
01:06:55 I1214 01:06:55.869750 29392 master.cpp:3241] Deactivating framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000 (default)
01:06:55 I1214 01:06:55.869771 29392 master.cpp:3218] Disconnecting framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000 (default)
01:06:55 I1214 01:06:55.869781 29392 master.cpp:1405] Giving framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000 (default) 0ns to failover
01:06:55 I1214 01:06:55.869849 29389 hierarchical.cpp:418] Deactivated framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000
01:06:55 I1214 01:06:55.869964 29391 master.cpp:9296] Framework failover timeout, removing framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000 (default)
01:06:55 I1214 01:06:55.869979 29391 master.cpp:10233] Removing framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000 (default)
01:06:55 I1214 01:06:55.870019 29391 master.cpp:10968] Updating the state of task 555ef8a2-cb55-47de-a8f6-c2763c6de745 of framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000 (latest state: TASK_FINISHED, status update state: TASK_KILLED)
01:06:55 I1214 01:06:55.870038 29391 master.cpp:11066] Removing task 555ef8a2-cb55-47de-a8f6-c2763c6de745 with resources cpus(allocated: *):0.1; mem(allocated: *):32; disk(allocated: *):32 of framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000 on agent ed4b332a-fa42-4c3e-9dae-67e0f601385d-S0 at slave(1078)@172.16.10.62:35809 (ip-172-16-10-62.ec2.internal)
01:06:55 I1214 01:06:55.870173 29391 master.cpp:11103] Removing executor 'default' with resources cpus(allocated: *):0.1; mem(allocated: *):32; disk(allocated: *):32 of framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000 on agent ed4b332a-fa42-4c3e-9dae-67e0f601385d-S0 at slave(1078)@172.16.10.62:35809 (ip-172-16-10-62.ec2.internal)
01:06:55 I1214 01:06:55.870316 29391 slave.cpp:3912] Asked to shut down framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000 by master@172.16.10.62:35809
01:06:55 I1214 01:06:55.870329 29391 slave.cpp:3937] Shutting down framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000
01:06:55 I1214 01:06:55.870339 29391 slave.cpp:6723] Shutting down executor 'default' of framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000 (via HTTP)
01:06:55 I1214 01:06:55.870524 29389 hierarchical.cpp:1238] Recovered cpus(allocated: *):0.1; mem(allocated: *):32; disk(allocated: *):32 (total: cpus:2; mem:1024; disk:1024; ports:[31000-32000], allocated: {}) on agent ed4b332a-fa42-4c3e-9dae-67e0f601385d-S0 from framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000
01:06:55 I1214 01:06:55.870702 29389 hierarchical.cpp:357] Removed framework ed4b332a-fa42-4c3e-9dae-67e0f601385d-0000
01:06:55 *** SIGSEGV (@0x0) received by PID 29367 (TID 0x7faaffa32700) from PID 0; stack trace: ***
01:06:55     @     0x7faaedecdde7 (unknown)
01:06:55     @     0x7faaeded5385 (unknown)
01:06:55     @     0x7faaedeca583 (unknown)
01:06:55     @     0x7fab088337e0 (unknown)
01:06:55     @     0x7fab0ad11d23 mesos::v1::scheduler::Mesos::send()
01:06:55     @     0x55df576c3e66 _ZNK5mesos8internal5tests2v19scheduler23SendAcknowledgeActionP2INS_2v111FrameworkIDENS5_7AgentIDEE10gmock_ImplIFvPNS5_9scheduler5MesosERKNSA_12Event_UpdateEEE17gmock_PerformImplISC_SF_N7testing8internal12ExcessiveArgESL_SL_SL_SL_SL_SL_SL_EEvRKSt5tupleIJSC_SF_EET_T0_T1_T2_T3_T4_T5_T6_T7_T8_
01:06:55     @     0x55df576c3fda _ZN5mesos8internal5tests2v19scheduler23SendAcknowledgeActionP2INS_2v111FrameworkIDENS5_7AgentIDEE10gmock_ImplIFvPNS5_9scheduler5MesosERKNSA_12Event_UpdateEEE7PerformERKSt5tupleIJSC_SF_EE
01:06:55     @     0x55df5765488e _ZNK7testing6ActionIFvPN5mesos2v19scheduler5MesosERKNS3_12Event_UpdateEEE7PerformERKSt5tupleIJS5_S8_EE
01:06:55     @     0x55df5765488e _ZNK7testing6ActionIFvPN5mesos2v19scheduler5MesosERKNS3_12Event_UpdateEEE7PerformERKSt5tupleIJS5_S8_EE
01:06:55     @     0x55df57654951 testing::internal::FunctionMockerBase<>::UntypedPerformAction()
01:06:55     @     0x55df58b371ec testing::internal::UntypedFunctionMockerBase::UntypedInvokeWith()
01:06:55     @     0x55df576d2b8a mesos::internal::tests::scheduler::MockHTTPScheduler<>::events()
01:06:55     @     0x55df57644c23 std::_Function_handler<>::_M_invoke()
01:06:55     @     0x7fab0ad16b48 process::AsyncExecutorProcess::execute<>()
01:06:55     @     0x7fab0ad20bdd _ZNO6lambda12CallableOnceIFvPN7process11ProcessBaseEEE10CallableFnINS_8internal7PartialIZNS1_8dispatchI7NothingNS1_20AsyncExecutorProcessERKSt8functionIFvRKSt5queueIN5mesos2v19scheduler5EventESt5dequeISH_SaISH_EEEEESL_SR_RSL_EENS1_6FutureIT_EERKNS1_3PIDIT0_EEMSX_FSU_T1_T2_EOT3_OT4_EUlSt10unique_ptrINS1_7PromiseISA_EESt14default_deleteIS1B_EEOSP_OSL_S3_E_JS1E_SP_SL_St12_PlaceholderILi1EEEEEEclEOS3_
01:06:55     @     0x7fab0bb35f01 process::ProcessBase::consume()
01:06:55     @     0x7fab0bb4abea process::ProcessManager::resume()
01:06:55     @     0x7fab0bb4ebb6 _ZNSt6thread11_State_implISt12_Bind_simpleIFZN7process14ProcessManager12init_threadsEvEUlvE_vEEE6_M_runEv
01:06:55     @     0x7fab0bdfb9cf execute_native_thread_routine
01:06:55     @     0x7fab0882baa1 start_thread
01:06:55     @     0x7fab07bd0c4d clone
{noformat}

Observed this with LauncherAndIsolationParam/PersistentVolumeDefaultExecutor.ROOT_TaskGroupsSharingViaSandboxVolumes/2

{code}
...
...
I0206 05:23:37.884572 19578 task_status_update_manager.cpp:383] Forwarding task status update TASK_FINISHED (Status UUID: 2612f9b7-a190-4924-b40a-8193bced2dd8) for task producer o
f framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 to the agent
I0206 05:23:37.884624 19578 slave.cpp:5808] Forwarding the update TASK_FINISHED (Status UUID: 2612f9b7-a190-4924-b40a-8193bced2dd8) for task producer of framework ffd3400c-13b0-4d
40-b63a-f4d3efc720de-0000 to master@172.16.10.36:45979
I0206 05:23:37.884678 19578 slave.cpp:5701] Task status update manager successfully handled status update TASK_FINISHED (Status UUID: 2612f9b7-a190-4924-b40a-8193bced2dd8) for tas
k producer of framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000
I0206 05:23:37.884764 19578 master.cpp:8516] Status update TASK_FINISHED (Status UUID: 2612f9b7-a190-4924-b40a-8193bced2dd8) for task producer of framework ffd3400c-13b0-4d40-b63a
-f4d3efc720de-0000 from agent ffd3400c-13b0-4d40-b63a-f4d3efc720de-S0 at slave(1170)@172.16.10.36:45979 (ip-172-16-10-36.ec2.internal)
I0206 05:23:37.884784 19578 master.cpp:8573] Forwarding status update TASK_FINISHED (Status UUID: 2612f9b7-a190-4924-b40a-8193bced2dd8) for task producer of framework ffd3400c-13b
0-4d40-b63a-f4d3efc720de-0000
I0206 05:23:37.884881 19578 master.cpp:11210] Updating the state of task producer of framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 (latest state: TASK_FINISHED, status updat
e state: TASK_FINISHED)
I0206 05:23:37.885048 19577 hierarchical.cpp:1230] Recovered cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.1; mem(allocated: default-role)
(reservations: [(DYNAMIC,default-role,test-principal)]):32; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32 (total: cpus:1.7; mem:928; disk
:928; ports:[31000-32000]; cpus(reservations: [(DYNAMIC,default-role,test-principal)]):0.3; mem(reservations: [(DYNAMIC,default-role,test-principal)]):96; disk(reservations: [(DYN
AMIC,default-role,test-principal)]):95; disk(reservations: [(DYNAMIC,default-role,test-principal)])[executor:executor_volume_path]:1, allocated: disk(allocated: default-role)(rese
rvations: [(DYNAMIC,default-role,test-principal)])[executor:executor_volume_path]:1; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):63; mem(a
llocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):64; cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.2) on age
nt ffd3400c-13b0-4d40-b63a-f4d3efc720de-S0 from framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000
I0206 05:23:37.885195 19572 scheduler.cpp:845] Enqueuing event UPDATE received from http://172.16.10.36:45979/master/api/v1/scheduler
I0206 05:23:37.885380 19571 scheduler.cpp:248] Sending ACKNOWLEDGE call to http://172.16.10.36:45979/master/api/v1/scheduler
I0206 05:23:37.885645 19572 task_status_update_manager.cpp:328] Received task status update TASK_FINISHED (Status UUID: 2dd9e000-d74f-4d94-ad72-0b3177773492) for task consumer of 
framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000
I0206 05:23:37.885682 19572 task_status_update_manager.cpp:383] Forwarding task status update TASK_FINISHED (Status UUID: 2dd9e000-d74f-4d94-ad72-0b3177773492) for task consumer o
f framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 to the agent
I0206 05:23:37.885735 19572 slave.cpp:5808] Forwarding the update TASK_FINISHED (Status UUID: 2dd9e000-d74f-4d94-ad72-0b3177773492) for task consumer of framework ffd3400c-13b0-4d
40-b63a-f4d3efc720de-0000 to master@172.16.10.36:45979
I0206 05:23:37.885792 19572 slave.cpp:5701] Task status update manager successfully handled status update TASK_FINISHED (Status UUID: 2dd9e000-d74f-4d94-ad72-0b3177773492) for tas
k consumer of framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000
I0206 05:23:37.885802 19578 process.cpp:3588] Handling HTTP event for process 'master' with path: '/master/api/v1/scheduler'
I0206 05:23:37.885885 19578 master.cpp:8516] Status update TASK_FINISHED (Status UUID: 2dd9e000-d74f-4d94-ad72-0b3177773492) for task consumer of framework ffd3400c-13b0-4d40-b63a
-f4d3efc720de-0000 from agent ffd3400c-13b0-4d40-b63a-f4d3efc720de-S0 at slave(1170)@172.16.10.36:45979 (ip-172-16-10-36.ec2.internal)
I0206 05:23:37.885905 19578 master.cpp:8573] Forwarding status update TASK_FINISHED (Status UUID: 2dd9e000-d74f-4d94-ad72-0b3177773492) for task consumer of framework ffd3400c-13b
0-4d40-b63a-f4d3efc720de-0000
I0206 05:23:37.885991 19578 master.cpp:11210] Updating the state of task consumer of framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 (latest state: TASK_FINISHED, status updat
e state: TASK_FINISHED)
I0206 05:23:37.886134 19578 hierarchical.cpp:1230] Recovered cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.1; mem(allocated: default-role)
(reservations: [(DYNAMIC,default-role,test-principal)]):32; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32 (total: cpus:1.7; mem:928; disk
:928; ports:[31000-32000]; cpus(reservations: [(DYNAMIC,default-role,test-principal)]):0.3; mem(reservations: [(DYNAMIC,default-role,test-principal)]):96; disk(reservations: [(DYN
AMIC,default-role,test-principal)]):95; disk(reservations: [(DYNAMIC,default-role,test-principal)])[executor:executor_volume_path]:1, allocated: disk(allocated: default-role)(rese
rvations: [(DYNAMIC,default-role,test-principal)])[executor:executor_volume_path]:1; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):31; mem(a
llocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32; cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.1) on age
nt ffd3400c-13b0-4d40-b63a-f4d3efc720de-S0 from framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000
I0206 05:23:37.886597 19577 scheduler.cpp:845] Enqueuing event UPDATE received from http://172.16.10.36:45979/master/api/v1/scheduler
I0206 05:23:37.887490 19573 master.cpp:1384] Framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 (default) disconnected
I0206 05:23:37.887507 19573 master.cpp:3255] Deactivating framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 (default)
I0206 05:23:37.887521 19573 master.cpp:3232] Disconnecting framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 (default)
I0206 05:23:37.887529 19573 master.cpp:1399] Giving framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 (default) 0ns to failover
I0206 05:23:37.887567 19573 hierarchical.cpp:419] Deactivated framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000
I0206 05:23:37.887969 19575 master.cpp:9509] Framework failover timeout, removing framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 (default)
I0206 05:23:37.887985 19575 master.cpp:10449] Removing framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 (default)
I0206 05:23:37.888017 19575 master.cpp:11210] Updating the state of task consumer of framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 (latest state: TASK_FINISHED, status updat
e state: TASK_KILLED)
I0206 05:23:37.888039 19575 master.cpp:11308] Removing task consumer with resources cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.1; mem(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32 of framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 on agent ffd3400c-13b0-4d40-b63a-f4d3efc720de-S0 at slave(1170)@172.16.10.36:45979 (ip-172-16-10-36.ec2.internal)
I0206 05:23:37.888121 19575 master.cpp:11210] Updating the state of task producer of framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 (latest state: TASK_FINISHED, status update state: TASK_KILLED)
I0206 05:23:37.888139 19575 master.cpp:11308] Removing task producer with resources cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.1; mem(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32 of framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 on agent ffd3400c-13b0-4d40-b63a-f4d3efc720de-S0 at slave(1170)@172.16.10.36:45979 (ip-172-16-10-36.ec2.internal)
I0206 05:23:37.888237 19575 master.cpp:11345] Removing executor 'default' with resources cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.1; mem(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):31; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)])[executor:executor_volume_path]:1 of framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 on agent ffd3400c-13b0-4d40-b63a-f4d3efc720de-S0 at slave(1170)@172.16.10.36:45979 (ip-172-16-10-36.ec2.internal)
I0206 05:23:37.888494 19575 slave.cpp:3912] Asked to shut down framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 by master@172.16.10.36:45979
I0206 05:23:37.888509 19575 slave.cpp:3937] Shutting down framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000
I0206 05:23:37.888519 19575 slave.cpp:6735] Shutting down executor 'default' of framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000 (via HTTP)
I0206 05:23:37.888630 19575 hierarchical.cpp:1230] Recovered cpus(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):0.1; mem(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):32; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)]):31; disk(allocated: default-role)(reservations: [(DYNAMIC,default-role,test-principal)])[executor:executor_volume_path]:1 (total: cpus:1.7; mem:928; disk:928; ports:[31000-32000]; cpus(reservations: [(DYNAMIC,default-role,test-principal)]):0.3; mem(reservations: [(DYNAMIC,default-role,test-principal)]):96; disk(reservations: [(DYNAMIC,default-role,test-principal)]):95; disk(reservations: [(DYNAMIC,default-role,test-principal)])[executor:executor_volume_path]:1, allocated: {}) on agent ffd3400c-13b0-4d40-b63a-f4d3efc720de-S0 from framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000
I0206 05:23:37.888712 19575 hierarchical.cpp:358] Removed framework ffd3400c-13b0-4d40-b63a-f4d3efc720de-0000
I0206 05:23:37.888762 19575 process.cpp:3650] Failed to process request for '/master/api/v1/scheduler': discarded
*** Aborted at 1549430617 (unix time) try "date -d @1549430617" if you are using GNU date ***
PC: @     0x7fa52525e3f3 mesos::v1::scheduler::Mesos::send()
*** SIGSEGV (@0x0) received by PID 28957 (TID 0x7fa517c2d700) from PID 0; stack trace: ***
    @     0x7fa4ee96c40d (unknown)
    @     0x7fa4ee970f19 (unknown)
    @     0x7fa4ee964d88 (unknown)
    @     0x7fa521e43330 (unknown)
    @     0x7fa52525e3f3 mesos::v1::scheduler::Mesos::send()
    @     0x7fa527b7a596 _ZNK5mesos8internal5tests2v19scheduler23SendAcknowledgeActionP2INS_2v111FrameworkIDENS5_7AgentIDEE10gmock_ImplIFvPNS5_9scheduler5MesosERKNSA_12Event_UpdateEEE17gmock_PerformImplISC_SF_N7testing8internal12ExcessiveArgESL_SL_SL_SL_SL_SL_SL_EEvRKSt5tupleIJSC_SF_EET_T0_T1_T2_T3_T4_T5_T6_T7_T8_
    @     0x7fa527b7a717 _ZN5mesos8internal5tests2v19scheduler23SendAcknowledgeActionP2INS_2v111FrameworkIDENS5_7AgentIDEE10gmock_ImplIFvPNS5_9scheduler5MesosERKNSA_12Event_UpdateEEE7PerformERKSt5tupleIJSC_SF_EE
    @     0x7fa527a8c45f _ZN7testing8internal12DoBothActionI17PromiseArgActionPILi1EPN7process7PromiseIN5mesos2v19scheduler12Event_UpdateEEEENS5_8internal5tests2v19scheduler23SendAcknowledgeActionP2INS6_11FrameworkIDENS6_7AgentIDEEEE4ImplIFvPNS7_5MesosERKS8_EE7PerformERKSt5tupleIJSN_SP_EE
    @     0x7fa527ab4ff4 testing::internal::FunctionMockerBase<>::UntypedPerformAction()
    @     0x7fa528e89717 testing::internal::UntypedFunctionMockerBase::UntypedInvokeWith()
    @     0x7fa527b7c1e2 mesos::internal::tests::scheduler::MockHTTPScheduler<>::events()
    @     0x7fa527b13af1 std::_Function_handler<>::_M_invoke()
    @     0x7fa525262c78 process::AsyncExecutorProcess::execute<>()
    @     0x7fa52526da9d _ZNO6lambda12CallableOnceIFvPN7process11ProcessBaseEEE10CallableFnINS_8internal7PartialIZNS1_8dispatchI7NothingNS1_20AsyncExecutorProcessERKSt8functionIFvRKSt5queueIN5mesos2v19scheduler5EventESt5dequeISH_SaISH_EEEEESL_SR_RSL_EENS1_6FutureIT_EERKNS1_3PIDIT0_EEMSX_FSU_T1_T2_EOT3_OT4_EUlSt10unique_ptrINS1_7PromiseISA_EESt14default_deleteIS1B_EEOSP_OSL_S3_E_IS1E_SP_SL_St12_PlaceholderILi1EEEEEEclEOS3_
    @     0x7fa525fcc261 process::ProcessBase::consume()
    @     0x7fa525fdf48c process::ProcessManager::resume()
    @     0x7fa525fe4e56 _ZNSt6thread5_ImplISt12_Bind_simpleIFZN7process14ProcessManager12init_threadsEvEUlvE_vEEE6_M_runEv
    @     0x7fa52261ea60 (unknown)
    @     0x7fa521e3b184 start_thread
    @     0x7fa521b6803d (unknown)
timeout: the monitored command dumped core
The test binary has crashed OR the timeout has been exceeded!
{code}

