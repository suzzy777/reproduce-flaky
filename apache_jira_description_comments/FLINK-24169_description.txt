While working on [PR #16989|https://github.com/apache/flink/pull/16989] for FLINK-23611, we experienced some flakiness when running {{YARNSessionCapacitySchedulerITCase.testDetachedPerJobYarnCluster}} locally.

[~dmvk] discovered a bug in log4j (see [LOG4J2-3155|https://issues.apache.org/jira/browse/LOG4J2-3155]). The bug affects the test because they check the log files for specific log messages. The log messages ends up in the wrong log file if the rolling update mechanism is trigger. This does not seem to be an issue on AzureCI due to the slower hardware used for the worker machines.

A solution to overcome this issue would be to add a custom log4j configuration that disables the {{appender.main.policies.startup.type = OnStartupTriggeringPolicy}} which is present in {{flink-dist}}'s log4j configuration.