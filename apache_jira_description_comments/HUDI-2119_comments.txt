prashantwason opened a new pull request #3210:
URL: https://github.com/apache/hudi/pull/3210


   If the rolled-back instant was synced to the Metadata Table, a corresponding deltacommit with the same timestamp should have been created on the Metadata Table timeline. To ensure we can always perform this check, the Metadata Table instants should not be archived until their corresponding instants are present in the dataset timeline.
   
   ## *Tips*
   - *Thank you very much for contributing to Apache Hudi.*
   - *Please review https://hudi.apache.org/contributing.html before opening a pull request.*
   
   ## What is the purpose of the pull request
   
   
   ## Brief change log
   1. Check that the instant-being-rolled-back was commited to metadata table
   2. Keep larger number of instants in the metadata table timeline so the above check can be performed.
   
   ## Verify this pull request
   
   This pull request is already covered by existing tests for Metadata Table
   
   This change added tests to TestHoodieBackedMetadata
   
   ## Committer checklist
   
    - [ ] Has a corresponding JIRA in PR title & commit
    
    - [ ] Commit message is descriptive of the change
    
    - [ ] CI is green
   
    - [ ] Necessary doc changes done or have another open PR
          
    - [ ] For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot commented on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 9d104830439f5bbe589599d9a3bb5dd6f140f223 UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 9d104830439f5bbe589599d9a3bb5dd6f140f223 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


codecov-commenter commented on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872684476


   # [Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report
   > Merging [#3210](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9d10483) into [master](https://codecov.io/gh/apache/hudi/commit/6eca06d074520140d7bc67b48bd2b9a5b76f0a87?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6eca06d) will **increase** coverage by `2.23%`.
   > The diff coverage is `n/a`.
   
   [![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/3210/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)
   
   ```diff
   @@             Coverage Diff              @@
   ##             master    #3210      +/-   ##
   ============================================
   + Coverage     47.51%   49.74%   +2.23%     
   + Complexity     5429      406    -5023     
   ============================================
     Files           922       67     -855     
     Lines         40968     2985   -37983     
     Branches       4105      320    -3785     
   ============================================
   - Hits          19464     1485   -17979     
   + Misses        19780     1365   -18415     
   + Partials       1724      135    -1589     
   ```
   
   | Flag | Coverage Δ | |
   |---|---|---|
   | hudicli | `?` | |
   | hudiclient | `?` | |
   | hudicommon | `?` | |
   | hudiflink | `?` | |
   | hudihadoopmr | `?` | |
   | hudisparkdatasource | `?` | |
   | hudisync | `?` | |
   | huditimelineservice | `?` | |
   | hudiutilities | `49.74% <ø> (-8.28%)` | :arrow_down: |
   
   Flags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.
   
   | [Impacted Files](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |
   |---|---|---|
   | [...ies/exception/HoodieSnapshotExporterException.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2V4Y2VwdGlvbi9Ib29kaWVTbmFwc2hvdEV4cG9ydGVyRXhjZXB0aW9uLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [.../apache/hudi/utilities/HoodieSnapshotExporter.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL0hvb2RpZVNuYXBzaG90RXhwb3J0ZXIuamF2YQ==) | `5.17% <0.00%> (-83.63%)` | :arrow_down: |
   | [...hudi/utilities/schema/JdbcbasedSchemaProvider.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9KZGJjYmFzZWRTY2hlbWFQcm92aWRlci5qYXZh) | `0.00% <0.00%> (-72.23%)` | :arrow_down: |
   | [...org/apache/hudi/utilities/HDFSParquetImporter.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL0hERlNQYXJxdWV0SW1wb3J0ZXIuamF2YQ==) | `0.00% <0.00%> (-71.82%)` | :arrow_down: |
   | [...he/hudi/utilities/transform/AWSDmsTransformer.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3RyYW5zZm9ybS9BV1NEbXNUcmFuc2Zvcm1lci5qYXZh) | `0.00% <0.00%> (-66.67%)` | :arrow_down: |
   | [...in/java/org/apache/hudi/utilities/UtilHelpers.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL1V0aWxIZWxwZXJzLmphdmE=) | `40.69% <0.00%> (-23.84%)` | :arrow_down: |
   | [...rg/apache/hudi/utilities/HoodieSnapshotCopier.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL0hvb2RpZVNuYXBzaG90Q29waWVyLmphdmE=) | `0.00% <0.00%> (-13.80%)` | :arrow_down: |
   | [...pache/spark/sql/hudi/analysis/HoodieAnalysis.scala](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1zcGFyay1kYXRhc291cmNlL2h1ZGktc3Bhcmsvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvaHVkaS9hbmFseXNpcy9Ib29kaWVBbmFseXNpcy5zY2FsYQ==) | | |
   | [...g/apache/hudi/common/function/FunctionWrapper.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL2Z1bmN0aW9uL0Z1bmN0aW9uV3JhcHBlci5qYXZh) | | |
   | [...pache/hudi/hadoop/HoodieColumnProjectionUtils.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaGFkb29wL0hvb2RpZUNvbHVtblByb2plY3Rpb25VdGlscy5qYXZh) | | |
   | ... and [844 more](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |
   
   ------
   
   [Continue to review full report at Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).
   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)
   > `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`
   > Powered by [Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [6eca06d...9d10483](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).
   


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 9d104830439f5bbe589599d9a3bb5dd6f140f223 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628) 
   * 45925d349630415ee9e10cb8b32ae7fad7f25b25 UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 9d104830439f5bbe589599d9a3bb5dd6f140f223 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628) 
   * 45925d349630415ee9e10cb8b32ae7fad7f25b25 Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 45925d349630415ee9e10cb8b32ae7fad7f25b25 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


codecov-commenter edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872684476


   # [Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report
   > Merging [#3210](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (45925d3) into [master](https://codecov.io/gh/apache/hudi/commit/6eca06d074520140d7bc67b48bd2b9a5b76f0a87?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6eca06d) will **decrease** coverage by `44.62%`.
   > The diff coverage is `0.00%`.
   
   [![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/3210/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)
   
   ```diff
   @@             Coverage Diff              @@
   ##             master   #3210       +/-   ##
   ============================================
   - Coverage     47.51%   2.88%   -44.63%     
   + Complexity     5429      82     -5347     
   ============================================
     Files           922     280      -642     
     Lines         40968   11559    -29409     
     Branches       4105     945     -3160     
   ============================================
   - Hits          19464     334    -19130     
   + Misses        19780   11199     -8581     
   + Partials       1724      26     -1698     
   ```
   
   | Flag | Coverage Δ | |
   |---|---|---|
   | hudicli | `?` | |
   | hudiclient | `0.00% <0.00%> (-34.59%)` | :arrow_down: |
   | hudicommon | `?` | |
   | hudiflink | `?` | |
   | hudihadoopmr | `?` | |
   | hudisparkdatasource | `?` | |
   | hudisync | `5.38% <ø> (-48.67%)` | :arrow_down: |
   | huditimelineservice | `?` | |
   | hudiutilities | `9.31% <ø> (-48.72%)` | :arrow_down: |
   
   Flags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.
   
   | [Impacted Files](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |
   |---|---|---|
   | [...hudi/metadata/HoodieBackedTableMetadataWriter.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jbGllbnQvaHVkaS1jbGllbnQtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL21ldGFkYXRhL0hvb2RpZUJhY2tlZFRhYmxlTWV0YWRhdGFXcml0ZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |
   | [...va/org/apache/hudi/utilities/IdentitySplitter.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL0lkZW50aXR5U3BsaXR0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [...va/org/apache/hudi/utilities/schema/SchemaSet.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TY2hlbWFTZXQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [...a/org/apache/hudi/utilities/sources/RowSource.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvUm93U291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [.../org/apache/hudi/utilities/sources/AvroSource.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQXZyb1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [.../org/apache/hudi/utilities/sources/JsonSource.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvblNvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [...rg/apache/hudi/utilities/sources/CsvDFSSource.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQ3N2REZTU291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [...g/apache/hudi/utilities/sources/JsonDFSSource.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvbkRGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [...apache/hudi/utilities/sources/JsonKafkaSource.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvbkthZmthU291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [...pache/hudi/utilities/sources/ParquetDFSSource.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvUGFycXVldERGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | ... and [750 more](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |
   
   ------
   
   [Continue to review full report at Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).
   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)
   > `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`
   > Powered by [Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [6eca06d...45925d3](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).
   


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


codecov-commenter edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872684476


   # [Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report
   > Merging [#3210](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (45925d3) into [master](https://codecov.io/gh/apache/hudi/commit/6eca06d074520140d7bc67b48bd2b9a5b76f0a87?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6eca06d) will **decrease** coverage by `32.03%`.
   > The diff coverage is `0.00%`.
   
   [![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/3210/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)
   
   ```diff
   @@              Coverage Diff              @@
   ##             master    #3210       +/-   ##
   =============================================
   - Coverage     47.51%   15.47%   -32.04%     
   + Complexity     5429      479     -4950     
   =============================================
     Files           922      280      -642     
     Lines         40968    11559    -29409     
     Branches       4105      945     -3160     
   =============================================
   - Hits          19464     1789    -17675     
   + Misses        19780     9612    -10168     
   + Partials       1724      158     -1566     
   ```
   
   | Flag | Coverage Δ | |
   |---|---|---|
   | hudicli | `?` | |
   | hudiclient | `0.00% <0.00%> (-34.59%)` | :arrow_down: |
   | hudicommon | `?` | |
   | hudiflink | `?` | |
   | hudihadoopmr | `?` | |
   | hudisparkdatasource | `?` | |
   | hudisync | `5.38% <ø> (-48.67%)` | :arrow_down: |
   | huditimelineservice | `?` | |
   | hudiutilities | `58.05% <ø> (+0.03%)` | :arrow_up: |
   
   Flags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.
   
   | [Impacted Files](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |
   |---|---|---|
   | [...hudi/metadata/HoodieBackedTableMetadataWriter.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jbGllbnQvaHVkaS1jbGllbnQtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL21ldGFkYXRhL0hvb2RpZUJhY2tlZFRhYmxlTWV0YWRhdGFXcml0ZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |
   | [...main/java/org/apache/hudi/metrics/HoodieGauge.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jbGllbnQvaHVkaS1jbGllbnQtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL21ldHJpY3MvSG9vZGllR2F1Z2UuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [.../org/apache/hudi/hive/NonPartitionedExtractor.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1zeW5jL2h1ZGktaGl2ZS1zeW5jL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL2hpdmUvTm9uUGFydGl0aW9uZWRFeHRyYWN0b3IuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [.../java/org/apache/hudi/metrics/MetricsReporter.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jbGllbnQvaHVkaS1jbGllbnQtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL21ldHJpY3MvTWV0cmljc1JlcG9ydGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [...a/org/apache/hudi/metrics/MetricsReporterType.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jbGllbnQvaHVkaS1jbGllbnQtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL21ldHJpY3MvTWV0cmljc1JlcG9ydGVyVHlwZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [...rg/apache/hudi/client/bootstrap/BootstrapMode.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jbGllbnQvaHVkaS1jbGllbnQtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL2NsaWVudC9ib290c3RyYXAvQm9vdHN0cmFwTW9kZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [...he/hudi/hive/HiveStylePartitionValueExtractor.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1zeW5jL2h1ZGktaGl2ZS1zeW5jL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL2hpdmUvSGl2ZVN0eWxlUGFydGl0aW9uVmFsdWVFeHRyYWN0b3IuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [.../apache/hudi/keygen/constant/KeyGeneratorType.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jbGllbnQvaHVkaS1jbGllbnQtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL2tleWdlbi9jb25zdGFudC9LZXlHZW5lcmF0b3JUeXBlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [...pache/hudi/client/utils/ConcatenatingIterator.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jbGllbnQvaHVkaS1jbGllbnQtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL2NsaWVudC91dGlscy9Db25jYXRlbmF0aW5nSXRlcmF0b3IuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [...che/hudi/config/HoodieMetricsPrometheusConfig.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jbGllbnQvaHVkaS1jbGllbnQtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL2NvbmZpZy9Ib29kaWVNZXRyaWNzUHJvbWV0aGV1c0NvbmZpZy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | ... and [704 more](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |
   
   ------
   
   [Continue to review full report at Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).
   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)
   > `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`
   > Powered by [Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [6eca06d...45925d3](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).
   


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


codecov-commenter edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872684476


   # [Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report
   > Merging [#3210](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (45925d3) into [master](https://codecov.io/gh/apache/hudi/commit/6eca06d074520140d7bc67b48bd2b9a5b76f0a87?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6eca06d) will **decrease** coverage by `6.00%`.
   > The diff coverage is `0.00%`.
   
   [![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/3210/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)
   
   ```diff
   @@             Coverage Diff              @@
   ##             master    #3210      +/-   ##
   ============================================
   - Coverage     47.51%   41.51%   -6.01%     
   + Complexity     5429     4014    -1415     
   ============================================
     Files           922      748     -174     
     Lines         40968    33175    -7793     
     Branches       4105     3084    -1021     
   ============================================
   - Hits          19464    13771    -5693     
   + Misses        19780    18305    -1475     
   + Partials       1724     1099     -625     
   ```
   
   | Flag | Coverage Δ | |
   |---|---|---|
   | hudicli | `40.00% <ø> (ø)` | |
   | hudiclient | `22.91% <0.00%> (-11.67%)` | :arrow_down: |
   | hudicommon | `48.29% <0.00%> (-0.09%)` | :arrow_down: |
   | hudiflink | `59.91% <ø> (-0.17%)` | :arrow_down: |
   | hudihadoopmr | `51.29% <ø> (ø)` | |
   | hudisparkdatasource | `?` | |
   | hudisync | `5.38% <ø> (-48.67%)` | :arrow_down: |
   | huditimelineservice | `?` | |
   | hudiutilities | `58.05% <ø> (+0.03%)` | :arrow_up: |
   
   Flags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.
   
   | [Impacted Files](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |
   |---|---|---|
   | [...hudi/metadata/HoodieBackedTableMetadataWriter.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jbGllbnQvaHVkaS1jbGllbnQtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL21ldGFkYXRhL0hvb2RpZUJhY2tlZFRhYmxlTWV0YWRhdGFXcml0ZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |
   | [...va/org/apache/hudi/metadata/BaseTableMetadata.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvQmFzZVRhYmxlTWV0YWRhdGEuamF2YQ==) | `0.00% <0.00%> (ø)` | |
   | [...e/hudi/metadata/FileSystemBackedTableMetadata.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvRmlsZVN5c3RlbUJhY2tlZFRhYmxlTWV0YWRhdGEuamF2YQ==) | `89.74% <0.00%> (-2.37%)` | :arrow_down: |
   | [...pache/hudi/metadata/HoodieBackedTableMetadata.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvSG9vZGllQmFja2VkVGFibGVNZXRhZGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |
   | [...he/hudi/metadata/HoodieMetadataFileSystemView.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvSG9vZGllTWV0YWRhdGFGaWxlU3lzdGVtVmlldy5qYXZh) | `0.00% <0.00%> (ø)` | |
   | [.../org/apache/hudi/metadata/HoodieTableMetadata.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvSG9vZGllVGFibGVNZXRhZGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |
   | [.../apache/hudi/metadata/HoodieTableMetadataUtil.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvSG9vZGllVGFibGVNZXRhZGF0YVV0aWwuamF2YQ==) | `0.00% <0.00%> (ø)` | |
   | [...che/hudi/metadata/TimelineMergedTableMetadata.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvVGltZWxpbmVNZXJnZWRUYWJsZU1ldGFkYXRhLmphdmE=) | `0.00% <0.00%> (ø)` | |
   | [.../org/apache/hudi/hive/NonPartitionedExtractor.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1zeW5jL2h1ZGktaGl2ZS1zeW5jL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL2hpdmUvTm9uUGFydGl0aW9uZWRFeHRyYWN0b3IuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | [...he/hudi/hive/HiveStylePartitionValueExtractor.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1zeW5jL2h1ZGktaGl2ZS1zeW5jL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL2hpdmUvSGl2ZVN0eWxlUGFydGl0aW9uVmFsdWVFeHRyYWN0b3IuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |
   | ... and [193 more](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |
   
   ------
   
   [Continue to review full report at Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).
   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)
   > `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`
   > Powered by [Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [6eca06d...45925d3](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).
   


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


codecov-commenter edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872684476


   # [Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report
   > Merging [#3210](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (45925d3) into [master](https://codecov.io/gh/apache/hudi/commit/6eca06d074520140d7bc67b48bd2b9a5b76f0a87?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6eca06d) will **decrease** coverage by `1.82%`.
   > The diff coverage is `0.00%`.
   
   [![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/3210/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)
   
   ```diff
   @@             Coverage Diff              @@
   ##             master    #3210      +/-   ##
   ============================================
   - Coverage     47.51%   45.68%   -1.83%     
   + Complexity     5429     4640     -789     
   ============================================
     Files           922      826      -96     
     Lines         40968    37546    -3422     
     Branches       4105     3751     -354     
   ============================================
   - Hits          19464    17152    -2312     
   + Misses        19780    18813     -967     
   + Partials       1724     1581     -143     
   ```
   
   | Flag | Coverage Δ | |
   |---|---|---|
   | hudicli | `40.00% <ø> (ø)` | |
   | hudiclient | `22.91% <0.00%> (-11.67%)` | :arrow_down: |
   | hudicommon | `48.29% <0.00%> (-0.09%)` | :arrow_down: |
   | hudiflink | `59.91% <ø> (-0.17%)` | :arrow_down: |
   | hudihadoopmr | `51.29% <ø> (ø)` | |
   | hudisparkdatasource | `67.24% <ø> (+0.13%)` | :arrow_up: |
   | hudisync | `54.05% <ø> (ø)` | |
   | huditimelineservice | `64.07% <ø> (ø)` | |
   | hudiutilities | `58.05% <ø> (+0.03%)` | :arrow_up: |
   
   Flags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.
   
   | [Impacted Files](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |
   |---|---|---|
   | [...hudi/metadata/HoodieBackedTableMetadataWriter.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jbGllbnQvaHVkaS1jbGllbnQtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL21ldGFkYXRhL0hvb2RpZUJhY2tlZFRhYmxlTWV0YWRhdGFXcml0ZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |
   | [...va/org/apache/hudi/metadata/BaseTableMetadata.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvQmFzZVRhYmxlTWV0YWRhdGEuamF2YQ==) | `0.00% <0.00%> (ø)` | |
   | [...e/hudi/metadata/FileSystemBackedTableMetadata.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvRmlsZVN5c3RlbUJhY2tlZFRhYmxlTWV0YWRhdGEuamF2YQ==) | `89.74% <0.00%> (-2.37%)` | :arrow_down: |
   | [...pache/hudi/metadata/HoodieBackedTableMetadata.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvSG9vZGllQmFja2VkVGFibGVNZXRhZGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |
   | [...he/hudi/metadata/HoodieMetadataFileSystemView.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvSG9vZGllTWV0YWRhdGFGaWxlU3lzdGVtVmlldy5qYXZh) | `0.00% <0.00%> (ø)` | |
   | [.../org/apache/hudi/metadata/HoodieTableMetadata.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvSG9vZGllVGFibGVNZXRhZGF0YS5qYXZh) | `0.00% <0.00%> (ø)` | |
   | [.../apache/hudi/metadata/HoodieTableMetadataUtil.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvSG9vZGllVGFibGVNZXRhZGF0YVV0aWwuamF2YQ==) | `0.00% <0.00%> (ø)` | |
   | [...che/hudi/metadata/TimelineMergedTableMetadata.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvVGltZWxpbmVNZXJnZWRUYWJsZU1ldGFkYXRhLmphdmE=) | `0.00% <0.00%> (ø)` | |
   | [.../java/org/apache/hudi/table/HoodieTableSource.java](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS90YWJsZS9Ib29kaWVUYWJsZVNvdXJjZS5qYXZh) | `56.64% <0.00%> (-3.25%)` | :arrow_down: |
   | [...ala/org/apache/spark/sql/hudi/HoodieSqlUtils.scala](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-aHVkaS1zcGFyay1kYXRhc291cmNlL2h1ZGktc3Bhcmsvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9zcGFyay9zcWwvaHVkaS9Ib29kaWVTcWxVdGlscy5zY2FsYQ==) | `68.42% <0.00%> (-1.23%)` | :arrow_down: |
   | ... and [106 more](https://codecov.io/gh/apache/hudi/pull/3210/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |
   
   ------
   
   [Continue to review full report at Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).
   > **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)
   > `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`
   > Powered by [Codecov](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [6eca06d...45925d3](https://codecov.io/gh/apache/hudi/pull/3210?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).
   


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r665906425



##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/HoodieMetadataFileSystemView.java
##########
@@ -73,4 +73,16 @@ public void close() {
       throw new HoodieException("Error closing metadata file system view.", e);
     }
   }
+
+  @Override
+  public void sync() {
+    // Sync the tableMetadata first as super.sync() may call listPartition
+    if (tableMetadata != null) {
+      BaseTableMetadata baseMetadata = (BaseTableMetadata)tableMetadata;

Review comment:
       nit: space after `)`. Suprised that checkstyle is happy

##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/BaseTableMetadata.java
##########
@@ -322,8 +303,22 @@ protected HoodieEngineContext getEngineContext() {
     return engineContext != null ? engineContext : new HoodieLocalEngineContext(hadoopConf.get());
   }
 
+  public HoodieMetadataConfig getMetadataConfig() {
+    return metadataConfig;
+  }
+
   protected String getLatestDatasetInstantTime() {
     return datasetMetaClient.getActiveTimeline().filterCompletedInstants().lastInstant()
         .map(HoodieInstant::getTimestamp).orElse(SOLO_COMMIT_TIMESTAMP);
   }
+
+  @Override
+  public Option<String> getSyncedInstantTimeForReader() {
+    if (timelineMergedMetadata == null) {

Review comment:
       Just `return Option.ofNullable(timelineMergedMetadata).map(TimelineMergedTableMetadata::getSyncedInstantTime())` ? Meta point: We can just use the Option APIs like this without explicit checks. 

##########
File path: hudi-client/hudi-client-common/src/main/java/org/apache/hudi/metadata/HoodieBackedTableMetadataWriter.java
##########
@@ -137,6 +138,14 @@ protected HoodieBackedTableMetadataWriter(Configuration hadoopConf, HoodieWriteC
   private HoodieWriteConfig createMetadataWriteConfig(HoodieWriteConfig writeConfig) {
     int parallelism = writeConfig.getMetadataInsertParallelism();
 
+    // The metadata table timeline should always encompass the dataset timeline so that syncing of manual rollbacks can
+    // always check whether the rolled-back-instant was ever synced to the metadata table. Since all actions on the
+    // dataset always lead to a delta-commit on the Metadata Table, we need to preserve enough deltacommits that can
+    // cover total number of all the non-archived actions on the dataset.
+    int multiplier = HoodieTimeline.VALID_ACTIONS_IN_TIMELINE.length;

Review comment:
       why is this multiplier chosen? It's not guaranteed that the timeline will have all valid actions at once right?

##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/HoodieMetadataFileSystemView.java
##########
@@ -73,4 +73,16 @@ public void close() {
       throw new HoodieException("Error closing metadata file system view.", e);
     }
   }
+
+  @Override
+  public void sync() {

Review comment:
       IIUC this is to handle the file system view refreshes

##########
File path: hudi-client/hudi-client-common/src/main/java/org/apache/hudi/metadata/HoodieBackedTableMetadataWriter.java
##########
@@ -137,6 +138,14 @@ protected HoodieBackedTableMetadataWriter(Configuration hadoopConf, HoodieWriteC
   private HoodieWriteConfig createMetadataWriteConfig(HoodieWriteConfig writeConfig) {
     int parallelism = writeConfig.getMetadataInsertParallelism();
 
+    // The metadata table timeline should always encompass the dataset timeline so that syncing of manual rollbacks can
+    // always check whether the rolled-back-instant was ever synced to the metadata table. Since all actions on the
+    // dataset always lead to a delta-commit on the Metadata Table, we need to preserve enough deltacommits that can
+    // cover total number of all the non-archived actions on the dataset.
+    int multiplier = HoodieTimeline.VALID_ACTIONS_IN_TIMELINE.length;

Review comment:
       I wonder if say 8x-ing the retention of the metadata timeline is really necessary.

##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/HoodieTableMetadataUtil.java
##########
@@ -236,30 +239,50 @@
    *
    * During a rollback files may be deleted (COW, MOR) or rollback blocks be appended (MOR only) to files. This
    * function will extract this change file for each partition.
-   *
+   * @param metadataTableTimeline Current timeline of the Metdata Table
    * @param rollbackMetadata {@code HoodieRollbackMetadata}
    * @param partitionToDeletedFiles The {@code Map} to fill with files deleted per partition.
    * @param partitionToAppendedFiles The {@code Map} to fill with files appended per partition and their sizes.
    */
-  private static void processRollbackMetadata(HoodieRollbackMetadata rollbackMetadata,
+  private static void processRollbackMetadata(HoodieTimeline metadataTableTimeline, HoodieRollbackMetadata rollbackMetadata,
                                               Map<String, List<String>> partitionToDeletedFiles,
                                               Map<String, Map<String, Long>> partitionToAppendedFiles,
                                               Option<String> lastSyncTs) {
 
     rollbackMetadata.getPartitionMetadata().values().forEach(pm -> {
+      final String instantToRollback = rollbackMetadata.getCommitsRollback().get(0);
       // Has this rollback produced new files?
       boolean hasRollbackLogFiles = pm.getRollbackLogFiles() != null && !pm.getRollbackLogFiles().isEmpty();
       boolean hasNonZeroRollbackLogFiles = hasRollbackLogFiles && pm.getRollbackLogFiles().values().stream().mapToLong(Long::longValue).sum() > 0;
-      // If commit being rolled back has not been synced to metadata table yet then there is no need to update metadata
+
+      // If instant-to-rollback has not been synced to metadata table yet then there is no need to update metadata
+      // This can happen in two cases:

Review comment:
       thinking back, this kind of complexity , we could avoid. We can just sync the `instant-to-rollback` and then let the rollback actually reverse it, instead?

##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/HoodieBackedTableMetadata.java
##########
@@ -260,6 +265,20 @@ public synchronized void close() throws Exception {
     logRecordScanner = null;
   }
 
+  /**
+   * Return the timestamp of the latest synced instant.
+   */
+  @Override
+  public Option<String> getSyncedInstantTime() {

Review comment:
       seems like same code as in the writer? any chance for code reuse?




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 45925d349630415ee9e10cb8b32ae7fad7f25b25 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664) 
   * 40b0fb75b0cf18dab3559a20a6fa44a3378764fa UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 45925d349630415ee9e10cb8b32ae7fad7f25b25 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664) 
   * 40b0fb75b0cf18dab3559a20a6fa44a3378764fa Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r683865065



##########
File path: hudi-client/hudi-spark-client/src/test/java/org/apache/hudi/client/functional/TestHoodieBackedMetadata.java
##########
@@ -480,6 +482,131 @@ public void testRollbackUnsyncedCommit(HoodieTableType tableType) throws Excepti
       client.syncTableMetadata();
       validateMetadata(client);
     }
+
+    // If an unsynced commit is automatically rolled back during next commit, the rollback commit gets a timestamp
+    // greater than than the new commit which is started. Ensure that in this case the rollback is not processed
+    // as the earlier failed commit would not have been committed.
+    //
+    //  Dataset:   C1        C2         C3.inflight[failed]   C4   R5[rolls back C3]
+    //  Metadata:  C1.delta  C2.delta
+    //
+    // When R5 completes, C3.xxx will be deleted. When C4 completes, C4 and R5 will be committed to Metadata Table in

Review comment:
       I think we are doing this just for sake of maintaining this invariant that, deleting a file that does not exist should be a fatal exception. I think we can just relax this, instead of introducing more complexity. 




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r683866218



##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/HoodieTableMetadataUtil.java
##########
@@ -236,30 +239,50 @@
    *
    * During a rollback files may be deleted (COW, MOR) or rollback blocks be appended (MOR only) to files. This
    * function will extract this change file for each partition.
-   *
+   * @param metadataTableTimeline Current timeline of the Metdata Table
    * @param rollbackMetadata {@code HoodieRollbackMetadata}
    * @param partitionToDeletedFiles The {@code Map} to fill with files deleted per partition.
    * @param partitionToAppendedFiles The {@code Map} to fill with files appended per partition and their sizes.
    */
-  private static void processRollbackMetadata(HoodieRollbackMetadata rollbackMetadata,
+  private static void processRollbackMetadata(HoodieTimeline metadataTableTimeline, HoodieRollbackMetadata rollbackMetadata,
                                               Map<String, List<String>> partitionToDeletedFiles,
                                               Map<String, Map<String, Long>> partitionToAppendedFiles,
                                               Option<String> lastSyncTs) {
 
     rollbackMetadata.getPartitionMetadata().values().forEach(pm -> {
+      final String instantToRollback = rollbackMetadata.getCommitsRollback().get(0);
       // Has this rollback produced new files?
       boolean hasRollbackLogFiles = pm.getRollbackLogFiles() != null && !pm.getRollbackLogFiles().isEmpty();
       boolean hasNonZeroRollbackLogFiles = hasRollbackLogFiles && pm.getRollbackLogFiles().values().stream().mapToLong(Long::longValue).sum() > 0;
-      // If commit being rolled back has not been synced to metadata table yet then there is no need to update metadata
+
+      // If instant-to-rollback has not been synced to metadata table yet then there is no need to update metadata
+      // This can happen in two cases:

Review comment:
       if its uncommitted, we cannot sync the instant-to-rollback. I take this back




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 40b0fb75b0cf18dab3559a20a6fa44a3378764fa Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 40b0fb75b0cf18dab3559a20a6fa44a3378764fa Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416) 
   
   <details>
   <summary>Bot commands</summary>
     The @flinkbot bot supports the following commands:
   
    - `@flinkbot run travis` re-run the last Travis build
    - `@flinkbot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 40b0fb75b0cf18dab3559a20a6fa44a3378764fa Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 40b0fb75b0cf18dab3559a20a6fa44a3378764fa Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416) 
   * 0eebf83fba8adcc6b635f97a48d54037ba0dfedf UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r686568347



##########
File path: hudi-client/hudi-client-common/src/main/java/org/apache/hudi/metadata/HoodieBackedTableMetadataWriter.java
##########
@@ -137,6 +138,14 @@ protected HoodieBackedTableMetadataWriter(Configuration hadoopConf, HoodieWriteC
   private HoodieWriteConfig createMetadataWriteConfig(HoodieWriteConfig writeConfig) {
     int parallelism = writeConfig.getMetadataInsertParallelism();
 
+    // The metadata table timeline should always encompass the dataset timeline so that syncing of manual rollbacks can
+    // always check whether the rolled-back-instant was ever synced to the metadata table. Since all actions on the
+    // dataset always lead to a delta-commit on the Metadata Table, we need to preserve enough deltacommits that can
+    // cover total number of all the non-archived actions on the dataset.
+    int multiplier = HoodieTimeline.VALID_ACTIONS_IN_TIMELINE.length;

Review comment:
       Remove this as this was leading to too many instants retained on metadata table.




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r686568735



##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/HoodieMetadataFileSystemView.java
##########
@@ -73,4 +73,16 @@ public void close() {
       throw new HoodieException("Error closing metadata file system view.", e);
     }
   }
+
+  @Override
+  public void sync() {

Review comment:
       Yes




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r686569471



##########
File path: hudi-client/hudi-spark-client/src/test/java/org/apache/hudi/client/functional/TestHoodieBackedMetadata.java
##########
@@ -480,6 +482,131 @@ public void testRollbackUnsyncedCommit(HoodieTableType tableType) throws Excepti
       client.syncTableMetadata();
       validateMetadata(client);
     }
+
+    // If an unsynced commit is automatically rolled back during next commit, the rollback commit gets a timestamp
+    // greater than than the new commit which is started. Ensure that in this case the rollback is not processed
+    // as the earlier failed commit would not have been committed.
+    //
+    //  Dataset:   C1        C2         C3.inflight[failed]   C4   R5[rolls back C3]
+    //  Metadata:  C1.delta  C2.delta
+    //
+    // When R5 completes, C3.xxx will be deleted. When C4 completes, C4 and R5 will be committed to Metadata Table in

Review comment:
       When we relax this we cannot catch issues wherein we may have missed syncing an instant earlier. See HUDI-2286.




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-896569499


   @vinothchandar  I reworked part of this so please take a fresh look again.


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 40b0fb75b0cf18dab3559a20a6fa44a3378764fa Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416) 
   * 0eebf83fba8adcc6b635f97a48d54037ba0dfedf Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 0eebf83fba8adcc6b635f97a48d54037ba0dfedf Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687032405



##########
File path: hudi-client/hudi-spark-client/src/test/java/org/apache/hudi/client/functional/TestHoodieBackedMetadata.java
##########
@@ -480,6 +482,131 @@ public void testRollbackUnsyncedCommit(HoodieTableType tableType) throws Excepti
       client.syncTableMetadata();
       validateMetadata(client);
     }
+
+    // If an unsynced commit is automatically rolled back during next commit, the rollback commit gets a timestamp
+    // greater than than the new commit which is started. Ensure that in this case the rollback is not processed
+    // as the earlier failed commit would not have been committed.
+    //
+    //  Dataset:   C1        C2         C3.inflight[failed]   C4   R5[rolls back C3]
+    //  Metadata:  C1.delta  C2.delta
+    //
+    // When R5 completes, C3.xxx will be deleted. When C4 completes, C4 and R5 will be committed to Metadata Table in

Review comment:
       On this one, I continue to disagree :). We can easily do a logger.warn or error and collect information in an automated fashion, to fix the issues. In the current model, heavy user intervention is needed to fix the metadata table and then get the pipeline back online. This is not very user-friendly for folks in OSS.
   
   I am thinking of adding an internal config to make this behavior configurable, so you can have it failing hard in Uber and we can do the other way in OSS. It ll actually help us see more variety of issues and harden the implementation. wdyt? 




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687072435



##########
File path: hudi-client/hudi-spark-client/src/test/java/org/apache/hudi/client/functional/TestHoodieBackedMetadata.java
##########
@@ -480,6 +482,131 @@ public void testRollbackUnsyncedCommit(HoodieTableType tableType) throws Excepti
       client.syncTableMetadata();
       validateMetadata(client);
     }
+
+    // If an unsynced commit is automatically rolled back during next commit, the rollback commit gets a timestamp
+    // greater than than the new commit which is started. Ensure that in this case the rollback is not processed
+    // as the earlier failed commit would not have been committed.
+    //
+    //  Dataset:   C1        C2         C3.inflight[failed]   C4   R5[rolls back C3]
+    //  Metadata:  C1.delta  C2.delta
+    //
+    // When R5 completes, C3.xxx will be deleted. When C4 completes, C4 and R5 will be committed to Metadata Table in

Review comment:
       Having a config is acceptable as there can be various use cases for HUDI.
   
   We saw a production issue where the metadata table did not have the latest files. If there was no exception:
   1. Only an error would have been logged
   2. Metadata table would have returned an older file listing
   3. Data would have got written to older version of files
   
   The above is a classic data lass scenario which would be very difficult to catch once the logs have rolled over.  Hence, I want to err on the side of data-consistency.
   
   To contrast it to another component in HUDI wherein we do something similar - If the RemoteFileSystemView is unable to get the listing from TimelineServer, it logs an error and then falls back to file listing. There are no data consistency issues in this fallback so this makes sense to prevent user interventions. But wrong results from metadata table can lead to data consistency issues.
   
   BTW, there may be a better way to sync the rollback. Also much of this complexity will go away with the synchronous design. 




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687045652



##########
File path: hudi-client/hudi-client-common/src/main/java/org/apache/hudi/metadata/HoodieBackedTableMetadataWriter.java
##########
@@ -137,6 +138,9 @@ protected HoodieBackedTableMetadataWriter(Configuration hadoopConf, HoodieWriteC
   private HoodieWriteConfig createMetadataWriteConfig(HoodieWriteConfig writeConfig) {
     int parallelism = writeConfig.getMetadataInsertParallelism();
 
+    int minCommitsToKeep = Math.max(writeConfig.getMetadataMinCommitsToKeep(), writeConfig.getMinCommitsToKeep());

Review comment:
       nice.

##########
File path: hudi-client/hudi-client-common/src/main/java/org/apache/hudi/metadata/HoodieBackedTableMetadataWriter.java
##########
@@ -504,6 +511,20 @@ public void close() throws Exception {
     }
   }
 
+  /**
+   * Return the timestamp of the latest synced instant.
+   */
+  @Override
+  public Option<String> getLatestSyncedInstantTime() {

Review comment:
       could n't we call `metadata.getSyncedInstantTime()` here? 

##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/HoodieTableMetadata.java
##########
@@ -106,5 +109,13 @@ static HoodieTableMetadata create(HoodieEngineContext engineContext, HoodieMetad
    */
   Option<String> getSyncedInstantTime();
 
+  /**
+   * Get the instant time to which the metadata is synced w.r.t data timeline on the reader side.
+   *
+   * This is different from the getSyncedInstantTime() because the reader should sync all completed instants
+   * from the data timeline in order to always provide the most up to date view of the files within the dataset.
+   */
+  Option<String> getSyncedInstantTimeForReader();

Review comment:
       So we need this only for tests? 
   
   ```
   ./hudi-common/src/main/java/org/apache/hudi/metadata/HoodieTableMetadata.java:  Option<String> getSyncedInstantTimeForReader();
   ./hudi-common/src/main/java/org/apache/hudi/metadata/BaseTableMetadata.java:  public Option<String> getSyncedInstantTimeForReader() {
   ./hudi-common/src/main/java/org/apache/hudi/metadata/FileSystemBackedTableMetadata.java:  public Option<String> getSyncedInstantTimeForReader() {
   ./hudi-client/hudi-spark-client/src/test/java/org/apache/hudi/client/functional/TestHoodieBackedMetadata.java:      assertEquals(metadata.getSyncedInstantTimeForReader().get(), newCommitTime);
   ```

##########
File path: hudi-client/hudi-spark-client/src/test/java/org/apache/hudi/client/functional/TestHoodieBackedMetadata.java
##########
@@ -480,6 +497,144 @@ public void testRollbackUnsyncedCommit(HoodieTableType tableType) throws Excepti
       client.syncTableMetadata();
       validateMetadata(client);
     }
+
+    // If an unsynced commit is automatically rolled back during next commit, the rollback commit gets a timestamp
+    // greater than than the new commit which is started. Ensure that in this case the rollback is not processed
+    // as the earlier failed commit would not have been committed.
+    //
+    //  Dataset:   C1        C2         C3.inflight[failed]   C4   R5[rolls back C3]
+    //  Metadata:  C1.delta  C2.delta

Review comment:
       this fix also helps avoid the inconsistent exception during the follow situation. cc @umehrot2 
   
   ```
   //  Dataset:     C1           C2         C3.inflight[failed]   R4[rolls back C3] C4 
   //  Metadata:  C1.delta  C2.delta
   ```

##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/TimelineMergedTableMetadata.java
##########
@@ -112,4 +116,15 @@ private void processNextRecord(HoodieRecord<? extends HoodieRecordPayload> hoodi
   public Option<HoodieRecord<HoodieMetadataPayload>> getRecordByKey(String key) {
     return Option.ofNullable((HoodieRecord) timelineMergedRecords.get(key));
   }
+
+  /**
+   * Returns the timestamp of the latest synced instant.
+   */
+  public Option<String> getSyncedInstantTime() {

Review comment:
       Could we call this something else? this basically returns the earliest unsynced instant time, right? Mixing `sync` terminology here is kind of throwing me off, trying to grok this.




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 0eebf83fba8adcc6b635f97a48d54037ba0dfedf Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646) 
   * 1a90aaff7b511d52759b741db52fd81738fb5418 UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 0eebf83fba8adcc6b635f97a48d54037ba0dfedf Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646) 
   * 1a90aaff7b511d52759b741db52fd81738fb5418 Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 1a90aaff7b511d52759b741db52fd81738fb5418 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687261008



##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/HoodieTableMetadata.java
##########
@@ -106,5 +109,13 @@ static HoodieTableMetadata create(HoodieEngineContext engineContext, HoodieMetad
    */
   Option<String> getSyncedInstantTime();
 
+  /**
+   * Get the instant time to which the metadata is synced w.r.t data timeline on the reader side.
+   *
+   * This is different from the getSyncedInstantTime() because the reader should sync all completed instants
+   * from the data timeline in order to always provide the most up to date view of the files within the dataset.
+   */
+  Option<String> getSyncedInstantTimeForReader();

Review comment:
       Yes




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687261435



##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/BaseTableMetadata.java
##########
@@ -322,8 +303,22 @@ protected HoodieEngineContext getEngineContext() {
     return engineContext != null ? engineContext : new HoodieLocalEngineContext(hadoopConf.get());
   }
 
+  public HoodieMetadataConfig getMetadataConfig() {
+    return metadataConfig;
+  }
+
   protected String getLatestDatasetInstantTime() {
     return datasetMetaClient.getActiveTimeline().filterCompletedInstants().lastInstant()
         .map(HoodieInstant::getTimestamp).orElse(SOLO_COMMIT_TIMESTAMP);
   }
+
+  @Override
+  public Option<String> getSyncedInstantTimeForReader() {
+    if (timelineMergedMetadata == null) {

Review comment:
       Done. Much better now.




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687261567



##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/HoodieMetadataFileSystemView.java
##########
@@ -73,4 +73,16 @@ public void close() {
       throw new HoodieException("Error closing metadata file system view.", e);
     }
   }
+
+  @Override
+  public void sync() {
+    // Sync the tableMetadata first as super.sync() may call listPartition
+    if (tableMetadata != null) {
+      BaseTableMetadata baseMetadata = (BaseTableMetadata)tableMetadata;

Review comment:
       Done.




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687264482



##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/HoodieBackedTableMetadata.java
##########
@@ -260,6 +265,20 @@ public synchronized void close() throws Exception {
     logRecordScanner = null;
   }
 
+  /**
+   * Return the timestamp of the latest synced instant.
+   */
+  @Override
+  public Option<String> getSyncedInstantTime() {

Review comment:
       I dont see this on the writer side. Writer side uses metadata.getSyncedInstantTime()
   




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687268778



##########
File path: hudi-client/hudi-client-common/src/main/java/org/apache/hudi/metadata/HoodieBackedTableMetadataWriter.java
##########
@@ -504,6 +511,20 @@ public void close() throws Exception {
     }
   }
 
+  /**
+   * Return the timestamp of the latest synced instant.
+   */
+  @Override
+  public Option<String> getLatestSyncedInstantTime() {

Review comment:
       Yep. Remove this method.




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 1a90aaff7b511d52759b741db52fd81738fb5418 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667) 
   * 169b88e4ee1126779f2f44f1716687e874392d38 UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 169b88e4ee1126779f2f44f1716687e874392d38 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687428759



##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/BaseTableMetadata.java
##########
@@ -344,8 +326,18 @@ protected HoodieEngineContext getEngineContext() {
     return engineContext != null ? engineContext : new HoodieLocalEngineContext(hadoopConf.get());
   }
 
+  public HoodieMetadataConfig getMetadataConfig() {
+    return metadataConfig;
+  }
+
   protected String getLatestDatasetInstantTime() {
     return datasetMetaClient.getActiveTimeline().filterCompletedInstants().lastInstant()
         .map(HoodieInstant::getTimestamp).orElse(SOLO_COMMIT_TIMESTAMP);
   }
+
+  @Override
+  public Option<String> getSyncedInstantTimeForReader() {
+    return Option.ofNullable(timelineMergedMetadata).map(TimelineMergedTableMetadata::getSyncedInstantTime());

Review comment:
       `TimelineMergedTableMetadata::getSyncedInstantTime` to get past compile issues. but still `getSyncedInstantTime()`, returns a option by itself. So, may be we need to indeed go back to the following?
   
   ```
   @Override
     public Option<String> getSyncedInstantTimeForReader() {
       if (timelineMergedMetadata == null) {
         return Option.empty();
       }
       return timelineMergedMetadata.getSyncedInstantTime();
     }
   ```




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687429575



##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/HoodieTableMetadata.java
##########
@@ -106,5 +109,13 @@ static HoodieTableMetadata create(HoodieEngineContext engineContext, HoodieMetad
    */
   Option<String> getSyncedInstantTime();
 
+  /**
+   * Get the instant time to which the metadata is synced w.r.t data timeline on the reader side.
+   *
+   * This is different from the getSyncedInstantTime() because the reader should sync all completed instants
+   * from the data timeline in order to always provide the most up to date view of the files within the dataset.
+   */
+  Option<String> getSyncedInstantTimeForReader();

Review comment:
       Can we avoid this if we can. This is a pretty important interface, having additional methods for testing may be an overkill.?
   Happy to take this up




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687955736



##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/TimelineMergedTableMetadata.java
##########
@@ -112,4 +116,15 @@ private void processNextRecord(HoodieRecord<? extends HoodieRecordPayload> hoodi
   public Option<HoodieRecord<HoodieMetadataPayload>> getRecordByKey(String key) {
     return Option.ofNullable((HoodieRecord) timelineMergedRecords.get(key));
   }
+
+  /**
+   * Returns the timestamp of the latest synced instant.
+   */
+  public Option<String> getSyncedInstantTime() {

Review comment:
       Renamed.




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 169b88e4ee1126779f2f44f1716687e874392d38 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670) 
   * e10bec1dffd99a3cf3007891a7464a30e83cf09d UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687956408



##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/BaseTableMetadata.java
##########
@@ -344,8 +326,18 @@ protected HoodieEngineContext getEngineContext() {
     return engineContext != null ? engineContext : new HoodieLocalEngineContext(hadoopConf.get());
   }
 
+  public HoodieMetadataConfig getMetadataConfig() {
+    return metadataConfig;
+  }
+
   protected String getLatestDatasetInstantTime() {
     return datasetMetaClient.getActiveTimeline().filterCompletedInstants().lastInstant()
         .map(HoodieInstant::getTimestamp).orElse(SOLO_COMMIT_TIMESTAMP);
   }
+
+  @Override
+  public Option<String> getSyncedInstantTimeForReader() {
+    return Option.ofNullable(timelineMergedMetadata).map(TimelineMergedTableMetadata::getSyncedInstantTime());

Review comment:
       Oh.  Dont know why it compiles for me. I will fix it.




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 169b88e4ee1126779f2f44f1716687e874392d38 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670) 
   * e10bec1dffd99a3cf3007891a7464a30e83cf09d Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * e10bec1dffd99a3cf3007891a7464a30e83cf09d Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r687976889



##########
File path: hudi-common/src/main/java/org/apache/hudi/metadata/HoodieTableMetadata.java
##########
@@ -106,5 +109,13 @@ static HoodieTableMetadata create(HoodieEngineContext engineContext, HoodieMetad
    */
   Option<String> getSyncedInstantTime();
 
+  /**
+   * Get the instant time to which the metadata is synced w.r.t data timeline on the reader side.
+   *
+   * This is different from the getSyncedInstantTime() because the reader should sync all completed instants
+   * from the data timeline in order to always provide the most up to date view of the files within the dataset.
+   */
+  Option<String> getSyncedInstantTimeForReader();

Review comment:
       Removed from public interface. Can easily be accessed in testing by casting the interface.




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * e10bec1dffd99a3cf3007891a7464a30e83cf09d Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690) 
   * 23f261c5ebd97be2b7bd5cc9bb9c536c8866da57 UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * e10bec1dffd99a3cf3007891a7464a30e83cf09d Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690) 
   * 23f261c5ebd97be2b7bd5cc9bb9c536c8866da57 Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 23f261c5ebd97be2b7bd5cc9bb9c536c8866da57 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on a change in pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#discussion_r688154275



##########
File path: hudi-client/hudi-spark-client/src/test/java/org/apache/hudi/client/functional/TestHoodieBackedMetadata.java
##########
@@ -480,6 +482,131 @@ public void testRollbackUnsyncedCommit(HoodieTableType tableType) throws Excepti
       client.syncTableMetadata();
       validateMetadata(client);
     }
+
+    // If an unsynced commit is automatically rolled back during next commit, the rollback commit gets a timestamp
+    // greater than than the new commit which is started. Ensure that in this case the rollback is not processed
+    // as the earlier failed commit would not have been committed.
+    //
+    //  Dataset:   C1        C2         C3.inflight[failed]   C4   R5[rolls back C3]
+    //  Metadata:  C1.delta  C2.delta
+    //
+    // When R5 completes, C3.xxx will be deleted. When C4 completes, C4 and R5 will be committed to Metadata Table in

Review comment:
       okay. lets revisit after the sync design and I ll add a flag down the line if needed. 




-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 23f261c5ebd97be2b7bd5cc9bb9c536c8866da57 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694) 
   * a9dcb727c23272b2c8b74647b467f413b9e83f5d UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 23f261c5ebd97be2b7bd5cc9bb9c536c8866da57 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694) 
   * a9dcb727c23272b2c8b74647b467f413b9e83f5d Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * a9dcb727c23272b2c8b74647b467f413b9e83f5d Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * a9dcb727c23272b2c8b74647b467f413b9e83f5d Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698) 
   * 96c73ba8ed99f51f31efdac0ab60d6b95bc782ed UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * a9dcb727c23272b2c8b74647b467f413b9e83f5d Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698) 
   * 96c73ba8ed99f51f31efdac0ab60d6b95bc782ed Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 96c73ba8ed99f51f31efdac0ab60d6b95bc782ed Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-898664569


   This seems like a general NPE issue, i ran the tests again locally, they failed. something flaky. but there is a def underlying issue. looking into that


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-898683191


   My latest theory is that, the changes in this PR for syncing filesystem view could be surfacing some concurrency issue. It seems like, we are reusing the same baseFileReader even after close has been called. 


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     }, {
       "hash" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 96c73ba8ed99f51f31efdac0ab60d6b95bc782ed Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699) 
   * fb3435e082d9cee0841763dcdaf39135da0f4858 UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     }, {
       "hash" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724",
       "triggerID" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 96c73ba8ed99f51f31efdac0ab60d6b95bc782ed Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699) 
   * fb3435e082d9cee0841763dcdaf39135da0f4858 Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-898735915


   @prashantwason I think the issue is that the table metadata is not getting recreated when timeline service calls sync. I removed the null check you had in HoodieMetadataFileSystemView. 
   
   ![image](https://user-images.githubusercontent.com/1179324/129421396-9e45c7e4-5f69-4972-a733-75edcce36f29.png)
   
   let me know if you see side-effects. 


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-898738969


   No side effects. But if tableMetadata is ever null then baseTableMetadata would also be null and that would be another NPE.


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


prashantwason commented on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-898739309


   Do we need to synchronize the sync()? Maybe two threads are calling it at the same time? I couldn't find which exact unit test is failing.


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-898740933


   >But if tableMetadata is ever null then baseTableMetadata would also be null and that would be another NPE.
   its initialized in the constructor. the issue is more about re-creation on sync. NPE I saw is because of accessing a closed reader.
   
   `sync()` is already called with a lock on the view object. 


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-898740933


   >But if tableMetadata is ever null then baseTableMetadata would also be null and that would be another NPE.
   
   its initialized in the constructor. the issue is more about re-creation on sync. NPE I saw is because of accessing a closed reader.
   
   `sync()` is already called with a lock on the view object. 


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     }, {
       "hash" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724",
       "triggerID" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * fb3435e082d9cee0841763dcdaf39135da0f4858 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-898757125


   @prashantwason https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_apis/build/builds/1724/logs/29 has the logs.
   my fix is not working. still looking


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     }, {
       "hash" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724",
       "triggerID" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "triggerType" : "PUSH"
     }, {
       "hash" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * fb3435e082d9cee0841763dcdaf39135da0f4858 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724) 
   * 6f885e8e020bf746dd9d0e85c3684bee0091f47e UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     }, {
       "hash" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724",
       "triggerID" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "triggerType" : "PUSH"
     }, {
       "hash" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1728",
       "triggerID" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * fb3435e082d9cee0841763dcdaf39135da0f4858 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724) 
   * 6f885e8e020bf746dd9d0e85c3684bee0091f47e Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1728) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     }, {
       "hash" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724",
       "triggerID" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "triggerType" : "PUSH"
     }, {
       "hash" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1728",
       "triggerID" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "triggerType" : "PUSH"
     }, {
       "hash" : "7bad968f01fbae614e5aa973e12287afcc0e1e5e",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "7bad968f01fbae614e5aa973e12287afcc0e1e5e",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * fb3435e082d9cee0841763dcdaf39135da0f4858 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724) 
   * 6f885e8e020bf746dd9d0e85c3684bee0091f47e Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1728) 
   * 7bad968f01fbae614e5aa973e12287afcc0e1e5e UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     }, {
       "hash" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724",
       "triggerID" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "triggerType" : "PUSH"
     }, {
       "hash" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "status" : "CANCELED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1728",
       "triggerID" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "triggerType" : "PUSH"
     }, {
       "hash" : "7bad968f01fbae614e5aa973e12287afcc0e1e5e",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1730",
       "triggerID" : "7bad968f01fbae614e5aa973e12287afcc0e1e5e",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 6f885e8e020bf746dd9d0e85c3684bee0091f47e Azure: [CANCELED](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1728) 
   * 7bad968f01fbae614e5aa973e12287afcc0e1e5e Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1730) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     }, {
       "hash" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724",
       "triggerID" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "triggerType" : "PUSH"
     }, {
       "hash" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1728",
       "triggerID" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "triggerType" : "PUSH"
     }, {
       "hash" : "7bad968f01fbae614e5aa973e12287afcc0e1e5e",
       "status" : "SUCCESS",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1730",
       "triggerID" : "7bad968f01fbae614e5aa973e12287afcc0e1e5e",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 7bad968f01fbae614e5aa973e12287afcc0e1e5e Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1730) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar commented on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-898802063


   @prashantwason I reverted the change to add a `sync()` to `HoodieMetadataFileSystemView`. It breaks the timeline server based fetch, since reuse is not correctly configured during re-creation in sync. Its flaky, because the issue only happens if the test runs long enough beyond a sync interval. So if you introduce a sleep from the time the writeClient is created to when upserts happen etc. You ll observe this


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     }, {
       "hash" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724",
       "triggerID" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "triggerType" : "PUSH"
     }, {
       "hash" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1728",
       "triggerID" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "triggerType" : "PUSH"
     }, {
       "hash" : "7bad968f01fbae614e5aa973e12287afcc0e1e5e",
       "status" : "SUCCESS",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1730",
       "triggerID" : "7bad968f01fbae614e5aa973e12287afcc0e1e5e",
       "triggerType" : "PUSH"
     }, {
       "hash" : "349cd1db6edcf13dc5012242a286dea262ba7276",
       "status" : "UNKNOWN",
       "url" : "TBD",
       "triggerID" : "349cd1db6edcf13dc5012242a286dea262ba7276",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 7bad968f01fbae614e5aa973e12287afcc0e1e5e Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1730) 
   * 349cd1db6edcf13dc5012242a286dea262ba7276 UNKNOWN
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     }, {
       "hash" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724",
       "triggerID" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "triggerType" : "PUSH"
     }, {
       "hash" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1728",
       "triggerID" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "triggerType" : "PUSH"
     }, {
       "hash" : "7bad968f01fbae614e5aa973e12287afcc0e1e5e",
       "status" : "SUCCESS",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1730",
       "triggerID" : "7bad968f01fbae614e5aa973e12287afcc0e1e5e",
       "triggerType" : "PUSH"
     }, {
       "hash" : "349cd1db6edcf13dc5012242a286dea262ba7276",
       "status" : "PENDING",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1732",
       "triggerID" : "349cd1db6edcf13dc5012242a286dea262ba7276",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 7bad968f01fbae614e5aa973e12287afcc0e1e5e Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1730) 
   * 349cd1db6edcf13dc5012242a286dea262ba7276 Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1732) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


hudi-bot edited a comment on pull request #3210:
URL: https://github.com/apache/hudi/pull/3210#issuecomment-872541566


   <!--
   Meta data
   {
     "version" : 1,
     "metaDataEntries" : [ {
       "hash" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=628",
       "triggerID" : "9d104830439f5bbe589599d9a3bb5dd6f140f223",
       "triggerType" : "PUSH"
     }, {
       "hash" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=664",
       "triggerID" : "45925d349630415ee9e10cb8b32ae7fad7f25b25",
       "triggerType" : "PUSH"
     }, {
       "hash" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1416",
       "triggerID" : "40b0fb75b0cf18dab3559a20a6fa44a3378764fa",
       "triggerType" : "PUSH"
     }, {
       "hash" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1646",
       "triggerID" : "0eebf83fba8adcc6b635f97a48d54037ba0dfedf",
       "triggerType" : "PUSH"
     }, {
       "hash" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1667",
       "triggerID" : "1a90aaff7b511d52759b741db52fd81738fb5418",
       "triggerType" : "PUSH"
     }, {
       "hash" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1670",
       "triggerID" : "169b88e4ee1126779f2f44f1716687e874392d38",
       "triggerType" : "PUSH"
     }, {
       "hash" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1690",
       "triggerID" : "e10bec1dffd99a3cf3007891a7464a30e83cf09d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1694",
       "triggerID" : "23f261c5ebd97be2b7bd5cc9bb9c536c8866da57",
       "triggerType" : "PUSH"
     }, {
       "hash" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1698",
       "triggerID" : "a9dcb727c23272b2c8b74647b467f413b9e83f5d",
       "triggerType" : "PUSH"
     }, {
       "hash" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1699",
       "triggerID" : "96c73ba8ed99f51f31efdac0ab60d6b95bc782ed",
       "triggerType" : "PUSH"
     }, {
       "hash" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1724",
       "triggerID" : "fb3435e082d9cee0841763dcdaf39135da0f4858",
       "triggerType" : "PUSH"
     }, {
       "hash" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1728",
       "triggerID" : "6f885e8e020bf746dd9d0e85c3684bee0091f47e",
       "triggerType" : "PUSH"
     }, {
       "hash" : "7bad968f01fbae614e5aa973e12287afcc0e1e5e",
       "status" : "DELETED",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1730",
       "triggerID" : "7bad968f01fbae614e5aa973e12287afcc0e1e5e",
       "triggerType" : "PUSH"
     }, {
       "hash" : "349cd1db6edcf13dc5012242a286dea262ba7276",
       "status" : "FAILURE",
       "url" : "https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1732",
       "triggerID" : "349cd1db6edcf13dc5012242a286dea262ba7276",
       "triggerType" : "PUSH"
     } ]
   }-->
   ## CI report:
   
   * 349cd1db6edcf13dc5012242a286dea262ba7276 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=1732) 
   
   <details>
   <summary>Bot commands</summary>
     @hudi-bot supports the following commands:
   
    - `@hudi-bot run travis` re-run the last Travis build
    - `@hudi-bot run azure` re-run the last Azure build
   </details>


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


vinothchandar merged pull request #3210:
URL: https://github.com/apache/hudi/pull/3210


   


-- 
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

To unsubscribe, e-mail: commits-unsubscribe@hudi.apache.org

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


