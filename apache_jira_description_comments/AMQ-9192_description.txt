I noticed in Jenkins that the advisory tests are flaky for two reasons. One is on stop the connection.stop() call can cause an error and prevent the broker from being stopped which leads to future tests failing due to the broker instance still running in memory. The other issue is some of the tests are sending way too many messages (way more than needed) and is causing slow tests and timeouts.