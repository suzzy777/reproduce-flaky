gszadovszky opened a new pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858


   Make sure you have checked _all_ steps below.
   
   ### Jira
   
   - [ ] My PR addresses the following [Parquet Jira](https://issues.apache.org/jira/browse/PARQUET/) issues and references them in the PR title. For example, "PARQUET-1234: My Parquet PR"
     - https://issues.apache.org/jira/browse/PARQUET-XXX
     - In case you are adding a dependency, check if the license complies with the [ASF 3rd Party License Policy](https://www.apache.org/legal/resolved.html#category-x).
   
   ### Tests
   
   - [ ] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
   
   ### Commits
   
   - [ ] My commits all reference Jira issues in their subject lines. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
     1. Subject is separated from body by a blank line
     1. Subject is limited to 50 characters (not including Jira issue reference)
     1. Subject does not end with a period
     1. Subject uses the imperative mood ("add", not "adding")
     1. Body wraps at 72 characters
     1. Body explains "what" and "why", not "how"
   
   ### Documentation
   
   - [ ] In case of new functionality, my PR adds documentation that describes how to use it.
     - All the public functions and the classes in the PR contain Javadoc that explain what it does
   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


dossett commented on pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858#issuecomment-770862284


   That's a nice use of profiles.  I'm (non-binding) +1. I don't see any logs for the travis build failures, don't know if they've expired or maybe the tests just failed to launch for some reason.


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


gszadovszky commented on pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858#issuecomment-770954301


   Thanks, @dossett. I am not sure about the Travis status either. I've restarted the build, let's see what happens.


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


gszadovszky opened a new pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858


   Make sure you have checked _all_ steps below.
   
   ### Jira
   
   - [ ] My PR addresses the following [Parquet Jira](https://issues.apache.org/jira/browse/PARQUET/) issues and references them in the PR title. For example, "PARQUET-1234: My Parquet PR"
     - https://issues.apache.org/jira/browse/PARQUET-XXX
     - In case you are adding a dependency, check if the license complies with the [ASF 3rd Party License Policy](https://www.apache.org/legal/resolved.html#category-x).
   
   ### Tests
   
   - [ ] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
   
   ### Commits
   
   - [ ] My commits all reference Jira issues in their subject lines. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
     1. Subject is separated from body by a blank line
     1. Subject is limited to 50 characters (not including Jira issue reference)
     1. Subject does not end with a period
     1. Subject uses the imperative mood ("add", not "adding")
     1. Body wraps at 72 characters
     1. Body explains "what" and "why", not "how"
   
   ### Documentation
   
   - [ ] In case of new functionality, my PR adds documentation that describes how to use it.
     - All the public functions and the classes in the PR contain Javadoc that explain what it does
   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


gszadovszky closed pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858


   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


gszadovszky opened a new pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858


   Make sure you have checked _all_ steps below.
   
   ### Jira
   
   - [ ] My PR addresses the following [Parquet Jira](https://issues.apache.org/jira/browse/PARQUET/) issues and references them in the PR title. For example, "PARQUET-1234: My Parquet PR"
     - https://issues.apache.org/jira/browse/PARQUET-XXX
     - In case you are adding a dependency, check if the license complies with the [ASF 3rd Party License Policy](https://www.apache.org/legal/resolved.html#category-x).
   
   ### Tests
   
   - [ ] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
   
   ### Commits
   
   - [ ] My commits all reference Jira issues in their subject lines. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
     1. Subject is separated from body by a blank line
     1. Subject is limited to 50 characters (not including Jira issue reference)
     1. Subject does not end with a period
     1. Subject uses the imperative mood ("add", not "adding")
     1. Body wraps at 72 characters
     1. Body explains "what" and "why", not "how"
   
   ### Documentation
   
   - [ ] In case of new functionality, my PR adds documentation that describes how to use it.
     - All the public functions and the classes in the PR contain Javadoc that explain what it does
   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


gszadovszky closed pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858


   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


gszadovszky closed pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858


   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


gszadovszky opened a new pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858


   Make sure you have checked _all_ steps below.
   
   ### Jira
   
   - [ ] My PR addresses the following [Parquet Jira](https://issues.apache.org/jira/browse/PARQUET/) issues and references them in the PR title. For example, "PARQUET-1234: My Parquet PR"
     - https://issues.apache.org/jira/browse/PARQUET-XXX
     - In case you are adding a dependency, check if the license complies with the [ASF 3rd Party License Policy](https://www.apache.org/legal/resolved.html#category-x).
   
   ### Tests
   
   - [ ] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
   
   ### Commits
   
   - [ ] My commits all reference Jira issues in their subject lines. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
     1. Subject is separated from body by a blank line
     1. Subject is limited to 50 characters (not including Jira issue reference)
     1. Subject does not end with a period
     1. Subject uses the imperative mood ("add", not "adding")
     1. Body wraps at 72 characters
     1. Body explains "what" and "why", not "how"
   
   ### Documentation
   
   - [ ] In case of new functionality, my PR adds documentation that describes how to use it.
     - All the public functions and the classes in the PR contain Javadoc that explain what it does
   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


gszadovszky commented on pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858#issuecomment-775766185


   Close/re-open to trigger tests.
   @shangxinli, if you have time could you please review this? The release is blocked on this one.


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


Fokko commented on a change in pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858#discussion_r573197908



##########
File path: pom.xml
##########
@@ -393,6 +393,7 @@
         <!-- Override source and target from the ASF parent -->
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-compiler-plugin</artifactId>
+        <version>3.8.1</version>

Review comment:
       We could also bump the parent POM to 22: https://github.com/apache/maven-apache-parent/blob/apache-22/pom.xml




----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


shangxinli commented on pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858#issuecomment-776246960


   For the failed test "testMemoryManagerUpperLimit", I am not sure it is caused by this change, or the test itself is unstable. 


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


shangxinli edited a comment on pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858#issuecomment-776246960


   For the failed test "testMemoryManagerUpperLimit", I am not sure it is caused by this change, or the test itself is unstable. It seems the failure is because the pool size is larger than expected. 
   
    "should be within 10% of the expected value (expected = 453745044 actual = 505046624)"


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


gszadovszky commented on a change in pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858#discussion_r573598674



##########
File path: pom.xml
##########
@@ -393,6 +393,7 @@
         <!-- Override source and target from the ASF parent -->
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-compiler-plugin</artifactId>
+        <version>3.8.1</version>

Review comment:
       I would not update it for now (just before the release). I think, it is better to bump such versions for the next release. The bump of the `maven-compiler-plugin` was required to support the `release` config.




----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


gszadovszky commented on pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858#issuecomment-776598248


   > For the failed test "testMemoryManagerUpperLimit", I am not sure it is caused by this change, or the test itself is unstable. It seems the failure is because the pool size is larger than expected.
   > 
   > "should be within 10% of the expected value (expected = 453745044 actual = 505046624)"
   
   Yes, the test is flaky. Based on git history we've had to increase the percentage 3 times already. (I am not sure if this test make sense this way but I did not want to drop it for now.) Meanwhile, I have not seen this test fail until the transition to the github actions. I guess there are some environmental differences between the new actions and Travis. 


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


gszadovszky edited a comment on pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858#issuecomment-776598248


   > For the failed test "testMemoryManagerUpperLimit", I am not sure it is caused by this change, or the test itself is unstable. It seems the failure is because the pool size is larger than expected.
   > 
   > "should be within 10% of the expected value (expected = 453745044 actual = 505046624)"
   
   Yes, the test is flaky. Based on git history we've had to increase the percentage 3 times already. (I am not sure if this test make sense this way but I did not want to drop it for now.) Meanwhile, I have not seen this test fail until the transition to the github actions. I guess there are some environmental differences between the new actions and Travis. 
   
   But this change is not related to the flaky test. It is related to the issue caused by the first RC built with jdk11 and failed in a jre8 runtime. 


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


shangxinli commented on pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858#issuecomment-776722038


   > > For the failed test "testMemoryManagerUpperLimit", I am not sure it is caused by this change, or the test itself is unstable. It seems the failure is because the pool size is larger than expected.
   > > "should be within 10% of the expected value (expected = 453745044 actual = 505046624)"
   > 
   > Yes, the test is flaky. Based on git history we've had to increase the percentage 3 times already. (I am not sure if this test make sense this way but I did not want to drop it for now.) Meanwhile, I have not seen this test fail until the transition to the github actions. I guess there are some environmental differences between the new actions and Travis.
   > 
   > But this change is not related to the flaky test. It is related to the issue caused by the first RC built with jdk11 and failed in a jre8 runtime.
   
   Sounds good


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


gszadovszky merged pull request #858:
URL: https://github.com/apache/parquet-mr/pull/858


   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org


