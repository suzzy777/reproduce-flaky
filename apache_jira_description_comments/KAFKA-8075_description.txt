[https://jenkins.confluent.io/job/apache-kafka-test/job/2.2/56/testReport/junit/kafka.api/GroupAuthorizerIntegrationTest/testTransactionalProducerTopicAuthorizationExceptionInCommit/]
{quote}org.apache.kafka.common.errors.TimeoutException: Timeout expired while initializing transactional state in 3000ms.{quote}
STDOUT
{quote}[2019-03-08 01:48:45,226] ERROR [Consumer clientId=consumer-99, groupId=my-group] Offset commit failed on partition topic-0 at offset 5: Not authorized to access topics: [Topic authorization failed.] (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator:812) [2019-03-08 01:48:45,227] ERROR [Consumer clientId=consumer-99, groupId=my-group] Not authorized to commit to topics [topic] (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator:850) [2019-03-08 01:48:57,870] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=43610,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:43610-127.0.0.1:44870-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:49:14,858] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=44107,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:44107-127.0.0.1:38156-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:49:21,984] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=39025,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:39025-127.0.0.1:41474-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:49:39,438] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=44798,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:44798-127.0.0.1:58496-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. Error: Consumer group 'my-group' does not exist. [2019-03-08 01:49:55,502] WARN Ignoring unexpected runtime exception (org.apache.zookeeper.server.NIOServerCnxnFactory:236) java.nio.channels.CancelledKeyException at sun.nio.ch.SelectionKeyImpl.ensureValid(SelectionKeyImpl.java:73) at sun.nio.ch.SelectionKeyImpl.readyOps(SelectionKeyImpl.java:87) at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:205) at java.lang.Thread.run(Thread.java:748) [2019-03-08 01:50:02,720] WARN Unable to read additional data from client sessionid 0x1007131d81c0001, likely client has closed socket (org.apache.zookeeper.server.NIOServerCnxn:376) [2019-03-08 01:50:03,855] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=32870,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:32870-127.0.0.1:39846-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:50:10,346] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=46676,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:46676-127.0.0.1:32858-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:50:14,927] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=35888,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:35888-127.0.0.1:45294-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:50:18,425] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=38765,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:38765-127.0.0.1:52928-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:50:26,218] ERROR [Producer clientId=producer-41] Aborting producer batches due to fatal error (org.apache.kafka.clients.producer.internals.Sender:457) org.apache.kafka.common.errors.ClusterAuthorizationException: The producer is not authorized to do idempotent sends [2019-03-08 01:50:26,761] WARN Unable to read additional data from client sessionid 0x10071323d2c0001, likely client has closed socket (org.apache.zookeeper.server.NIOServerCnxn:376) [2019-03-08 01:50:29,478] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=38132,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:38132-127.0.0.1:45844-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:50:37,247] ERROR [Consumer clientId=consumer-110, groupId=my-group] Offset commit failed on partition __consumer_offsets-0 at offset 0: Not authorized to access group: Group authorization failed. (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator:812) [2019-03-08 01:50:46,049] WARN Unable to read additional data from client sessionid 0x1007132856c0000, likely client has closed socket (org.apache.zookeeper.server.NIOServerCnxn:376) [2019-03-08 01:50:48,395] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=36038,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:36038-127.0.0.1:57434-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:50:49,863] ERROR [Producer clientId=producer-45, transactionalId=transactional.id] Aborting producer batches due to fatal error (org.apache.kafka.clients.producer.internals.Sender:457) org.apache.kafka.common.errors.TransactionalIdAuthorizationException: Transactional Id authorization failed. [2019-03-08 01:50:51,413] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=38205,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:38205-127.0.0.1:50812-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:50:59,522] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=37581,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:37581-127.0.0.1:37946-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:51:00,158] ERROR [Consumer clientId=consumer-114, groupId=my-group] Offset commit failed on partition topic-0 at offset 5: Not authorized to access topics: [Topic authorization failed.] (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator:812) [2019-03-08 01:51:00,158] ERROR [Consumer clientId=consumer-114, groupId=my-group] Not authorized to commit to topics [topic] (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator:850) [2019-03-08 01:51:00,174] WARN Unable to read additional data from client sessionid 0x1007132c1f70002, likely client has closed socket (org.apache.zookeeper.server.NIOServerCnxn:376) [2019-03-08 01:51:02,499] WARN Ignoring unexpected runtime exception (org.apache.zookeeper.server.NIOServerCnxnFactory:236) java.nio.channels.CancelledKeyException at sun.nio.ch.SelectionKeyImpl.ensureValid(SelectionKeyImpl.java:73) at sun.nio.ch.SelectionKeyImpl.readyOps(SelectionKeyImpl.java:87) at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:205) at java.lang.Thread.run(Thread.java:748) [2019-03-08 01:51:07,962] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=33520,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:33520-127.0.0.1:40200-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:51:12,012] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=39119,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:39119-127.0.0.1:56402-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:51:14,040] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=42168,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:42168-127.0.0.1:51480-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:51:19,205] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=39155,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:39155-127.0.0.1:33490-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:51:28,574] ERROR [Consumer clientId=consumer-118, groupId=other group] Offset commit failed on partition topic-0 at offset 1: Not authorized to access group: Group authorization failed. (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator:812) [2019-03-08 01:51:31,915] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=39715,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:39715-127.0.0.1:34808-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:51:36,403] WARN Unable to read additional data from client sessionid 0x10071333e3f0000, likely client has closed socket (org.apache.zookeeper.server.NIOServerCnxn:376) [2019-03-08 01:51:46,724] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=41241,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:41241-127.0.0.1:50050-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:51:49,119] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=36526,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:36526-127.0.0.1:39354-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:51:59,493] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=35835,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:35835-127.0.0.1:32994-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:52:11,855] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=42993,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:42993-127.0.0.1:38648-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:52:15,836] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=41602,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:41602-127.0.0.1:46878-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:52:19,932] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=43008,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:43008-127.0.0.1:56548-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:52:23,932] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=45640,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:45640-127.0.0.1:51216-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:52:26,012] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=39429,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:39429-127.0.0.1:42256-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:52:36,215] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=42211,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:42211-127.0.0.1:35542-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:52:38,197] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=34353,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:34353-127.0.0.1:43722-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:52:55,829] WARN Unable to read additional data from client sessionid 0x10071347bf30000, likely client has closed socket (org.apache.zookeeper.server.NIOServerCnxn:376) [2019-03-08 01:52:57,368] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=7, api=LEADER_AND_ISR, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[{topic=topic-new,partition_states=[{partition=0,controller_epoch=1,leader=0,leader_epoch=0,isr=[0],zk_version=0,replicas=[0],is_new=true}]}],live_leaders=[\{id=0,host=localhost,port=42730}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:42730-127.0.0.1:53772-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:52:57,370] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=8, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[{topic=topic-new,partition_states=[{partition=0,controller_epoch=1,leader=0,leader_epoch=0,isr=[0],zk_version=0,replicas=[0],offline_replicas=[]}]}],live_brokers=[\{id=0,end_points=[{port=42730,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:42730-127.0.0.1:53772-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:00,143] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=39371,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:39371-127.0.0.1:58002-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:02,271] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=35251,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:35251-127.0.0.1:38536-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:02,889] ERROR [Consumer clientId=consumer-128, groupId=my-group] Offset commit failed on partition topic-0 at offset 5: Not authorized to access topics: [Topic authorization failed.] (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator:812) [2019-03-08 01:53:02,890] ERROR [Consumer clientId=consumer-128, groupId=my-group] Not authorized to commit to topics [topic] (org.apache.kafka.clients.consumer.internals.ConsumerCoordinator:850) [2019-03-08 01:53:06,194] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=43495,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:43495-127.0.0.1:35278-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:06,909] ERROR [KafkaApi-0] Error when handling request: clientId=client-id, correlationId=19, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=2147483647,broker_epoch=9223372036854775807,topic_states=[{topic=topic,partition_states=[{partition=0,controller_epoch=2147483647,leader=0,leader_epoch=2147483647,isr=[0],zk_version=2,replicas=[0],offline_replicas=[]}]}],live_brokers=[\{id=0,end_points=[{port=0,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=1, connectionId=127.0.0.1:43495-127.0.0.1:35396-6, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:06,915] ERROR [KafkaApi-0] Error when handling request: clientId=client-id, correlationId=20, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=2147483647,broker_epoch=9223372036854775807,topic_states=[{topic=topic,partition_states=[{partition=0,controller_epoch=2147483647,leader=0,leader_epoch=2147483647,isr=[0],zk_version=2,replicas=[0],offline_replicas=[]}]}],live_brokers=[\{id=0,end_points=[{port=0,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) java.lang.IllegalStateException: Epoch 9223372036854775807 larger than current broker epoch 25 at kafka.server.KafkaApis.isBrokerEpochStale(KafkaApis.scala:2414) at kafka.server.KafkaApis.handleUpdateMetadataRequest(KafkaApis.scala:236) at kafka.server.KafkaApis.handle(KafkaApis.scala:114) at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:69) at java.lang.Thread.run(Thread.java:748) [2019-03-08 01:53:06,965] ERROR [KafkaApi-0] Error when handling request: clientId=client-id, correlationId=34, api=LEADER_AND_ISR, body=\{controller_id=0,controller_epoch=2147483647,broker_epoch=9223372036854775807,topic_states=[{topic=topic,partition_states=[{partition=0,controller_epoch=2147483647,leader=0,leader_epoch=2147483647,isr=[0],zk_version=2,replicas=[0],is_new=false}]}],live_leaders=[\{id=0,host=localhost,port=0}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=1, connectionId=127.0.0.1:43495-127.0.0.1:35436-11, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:06,968] ERROR [KafkaApi-0] Error when handling request: clientId=client-id, correlationId=35, api=LEADER_AND_ISR, body=\{controller_id=0,controller_epoch=2147483647,broker_epoch=9223372036854775807,topic_states=[{topic=topic,partition_states=[{partition=0,controller_epoch=2147483647,leader=0,leader_epoch=2147483647,isr=[0],zk_version=2,replicas=[0],is_new=false}]}],live_leaders=[\{id=0,host=localhost,port=0}]} (kafka.server.KafkaApis:76) java.lang.IllegalStateException: Epoch 9223372036854775807 larger than current broker epoch 25 at kafka.server.KafkaApis.isBrokerEpochStale(KafkaApis.scala:2414) at kafka.server.KafkaApis.handleLeaderAndIsrRequest(KafkaApis.scala:188) at kafka.server.KafkaApis.handle(KafkaApis.scala:112) at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:69) at java.lang.Thread.run(Thread.java:748) [2019-03-08 01:53:06,977] ERROR [KafkaApi-0] Error when handling request: clientId=client-id, correlationId=36, api=CONTROLLED_SHUTDOWN, body=\{broker_id=0,broker_epoch=9223372036854775807} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:43495-127.0.0.1:35442-12, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:06,998] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=7, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[{topic=topic-delete,partition_states=[{partition=0,controller_epoch=1,leader=-2,leader_epoch=0,isr=[0],zk_version=0,replicas=[0],offline_replicas=[0]}]}],live_brokers=[\{id=0,end_points=[{port=43495,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:43495-127.0.0.1:35278-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:12,244] ERROR [KafkaApi-0] Error when handling request: clientId=client-id, correlationId=53, api=CREATE_ACLS, body=\{creations=[{resource_type=2,resource_name=mytopic,resource_pattten_type=3,principal=Group:testGroup,host=*,operation=4,permission_type=2}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=2, connectionId=127.0.0.1:43495-127.0.0.1:35698-17, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:12,280] ERROR [KafkaApi-0] Error when handling request: clientId=client-id, correlationId=55, api=DELETE_ACLS, body=\{filters=[{resource_type=2,resource_name=null,resource_pattern_type_filter=3,principal=Group:testGroup,host=*,operation=1,permission_type=2}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=1, connectionId=127.0.0.1:43495-127.0.0.1:35702-18, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:12,307] ERROR [KafkaApi-0] Error when handling request: clientId=client-id, correlationId=57, api=DESCRIBE_ACLS, body=\{resource_type=1,resource_name=null,resource_pattern_type_filter=1,principal=null,host=null,operation=1,permission_type=1} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:43495-127.0.0.1:35708-19, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:12,512] ERROR [KafkaApi-0] Error when handling request: clientId=client-id, correlationId=71, api=STOP_REPLICA, body=\{controller_id=0,controller_epoch=2147483647,broker_epoch=9223372036854775807,delete_partitions=true,partitions=[{topic=topic,partition_ids=[0]}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=2, connectionId=127.0.0.1:43495-127.0.0.1:35744-23, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:12,517] ERROR [KafkaApi-0] Error when handling request: clientId=client-id, correlationId=72, api=STOP_REPLICA, body=\{controller_id=0,controller_epoch=2147483647,broker_epoch=9223372036854775807,delete_partitions=true,partitions=[{topic=topic,partition_ids=[0]}]} (kafka.server.KafkaApis:76) java.lang.IllegalStateException: Epoch 9223372036854775807 larger than current broker epoch 25 at kafka.server.KafkaApis.isBrokerEpochStale(KafkaApis.scala:2414) at kafka.server.KafkaApis.handleStopReplicaRequest(KafkaApis.scala:206) at kafka.server.KafkaApis.handle(KafkaApis.scala:113) at kafka.server.KafkaRequestHandler.run(KafkaRequestHandler.scala:69) at java.lang.Thread.run(Thread.java:748) [2019-03-08 01:53:19,035] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=45440,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:45440-127.0.0.1:48754-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:21,157] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=44032,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:44032-127.0.0.1:52178-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:24,170] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=46355,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:46355-127.0.0.1:53744-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:28,197] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=35165,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:35165-127.0.0.1:41874-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:32,376] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=35831,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:35831-127.0.0.1:48920-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:35,732] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=46845,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:46845-127.0.0.1:35856-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:40,807] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=45417,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:45417-127.0.0.1:54234-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized. [2019-03-08 01:53:41,434] ERROR [Producer clientId=producer-63] Aborting producer batches due to fatal error (org.apache.kafka.clients.producer.internals.Sender:457) org.apache.kafka.common.errors.ClusterAuthorizationException: Cluster authorization failed. [2019-03-08 01:53:41,437] ERROR [Producer clientId=producer-63] Aborting producer batches due to fatal error (org.apache.kafka.clients.producer.internals.Sender:457) org.apache.kafka.common.errors.ClusterAuthorizationException: Cluster authorization failed. [2019-03-08 01:53:44,196] ERROR [KafkaApi-0] Error when handling request: clientId=0, correlationId=0, api=UPDATE_METADATA, body=\{controller_id=0,controller_epoch=1,broker_epoch=25,topic_states=[],live_brokers=[{id=0,end_points=[{port=32999,host=localhost,listener_name=PLAINTEXT,security_protocol_type=0}],rack=null}]} (kafka.server.KafkaApis:76) org.apache.kafka.common.errors.ClusterAuthorizationException: Request Request(processor=0, connectionId=127.0.0.1:32999-127.0.0.1:41080-0, session=Session(Group:testGroup,/127.0.0.1), listenerName=ListenerName(PLAINTEXT), securityProtocol=PLAINTEXT, buffer=null) is not authorized.{quote}