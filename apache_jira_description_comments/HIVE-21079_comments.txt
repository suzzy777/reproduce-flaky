Initial patch attached to trigger ptests.

The patch also includes changes for stats replication for non-partitioned table since that code is used to replicate the table level statistics for a partitioned table as well. Once HIVE-21078 gets committed, this code will be removed from the patch.

During bootstrap column stats for partitions is replicated along with the serialized Partition object for dump with data (non-metadata-only dump). During incremental load, UpdatePartitionColumnStats events are applied to replicate column statistics and ALTER PARTITION events are used to replicate partition level stats.

The patch also includes two bug fixes:
 # ALTER PARTITION events not applied during incremental replication. In AlterPartitionHandler, we set withinContext.replicationSpec.setIsMetadataOnly(true);
 In ImportSemanticAnalyzer.createReplImportTasks(), per code around line 1197, we do not add new PartitionSpecs and corresponding tasks. This means that we never apply an ALTER_PARTITION event during incremental load. That looks like a serious bug. Either we should check PartitionDescs irrespective of  replicationSpec.setIsMetadataOnly() OR we shouldn’t set replicationSpec.setIsMetadataOnly() to true while dumping an ALTER_PARTITION event. We set replicationSpec.setIsMetadataOnly(true) for ALTER TABLE events as well, so doing that for ALTER PARTITION event looks fine.
 # Do not dump partition related events during a metadata only dump. During bootstrap metadata-only dump we do not dump partitions (See TableExport.getPartitions(). For
 bootstrap dump we always pass TableSpec with TABLE_ONLY set.). So don't dump partition related events for a metadata-only dump.

 

Those should probably get committed in separate tasks, but added here for completeness and testing.

| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
|| || || || {color:brown} Prechecks {color} ||
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
|| || || || {color:brown} master Compile Tests {color} ||
| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  1m 29s{color} | {color:blue} Maven dependency ordering for branch {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  6m 15s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  2m 59s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  1m 34s{color} | {color:green} master passed {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  2m 10s{color} | {color:blue} standalone-metastore/metastore-common in master has 29 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  1m  0s{color} | {color:blue} standalone-metastore/metastore-server in master has 188 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  3m 31s{color} | {color:blue} ql in master has 2310 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 25s{color} | {color:blue} hcatalog/server-extensions in master has 3 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 38s{color} | {color:blue} itests/hive-unit in master has 2 extant Findbugs warnings. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  2m 43s{color} | {color:green} master passed {color} |
|| || || || {color:brown} Patch Compile Tests {color} ||
| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 25s{color} | {color:blue} Maven dependency ordering for patch {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  3m 24s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  3m  0s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green}  3m  0s{color} | {color:green} the patch passed {color} |
| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 40s{color} | {color:red} ql: The patch generated 28 new + 784 unchanged - 6 fixed = 812 total (was 790) {color} |
| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 21s{color} | {color:red} itests/hive-unit: The patch generated 2 new + 771 unchanged - 0 fixed = 773 total (was 771) {color} |
| {color:red}-1{color} | {color:red} whitespace {color} | {color:red}  0m  0s{color} | {color:red} The patch has 8 line(s) that end in whitespace. Use git apply --whitespace=fix <<patch_file>>. Refer https://git-scm.com/docs/git-apply {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  8m 57s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 51s{color} | {color:green} metastore-common in the patch passed. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 17s{color} | {color:green} standalone-metastore_metastore-server generated 0 new + 49 unchanged - 1 fixed = 49 total (was 50) {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 52s{color} | {color:green} ql in the patch passed. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 12s{color} | {color:green} server-extensions in the patch passed. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m  9s{color} | {color:green} tools-common in the patch passed. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 22s{color} | {color:green} hive-unit in the patch passed. {color} |
|| || || || {color:brown} Other Tests {color} ||
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 12s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 44m 56s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |
| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-15750/dev-support/hive-personality.sh |
| git revision | master / dfd63d9 |
| Default Java | 1.8.0_111 |
| findbugs | v3.0.0 |
| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15750/yetus/diff-checkstyle-ql.txt |
| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15750/yetus/diff-checkstyle-itests_hive-unit.txt |
| whitespace | http://104.198.109.242/logs//PreCommit-HIVE-Build-15750/yetus/whitespace-eol.txt |
| modules | C: standalone-metastore/metastore-common standalone-metastore/metastore-server ql hcatalog/server-extensions standalone-metastore/metastore-tools/tools-common itests/hive-unit U: . |
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-15750/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.





Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12955904/HIVE-21079.01.patch

{color:green}SUCCESS:{color} +1 due to 8 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 3 failed/errored test(s), 15707 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[mapjoin_memcheck] (batchId=45)
org.apache.hadoop.hive.metastore.TestFilterHooks.testHMSClientWithoutFilter (batchId=220)
org.apache.hadoop.hive.metastore.TestFilterHooks.testHMSServerWithoutFilter (batchId=220)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/15750/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/15750/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-15750/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12955904 - PreCommit-HIVE-Build

This patch is rebased on the changes committed for HIVE-21078, so it's the real thing intended to be committed.

I have fixed some checkstyle notices and also the failures from the last ptest run.

[~sankarh], can you please review?

Github user ashutosh-bapat closed the pull request at:

    https://github.com/apache/hive/pull/522


GitHub user ashutosh-bapat reopened a pull request:

    https://github.com/apache/hive/pull/522

    HIVE-21079: Stats replication for partitioned table

    The first commit is for stats replication for partitioned table. The other two commits are fixing bugs in existing code, AFAIU.
    
    @sankarh can you please review?

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/ashutosh-bapat/hive hive21079

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/hive/pull/522.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #522
    
----
commit a8b729ab1f120cd50c0ad0e096bb0f724a178838
Author: Ashutosh Bapat <ashutosh.bapat.oss@...>
Date:   2019-01-15T12:06:29Z

    HIVE-21079: Replicate statistics for partitioned, non-transactional tables.
    
    Ashutosh Bapat

commit c8aea7b85a06ab53873ce60eb08fcf0514806787
Author: Ashutosh Bapat <ashutosh.bapat.oss@...>
Date:   2019-01-18T05:31:44Z

    HIVE-21079: ALTER PARTITION events not applied during incremental replication
    
    In AlterPartitionHandler, we set withinContext.replicationSpec.setIsMetadataOnly(true);
    In ImportSemanticAnalyzer.createReplImportTasks(), per code around line 1197, we do not add new
    PartitionSpecs and corresponding tasks. This means that we never apply an ALTER_PARTITION event
    during incremental load. That looks like a serious bug.
    
    Either we should check PartitionDescs irrespective of replicationSpec.setIsMetadataOnly() OR we
    shouldn’t set replicationSpec.setIsMetadataOnly() to true while dumping an ALTER_PARTITION event. We
    set replicationSpec.setIsMetadataOnly(true) for ALTER TABLE events as well, so doing that for ALTER
    PARTITION event looks fine.
    
    Ashutosh Bapat.

commit 536492395cd5c280738c2ec1038c39036b477209
Author: Ashutosh Bapat <ashutosh.bapat.oss@...>
Date:   2019-01-18T06:07:37Z

    HIVE-21079: Do not dump partition related events during a metadata only dump.
    
    During bootstrap metadata-only dump we do not dump partitions (See TableExport.getPartitions(). For
    bootstrap dump we always pass TableSpec with TABLE_ONLY set.). So don't dump partition related
    events for a metadata-only dump.
    
    Ashutosh Bapat.

----


| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
|| || || || {color:brown} Prechecks {color} ||
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
|| || || || {color:brown} master Compile Tests {color} ||
| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  1m 19s{color} | {color:blue} Maven dependency ordering for branch {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  6m 17s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  3m  1s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  1m 33s{color} | {color:green} master passed {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  2m 10s{color} | {color:blue} standalone-metastore/metastore-common in master has 29 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 59s{color} | {color:blue} standalone-metastore/metastore-server in master has 184 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  3m 37s{color} | {color:blue} ql in master has 2304 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 26s{color} | {color:blue} hcatalog/server-extensions in master has 3 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 37s{color} | {color:blue} itests/hive-unit in master has 2 extant Findbugs warnings. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  2m 40s{color} | {color:green} master passed {color} |
|| || || || {color:brown} Patch Compile Tests {color} ||
| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 25s{color} | {color:blue} Maven dependency ordering for patch {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  3m 24s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  3m  7s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green}  3m  7s{color} | {color:green} the patch passed {color} |
| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 37s{color} | {color:red} ql: The patch generated 5 new + 363 unchanged - 5 fixed = 368 total (was 368) {color} |
| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 20s{color} | {color:red} itests/hive-unit: The patch generated 1 new + 565 unchanged - 3 fixed = 566 total (was 568) {color} |
| {color:red}-1{color} | {color:red} whitespace {color} | {color:red}  0m  0s{color} | {color:red} The patch has 4 line(s) that end in whitespace. Use git apply --whitespace=fix <<patch_file>>. Refer https://git-scm.com/docs/git-apply {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  8m 46s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  2m 41s{color} | {color:green} the patch passed {color} |
|| || || || {color:brown} Other Tests {color} ||
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 12s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 44m 37s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |
| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-15775/dev-support/hive-personality.sh |
| git revision | master / a7e704c |
| Default Java | 1.8.0_111 |
| findbugs | v3.0.0 |
| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15775/yetus/diff-checkstyle-ql.txt |
| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15775/yetus/diff-checkstyle-itests_hive-unit.txt |
| whitespace | http://104.198.109.242/logs//PreCommit-HIVE-Build-15775/yetus/whitespace-eol.txt |
| modules | C: standalone-metastore/metastore-common standalone-metastore/metastore-server ql hcatalog/server-extensions standalone-metastore/metastore-tools/tools-common itests/hive-unit U: . |
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-15775/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.





Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12956089/HIVE-21079.02.patch

{color:green}SUCCESS:{color} +1 due to 4 test(s) being added or modified.

{color:green}SUCCESS:{color} +1 due to 15709 tests passed

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/15775/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/15775/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-15775/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12956089 - PreCommit-HIVE-Build

[~ashutosh.bapat]
Posted few comments in the pull request. Please take a look.

[~sankarh], PFA patch with your comments addressed. Please take a look. I have updated PR with the same.



Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12956563/HIVE-21079.03.patch

{color:red}ERROR:{color} -1 due to build exiting with an error

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/15808/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/15808/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-15808/

Messages:
{noformat}
**** This message was trimmed, see log for full details ****
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/PutFileMetadataRequest.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/RenamePartitionRequest.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ReplLastIdInfo.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ReplTblWriteIdStateRequest.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/SchemaVersion.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ShowCompactResponse.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ShowLocksResponse.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/TableValidWriteIds.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/WMFullResourcePlan.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/WMGetAllResourcePlanResponse.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/WMGetTriggersForResourePlanResponse.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/WMValidateResourcePlanResponse.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/WriteNotificationLogRequest.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-php/metastore/ThriftHiveMetastore.php: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-php/metastore/Types.php: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore-remote: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-py/hive_metastore/ThriftHiveMetastore.py: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-py/hive_metastore/ttypes.py: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-rb/hive_metastore_types.rb: does not exist in index
error: a/standalone-metastore/metastore-common/src/gen/thrift/gen-rb/thrift_hive_metastore.rb: does not exist in index
error: a/standalone-metastore/metastore-common/src/main/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/main/java/org/apache/hadoop/hive/metastore/IMetaStoreClient.java: does not exist in index
error: a/standalone-metastore/metastore-common/src/main/thrift/hive_metastore.thrift: does not exist in index
error: a/standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java: does not exist in index
error: a/standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/events/UpdatePartitionColumnStatEvent.java: does not exist in index
error: a/standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/messaging/MessageBuilder.java: does not exist in index
error: a/standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/messaging/UpdatePartitionColumnStatMessage.java: does not exist in index
error: a/standalone-metastore/metastore-server/src/main/java/org/apache/hadoop/hive/metastore/messaging/json/JSONUpdatePartitionColumnStatMessage.java: does not exist in index
error: a/standalone-metastore/metastore-server/src/test/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClientPreCatalog.java: does not exist in index
error: a/standalone-metastore/metastore-server/src/test/java/org/apache/hadoop/hive/metastore/TestStats.java: does not exist in index
Going to apply patch with: git apply -p1
/data/hiveptest/working/scratch/build.patch:3863: trailing whitespace.
    tmpMap.put(_Fields.COL_STATS, new org.apache.thrift.meta_data.FieldMetaData("colStats", org.apache.thrift.TFieldRequirementType.OPTIONAL, 
/data/hiveptest/working/scratch/build.patch:4021: trailing whitespace.
            } else { 
/data/hiveptest/working/scratch/build.patch:4858: trailing whitespace.
        return new AsyncMethodCallback<GetPartitionsByNamesResult>() { 
/data/hiveptest/working/scratch/build.patch:4884: trailing whitespace.
             else 
/data/hiveptest/working/scratch/build.patch:8436: trailing whitespace.
      tmpMap.put(_Fields.REQ, new org.apache.thrift.meta_data.FieldMetaData("req", org.apache.thrift.TFieldRequirementType.DEFAULT, 
warning: squelched 9 whitespace errors
warning: 14 lines add whitespace errors.
+ [[ maven == \m\a\v\e\n ]]
+ rm -rf /data/hiveptest/working/maven/org/apache/hive
+ mvn -B clean install -DskipTests -T 4 -q -Dmaven.repo.local=/data/hiveptest/working/maven
protoc-jar: executing: [/tmp/protoc2005957761422791047.exe, --version]
libprotoc 2.5.0
protoc-jar: executing: [/tmp/protoc2005957761422791047.exe, -I/data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/main/protobuf/org/apache/hadoop/hive/metastore, --java_out=/data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/target/generated-sources, /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/main/protobuf/org/apache/hadoop/hive/metastore/metastore.proto]
ANTLR Parser Generator  Version 3.5.2
[ERROR] COMPILATION ERROR : 
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[211,67] cannot find symbol
  symbol:   class GetPartitionsByNamesRequest
  location: interface org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.Iface
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[211,12] cannot find symbol
  symbol:   class GetPartitionsByNamesResult
  location: interface org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.Iface
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[661,45] cannot find symbol
  symbol:   class GetPartitionsByNamesRequest
  location: interface org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncIface
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[3467,67] cannot find symbol
  symbol:   class GetPartitionsByNamesRequest
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.Client
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[3467,12] cannot find symbol
  symbol:   class GetPartitionsByNamesResult
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.Client
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[3473,50] cannot find symbol
  symbol:   class GetPartitionsByNamesRequest
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.Client
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[3480,12] cannot find symbol
  symbol:   class GetPartitionsByNamesResult
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.Client
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[10345,45] cannot find symbol
  symbol:   class GetPartitionsByNamesRequest
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncClient
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[10353,15] cannot find symbol
  symbol:   class GetPartitionsByNamesRequest
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncClient.get_partitions_by_names_req_call
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[10354,47] cannot find symbol
  symbol:   class GetPartitionsByNamesRequest
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncClient.get_partitions_by_names_req_call
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[10367,14] cannot find symbol
  symbol:   class GetPartitionsByNamesResult
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncClient.get_partitions_by_names_req_call
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126095,13] cannot find symbol
  symbol:   class GetPartitionsByNamesRequest
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_args
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126169,7] cannot find symbol
  symbol:   class GetPartitionsByNamesRequest
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_args
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126193,12] cannot find symbol
  symbol:   class GetPartitionsByNamesRequest
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_args
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126197,24] cannot find symbol
  symbol:   class GetPartitionsByNamesRequest
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_args
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126460,13] cannot find symbol
  symbol:   class GetPartitionsByNamesResult
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_result
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126546,7] cannot find symbol
  symbol:   class GetPartitionsByNamesResult
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_result
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126582,12] cannot find symbol
  symbol:   class GetPartitionsByNamesResult
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_result
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126586,28] cannot find symbol
  symbol:   class GetPartitionsByNamesResult
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_result
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[26374,278] cannot find symbol
  symbol:   class GetPartitionsByNamesResult
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncProcessor<I>
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[26383,34] cannot find symbol
  symbol:   class GetPartitionsByNamesResult
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncProcessor.get_partitions_by_names_req<I>
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[26431,117] cannot find symbol
  symbol:   class GetPartitionsByNamesResult
  location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncProcessor.get_partitions_by_names_req<I>
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.5.1:compile (default-compile) on project hive-standalone-metastore-common: Compilation failure: Compilation failure:
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[211,67] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesRequest
[ERROR] location: interface org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.Iface
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[211,12] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesResult
[ERROR] location: interface org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.Iface
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[661,45] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesRequest
[ERROR] location: interface org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncIface
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[3467,67] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesRequest
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.Client
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[3467,12] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesResult
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.Client
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[3473,50] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesRequest
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.Client
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[3480,12] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesResult
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.Client
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[10345,45] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesRequest
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncClient
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[10353,15] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesRequest
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncClient.get_partitions_by_names_req_call
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[10354,47] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesRequest
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncClient.get_partitions_by_names_req_call
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[10367,14] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesResult
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncClient.get_partitions_by_names_req_call
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126095,13] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesRequest
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_args
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126169,7] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesRequest
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_args
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126193,12] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesRequest
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_args
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126197,24] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesRequest
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_args
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126460,13] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesResult
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_result
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126546,7] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesResult
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_result
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126582,12] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesResult
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_result
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[126586,28] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesResult
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.get_partitions_by_names_req_result
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[26374,278] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesResult
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncProcessor<I>
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[26383,34] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesResult
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncProcessor.get_partitions_by_names_req<I>
[ERROR] /data/hiveptest/working/apache-github-source-source/standalone-metastore/metastore-common/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/ThriftHiveMetastore.java:[26431,117] cannot find symbol
[ERROR] symbol:   class GetPartitionsByNamesResult
[ERROR] location: class org.apache.hadoop.hive.metastore.api.ThriftHiveMetastore.AsyncProcessor.get_partitions_by_names_req<I>
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :hive-standalone-metastore-common
+ result=1
+ '[' 1 -ne 0 ']'
+ rm -rf yetus_PreCommit-HIVE-Build-15808
+ exit 1
'
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12956563 - PreCommit-HIVE-Build

| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
|| || || || {color:brown} Prechecks {color} ||
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
|| || || || {color:brown} master Compile Tests {color} ||
| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  1m  4s{color} | {color:blue} Maven dependency ordering for branch {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  6m 47s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  2m 47s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  1m 22s{color} | {color:green} master passed {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  2m 16s{color} | {color:blue} standalone-metastore/metastore-common in master has 29 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  1m  5s{color} | {color:blue} standalone-metastore/metastore-server in master has 184 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  3m 42s{color} | {color:blue} ql in master has 2304 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 26s{color} | {color:blue} hcatalog/server-extensions in master has 3 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 38s{color} | {color:blue} itests/hive-unit in master has 2 extant Findbugs warnings. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  2m 40s{color} | {color:green} master passed {color} |
|| || || || {color:brown} Patch Compile Tests {color} ||
| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 24s{color} | {color:blue} Maven dependency ordering for patch {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  3m 11s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  2m 44s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green}  2m 44s{color} | {color:green} the patch passed {color} |
| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 40s{color} | {color:red} ql: The patch generated 5 new + 363 unchanged - 5 fixed = 368 total (was 368) {color} |
| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 20s{color} | {color:red} itests/hive-unit: The patch generated 1 new + 565 unchanged - 3 fixed = 566 total (was 568) {color} |
| {color:red}-1{color} | {color:red} whitespace {color} | {color:red}  0m  1s{color} | {color:red} The patch has 28 line(s) that end in whitespace. Use git apply --whitespace=fix <<patch_file>>. Refer https://git-scm.com/docs/git-apply {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  8m 46s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  2m 36s{color} | {color:green} the patch passed {color} |
|| || || || {color:brown} Other Tests {color} ||
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 12s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 43m 31s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |
| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-15809/dev-support/hive-personality.sh |
| git revision | master / fd92d88 |
| Default Java | 1.8.0_111 |
| findbugs | v3.0.0 |
| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15809/yetus/diff-checkstyle-ql.txt |
| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15809/yetus/diff-checkstyle-itests_hive-unit.txt |
| whitespace | http://104.198.109.242/logs//PreCommit-HIVE-Build-15809/yetus/whitespace-eol.txt |
| modules | C: standalone-metastore/metastore-common standalone-metastore/metastore-server ql hcatalog/server-extensions itests/hive-unit U: . |
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-15809/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.





Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12956567/HIVE-21079.04.patch

{color:green}SUCCESS:{color} +1 due to 4 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 15719 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.metastore.client.TestGetPartitions.testGetPartitionsByNamesNullNames[Remote] (batchId=222)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/15809/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/15809/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-15809/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12956567 - PreCommit-HIVE-Build

Patch fixing failure from the last ptest run. Updated PR, which has only one commit post first round of review.

+1 for 05.patch, pending tests

| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
|| || || || {color:brown} Prechecks {color} ||
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
|| || || || {color:brown} master Compile Tests {color} ||
| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 46s{color} | {color:blue} Maven dependency ordering for branch {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  7m  8s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  2m 43s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  1m 20s{color} | {color:green} master passed {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  2m  9s{color} | {color:blue} standalone-metastore/metastore-common in master has 29 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  1m  4s{color} | {color:blue} standalone-metastore/metastore-server in master has 184 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  3m 40s{color} | {color:blue} ql in master has 2304 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 26s{color} | {color:blue} hcatalog/server-extensions in master has 3 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 36s{color} | {color:blue} itests/hive-unit in master has 2 extant Findbugs warnings. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  2m 34s{color} | {color:green} master passed {color} |
|| || || || {color:brown} Patch Compile Tests {color} ||
| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 26s{color} | {color:blue} Maven dependency ordering for patch {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  3m 13s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  2m 42s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green}  2m 42s{color} | {color:green} the patch passed {color} |
| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 39s{color} | {color:red} ql: The patch generated 5 new + 363 unchanged - 5 fixed = 368 total (was 368) {color} |
| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 19s{color} | {color:red} itests/hive-unit: The patch generated 1 new + 565 unchanged - 3 fixed = 566 total (was 568) {color} |
| {color:red}-1{color} | {color:red} whitespace {color} | {color:red}  0m  0s{color} | {color:red} The patch has 28 line(s) that end in whitespace. Use git apply --whitespace=fix <<patch_file>>. Refer https://git-scm.com/docs/git-apply {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  8m 31s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  2m 32s{color} | {color:green} the patch passed {color} |
|| || || || {color:brown} Other Tests {color} ||
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 12s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 42m 50s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |
| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-15819/dev-support/hive-personality.sh |
| git revision | master / 9747083 |
| Default Java | 1.8.0_111 |
| findbugs | v3.0.0 |
| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15819/yetus/diff-checkstyle-ql.txt |
| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15819/yetus/diff-checkstyle-itests_hive-unit.txt |
| whitespace | http://104.198.109.242/logs//PreCommit-HIVE-Build-15819/yetus/whitespace-eol.txt |
| modules | C: standalone-metastore/metastore-common standalone-metastore/metastore-server ql hcatalog/server-extensions itests/hive-unit U: . |
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-15819/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.





Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12956684/HIVE-21079.05.patch

{color:green}SUCCESS:{color} +1 due to 4 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 1 failed/errored test(s), 15720 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[mapjoin_memcheck] (batchId=45)
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/15819/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/15819/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-15819/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12956684 - PreCommit-HIVE-Build

Attaching the same patch as .05 only renamed again to trigger ptest. The test failed in the last run is flaky and passes for me when run individually.

| (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
|| || || || {color:brown} Prechecks {color} ||
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
|| || || || {color:brown} master Compile Tests {color} ||
| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  1m 15s{color} | {color:blue} Maven dependency ordering for branch {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  6m 26s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  2m 45s{color} | {color:green} master passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  1m 18s{color} | {color:green} master passed {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  2m 10s{color} | {color:blue} standalone-metastore/metastore-common in master has 29 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  1m  7s{color} | {color:blue} standalone-metastore/metastore-server in master has 184 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  3m 40s{color} | {color:blue} ql in master has 2304 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 25s{color} | {color:blue} hcatalog/server-extensions in master has 3 extant Findbugs warnings. {color} |
| {color:blue}0{color} | {color:blue} findbugs {color} | {color:blue}  0m 37s{color} | {color:blue} itests/hive-unit in master has 2 extant Findbugs warnings. {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  2m 32s{color} | {color:green} master passed {color} |
|| || || || {color:brown} Patch Compile Tests {color} ||
| {color:blue}0{color} | {color:blue} mvndep {color} | {color:blue}  0m 25s{color} | {color:blue} Maven dependency ordering for patch {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  3m  8s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  2m 49s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green}  2m 49s{color} | {color:green} the patch passed {color} |
| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 38s{color} | {color:red} ql: The patch generated 5 new + 363 unchanged - 5 fixed = 368 total (was 368) {color} |
| {color:red}-1{color} | {color:red} checkstyle {color} | {color:red}  0m 20s{color} | {color:red} itests/hive-unit: The patch generated 1 new + 565 unchanged - 3 fixed = 566 total (was 568) {color} |
| {color:red}-1{color} | {color:red} whitespace {color} | {color:red}  0m  0s{color} | {color:red} The patch has 28 line(s) that end in whitespace. Use git apply --whitespace=fix <<patch_file>>. Refer https://git-scm.com/docs/git-apply {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  8m 38s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  2m 34s{color} | {color:green} the patch passed {color} |
|| || || || {color:brown} Other Tests {color} ||
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 12s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 43m  3s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Optional Tests |  asflicense  javac  javadoc  findbugs  checkstyle  compile  |
| uname | Linux hiveptest-server-upstream 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u1 (2016-09-03) x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /data/hiveptest/working/yetus_PreCommit-HIVE-Build-15821/dev-support/hive-personality.sh |
| git revision | master / 9747083 |
| Default Java | 1.8.0_111 |
| findbugs | v3.0.0 |
| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15821/yetus/diff-checkstyle-ql.txt |
| checkstyle | http://104.198.109.242/logs//PreCommit-HIVE-Build-15821/yetus/diff-checkstyle-itests_hive-unit.txt |
| whitespace | http://104.198.109.242/logs//PreCommit-HIVE-Build-15821/yetus/whitespace-eol.txt |
| modules | C: standalone-metastore/metastore-common standalone-metastore/metastore-server ql hcatalog/server-extensions itests/hive-unit U: . |
| Console output | http://104.198.109.242/logs//PreCommit-HIVE-Build-15821/yetus.txt |
| Powered by | Apache Yetus    http://yetus.apache.org |


This message was automatically generated.





Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12956700/HIVE-21079.06.patch

{color:green}SUCCESS:{color} +1 due to 4 test(s) being added or modified.

{color:green}SUCCESS:{color} +1 due to 15720 tests passed

Test results: https://builds.apache.org/job/PreCommit-HIVE-Build/15821/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-Build/15821/console
Test logs: http://104.198.109.242/logs/PreCommit-HIVE-Build-15821/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.YetusPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12956700 - PreCommit-HIVE-Build

06.patch is committed to master.
Thanks [~ashutosh.bapat] for the patch!

Thanks [~sankarh] for your review comments, help and fixes.

