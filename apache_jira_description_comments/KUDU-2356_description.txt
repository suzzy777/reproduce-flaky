I grabbed a heap sample of a tserver which has been running a write workload for a little while and found that 750MB of memory is used by faststring allocations inside WritableLogSegment::WriteEntryBatch. It seems like this is the 'compress_buf_' member. This buffer always resizes up during a log write but never shrinks back down, even when the WAL is idle. We should consider clearing the buffer after each append, or perhaps after a short timeout like 100ms after a WAL becomes idle.