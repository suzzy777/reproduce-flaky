h1. I have seen this fail the following tests:

org.apache.beam.sdk.io.clickhouse.AtomicInsertTest.classMethod

org.apache.beam.sdk.io.clickhouse.ClickHouseIOTest.classMethod

[https://builds.apache.org/job/beam_PreCommit_Java_Commit/3722/]

 
h1. Failed

org.apache.beam.sdk.io.clickhouse.AtomicInsertTest.classMethod
Failing for the past 1 build (Since [!https://builds.apache.org/static/3b09176f/images/16x16/red.png! #3722|https://builds.apache.org/job/beam_PreCommit_Java_Commit/3722/] )
[Took 16 ms.|https://builds.apache.org/job/beam_PreCommit_Java_Commit/3722/testReport/junit/org.apache.beam.sdk.io.clickhouse/AtomicInsertTest/classMethod/history]
 
h3. Error Message

org.testcontainers.containers.ContainerLaunchException: Container startup failed
h3. Stacktrace

org.testcontainers.containers.ContainerLaunchException: Container startup failed at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:250) at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:228) at org.apache.beam.sdk.io.clickhouse.BaseClickHouseTest.setup(BaseClickHouseTest.java:66) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56) at org.junit.internal.runners.statements.RunBefores.invokeMethod(RunBefores.java:33) at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24) at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27) at org.junit.runners.ParentRunner.run(ParentRunner.java:396) at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:106) at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58) at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38) at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66) at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32) at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93) at com.sun.proxy.$Proxy2.processTestClass(Unknown Source) at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:117) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:155) at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:137) at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404) at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63) at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55) at java.lang.Thread.run(Thread.java:748) Caused by: org.rnorth.ducttape.RetryCountExceededException: Retry limit hit with exception at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:83) at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:243) ... 43 more Caused by: org.testcontainers.containers.ContainerLaunchException: Could not create/start container at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:323) at org.testcontainers.containers.GenericContainer.lambda$doStart$0(GenericContainer.java:245) at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:76) ... 44 more Caused by: java.lang.reflect.UndeclaredThrowableException at com.sun.proxy.$Proxy25.exec(Unknown Source) at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:266) ... 46 more Caused by: java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.testcontainers.dockerclient.AuditLoggingDockerClient.lambda$wrappedCommand$14(AuditLoggingDockerClient.java:98) ... 48 more Caused by: com.github.dockerjava.api.exception.NotFoundException: \{"message":"No such image: yandex/clickhouse-server:18.10.3"} at org.testcontainers.dockerclient.transport.okhttp.OkHttpInvocationBuilder.execute(OkHttpInvocationBuilder.java:273) at org.testcontainers.dockerclient.transport.okhttp.OkHttpInvocationBuilder.execute(OkHttpInvocationBuilder.java:257) at org.testcontainers.dockerclient.transport.okhttp.OkHttpInvocationBuilder.post(OkHttpInvocationBuilder.java:128) at com.github.dockerjava.core.exec.CreateContainerCmdExec.execute(CreateContainerCmdExec.java:33) at com.github.dockerjava.core.exec.CreateContainerCmdExec.execute(CreateContainerCmdExec.java:13) at com.github.dockerjava.core.exec.AbstrSyncDockerCmdExec.exec(AbstrSyncDockerCmdExec.java:21) at com.github.dockerjava.core.command.AbstrDockerCmd.exec(AbstrDockerCmd.java:35) at com.github.dockerjava.core.command.CreateContainerCmdImpl.exec(CreateContainerCmdImpl.java:189) ... 53 more
h3. Standard Output

ℹ︎ Checking the system... ✔ Docker version should be at least 1.6.0 ✔ Docker environment should have more than 2GB free disk space
h3. Standard Error

Jan 23, 2019 8:31:50 PM org.testcontainers.dockerclient.DockerClientProviderStrategy getClientForConfig INFO: Will use 'okhttp' transport Jan 23, 2019 8:31:51 PM org.testcontainers.dockerclient.EnvironmentAndSystemPropertyClientProviderStrategy test INFO: Found docker client settings from environment Jan 23, 2019 8:31:51 PM org.testcontainers.dockerclient.DockerClientProviderStrategy lambda$getFirstValidStrategy$2 INFO: Found Docker environment with Environment variables, system properties and defaults. Resolved: dockerHost=unix:///var/run/docker.sock apiVersion='\{UNKNOWN_VERSION}' registryUrl='

[https://index.docker.io/v1/']

registryUsername='jenkins' registryPassword='null' registryEmail='null' dockerConfig='DefaultDockerClientConfig[dockerHost=unix:///var/run/docker.sock,registryUsername=jenkins,registryPassword=<null>,registryEmail=<null>,registryUrl=

[https://index.docker.io/v1/,dockerConfigPath=/home/jenkins/.docker,sslConfig=<null|https://index.docker.io/v1/,dockerConfigPath=/home/jenkins/.docker,sslConfig=%3Cnull]

>,apiVersion=\{UNKNOWN_VERSION},dockerConfig=<null>]' Jan 23, 2019 8:31:51 PM org.testcontainers.DockerClientFactory client INFO: Docker host IP address is localhost Jan 23, 2019 8:31:51 PM org.testcontainers.DockerClientFactory client INFO: Connected to docker: Server Version: 17.05.0-ce API Version: 1.29 Operating System: Ubuntu 16.04.5 LTS Total Memory: 104742 MB Jan 23, 2019 8:31:52 PM org.testcontainers.utility.RegistryAuthLocator lookupAuthConfig WARNING: Failure when attempting to lookup auth config (dockerImageName: quay.io/testcontainers/ryuk:0.2.2, configFile: /home/jenkins/.docker/config.json. Falling back to docker-java default behaviour. Exception message: /home/jenkins/.docker/config.json (No such file or directory) Jan 23, 2019 8:31:53 PM org.testcontainers.utility.RegistryAuthLocator lookupAuthConfig WARNING: Failure when attempting to lookup auth config (dockerImageName: quay.io/testcontainers/ryuk:0.2.2, configFile: /home/jenkins/.docker/config.json. Falling back to docker-java default behaviour. Exception message: /home/jenkins/.docker/config.json (No such file or directory) Jan 23, 2019 8:31:55 PM org.testcontainers.DockerClientFactory client INFO: Ryuk started - will monitor and terminate Testcontainers containers on JVM exit Jan 23, 2019 8:31:55 PM org.testcontainers.images.RemoteDockerImage resolve INFO: Pulling docker image: zookeeper:3.4.13. Please be patient; this may take some time but only needs to be done once. Jan 23, 2019 8:31:55 PM org.testcontainers.utility.RegistryAuthLocator lookupAuthConfig WARNING: Failure when attempting to lookup auth config (dockerImageName: zookeeper:latest, configFile: /home/jenkins/.docker/config.json. Falling back to docker-java default behaviour. Exception message: /home/jenkins/.docker/config.json (No such file or directory) Jan 23, 2019 8:32:02 PM org.testcontainers.containers.GenericContainer tryStart INFO: Creating container for image: zookeeper:3.4.13 Jan 23, 2019 8:32:02 PM org.testcontainers.utility.RegistryAuthLocator lookupAuthConfig WARNING: Failure when attempting to lookup auth config (dockerImageName: zookeeper:3.4.13, configFile: /home/jenkins/.docker/config.json. Falling back to docker-java default behaviour. Exception message: /home/jenkins/.docker/config.json (No such file or directory) Jan 23, 2019 8:32:04 PM org.testcontainers.containers.GenericContainer tryStart INFO: Starting container with ID: e880744110cc7b1a91a451e73ff1e822e0f6e72af7201a35189684676c981a70 Jan 23, 2019 8:32:05 PM org.testcontainers.containers.GenericContainer tryStart INFO: Container zookeeper:3.4.13 is starting: e880744110cc7b1a91a451e73ff1e822e0f6e72af7201a35189684676c981a70 Jan 23, 2019 8:32:07 PM org.testcontainers.containers.GenericContainer tryStart INFO: Container zookeeper:3.4.13 started Jan 23, 2019 8:32:07 PM org.testcontainers.images.RemoteDockerImage resolve INFO: Pulling docker image: yandex/clickhouse-server:18.10.3. Please be patient; this may take some time but only needs to be done once. Jan 23, 2019 8:32:07 PM org.testcontainers.utility.RegistryAuthLocator lookupAuthConfig WARNING: Failure when attempting to lookup auth config (dockerImageName: yandex/clickhouse-server:latest, configFile: /home/jenkins/.docker/config.json. Falling back to docker-java default behaviour. Exception message: /home/jenkins/.docker/config.json (No such file or directory) Jan 23, 2019 8:32:20 PM org.testcontainers.containers.GenericContainer tryStart INFO: Creating container for image: yandex/clickhouse-server:18.10.3 Jan 23, 2019 8:32:20 PM org.testcontainers.utility.RegistryAuthLocator lookupAuthConfig WARNING: Failure when attempting to lookup auth config (dockerImageName: yandex/clickhouse-server:18.10.3, configFile: /home/jenkins/.docker/config.json. Falling back to docker-java default behaviour. Exception message: /home/jenkins/.docker/config.json (No such file or directory) Jan 23, 2019 8:32:20 PM org.testcontainers.utility.RegistryAuthLocator lookupAuthConfig WARNING: Failure when attempting to lookup auth config (dockerImageName: alpine:3.5, configFile: /home/jenkins/.docker/config.json. Falling back to docker-java default behaviour. Exception message: /home/jenkins/.docker/config.json (No such file or directory) Jan 23, 2019 8:32:22 PM org.testcontainers.utility.RegistryAuthLocator lookupAuthConfig WARNING: Failure when attempting to lookup auth config (dockerImageName: alpine:3.5, configFile: /home/jenkins/.docker/config.json. Falling back to docker-java default behaviour. Exception message: /home/jenkins/.docker/config.json (No such file or directory) Jan 23, 2019 8:33:01 PM org.testcontainers.containers.GenericContainer tryStart SEVERE: Could not start container java.lang.reflect.UndeclaredThrowableException at com.sun.proxy.$Proxy25.exec(Unknown Source) at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:266) at org.testcontainers.containers.GenericContainer.lambda$doStart$0(GenericContainer.java:245) at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:76) at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:243) at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:228) at org.apache.beam.sdk.io.clickhouse.BaseClickHouseTest.setup(BaseClickHouseTest.java:66) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56) at org.junit.internal.runners.statements.RunBefores.invokeMethod(RunBefores.java:33) at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24) at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27) at org.junit.runners.ParentRunner.run(ParentRunner.java:396) at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:106) at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58) at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38) at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66) at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32) at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93) at com.sun.proxy.$Proxy2.processTestClass(Unknown Source) at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:117) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:155) at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:137) at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404) at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63) at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55) at java.lang.Thread.run(Thread.java:748) Caused by: java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.testcontainers.dockerclient.AuditLoggingDockerClient.lambda$wrappedCommand$14(AuditLoggingDockerClient.java:98) ... 48 more Caused by: com.github.dockerjava.api.exception.NotFoundException: \{"message":"No such image: yandex/clickhouse-server:18.10.3"} at org.testcontainers.dockerclient.transport.okhttp.OkHttpInvocationBuilder.execute(OkHttpInvocationBuilder.java:273) at org.testcontainers.dockerclient.transport.okhttp.OkHttpInvocationBuilder.execute(OkHttpInvocationBuilder.java:257) at org.testcontainers.dockerclient.transport.okhttp.OkHttpInvocationBuilder.post(OkHttpInvocationBuilder.java:128) at com.github.dockerjava.core.exec.CreateContainerCmdExec.execute(CreateContainerCmdExec.java:33) at com.github.dockerjava.core.exec.CreateContainerCmdExec.execute(CreateContainerCmdExec.java:13) at com.github.dockerjava.core.exec.AbstrSyncDockerCmdExec.exec(AbstrSyncDockerCmdExec.java:21) at com.github.dockerjava.core.command.AbstrDockerCmd.exec(AbstrDockerCmd.java:35) at com.github.dockerjava.core.command.CreateContainerCmdImpl.exec(CreateContainerCmdImpl.java:189) ... 53 more