There is shouldThrottle logic in zkServer, we should use it in NIO as well, refactor the code to make it cleaner and easier to maintain in the future.