Trying to run HiveQA after fixing some things

[~sseth] [~hagleitn] [~vikram.dixit] can you take a look at TestMiniTezCliDriverLocal?
It failed in the previous JIRA HiveQA run (applying LLAP patch to master, just to run tests); when I run it locally on llap branch, all tests fail with
{noformat}
Caused by: org.apache.tez.dag.api.SessionNotRunning: TezSession has already shutdown. [Session stats:submittedDAGs=1, successfulDAGs=0, failedDAGs=0, killedDAGs=0]
	at org.apache.tez.client.TezClient.waitTillReady(TezClient.java:678)
	at org.apache.hadoop.hive.ql.exec.tez.TezSessionState.open(TezSessionState.java:280)
	at org.apache.hadoop.hive.ql.exec.tez.TezSessionState.open(TezSessionState.java:138)
	at org.apache.hadoop.hive.ql.session.SessionState.start(SessionState.java:537)
	... 22 more
{noformat}

I didn't even know such test exists before.



{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12739388/HIVE-10997.patch

{color:red}ERROR:{color} -1 due to 307 failed/errored test(s), 8742 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_9
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.initializationError
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_auto_sortmerge_join_5
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mergejoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_bmj_schema_evolution
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_join_hash
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_smb_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_smb_main
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_binary_join_groupby
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_alter_merge_2_orc
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_alter_merge_orc
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_alter_merge_stats_orc
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_join0
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_join1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_join21
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_join29
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_join30
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_join_filters
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_10
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_11
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_12
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_13
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_14
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_15
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_16
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_3
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_4
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_5
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_7
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_8
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_auto_sortmerge_join_9
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_bucket2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_bucket3
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_bucket4
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_bucket_map_join_tez1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_bucket_map_join_tez2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_gby
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_gby_empty
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_limit
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_semijoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_simple_select
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_stats
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_subq_exists
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_subq_in
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_subq_not_in
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_udf_udaf
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_union
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_views
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cbo_windowing
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_correlationoptimizer1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_count
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_create_merge_compressed
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cross_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cross_product_check_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_cross_product_check_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_ctas
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_custom_input_output_format
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_delete_all_non_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_delete_all_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_delete_orig_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_delete_tmp_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_delete_where_no_match
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_delete_where_non_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_delete_where_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_delete_whole_partition
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_disable_merge_for_bucketing
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_dynamic_partition_pruning
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_dynamic_partition_pruning_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_dynpart_sort_optimization2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_enforce_order
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_explainuser_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_explainuser_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_filter_join_breaktask
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_filter_join_breaktask2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_groupby1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_groupby2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_groupby3
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_having
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_hybridgrace_hashjoin_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_hybridgrace_hashjoin_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_insert_into1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_insert_into2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_insert_orig_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_insert_update_delete
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_insert_values_dynamic_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_insert_values_non_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_insert_values_tmp_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_join0
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_join1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_join_nullsafe
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_leftsemijoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_limit_pushdown
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_llapdecider
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_load_dyn_part1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_load_dyn_part2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_load_dyn_part3
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_lvj_mapjoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_mapjoin_decimal
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_mapjoin_mapjoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_mapreduce1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_mapreduce2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_merge1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_merge2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_mergejoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_metadata_only_queries
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_metadataonly1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_mrr
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_optimize_nullscan
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_orc_analyze
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_orc_merge1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_orc_merge2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_orc_merge3
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_orc_merge4
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_orc_merge5
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_orc_merge6
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_orc_merge7
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_orc_merge8
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_orc_merge_incompat1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_orc_merge_incompat2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_orc_vectorization_ppd
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_parallel
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_ptf
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_ptf_matchpath
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_ptf_streaming
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_sample1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_script_env_var1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_script_env_var2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_script_pipe
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_scriptfile1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_selectDistinctStar
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_select_dummy_source
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_skewjoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_stats_counter
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_stats_counter_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_stats_noscan_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_stats_only_null
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_subquery_exists
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_subquery_in
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_temp_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_bmj_schema_evolution
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_dml
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_fsstat
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_insert_overwrite_local_directory_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_join_hash
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_join_tests
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_joins_explain
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_multi_union
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_schema_evolution
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_smb_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_smb_main
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_union
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_union2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_union_decimal
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_union_dynamic_partition
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_union_group_by
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_tez_union_multiinsert
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_transform1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_transform2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_transform_ppr1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_transform_ppr2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_union2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_union3
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_union4
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_union5
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_union6
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_union7
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_union8
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_union9
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_unionDistinct_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_unionDistinct_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_update_after_multiple_inserts
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_update_all_non_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_update_all_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_update_all_types
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_update_orig_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_update_tmp_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_update_two_cols
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_update_where_no_match
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_update_where_non_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_update_where_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_aggregate_9
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_between_in
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_binary_join_groupby
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_bucket
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_cast_constant
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_char_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_char_4
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_char_mapjoin1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_char_simple
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_coalesce
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_coalesce_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_count_distinct
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_data_types
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_date_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_10_0
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_3
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_4
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_5
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_6
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_aggregate
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_cast
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_expressions
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_mapjoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_math_funcs
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_precision
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_round
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_round_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_trailing
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_udf
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_decimal_udf2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_distinct_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_elt
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_groupby_3
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_groupby_reduce
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_grouping_sets
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_if_expr
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_inner_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_interval_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_interval_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_interval_mapjoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_join30
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_join_filters
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_join_nulls
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_left_outer_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_left_outer_join2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_leftsemi_mapjoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_mapjoin_reduce
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_mr_diff_schema_alias
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_multi_insert
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_non_string_partition
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_null_projection
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_nullsafe_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_orderby_5
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_outer_join0
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_outer_join1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_outer_join2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_outer_join3
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_outer_join4
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_outer_join5
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_partition_diff_num_cols
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_partitioned_date_time
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_reduce_groupby_decimal
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_string_concat
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_varchar_4
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_varchar_mapjoin1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vector_varchar_simple
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_0
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_10
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_11
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_12
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_13
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_14
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_15
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_16
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_2
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_3
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_4
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_5
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_6
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_7
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_8
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_9
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_decimal_date
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_div0
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_limit
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_nested_udf
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_not
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_part
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_part_project
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_pushdown
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorization_short_regress
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_bucketmapjoin1
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_case
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_casts
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_context
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_date_funcs
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_distinct_gby
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_dynamic_partition_pruning
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_mapjoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_math_funcs
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_nested_mapjoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_parquet
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_ptf
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_rcfile_columnar
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_shufflejoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_string_funcs
org.apache.hadoop.hive.cli.TestMiniTezCliDriverLocal.testCliDriver_vectorized_timestamp_funcs
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_schemeAuthority
org.apache.hadoop.hive.cli.TestSparkCliDriver.initializationError
org.apache.hadoop.hive.ql.TestLocationQueries.testAlterTablePartitionLocation_alter5
org.apache.hadoop.hive.ql.TestMTQueries.testMTQueries1
org.apache.hive.beeline.TestSchemaTool.testSchemaInit
org.apache.hive.beeline.TestSchemaTool.testSchemaUpgrade
org.apache.tez.dag.app.rm.TestLlapTaskSchedulerService.testNodeReEnabled
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4264/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4264/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4264/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 307 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12739388 - PreCommit-HIVE-TRUNK-Build

Some tests should have been fixed; also lots of changes happened on the master that may cause some additional errors and out file changes.
Therefore, let's have another run.



{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12743208/HIVE-10997.01.patch

{color:red}ERROR:{color} -1 due to 41 failed/errored test(s), 9178 tests executed
*Failed tests:*
{noformat}
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_llap
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notin_having
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_auto_sortmerge_join_5
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_llapdecider
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mergejoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_bmj_schema_evolution
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_join_hash
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_smb_main
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_coalesce
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_count_distinct
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_decimal_expressions
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorization_17
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorization_7
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorization_8
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_distinct_gby
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_dynamic_partition_pruning
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_between_in
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_data_types
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_decimal_aggregate
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_decimal_mapjoin
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_distinct_2
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_groupby_3
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_left_outer_join
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_mapjoin_reduce
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_orderby_5
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vector_string_concat
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_0
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_13
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_14
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_15
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_17
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_div0
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_part_project
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_short_regress
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorized_mapjoin
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorized_nested_mapjoin
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorized_ptf
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorized_shufflejoin
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorized_timestamp_funcs
org.apache.hadoop.hive.ql.TestMTQueries.testMTQueries1
org.apache.hive.hcatalog.streaming.TestStreaming.testTransactionBatchCommit_Json
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4476/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4476/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4476/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 41 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12743208 - PreCommit-HIVE-TRUNK-Build

Another attempt after bunch of fixes.. hopefully HiveQA will work :)



{color:red}Overall{color}: -1 at least one tests failed

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12744115/HIVE-10997.02.patch

{color:red}ERROR:{color} -1 due to 10 failed/errored test(s), 9184 tests executed
*Failed tests:*
{noformat}
TestCustomAuthentication - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_merge_multi_expressions
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notin_having
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join_merge_multi_expressions
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_louter_join_ppr
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_outer_join_ppr
org.apache.hadoop.hive.ql.TestMTQueries.testMTQueries1
org.apache.hive.jdbc.TestJdbcWithLocalClusterSpark.testTempTable
org.apache.tez.dag.app.rm.TestLlapTaskSchedulerService.testNodeDisabled
org.apache.tez.dag.app.rm.TestLlapTaskSchedulerService.testSimpleNoLocalityAllocation
{noformat}

Test results: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4532/testReport
Console output: http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4532/console
Test logs: http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4532/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 10 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12744115 - PreCommit-HIVE-TRUNK-Build

TestMTQueries looks like it fails in multiple JIRAs, not sure what this test is about... others are out file changes. TestLlapTaskSchedulerService is flaky, if it fails next time I'll just disable it entirely. TestJdbcWithLocalClusterSpark looks unrelated.

Was fixed at some point.

