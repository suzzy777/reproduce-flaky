[~greggomann] Would you provide a log as an example since they have similar errors.

I've attached logs for the three at the top of the list.

Thanks [~haosdent@gmail.com]! There are logs for a few of the cases in the following tickets: MESOS-6164, MESOS-6165, and MESOS-6166

[~haosdent@gmail.com]: unfortunately I think that there is some interleaving going on in these logs, sorry :( I need to sort through the log output and make sure I've matched up the logs with the correct test cases. It's possible that I've attributed the failures to the incorrect tests; I'll comment here and post revised logs when I have it sorted out.

This test looks suspicious to me. The log interleaving starts from there. The TASK_LOST is not expected. 
{noformat}
[23:32:52] :	 [Step 10/10] [ RUN      ] MesosContainerizerSlaveRecoveryTest.CGROUPS_ROOT_PidNamespaceForward
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.347380 29518 cluster.cpp:157] Creating default 'local' authorizer
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.350111 29518 leveldb.cpp:174] Opened db in 2.618094ms
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.350518 29518 leveldb.cpp:181] Compacted db in 390273ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.350536 29518 leveldb.cpp:196] Created db iterator in 3479ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.350543 29518 leveldb.cpp:202] Seeked to beginning of db in 464ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.350548 29518 leveldb.cpp:271] Iterated through 0 keys in the db in 364ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.350558 29518 replica.cpp:776] Replica recovered with log positions 0 -> 0 with 1 holes and 0 unlearned
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.350740 29532 recover.cpp:451] Starting replica recovery
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.350931 29533 recover.cpp:477] Replica is in EMPTY status
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.351176 29536 replica.cpp:673] Replica in EMPTY status received a broadcasted recover request from __req_res__(4863)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.351282 29534 recover.cpp:197] Received a recover response from a replica in EMPTY status
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.351387 29537 recover.cpp:568] Updating replica status to STARTING
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.351835 29535 master.cpp:380] Master b8554850-0e42-40dd-aaaa-58d6c6f19074 (ip-172-30-2-144.ec2.internal.mesosphere.io) started on 172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.351847 29535 master.cpp:382] Flags at startup: --acls="" --agent_ping_timeout="15secs" --agent_reregister_timeout="10mins" --allocation_interval="1secs" --allocator="HierarchicalDRF" --authenticate_agents="true" --authenticate_frameworks="true" --authenticate_http_frameworks="true" --authenticate_http_readonly="true" --authenticate_http_readwrite="true" --authenticators="crammd5" --authorizers="local" --credentials="/tmp/8wMNif/credentials" --framework_sorter="drf" --help="false" --hostname_lookup="true" --http_authenticators="basic" --http_framework_authenticators="basic" --initialize_driver_logging="true" --log_auto_initialize="true" --logbufsecs="0" --logging_level="INFO" --max_agent_ping_timeouts="5" --max_completed_frameworks="50" --max_completed_tasks_per_framework="1000" --quiet="false" --recovery_agent_removal_limit="100%" --registry="replicated_log" --registry_fetch_timeout="1mins" --registry_store_timeout="100secs" --registry_strict="true" --root_submissions="true" --user_sorter="drf" --version="false" --webui_dir="/usr/local/share/mesos/webui" --work_dir="/tmp/8wMNif/master" --zk_session_timeout="10secs"
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.351948 29535 master.cpp:432] Master only allowing authenticated frameworks to register
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.351954 29535 master.cpp:446] Master only allowing authenticated agents to register
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.351958 29535 master.cpp:459] Master only allowing authenticated HTTP frameworks to register
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.351963 29535 credentials.hpp:37] Loading credentials for authentication from '/tmp/8wMNif/credentials'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352077 29535 master.cpp:504] Using default 'crammd5' authenticator
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352133 29535 http.cpp:883] Using default 'basic' HTTP authenticator for realm 'mesos-master-readonly'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352217 29535 http.cpp:883] Using default 'basic' HTTP authenticator for realm 'mesos-master-readwrite'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352254 29535 http.cpp:883] Using default 'basic' HTTP authenticator for realm 'mesos-master-scheduler'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352289 29535 master.cpp:584] Authorization enabled
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352322 29537 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 841411ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352339 29537 replica.cpp:320] Persisted replica status to STARTING
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352345 29533 whitelist_watcher.cpp:77] No whitelist given
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352377 29539 hierarchical.cpp:149] Initialized hierarchical allocator process
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352435 29536 recover.cpp:477] Replica is in STARTING status
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352718 29534 replica.cpp:673] Replica in STARTING status received a broadcasted recover request from __req_res__(4864)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352818 29539 recover.cpp:197] Received a recover response from a replica in STARTING status
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352946 29535 master.cpp:1855] Elected as the leading master!
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352962 29535 master.cpp:1556] Recovering from registrar
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.352964 29539 recover.cpp:568] Updating replica status to VOTING
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.353029 29534 registrar.cpp:332] Recovering registrar
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.353334 29533 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 276712ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.353348 29533 replica.cpp:320] Persisted replica status to VOTING
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.353422 29533 recover.cpp:582] Successfully joined the Paxos group
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.353466 29533 recover.cpp:466] Recover process terminated
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.353574 29538 log.cpp:553] Attempting to start the writer
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.353921 29538 replica.cpp:493] Replica received implicit promise request from __req_res__(4865)@172.30.2.144:39560 with proposal 1
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.354185 29538 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 241695ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.354197 29538 replica.cpp:342] Persisted promised to 1
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.354403 29535 coordinator.cpp:238] Coordinator attempting to fill missing positions
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.354935 29532 replica.cpp:388] Replica received explicit promise request from __req_res__(4866)@172.30.2.144:39560 for position 0 with proposal 2
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.355221 29532 leveldb.cpp:341] Persisting action (8 bytes) to leveldb took 261112ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.355233 29532 replica.cpp:708] Persisted action NOP at position 0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.355562 29533 replica.cpp:537] Replica received write request for position 0 from __req_res__(4867)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.355592 29533 leveldb.cpp:436] Reading position from leveldb took 9995ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.355866 29533 leveldb.cpp:341] Persisting action (14 bytes) to leveldb took 258772ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.355880 29533 replica.cpp:708] Persisted action NOP at position 0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.356092 29534 replica.cpp:691] Replica received learned notice for position 0 from @0.0.0.0:0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.356403 29534 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 292696ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.356416 29534 replica.cpp:708] Persisted action NOP at position 0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.356580 29537 log.cpp:569] Writer started with ending position 0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.356859 29533 leveldb.cpp:436] Reading position from leveldb took 9902ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.357069 29533 registrar.cpp:365] Successfully fetched the registry (0B) in 4.018944ms
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.357100 29533 registrar.cpp:464] Applied 1 operations in 3619ns; attempting to update the registry
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.357313 29535 log.cpp:577] Attempting to append 235 bytes to the log
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.357365 29532 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 1
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.357627 29535 replica.cpp:537] Replica received write request for position 1 from __req_res__(4868)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.357926 29535 leveldb.cpp:341] Persisting action (254 bytes) to leveldb took 278163ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.357939 29535 replica.cpp:708] Persisted action APPEND at position 1
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.358194 29537 replica.cpp:691] Replica received learned notice for position 1 from @0.0.0.0:0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.358490 29537 leveldb.cpp:341] Persisting action (256 bytes) to leveldb took 278561ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.358505 29537 replica.cpp:708] Persisted action APPEND at position 1
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.358711 29533 registrar.cpp:509] Successfully updated the registry in 1.59104ms
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.358765 29533 registrar.cpp:395] Successfully recovered registrar
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.358783 29534 log.cpp:596] Attempting to truncate the log to 1
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.358836 29536 coordinator.cpp:348] Coordinator attempting to write TRUNCATE action at position 2
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.359000 29533 master.cpp:1664] Recovered 0 agents from the registry (196B); allowing 10mins for agents to re-register
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.359045 29535 hierarchical.cpp:176] Skipping recovery of hierarchical allocator: nothing to recover
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.359244 29536 replica.cpp:537] Replica received write request for position 2 from __req_res__(4869)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.359552 29536 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 288248ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.359565 29536 replica.cpp:708] Persisted action TRUNCATE at position 2
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.359802 29539 replica.cpp:691] Replica received learned notice for position 2 from @0.0.0.0:0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.360102 29539 leveldb.cpp:341] Persisting action (18 bytes) to leveldb took 280047ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.360122 29539 leveldb.cpp:399] Deleting ~1 keys from leveldb took 8059ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.360131 29539 replica.cpp:708] Persisted action TRUNCATE at position 2
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.360944 29518 containerizer.cpp:217] Using isolation: cgroups/cpu,cgroups/mem,filesystem/posix,network/cni
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.366111 29518 linux_launcher.cpp:104] Using /sys/fs/cgroup/freezer as the freezer hierarchy for the Linux launcher
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.382885 29518 cluster.cpp:436] Creating default 'local' authorizer
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.383322 29533 slave.cpp:208] Mesos agent started on (400)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.383337 29533 slave.cpp:209] Flags at startup: --acls="" --agent_subsystems="" --appc_simple_discovery_uri_prefix="http://" --appc_store_dir="/tmp/mesos/store/appc" --authenticate_http_readonly="true" --authenticate_http_readwrite="true" --authenticatee="crammd5" --authentication_backoff_factor="1secs" --authorizer="local" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos_test_62e4d3a2-29cc-4d57-9c07-e392f07e058c" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_X0TUZu/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_kill_orphans="true" --docker_registry="https://registry-1.docker.io" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --docker_store_dir="/tmp/mesos/store/docker" --docker_volume_checkpoint_dir="/var/run/mesos/isolators/docker/volume" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_X0TUZu/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="false" --hostname_lookup="true" --http_authenticators="basic" --http_command_executor="false" --http_credentials="/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_X0TUZu/http_credentials" --image_provisioner_backend="copy" --initialize_driver_logging="true" --isolation="cgroups/cpu,cgroups/mem" --launcher_dir="/mnt/teamcity/work/4240ba9ddd0997c3/build/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resources="cpus:2;gpus:0;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --runtime_dir="/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_X0TUZu" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --systemd_enable_support="true" --systemd_runtime_directory="/run/systemd/system" --version="false" --work_dir="/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R" --xfs_project_range="[5000-10000]"
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.383549 29533 credentials.hpp:86] Loading credential for authentication from '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_X0TUZu/credential'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.383618 29533 slave.cpp:346] Agent using credential for: test-principal
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.383635 29533 credentials.hpp:37] Loading credentials for authentication from '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_X0TUZu/http_credentials'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.383690 29533 http.cpp:883] Using default 'basic' HTTP authenticator for realm 'mesos-agent-readonly'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.383729 29533 http.cpp:883] Using default 'basic' HTTP authenticator for realm 'mesos-agent-readwrite'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.383908 29518 sched.cpp:226] Version: 1.1.0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384027 29534 sched.cpp:330] New master detected at master@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384063 29534 sched.cpp:396] Authenticating with master master@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384070 29534 sched.cpp:403] Using default CRAM-MD5 authenticatee
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384068 29533 slave.cpp:529] Agent resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384094 29533 slave.cpp:537] Agent attributes: [  ]
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384099 29533 slave.cpp:542] Agent hostname: ip-172-30-2-144.ec2.internal.mesosphere.io
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384179 29536 authenticatee.cpp:121] Creating new client SASL connection
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384280 29536 master.cpp:6234] Authenticating scheduler-0a63c05f-da63-4c18-a2dc-f729f0fc4384@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384356 29536 authenticator.cpp:414] Starting authentication session for crammd5-authenticatee(838)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384421 29535 authenticator.cpp:98] Creating new server SASL connection
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384443 29533 state.cpp:57] Recovering state from '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/meta'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384490 29535 authenticatee.cpp:213] Received SASL authentication mechanisms: CRAM-MD5
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384508 29535 authenticatee.cpp:239] Attempting to authenticate with mechanism 'CRAM-MD5'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384570 29536 authenticator.cpp:204] Received SASL authentication start
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384577 29537 status_update_manager.cpp:203] Recovering status update manager
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384604 29536 authenticator.cpp:326] Authentication requires more steps
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384654 29536 containerizer.cpp:578] Recovering containerizer
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384680 29538 authenticatee.cpp:259] Received SASL authentication step
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384742 29538 authenticator.cpp:232] Received SASL authentication step
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384763 29538 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: 'ip-172-30-2-144.ec2.internal' server FQDN: 'ip-172-30-2-144.ec2.internal' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false 
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384773 29538 auxprop.cpp:181] Looking up auxiliary property '*userPassword'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384786 29538 auxprop.cpp:181] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384799 29538 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: 'ip-172-30-2-144.ec2.internal' server FQDN: 'ip-172-30-2-144.ec2.internal' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true 
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384807 29538 auxprop.cpp:131] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384814 29538 auxprop.cpp:131] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384829 29538 authenticator.cpp:318] Authentication success
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384896 29538 authenticatee.cpp:299] Authentication success
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384899 29532 authenticator.cpp:432] Authentication session cleanup for crammd5-authenticatee(838)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.384920 29534 master.cpp:6264] Successfully authenticated principal 'test-principal' at scheduler-0a63c05f-da63-4c18-a2dc-f729f0fc4384@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.385002 29537 sched.cpp:502] Successfully authenticated with master master@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.385016 29537 sched.cpp:820] Sending SUBSCRIBE call to master@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.385052 29537 sched.cpp:853] Will retry registration in 645.053737ms if necessary
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.385095 29535 master.cpp:2429] Received SUBSCRIBE call for framework 'default' at scheduler-0a63c05f-da63-4c18-a2dc-f729f0fc4384@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.385113 29535 master.cpp:1891] Authorizing framework principal 'test-principal' to receive offers for role '*'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.385227 29535 master.cpp:2505] Subscribing framework default with checkpointing enabled and capabilities [  ]
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.385393 29535 sched.cpp:743] Framework registered with b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.385416 29535 sched.cpp:757] Scheduler::registered took 10845ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.385447 29532 hierarchical.cpp:269] Added framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.385473 29532 hierarchical.cpp:1675] No allocations performed
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.385480 29532 hierarchical.cpp:1770] No inverse offers to send out!
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.385488 29532 hierarchical.cpp:1271] Performed allocation for 0 agents in 24242ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.386932 29537 provisioner.cpp:253] Provisioner recovery complete
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387071 29537 slave.cpp:5203] Finished recovery
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387235 29537 slave.cpp:5375] Querying resource estimator for oversubscribable resources
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387336 29532 slave.cpp:911] New master detected at master@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387341 29537 status_update_manager.cpp:177] Pausing sending status updates
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387361 29532 slave.cpp:970] Authenticating with master master@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387380 29532 slave.cpp:981] Using default CRAM-MD5 authenticatee
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387415 29532 slave.cpp:943] Detecting new master
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387444 29536 authenticatee.cpp:121] Creating new client SASL connection
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387464 29532 slave.cpp:5389] Received oversubscribable resources  from the resource estimator
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387512 29532 master.cpp:6234] Authenticating slave(400)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387550 29532 authenticator.cpp:414] Starting authentication session for crammd5-authenticatee(839)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387594 29534 authenticator.cpp:98] Creating new server SASL connection
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387653 29534 authenticatee.cpp:213] Received SASL authentication mechanisms: CRAM-MD5
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387666 29534 authenticatee.cpp:239] Attempting to authenticate with mechanism 'CRAM-MD5'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387697 29537 authenticator.cpp:204] Received SASL authentication start
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387732 29537 authenticator.cpp:326] Authentication requires more steps
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387766 29537 authenticatee.cpp:259] Received SASL authentication step
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387804 29537 authenticator.cpp:232] Received SASL authentication step
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387822 29537 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: 'ip-172-30-2-144.ec2.internal' server FQDN: 'ip-172-30-2-144.ec2.internal' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false 
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387833 29537 auxprop.cpp:181] Looking up auxiliary property '*userPassword'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387843 29537 auxprop.cpp:181] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387850 29537 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: 'ip-172-30-2-144.ec2.internal' server FQDN: 'ip-172-30-2-144.ec2.internal' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true 
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387856 29537 auxprop.cpp:131] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387859 29537 auxprop.cpp:131] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387867 29537 authenticator.cpp:318] Authentication success
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387907 29537 authenticatee.cpp:299] Authentication success
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387931 29536 authenticator.cpp:432] Authentication session cleanup for crammd5-authenticatee(839)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.387956 29534 master.cpp:6264] Successfully authenticated principal 'test-principal' at slave(400)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.388059 29532 slave.cpp:1065] Successfully authenticated with master master@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.388109 29532 slave.cpp:1471] Will retry registration in 13.771224ms if necessary
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.388164 29538 master.cpp:4886] Registering agent at slave(400)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io) with id b8554850-0e42-40dd-aaaa-58d6c6f19074-S0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.388265 29532 registrar.cpp:464] Applied 1 operations in 10697ns; attempting to update the registry
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.388470 29533 log.cpp:577] Attempting to append 434 bytes to the log
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.388531 29534 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 3
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.388811 29532 replica.cpp:537] Replica received write request for position 3 from __req_res__(4870)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.389127 29532 leveldb.cpp:341] Persisting action (453 bytes) to leveldb took 293164ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.389140 29532 replica.cpp:708] Persisted action APPEND at position 3
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.389386 29539 replica.cpp:691] Replica received learned notice for position 3 from @0.0.0.0:0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.389681 29539 leveldb.cpp:341] Persisting action (455 bytes) to leveldb took 277323ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.389695 29539 replica.cpp:708] Persisted action APPEND at position 3
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.389950 29535 registrar.cpp:509] Successfully updated the registry in 1.648896ms
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390000 29537 log.cpp:596] Attempting to truncate the log to 3
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390041 29534 coordinator.cpp:348] Coordinator attempting to write TRUNCATE action at position 4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390132 29538 master.cpp:4956] Registered agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(400)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390167 29537 slave.cpp:4070] Received ping from slave-observer(380)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390197 29532 hierarchical.cpp:476] Added agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 (ip-172-30-2-144.ec2.internal.mesosphere.io) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (allocated: )
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390221 29537 slave.cpp:1111] Registered with master master@172.30.2.144:39560; given agent ID b8554850-0e42-40dd-aaaa-58d6c6f19074-S0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390236 29537 fetcher.cpp:86] Clearing fetcher cache
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390317 29539 status_update_manager.cpp:184] Resuming sending status updates
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390329 29535 replica.cpp:537] Replica received write request for position 4 from __req_res__(4871)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390367 29532 hierarchical.cpp:1770] No inverse offers to send out!
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390394 29532 hierarchical.cpp:1294] Performed allocation for agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 in 167797ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390458 29537 slave.cpp:1134] Checkpointing SlaveInfo to '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/meta/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/slave.info'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390461 29538 master.cpp:6063] Sending 1 offers to framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 (default) at scheduler-0a63c05f-da63-4c18-a2dc-f729f0fc4384@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390584 29538 sched.cpp:917] Scheduler::resourceOffers took 34535ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390594 29537 slave.cpp:1171] Forwarding total oversubscribed resources 
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390642 29535 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 294839ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390642 29532 master.cpp:5340] Received update of agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(400)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io) with total oversubscribed resources 
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390669 29535 replica.cpp:708] Persisted action TRUNCATE at position 4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390733 29532 hierarchical.cpp:540] Agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 (ip-172-30-2-144.ec2.internal.mesosphere.io) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390777 29532 hierarchical.cpp:1675] No allocations performed
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390790 29532 hierarchical.cpp:1770] No inverse offers to send out!
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.390805 29532 hierarchical.cpp:1294] Performed allocation for agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 in 43485ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.391124 29536 replica.cpp:691] Replica received learned notice for position 4 from @0.0.0.0:0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.391124 29535 master.cpp:3363] Processing ACCEPT call for offers: [ b8554850-0e42-40dd-aaaa-58d6c6f19074-O0 ] on agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(400)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io) for framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 (default) at scheduler-0a63c05f-da63-4c18-a2dc-f729f0fc4384@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.391175 29535 master.cpp:2985] Authorizing framework principal 'test-principal' to launch task 725c46ae-bc78-41a4-bfd4-2f6903b03518
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.391526 29536 leveldb.cpp:341] Persisting action (18 bytes) to leveldb took 374940ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.391553 29536 leveldb.cpp:399] Deleting ~2 keys from leveldb took 12933ns
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.391577 29536 replica.cpp:708] Persisted action TRUNCATE at position 4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.391553 29535 master.cpp:7809] Adding task 725c46ae-bc78-41a4-bfd4-2f6903b03518 with resources cpus(*):0.5; mem(*):128 on agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 (ip-172-30-2-144.ec2.internal.mesosphere.io)
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.391603 29535 master.cpp:3963] Launching task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 (default) at scheduler-0a63c05f-da63-4c18-a2dc-f729f0fc4384@172.30.2.144:39560 with resources cpus(*):0.5; mem(*):128 on agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(400)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io)
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.391829 29538 slave.cpp:1535] Got assigned task '725c46ae-bc78-41a4-bfd4-2f6903b03518' for framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.391880 29533 hierarchical.cpp:1003] Recovered cpus(*):1.5; mem(*):896; disk(*):1024; ports(*):[31000-32000] (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):0.5; mem(*):128) on agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 from framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.391896 29538 slave.cpp:6015] Checkpointing FrameworkInfo to '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/meta/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/frameworks/b8554850-0e42-40dd-aaaa-58d6c6f19074-0000/framework.info'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.391906 29533 hierarchical.cpp:1040] Framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 filtered agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 for 5secs
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.392058 29538 slave.cpp:6026] Checkpointing framework pid 'scheduler-0a63c05f-da63-4c18-a2dc-f729f0fc4384@172.30.2.144:39560' to '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/meta/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/frameworks/b8554850-0e42-40dd-aaaa-58d6c6f19074-0000/framework.pid'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.392256 29538 slave.cpp:1692] Launching task '725c46ae-bc78-41a4-bfd4-2f6903b03518' for framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.392530 29538 paths.cpp:536] Trying to chown '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/frameworks/b8554850-0e42-40dd-aaaa-58d6c6f19074-0000/executors/725c46ae-bc78-41a4-bfd4-2f6903b03518/runs/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4' to user 'root'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.397115 29538 slave.cpp:6480] Checkpointing ExecutorInfo to '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/meta/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/frameworks/b8554850-0e42-40dd-aaaa-58d6c6f19074-0000/executors/725c46ae-bc78-41a4-bfd4-2f6903b03518/executor.info'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.397444 29538 slave.cpp:6095] Launching executor '725c46ae-bc78-41a4-bfd4-2f6903b03518' of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 with resources cpus(*):0.1; mem(*):32 in work directory '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/frameworks/b8554850-0e42-40dd-aaaa-58d6c6f19074-0000/executors/725c46ae-bc78-41a4-bfd4-2f6903b03518/runs/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.397658 29533 containerizer.cpp:846] Starting container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4 for executor '725c46ae-bc78-41a4-bfd4-2f6903b03518' of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.397686 29538 slave.cpp:6503] Checkpointing TaskInfo to '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/meta/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/frameworks/b8554850-0e42-40dd-aaaa-58d6c6f19074-0000/executors/725c46ae-bc78-41a4-bfd4-2f6903b03518/runs/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4/tasks/725c46ae-bc78-41a4-bfd4-2f6903b03518/task.info'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.397876 29538 slave.cpp:1978] Queued task '725c46ae-bc78-41a4-bfd4-2f6903b03518' for executor '725c46ae-bc78-41a4-bfd4-2f6903b03518' of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.397914 29538 slave.cpp:864] Successfully attached file '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/frameworks/b8554850-0e42-40dd-aaaa-58d6c6f19074-0000/executors/725c46ae-bc78-41a4-bfd4-2f6903b03518/runs/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.398061 29539 cgroups.cpp:375] Creating cgroup at '/sys/fs/cgroup/cpu,cpuacct/mesos_test_62e4d3a2-29cc-4d57-9c07-e392f07e058c/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4' for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.399155 29539 cgroups.cpp:431] Chown the cgroup at '/sys/fs/cgroup/cpu,cpuacct/mesos_test_62e4d3a2-29cc-4d57-9c07-e392f07e058c/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4' to user 'root' for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.399199 29539 cgroups.cpp:375] Creating cgroup at '/sys/fs/cgroup/memory/mesos_test_62e4d3a2-29cc-4d57-9c07-e392f07e058c/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4' for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.400183 29539 cgroups.cpp:431] Chown the cgroup at '/sys/fs/cgroup/memory/mesos_test_62e4d3a2-29cc-4d57-9c07-e392f07e058c/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4' to user 'root' for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.400655 29539 memory.cpp:447] Started listening for OOM events for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.401139 29539 memory.cpp:564] Started listening on 'low' memory pressure events for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.401623 29539 memory.cpp:564] Started listening on 'medium' memory pressure events for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.402096 29539 memory.cpp:564] Started listening on 'critical' memory pressure events for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.402837 29537 memory.cpp:193] Updated 'memory.soft_limit_in_bytes' to 160MB for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.403664 29537 memory.cpp:246] Updated 'memory.limit_in_bytes' to 160MB for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.404079 29537 cpu.cpp:103] Updated 'cpu.shares' to 614 (cpus 0.6) for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.404551 29537 containerizer.cpp:1257] Launching 'mesos-containerizer' with flags '--command="{"arguments":["mesos-executor","--launcher_dir=\/mnt\/teamcity\/work\/4240ba9ddd0997c3\/build\/src"],"shell":false,"value":"\/mnt\/teamcity\/work\/4240ba9ddd0997c3\/build\/src\/mesos-executor"}" --help="false" --pipe_read="27" --pipe_write="32" --pre_exec_commands="[]" --unshare_namespace_mnt="false" --user="root" --working_directory="/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/frameworks/b8554850-0e42-40dd-aaaa-58d6c6f19074-0000/executors/725c46ae-bc78-41a4-bfd4-2f6903b03518/runs/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4"'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.404605 29537 linux_launcher.cpp:284] Cloning child process with flags = 
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.415534 29537 containerizer.cpp:1292] Checkpointing executor's forked pid 11060 to '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/meta/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/frameworks/b8554850-0e42-40dd-aaaa-58d6c6f19074-0000/executors/725c46ae-bc78-41a4-bfd4-2f6903b03518/runs/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4/pids/forked.pid'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.478912 11094 exec.cpp:162] Version: 1.1.0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.479475 29538 slave.cpp:3184] Got registration for executor '725c46ae-bc78-41a4-bfd4-2f6903b03518' of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 from executor(1)@172.30.2.144:40649
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.479698 29538 slave.cpp:3270] Checkpointing executor pid 'executor(1)@172.30.2.144:40649' to '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/meta/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/frameworks/b8554850-0e42-40dd-aaaa-58d6c6f19074-0000/executors/725c46ae-bc78-41a4-bfd4-2f6903b03518/runs/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4/pids/libprocess.pid'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.480031 29538 slave.cpp:783] Agent terminating
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.480105 29533 master.cpp:1254] Agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(400)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io) disconnected
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.480129 29533 master.cpp:2789] Disconnecting agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(400)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io)
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.480134 11091 exec.cpp:237] Executor registered on agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0
[23:32:52] :	 [Step 10/10] Received SUBSCRIBED event
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.480213 29533 master.cpp:2808] Deactivating agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(400)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io)
[23:32:52] :	 [Step 10/10] Subscribed executor on ip-172-30-2-144.ec2.internal.mesosphere.io
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.480305 29532 hierarchical.cpp:569] Agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 deactivated
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.480358 29518 containerizer.cpp:217] Using isolation: cgroups/cpu,cgroups/mem,namespaces/pid,filesystem/posix,network/cni
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.481001 29535 memory.cpp:193] Updated 'memory.soft_limit_in_bytes' to 160MB for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.482372 29535 cpu.cpp:103] Updated 'cpu.shares' to 614 (cpus 0.6) for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.485743 29518 linux_launcher.cpp:104] Using /sys/fs/cgroup/freezer as the freezer hierarchy for the Linux launcher
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.505461 29518 cluster.cpp:436] Creating default 'local' authorizer
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.505899 29534 slave.cpp:208] Mesos agent started on (401)@172.30.2.144:39560
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.505916 29534 slave.cpp:209] Flags at startup: --acls="" --agent_subsystems="" --appc_simple_discovery_uri_prefix="http://" --appc_store_dir="/tmp/mesos/store/appc" --authenticate_http_readonly="true" --authenticate_http_readwrite="true" --authenticatee="crammd5" --authentication_backoff_factor="1secs" --authorizer="local" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos_test_62e4d3a2-29cc-4d57-9c07-e392f07e058c" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_X0TUZu/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_kill_orphans="true" --docker_registry="https://registry-1.docker.io" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --docker_store_dir="/tmp/mesos/store/docker" --docker_volume_checkpoint_dir="/var/run/mesos/isolators/docker/volume" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_X0TUZu/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="false" --hostname_lookup="true" --http_authenticators="basic" --http_command_executor="false" --http_credentials="/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_X0TUZu/http_credentials" --image_provisioner_backend="copy" --initialize_driver_logging="true" --isolation="cgroups/cpu,cgroups/mem,namespaces/pid" --launcher_dir="/mnt/teamcity/work/4240ba9ddd0997c3/build/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resources="cpus:2;gpus:0;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --runtime_dir="/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_X0TUZu" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --systemd_enable_support="true" --systemd_runtime_directory="/run/systemd/system" --version="false" --work_dir="/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R" --xfs_project_range="[5000-10000]"
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.506199 29534 credentials.hpp:86] Loading credential for authentication from '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_X0TUZu/credential'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.506259 29534 slave.cpp:346] Agent using credential for: test-principal
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.506296 29534 credentials.hpp:37] Loading credentials for authentication from '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_X0TUZu/http_credentials'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.506377 29534 http.cpp:883] Using default 'basic' HTTP authenticator for realm 'mesos-agent-readonly'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.506433 29534 http.cpp:883] Using default 'basic' HTTP authenticator for realm 'mesos-agent-readwrite'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.506727 29534 slave.cpp:529] Agent resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.506763 29534 slave.cpp:537] Agent attributes: [  ]
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.506769 29534 slave.cpp:542] Agent hostname: ip-172-30-2-144.ec2.internal.mesosphere.io
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.507050 29533 state.cpp:57] Recovering state from '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/meta'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.507079 29533 state.cpp:698] No committed checkpointed resources found at '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/meta/resources/resources.info'
[23:32:52]W:	 [Step 10/10] W0915 23:32:52.507553 29533 state.cpp:606] Failed to find status updates file '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/meta/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/frameworks/b8554850-0e42-40dd-aaaa-58d6c6f19074-0000/executors/725c46ae-bc78-41a4-bfd4-2f6903b03518/runs/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4/tasks/725c46ae-bc78-41a4-bfd4-2f6903b03518/task.updates'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.507949 29534 fetcher.cpp:86] Clearing fetcher cache
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.507985 29534 slave.cpp:5291] Recovering framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.508004 29534 slave.cpp:6245] Recovering executor '725c46ae-bc78-41a4-bfd4-2f6903b03518' of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.508182 29535 status_update_manager.cpp:203] Recovering status update manager
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.508194 29535 status_update_manager.cpp:211] Recovering executor '725c46ae-bc78-41a4-bfd4-2f6903b03518' of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] W0915 23:32:52.508213 29535 status_update_manager.cpp:250] No updates found for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.508411 29532 containerizer.cpp:578] Recovering containerizer
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.508435 29532 containerizer.cpp:634] Recovering container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4 for executor '725c46ae-bc78-41a4-bfd4-2f6903b03518' of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.510902 29537 memory.cpp:447] Started listening for OOM events for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.511402 29537 memory.cpp:564] Started listening on 'low' memory pressure events for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.511945 29537 memory.cpp:564] Started listening on 'medium' memory pressure events for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.512513 29537 memory.cpp:564] Started listening on 'critical' memory pressure events for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.514281 29537 provisioner.cpp:253] Provisioner recovery complete
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.514574 29536 slave.cpp:5143] Sending reconnect request to executor '725c46ae-bc78-41a4-bfd4-2f6903b03518' of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 at executor(1)@172.30.2.144:40649
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.514755 11090 exec.cpp:283] Received reconnect request from agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.514950 29534 slave.cpp:3374] Re-registering executor '725c46ae-bc78-41a4-bfd4-2f6903b03518' of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.515035 29534 slave.cpp:3460] Transitioning STAGED task 725c46ae-bc78-41a4-bfd4-2f6903b03518 to LOST because it is unknown to the executor '725c46ae-bc78-41a4-bfd4-2f6903b03518'
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.515069 29534 slave.cpp:3587] Handling status update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 from @0.0.0.0:0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.515156 11089 exec.cpp:260] Executor re-registered on agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.515647 29537 memory.cpp:193] Updated 'memory.soft_limit_in_bytes' to 160MB for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52] :	 [Step 10/10] Received SUBSCRIBED event
[23:32:52] :	 [Step 10/10] Subscribed executor on ip-172-30-2-144.ec2.internal.mesosphere.io
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.516659 29537 cpu.cpp:103] Updated 'cpu.shares' to 614 (cpus 0.6) for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.517642 29538 memory.cpp:193] Updated 'memory.soft_limit_in_bytes' to 32MB for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.518455 29538 cpu.cpp:103] Updated 'cpu.shares' to 102 (cpus 0.1) for container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.518770 29536 status_update_manager.cpp:323] Received status update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.518795 29536 status_update_manager.cpp:500] Creating StatusUpdate stream for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.518990 29536 status_update_manager.cpp:832] Checkpointing UPDATE for status update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.519067 29536 status_update_manager.cpp:377] Forwarding update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 to the agent
[23:32:52]W:	 [Step 10/10] W0915 23:32:52.519145 29537 slave.cpp:3934] Dropping status update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 sent by status update manager because the agent is in RECOVERING state
[23:32:52]W:	 [Step 10/10] I0915 23:32:52.519176 29537 slave.cpp:3882] Status update manager successfully handled status update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:53]W:	 [Step 10/10] I0915 23:32:53.353025 29536 hierarchical.cpp:1675] No allocations performed
[23:32:53]W:	 [Step 10/10] I0915 23:32:53.353045 29536 hierarchical.cpp:1770] No inverse offers to send out!
[23:32:53]W:	 [Step 10/10] I0915 23:32:53.353063 29536 hierarchical.cpp:1271] Performed allocation for 1 agents in 73203ns
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.353688 29538 hierarchical.cpp:1675] No allocations performed
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.353713 29538 hierarchical.cpp:1770] No inverse offers to send out!
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.353726 29538 hierarchical.cpp:1271] Performed allocation for 1 agents in 82946ns
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.515225 29537 slave.cpp:3527] Cleaning up un-reregistered executors
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.515256 29537 slave.cpp:5203] Finished recovery
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.515542 29537 slave.cpp:5375] Querying resource estimator for oversubscribable resources
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.515661 29537 status_update_manager.cpp:177] Pausing sending status updates
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.515688 29533 slave.cpp:911] New master detected at master@172.30.2.144:39560
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.515707 29533 slave.cpp:970] Authenticating with master master@172.30.2.144:39560
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.515722 29533 slave.cpp:981] Using default CRAM-MD5 authenticatee
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.515765 29533 slave.cpp:943] Detecting new master
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.515810 29539 authenticatee.cpp:121] Creating new client SASL connection
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.515836 29533 slave.cpp:5389] Received oversubscribable resources  from the resource estimator
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.515888 29533 master.cpp:6234] Authenticating slave(401)@172.30.2.144:39560
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.515944 29536 authenticator.cpp:414] Starting authentication session for crammd5-authenticatee(840)@172.30.2.144:39560
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516011 29539 authenticator.cpp:98] Creating new server SASL connection
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516088 29536 authenticatee.cpp:213] Received SASL authentication mechanisms: CRAM-MD5
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516105 29536 authenticatee.cpp:239] Attempting to authenticate with mechanism 'CRAM-MD5'
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516135 29536 authenticator.cpp:204] Received SASL authentication start
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516176 29536 authenticator.cpp:326] Authentication requires more steps
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516223 29537 authenticatee.cpp:259] Received SASL authentication step
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516273 29537 authenticator.cpp:232] Received SASL authentication step
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516288 29537 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: 'ip-172-30-2-144.ec2.internal' server FQDN: 'ip-172-30-2-144.ec2.internal' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false 
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516294 29537 auxprop.cpp:181] Looking up auxiliary property '*userPassword'
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516304 29537 auxprop.cpp:181] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516312 29537 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: 'ip-172-30-2-144.ec2.internal' server FQDN: 'ip-172-30-2-144.ec2.internal' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true 
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516322 29537 auxprop.cpp:131] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516331 29537 auxprop.cpp:131] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516346 29537 authenticator.cpp:318] Authentication success
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516407 29536 authenticatee.cpp:299] Authentication success
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516424 29537 master.cpp:6264] Successfully authenticated principal 'test-principal' at slave(401)@172.30.2.144:39560
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516448 29532 authenticator.cpp:432] Authentication session cleanup for crammd5-authenticatee(840)@172.30.2.144:39560
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516557 29536 slave.cpp:1065] Successfully authenticated with master master@172.30.2.144:39560
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516660 29536 slave.cpp:1471] Will retry registration in 5.509684ms if necessary
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516744 29539 master.cpp:5050] Re-registering agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(400)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io)
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516821 29533 slave.cpp:1213] Re-registered with master master@172.30.2.144:39560
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516829 29538 hierarchical.cpp:557] Agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 reactivated
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516822 29539 master.cpp:5278] Sending updated checkpointed resources  to agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(401)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io)
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516863 29533 slave.cpp:1249] Forwarding total oversubscribed resources 
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516891 29534 status_update_manager.cpp:184] Resuming sending status updates
[23:32:54]W:	 [Step 10/10] W0915 23:32:54.516906 29534 status_update_manager.cpp:191] Resending status update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516927 29533 slave.cpp:2671] Updating framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 pid to scheduler-0a63c05f-da63-4c18-a2dc-f729f0fc4384@172.30.2.144:39560
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516938 29536 master.cpp:5340] Received update of agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(401)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io) with total oversubscribed resources 
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516927 29534 status_update_manager.cpp:377] Forwarding update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 to the agent
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.516968 29533 slave.cpp:2687] Checkpointing framework pid 'scheduler-0a63c05f-da63-4c18-a2dc-f729f0fc4384@172.30.2.144:39560' to '/mnt/teamcity/temp/buildTmp/MesosContainerizerSlaveRecoveryTest_CGROUPS_ROOT_PidNamespaceForward_Tg5l9R/meta/slaves/b8554850-0e42-40dd-aaaa-58d6c6f19074-S0/frameworks/b8554850-0e42-40dd-aaaa-58d6c6f19074-0000/framework.pid'
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517014 29536 hierarchical.cpp:540] Agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 (ip-172-30-2-144.ec2.internal.mesosphere.io) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):0.5; mem(*):128)
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517105 29536 hierarchical.cpp:1861] Filtered offer with cpus(*):1.5; mem(*):896; disk(*):1024; ports(*):[31000-32000] on agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 for framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517122 29536 hierarchical.cpp:1675] No allocations performed
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517127 29536 hierarchical.cpp:1770] No inverse offers to send out!
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517138 29536 hierarchical.cpp:1294] Performed allocation for agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 in 91974ns
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517164 29533 slave.cpp:2734] Ignoring new checkpointed resources identical to the current version: 
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517173 29536 status_update_manager.cpp:184] Resuming sending status updates
[23:32:54]W:	 [Step 10/10] W0915 23:32:54.517180 29536 status_update_manager.cpp:191] Resending status update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517189 29536 status_update_manager.cpp:377] Forwarding update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 to the agent
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517204 29533 slave.cpp:3988] Forwarding the update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 to master@172.30.2.144:39560
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517307 29533 slave.cpp:3988] Forwarding the update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 to master@172.30.2.144:39560
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517339 29536 master.cpp:5475] Status update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 from agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(401)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io)
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517359 29536 master.cpp:5537] Forwarding status update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517403 29536 master.cpp:7187] Updating the state of task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 (latest state: TASK_LOST, status update state: TASK_LOST)
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517469 29539 sched.cpp:1025] Scheduler::statusUpdate took 12921ns
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517540 29538 hierarchical.cpp:1003] Recovered cpus(*):0.5; mem(*):128 (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: ) on agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 from framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517575 29536 master.cpp:5475] Status update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 from agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(401)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io)
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517601 29536 master.cpp:5537] Forwarding status update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517647 29536 master.cpp:7187] Updating the state of task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 (latest state: TASK_LOST, status update state: TASK_LOST)
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517689 29536 master.cpp:4598] Processing ACKNOWLEDGE call 96abf6bb-e72e-419d-8583-2cf169710082 for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 (default) at scheduler-0a63c05f-da63-4c18-a2dc-f729f0fc4384@172.30.2.144:39560 on agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517698 29537 sched.cpp:1025] Scheduler::statusUpdate took 6224ns
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517704 29536 master.cpp:7283] Removing task 725c46ae-bc78-41a4-bfd4-2f6903b03518 with resources cpus(*):0.5; mem(*):128 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 on agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0 at slave(401)@172.30.2.144:39560 (ip-172-30-2-144.ec2.internal.mesosphere.io)
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517783 29536 master.cpp:4598] Processing ACKNOWLEDGE call 96abf6bb-e72e-419d-8583-2cf169710082 for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 (default) at scheduler-0a63c05f-da63-4c18-a2dc-f729f0fc4384@172.30.2.144:39560 on agent b8554850-0e42-40dd-aaaa-58d6c6f19074-S0
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517845 29536 status_update_manager.cpp:395] Received status update acknowledgement (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517882 29536 status_update_manager.cpp:832] Checkpointing ACK for status update TASK_LOST (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.517920 29536 status_update_manager.cpp:531] Cleaning up status update stream for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.518014 29536 status_update_manager.cpp:395] Received status update acknowledgement (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.518043 29535 slave.cpp:2934] Status update manager successfully handled status update acknowledgement (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:54]W:	 [Step 10/10] I0915 23:32:54.518061 29535 slave.cpp:6459] Completing task 725c46ae-bc78-41a4-bfd4-2f6903b03518
[23:32:54]W:	 [Step 10/10] E0915 23:32:54.518082 29535 slave.cpp:2927] Failed to handle status update acknowledgement (UUID: 96abf6bb-e72e-419d-8583-2cf169710082) for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000: Cannot find the status update stream for task 725c46ae-bc78-41a4-bfd4-2f6903b03518 of framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000
[23:32:55]W:	 [Step 10/10] I0915 23:32:55.354341 29536 hierarchical.cpp:1770] No inverse offers to send out!
[23:32:55] :	 [Step 10/10] [       OK ] MesosContainerizerSlaveRecoveryTest.CGROUPS_ROOT_PidNamespaceForward (3086 ms)
[23:32:55] :	 [Step 10/10] [ RUN      ] MesosContainerizerSlaveRecoveryTest.CGROUPS_ROOT_PidNamespaceBackward
[23:32:55] :	 [Step 10/10] Executing pre-exec command '{"shell":true,"value":"mount -n --bind \/var\/empty\/mesos \/var\/run\/mesos\/pidns"}'
[23:32:55] :	 [Step 10/10] Executing pre-exec command '{"shell":true,"value":"mount none \/proc --make-private -o rec"}'
[23:32:55] :	 [Step 10/10] Executing pre-exec command '{"shell":true,"value":"mount -n -t proc proc \/proc -o nosuid,noexec,nodev"}'
[23:32:55] :	 [Step 10/10] Received SUBSCRIBED event
[23:32:55] :	 [Step 10/10] Subscribed executor on ip-172-30-2-144.ec2.internal.mesosphere.io
[23:32:55] :	 [Step 10/10] Received SUBSCRIBED event
[23:32:55] :	 [Step 10/10] Subscribed executor on ip-172-30-2-144.ec2.internal.mesosphere.io
[23:33:10] :	 [Step 10/10] ../../src/tests/slave_recovery_tests.cpp:4220: Failure
[23:33:10] :	 [Step 10/10] Failed to wait 15secs for offers2
[23:33:10] :	 [Step 10/10] ../../src/tests/slave_recovery_tests.cpp:4213: Failure
[23:33:10] :	 [Step 10/10] Actual function call count doesn't match EXPECT_CALL(sched, resourceOffers(_, _))...
[23:33:10] :	 [Step 10/10]          Expected: to be called at least once
[23:33:10] :	 [Step 10/10]            Actual: never called - unsatisfied and active
[23:33:25] :	 [Step 10/10] ../../src/tests/cluster.cpp:560: Failure
[23:33:25] :	 [Step 10/10] Failed to wait 15secs for wait
[23:34:42]W:	 [Step 10/10] I0915 23:32:55.354369 29536 hierarchical.cpp:1271] Performed allocation for 1 agents in 173915ns
[23:34:42]W:	 [Step 10/10] I0915 23:32:55.354411 29534 master.cpp:6063] Sending 1 offers to framework b8554850-0e42-40dd-aaaa-58d6c6f19074-0000 (default) at scheduler-0a63c05f-da63-4c18-a2dc-f729f0fc4384@172.30.2.144:39560
[23:34:42]W:	 [Step 10/10] I0915 23:32:55.354534 29534 sched.cpp:917] Scheduler::resourceOffers took 34437ns
[23:34:42]W:	 [Step 10/10] I0915 23:32:55.354732 29535 containerizer.cpp:1617] Destroying container 23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:34:42]W:	 [Step 10/10] I0915 23:32:55.356585 29538 cgroups.cpp:2678] Freezing cgroup /sys/fs/cgroup/freezer/mesos_test_62e4d3a2-29cc-4d57-9c07-e392f07e058c/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:34:42]W:	 [Step 10/10] I0915 23:32:55.357972 29533 cgroups.cpp:1412] Successfully froze cgroup /sys/fs/cgroup/freezer/mesos_test_62e4d3a2-29cc-4d57-9c07-e392f07e058c/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4 after 1.359872ms
[23:34:42]W:	 [Step 10/10] I0915 23:32:55.359447 29533 cgroups.cpp:2696] Thawing cgroup /sys/fs/cgroup/freezer/mesos_test_62e4d3a2-29cc-4d57-9c07-e392f07e058c/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4
[23:34:42]W:	 [Step 10/10] I0915 23:32:55.360864 29536 cgroups.cpp:1441] Successfully thawed cgroup /sys/fs/cgroup/freezer/mesos_test_62e4d3a2-29cc-4d57-9c07-e392f07e058c/23fb2ad6-8cd0-45d8-b3d3-d144acb47ef4 after 1.391872ms
{noformat}

It looks like related to {{namespaces/pid}} leaking files, I could reproduce some of them after run repeat. Let me try to fix this.

| Fixed the leaking mounts in the namespaces/pid isolator. | https://reviews.apache.org/r/51944 |
| Clean up the pid isolator's leaking mounts when test cases finish. | https://reviews.apache.org/r/51945 |

[~greggomann] I use {{grep 'W:'}} and {{grep -v 'W:'}} to filter the stdout/stderr of MESOS-6164, MESOS-6165, and MESOS-6166. Looks like their log are not overlapping. Do you have some overlap examples that not meet this?

Thanks for the patches, [~haosdent@gmail.com]!! I'll review and do some testing this morning.

Regarding the interleaving: for example, in the log posted in MESOS-6164 we find the line:
{code}
Checkpointing framework pid 'scheduler-26d5bb2d-7233-4725-9755-169f84aee769@172.30.2.23:32968' to '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_RecoverStatusUpdateManager_w0ToCt/meta/slaves/d22b6309-24c3-422f-a501-a672e7c3e046-S0/frameworks/d22b6309-24c3-422f-a501-a672e7c3e046-0000/framework.pid'
{code}
which indicates that this output can be attributed to {{SlaveRecoveryTest.RecoverStatusUpdateManager}}. I think {{SlaveRecoveryTest.ReconnectHTTPExecutor}} begins much later with the line: {{I0915 02:57:42.981866 24202 cluster.cpp:157] Creating default 'local' authorizer}}.

Yep, the order of the log you mentioned is correct as well.

Let's split it to stdout and stderr.

{code:title=grep -v 'W:' (stdout)|borderStyle=solid}
[02:57:42] :	 [Step 10/10] [ RUN      ] SlaveRecoveryTest/0.ReconnectHTTPExecutor
[02:57:43] :	 [Step 10/10] Received SUBSCRIBED event
[02:57:43] :	 [Step 10/10] Subscribed executor on ip-172-30-2-23.mesosphere.io
[02:57:43] :	 [Step 10/10] Received LAUNCH event
[02:57:43] :	 [Step 10/10] Starting task c1ba3f0b-2f6a-46a1-b752-592394c6d726
[02:57:43] :	 [Step 10/10] /mnt/teamcity/work/4240ba9ddd0997c3/build/src/mesos-containerizer launch --command="{"shell":true,"value":"sleep 1000"}" --help="false" --unshare_namespace_mnt="false"
[02:57:43] :	 [Step 10/10] Forked command at 4653
[02:57:43] :	 [Step 10/10] Received ERROR event
[02:57:43] :	 [Step 10/10] Received ERROR event
[02:57:58] :	 [Step 10/10] ../../src/tests/slave_recovery_tests.cpp:510: Failure
[02:57:58] :	 [Step 10/10] Failed to wait 15secs for status
[02:57:58] :	 [Step 10/10] ../../src/tests/slave_recovery_tests.cpp:491: Failure
[02:57:58] :	 [Step 10/10] Actual function call count doesn't match EXPECT_CALL(sched, statusUpdate(_, _))...
[02:57:58] :	 [Step 10/10]          Expected: to be called at least once
[02:57:58] :	 [Step 10/10]            Actual: never called - unsatisfied and active
[02:58:13] :	 [Step 10/10] ../../src/tests/cluster.cpp:560: Failure
[02:58:13] :	 [Step 10/10] Failed to wait 15secs for wait
[02:59:18] :	 [Step 10/10] [  FAILED  ] SlaveRecoveryTest/0.ReconnectHTTPExecutor, where TypeParam = mesos::internal::slave::MesosContainerizer (95963 ms)
{code}

{code:title=grep 'W:' (stdout - SlaveRecoveryTest/0.RecoverStatusUpdateManager)|borderStyle=solid}
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.726838 24222 hierarchical.cpp:1770] No inverse offers to send out!
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.726851 24222 hierarchical.cpp:1271] Performed allocation for 1 agents in 80513ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.929819 24218 slave.cpp:3521] Cleaning up un-reregistered executors
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.929872 24218 slave.cpp:5197] Finished recovery
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930137 24218 slave.cpp:5369] Querying resource estimator for oversubscribable resources
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930229 24220 slave.cpp:5383] Received oversubscribable resources  from the resource estimator
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930289 24220 slave.cpp:911] New master detected at master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930301 24220 slave.cpp:970] Authenticating with master master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930315 24220 slave.cpp:981] Using default CRAM-MD5 authenticatee
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930336 24217 status_update_manager.cpp:177] Pausing sending status updates
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930364 24220 slave.cpp:943] Detecting new master
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930382 24217 authenticatee.cpp:121] Creating new client SASL connection
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930631 24216 master.cpp:6234] Authenticating slave(353)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930697 24219 authenticator.cpp:414] Starting authentication session for crammd5-authenticatee(755)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930804 24218 authenticator.cpp:98] Creating new server SASL connection
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930964 24218 authenticatee.cpp:213] Received SASL authentication mechanisms: CRAM-MD5
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.930977 24218 authenticatee.cpp:239] Attempting to authenticate with mechanism 'CRAM-MD5'
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931010 24218 authenticator.cpp:204] Received SASL authentication start
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931037 24218 authenticator.cpp:326] Authentication requires more steps
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931064 24218 authenticatee.cpp:259] Received SASL authentication step
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931098 24218 authenticator.cpp:232] Received SASL authentication step
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931109 24218 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: 'ip-172-30-2-23.mesosphere.io' server FQDN: 'ip-172-30-2-23.mesosphere.io' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931114 24218 auxprop.cpp:181] Looking up auxiliary property '*userPassword'
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931124 24218 auxprop.cpp:181] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931130 24218 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: 'ip-172-30-2-23.mesosphere.io' server FQDN: 'ip-172-30-2-23.mesosphere.io' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931135 24218 auxprop.cpp:131] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931138 24218 auxprop.cpp:131] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931145 24218 authenticator.cpp:318] Authentication success
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931195 24220 authenticatee.cpp:299] Authentication success
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931216 24218 master.cpp:6264] Successfully authenticated principal 'test-principal' at slave(353)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931254 24221 authenticator.cpp:432] Authentication session cleanup for crammd5-authenticatee(755)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931360 24220 slave.cpp:1065] Successfully authenticated with master master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931473 24220 slave.cpp:1471] Will retry registration in 11.992509ms if necessary
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931560 24221 master.cpp:5050] Re-registering agent d22b6309-24c3-422f-a501-a672e7c3e046-S0 at slave(352)@172.30.2.23:32968 (ip-172-30-2-23.mesosphere.io)
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931628 24217 slave.cpp:1213] Re-registered with master master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931639 24219 hierarchical.cpp:557] Agent d22b6309-24c3-422f-a501-a672e7c3e046-S0 reactivated
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931643 24221 master.cpp:5278] Sending updated checkpointed resources  to agent d22b6309-24c3-422f-a501-a672e7c3e046-S0 at slave(353)@172.30.2.23:32968 (ip-172-30-2-23.mesosphere.io)
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931648 24217 slave.cpp:1249] Forwarding total oversubscribed resources
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931659 24220 status_update_manager.cpp:184] Resuming sending status updates
[02:59:18]W:	 [Step 10/10] W0915 02:57:42.931686 24220 status_update_manager.cpp:191] Resending status update TASK_RUNNING (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931713 24217 slave.cpp:2665] Updating framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 pid to scheduler-26d5bb2d-7233-4725-9755-169f84aee769@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931711 24220 status_update_manager.cpp:377] Forwarding update TASK_RUNNING (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 to the agent
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931740 24217 slave.cpp:2681] Checkpointing framework pid 'scheduler-26d5bb2d-7233-4725-9755-169f84aee769@172.30.2.23:32968' to '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_RecoverStatusUpdateManager_w0ToCt/meta/slaves/d22b6309-24c3-422f-a501-a672e7c3e046-S0/frameworks/d22b6309-24c3-422f-a501-a672e7c3e046-0000/framework.pid'
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931753 24221 master.cpp:5340] Received update of agent d22b6309-24c3-422f-a501-a672e7c3e046-S0 at slave(353)@172.30.2.23:32968 (ip-172-30-2-23.mesosphere.io) with total oversubscribed resources
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931830 24221 hierarchical.cpp:540] Agent d22b6309-24c3-422f-a501-a672e7c3e046-S0 (ip-172-30-2-23.mesosphere.io) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931874 24221 hierarchical.cpp:1675] No allocations performed
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931877 24217 slave.cpp:2728] Ignoring new checkpointed resources identical to the current version:
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931885 24221 hierarchical.cpp:1770] No inverse offers to send out!
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931891 24216 status_update_manager.cpp:184] Resuming sending status updates
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931900 24221 hierarchical.cpp:1294] Performed allocation for agent d22b6309-24c3-422f-a501-a672e7c3e046-S0 in 47507ns
[02:59:18]W:	 [Step 10/10] W0915 02:57:42.931905 24216 status_update_manager.cpp:191] Resending status update TASK_RUNNING (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931911 24217 slave.cpp:3982] Forwarding the update TASK_RUNNING (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 to master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.931921 24216 status_update_manager.cpp:377] Forwarding update TASK_RUNNING (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 to the agent
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932000 24217 slave.cpp:3982] Forwarding the update TASK_RUNNING (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 to master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932044 24219 master.cpp:5475] Status update TASK_RUNNING (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 from agent d22b6309-24c3-422f-a501-a672e7c3e046-S0 at slave(353)@172.30.2.23:32968 (ip-172-30-2-23.mesosphere.io)
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932062 24219 master.cpp:5537] Forwarding status update TASK_RUNNING (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932106 24219 master.cpp:7187] Updating the state of task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932158 24219 master.cpp:5475] Status update TASK_RUNNING (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 from agent d22b6309-24c3-422f-a501-a672e7c3e046-S0 at slave(353)@172.30.2.23:32968 (ip-172-30-2-23.mesosphere.io)
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932181 24219 master.cpp:5537] Forwarding status update TASK_RUNNING (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932202 24216 sched.cpp:1025] Scheduler::statusUpdate took 42591ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932212 24219 master.cpp:7187] Updating the state of task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932345 24216 sched.cpp:1025] Scheduler::statusUpdate took 6908ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932353 24218 master.cpp:4598] Processing ACKNOWLEDGE call e26a5152-97e1-4146-ad72-cbd46775ab39 for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 (default) at scheduler-26d5bb2d-7233-4725-9755-169f84aee769@172.30.2.23:32968 on agent d22b6309-24c3-422f-a501-a672e7c3e046-S0
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932426 24218 master.cpp:4598] Processing ACKNOWLEDGE call e26a5152-97e1-4146-ad72-cbd46775ab39 for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 (default) at scheduler-26d5bb2d-7233-4725-9755-169f84aee769@172.30.2.23:32968 on agent d22b6309-24c3-422f-a501-a672e7c3e046-S0
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932448 24202 sched.cpp:1987] Asked to stop the driver
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932512 24218 status_update_manager.cpp:395] Received status update acknowledgement (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932543 24223 sched.cpp:1187] Stopping framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932554 24218 status_update_manager.cpp:832] Checkpointing ACK for status update TASK_RUNNING (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932621 24219 master.cpp:6639] Processing TEARDOWN call for framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 (default) at scheduler-26d5bb2d-7233-4725-9755-169f84aee769@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932639 24219 master.cpp:6651] Removing framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 (default) at scheduler-26d5bb2d-7233-4725-9755-169f84aee769@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932660 24221 slave.cpp:2928] Status update manager successfully handled status update acknowledgement (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932674 24218 status_update_manager.cpp:395] Received status update acknowledgement (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932689 24223 hierarchical.cpp:380] Deactivated framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932678 24219 master.cpp:7187] Updating the state of task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 (latest state: TASK_KILLED, status update state: TASK_KILLED)
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932718 24221 slave.cpp:2496] Asked to shut down framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 by master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932734 24221 slave.cpp:2521] Shutting down framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932745 24221 slave.cpp:4785] Shutting down executor 'b813f31e-d12d-4f66-b1a3-c520aa5fa567' of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 at executor(1)@172.30.2.23:58008
[02:59:18]W:	 [Step 10/10] E0915 02:57:42.932828 24221 slave.cpp:2921] Failed to handle status update acknowledgement (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000: Unexpected status update acknowledgment (UUID: e26a5152-97e1-4146-ad72-cbd46775ab39) for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932854 24219 master.cpp:7283] Removing task b813f31e-d12d-4f66-b1a3-c520aa5fa567 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 on agent d22b6309-24c3-422f-a501-a672e7c3e046-S0 at slave(353)@172.30.2.23:32968 (ip-172-30-2-23.mesosphere.io)
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.932993  4588 exec.cpp:414] Executor asked to shutdown
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.933161 24220 hierarchical.cpp:1003] Recovered cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: ) on agent d22b6309-24c3-422f-a501-a672e7c3e046-S0 from framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.933218 24220 hierarchical.cpp:331] Removed framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.933274 24217 containerizer.cpp:1617] Destroying container 5176a894-13e8-4ca8-b9b5-3c250a920100
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.934232 24222 cgroups.cpp:2678] Freezing cgroup /sys/fs/cgroup/freezer/mesos_test_c16d101e-11c8-4533-bab6-3fae16e4391f/5176a894-13e8-4ca8-b9b5-3c250a920100
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.935169 24218 cgroups.cpp:1412] Successfully froze cgroup /sys/fs/cgroup/freezer/mesos_test_c16d101e-11c8-4533-bab6-3fae16e4391f/5176a894-13e8-4ca8-b9b5-3c250a920100 after 910848ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.936182 24222 cgroups.cpp:2696] Thawing cgroup /sys/fs/cgroup/freezer/mesos_test_c16d101e-11c8-4533-bab6-3fae16e4391f/5176a894-13e8-4ca8-b9b5-3c250a920100
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.937182 24221 cgroups.cpp:1441] Successfully thawed cgroup /sys/fs/cgroup/freezer/mesos_test_c16d101e-11c8-4533-bab6-3fae16e4391f/5176a894-13e8-4ca8-b9b5-3c250a920100 after 981760ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.938029 24218 slave.cpp:4110] Got exited event for executor(1)@172.30.2.23:58008
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.943333 24220 containerizer.cpp:1841] Executor for container 5176a894-13e8-4ca8-b9b5-3c250a920100 has exited
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.943346 24220 containerizer.cpp:1613] Destroy has already been initiated for 5176a894-13e8-4ca8-b9b5-3c250a920100
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.948518 24218 provisioner.cpp:413] Ignoring destroy request for unknown container 5176a894-13e8-4ca8-b9b5-3c250a920100
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.948648 24217 slave.cpp:4467] Executor 'b813f31e-d12d-4f66-b1a3-c520aa5fa567' of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 terminated with signal Killed
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.948668 24217 slave.cpp:4571] Cleaning up executor 'b813f31e-d12d-4f66-b1a3-c520aa5fa567' of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000 at executor(1)@172.30.2.23:58008
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.948845 24221 gc.cpp:55] Scheduling '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_RecoverStatusUpdateManager_w0ToCt/slaves/d22b6309-24c3-422f-a501-a672e7c3e046-S0/frameworks/d22b6309-24c3-422f-a501-a672e7c3e046-0000/executors/b813f31e-d12d-4f66-b1a3-c520aa5fa567/runs/5176a894-13e8-4ca8-b9b5-3c250a920100' for gc 6.99998901859852days in the future
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.948905 24221 gc.cpp:55] Scheduling '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_RecoverStatusUpdateManager_w0ToCt/slaves/d22b6309-24c3-422f-a501-a672e7c3e046-S0/frameworks/d22b6309-24c3-422f-a501-a672e7c3e046-0000/executors/b813f31e-d12d-4f66-b1a3-c520aa5fa567' for gc 6.99998901817185days in the future
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.948914 24217 slave.cpp:4659] Cleaning up framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.948940 24221 gc.cpp:55] Scheduling '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_RecoverStatusUpdateManager_w0ToCt/meta/slaves/d22b6309-24c3-422f-a501-a672e7c3e046-S0/frameworks/d22b6309-24c3-422f-a501-a672e7c3e046-0000/executors/b813f31e-d12d-4f66-b1a3-c520aa5fa567/runs/5176a894-13e8-4ca8-b9b5-3c250a920100' for gc 6.99998901770963days in the future
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.948992 24216 status_update_manager.cpp:285] Closing status update streams for framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.948992 24221 gc.cpp:55] Scheduling '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_RecoverStatusUpdateManager_w0ToCt/meta/slaves/d22b6309-24c3-422f-a501-a672e7c3e046-S0/frameworks/d22b6309-24c3-422f-a501-a672e7c3e046-0000/executors/b813f31e-d12d-4f66-b1a3-c520aa5fa567' for gc 6.99998901731556days in the future
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.949008 24217 slave.cpp:783] Agent terminating
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.949028 24221 gc.cpp:55] Scheduling '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_RecoverStatusUpdateManager_w0ToCt/slaves/d22b6309-24c3-422f-a501-a672e7c3e046-S0/frameworks/d22b6309-24c3-422f-a501-a672e7c3e046-0000' for gc 6.99998901655111days in the future
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.949012 24216 status_update_manager.cpp:531] Cleaning up status update stream for task b813f31e-d12d-4f66-b1a3-c520aa5fa567 of framework d22b6309-24c3-422f-a501-a672e7c3e046-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.949081 24221 gc.cpp:55] Scheduling '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_RecoverStatusUpdateManager_w0ToCt/meta/slaves/d22b6309-24c3-422f-a501-a672e7c3e046-S0/frameworks/d22b6309-24c3-422f-a501-a672e7c3e046-0000' for gc 6.99998901624889days in the future
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.951805 24202 master.cpp:1097] Master terminating
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.951946 24220 hierarchical.cpp:508] Removed agent d22b6309-24c3-422f-a501-a672e7c3e046-S0
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.955227 24220 cgroups.cpp:2678] Freezing cgroup /sys/fs/cgroup/freezer/mesos_test_c16d101e-11c8-4533-bab6-3fae16e4391f
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.956090 24219 cgroups.cpp:1412] Successfully froze cgroup /sys/fs/cgroup/freezer/mesos_test_c16d101e-11c8-4533-bab6-3fae16e4391f after 843008ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.956971 24220 cgroups.cpp:2696] Thawing cgroup /sys/fs/cgroup/freezer/mesos_test_c16d101e-11c8-4533-bab6-3fae16e4391f
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.957806 24221 cgroups.cpp:1441] Successfully thawed cgroup /sys/fs/cgroup/freezer/mesos_test_c16d101e-11c8-4533-bab6-3fae16e4391f after 818944ns
{code}

{code:title=grep 'W:' (stdout - SlaveRecoveryTest/0.ReconnectHTTPExecutor)|borderStyle=solid}
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.981866 24202 cluster.cpp:157] Creating default 'local' authorizer
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.991049 24202 leveldb.cpp:174] Opened db in 9.097659ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.993981 24202 leveldb.cpp:181] Compacted db in 2.91336ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.994001 24202 leveldb.cpp:196] Created db iterator in 3589ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.994007 24202 leveldb.cpp:202] Seeked to beginning of db in 602ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.994014 24202 leveldb.cpp:271] Iterated through 0 keys in the db in 295ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.994025 24202 replica.cpp:776] Replica recovered with log positions 0 -> 0 with 1 holes and 0 unlearned
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.994266 24217 recover.cpp:451] Starting replica recovery
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.994349 24221 recover.cpp:477] Replica is in EMPTY status
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.994629 24217 replica.cpp:673] Replica in EMPTY status received a broadcasted recover request from __req_res__(4586)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.994765 24222 recover.cpp:197] Received a recover response from a replica in EMPTY status
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.994889 24216 recover.cpp:568] Updating replica status to STARTING
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995307 24223 master.cpp:380] Master 53a45a7f-84a0-4c1d-bde1-78f372407a97 (ip-172-30-2-23.mesosphere.io) started on 172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995318 24223 master.cpp:382] Flags at startup: --acls="" --agent_ping_timeout="15secs" --agent_reregister_timeout="10mins" --allocation_interval="1secs" --allocator="HierarchicalDRF" --authenticate_agents="true" --authenticate_frameworks="true" --authenticate_http_frameworks="true" --authenticate_http_readonly="true" --authenticate_http_readwrite="true" --authenticators="crammd5" --authorizers="local" --credentials="/tmp/DeBg1G/credentials" --framework_sorter="drf" --help="false" --hostname_lookup="true" --http_authenticators="basic" --http_framework_authenticators="basic" --initialize_driver_logging="true" --log_auto_initialize="true" --logbufsecs="0" --logging_level="INFO" --max_agent_ping_timeouts="5" --max_completed_frameworks="50" --max_completed_tasks_per_framework="1000" --quiet="false" --recovery_agent_removal_limit="100%" --registry="replicated_log" --registry_fetch_timeout="1mins" --registry_store_timeout="100secs" --registry_strict="true" --root_submissions="true" --user_sorter="drf" --version="false" --webui_dir="/usr/local/share/mesos/webui" --work_dir="/tmp/DeBg1G/master" --zk_session_timeout="10secs"
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995431 24223 master.cpp:432] Master only allowing authenticated frameworks to register
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995436 24223 master.cpp:446] Master only allowing authenticated agents to register
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995440 24223 master.cpp:459] Master only allowing authenticated HTTP frameworks to register
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995443 24223 credentials.hpp:37] Loading credentials for authentication from '/tmp/DeBg1G/credentials'
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995519 24223 master.cpp:504] Using default 'crammd5' authenticator
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995555 24223 http.cpp:883] Using default 'basic' HTTP authenticator for realm 'mesos-master-readonly'
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995604 24223 http.cpp:883] Using default 'basic' HTTP authenticator for realm 'mesos-master-readwrite'
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995627 24223 http.cpp:883] Using default 'basic' HTTP authenticator for realm 'mesos-master-scheduler'
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995658 24223 master.cpp:584] Authorization enabled
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995765 24222 hierarchical.cpp:149] Initialized hierarchical allocator process
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.995781 24219 whitelist_watcher.cpp:77] No whitelist given
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.996289 24216 master.cpp:1855] Elected as the leading master!
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.996299 24216 master.cpp:1556] Recovering from registrar
[02:59:18]W:	 [Step 10/10] I0915 02:57:42.996374 24218 registrar.cpp:332] Recovering registrar
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.007787 24221 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 12.778335ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.007803 24221 replica.cpp:320] Persisted replica status to STARTING
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.007846 24221 recover.cpp:477] Replica is in STARTING status
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.008133 24221 replica.cpp:673] Replica in STARTING status received a broadcasted recover request from __req_res__(4587)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.008241 24218 recover.cpp:197] Received a recover response from a replica in STARTING status
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.008373 24217 recover.cpp:568] Updating replica status to VOTING
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.011011 24219 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 2.54109ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.011026 24219 replica.cpp:320] Persisted replica status to VOTING
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.011056 24219 recover.cpp:582] Successfully joined the Paxos group
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.011102 24219 recover.cpp:466] Recover process terminated
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.011243 24216 log.cpp:553] Attempting to start the writer
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.011651 24221 replica.cpp:493] Replica received implicit promise request from __req_res__(4588)@172.30.2.23:32968 with proposal 1
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.014224 24221 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 2.554302ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.014238 24221 replica.cpp:342] Persisted promised to 1
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.014461 24218 coordinator.cpp:238] Coordinator attempting to fill missing positions
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.014891 24222 replica.cpp:388] Replica received explicit promise request from __req_res__(4589)@172.30.2.23:32968 for position 0 with proposal 2
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.017314 24222 leveldb.cpp:341] Persisting action (8 bytes) to leveldb took 2.405177ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.017330 24222 replica.cpp:708] Persisted action NOP at position 0
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.017766 24223 replica.cpp:537] Replica received write request for position 0 from __req_res__(4590)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.017791 24223 leveldb.cpp:436] Reading position from leveldb took 11687ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.020202 24223 leveldb.cpp:341] Persisting action (14 bytes) to leveldb took 2.397951ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.020217 24223 replica.cpp:708] Persisted action NOP at position 0
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.020406 24220 replica.cpp:691] Replica received learned notice for position 0 from @0.0.0.0:0
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.021399 24220 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 972118ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.021411 24220 replica.cpp:708] Persisted action NOP at position 0
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.021606 24216 log.cpp:569] Writer started with ending position 0
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.021911 24222 leveldb.cpp:436] Reading position from leveldb took 7957ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.022116 24218 registrar.cpp:365] Successfully fetched the registry (0B) in 25.720064ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.022148 24218 registrar.cpp:464] Applied 1 operations in 3441ns; attempting to update the registry
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.022311 24216 log.cpp:577] Attempting to append 205 bytes to the log
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.022356 24216 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 1
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.022600 24223 replica.cpp:537] Replica received write request for position 1 from __req_res__(4591)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.025075 24223 leveldb.cpp:341] Persisting action (224 bytes) to leveldb took 2.457955ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.025096 24223 replica.cpp:708] Persisted action APPEND at position 1
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.025326 24216 replica.cpp:691] Replica received learned notice for position 1 from @0.0.0.0:0
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.027681 24216 leveldb.cpp:341] Persisting action (226 bytes) to leveldb took 2.338297ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.027696 24216 replica.cpp:708] Persisted action APPEND at position 1
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.027904 24222 registrar.cpp:509] Successfully updated the registry in 5.734144ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.027952 24222 registrar.cpp:395] Successfully recovered registrar
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.027972 24219 log.cpp:596] Attempting to truncate the log to 1
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.028024 24218 coordinator.cpp:348] Coordinator attempting to write TRUNCATE action at position 2
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.028242 24219 master.cpp:1664] Recovered 0 agents from the registry (166B); allowing 10mins for agents to re-register
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.028311 24223 hierarchical.cpp:176] Skipping recovery of hierarchical allocator: nothing to recover
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.028319 24220 replica.cpp:537] Replica received write request for position 2 from __req_res__(4592)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.029073 24220 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 732903ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.029084 24220 replica.cpp:708] Persisted action TRUNCATE at position 2
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.029338 24216 replica.cpp:691] Replica received learned notice for position 2 from @0.0.0.0:0
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.031718 24216 leveldb.cpp:341] Persisting action (18 bytes) to leveldb took 2.363723ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.031743 24216 leveldb.cpp:399] Deleting ~1 keys from leveldb took 9869ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.031749 24216 replica.cpp:708] Persisted action TRUNCATE at position 2
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.032601 24202 containerizer.cpp:217] Using isolation: cgroups/cpu,cgroups/mem,filesystem/posix,network/cni
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.044536 24202 linux_launcher.cpp:104] Using /sys/fs/cgroup/freezer as the freezer hierarchy for the Linux launcher
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.055829 24202 cluster.cpp:436] Creating default 'local' authorizer
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.056206 24216 slave.cpp:208] Mesos agent started on @172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.056218 24216 slave.cpp:209] Flags at startup: --acls="" --agent_subsystems="memory,cpuacct" --appc_simple_discovery_uri_prefix="http://" --appc_store_dir="/tmp/mesos/store/appc" --authenticate_http_readonly="true" --authenticate_http_readwrite="true" --authenticatee="crammd5" --authentication_backoff_factor="1secs" --authorizer="local" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos_test_cca37eb1-1444-4a3d-9b7e-a1bcac9c782c" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_oKHzwo/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_kill_orphans="true" --docker_registry="https://registry-1.docker.io" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --docker_store_dir="/tmp/mesos/store/docker" --docker_volume_checkpoint_dir="/var/run/mesos/isolators/docker/volume" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_oKHzwo/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="false" --hostname_lookup="true" --http_authenticators="basic" --http_command_executor="true" --http_credentials="/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_oKHzwo/http_credentials" --image_provisioner_backend="copy" --initialize_driver_logging="true" --isolation="cgroups/cpu,cgroups/mem" --launcher_dir="/mnt/teamcity/work/4240ba9ddd0997c3/build/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resources="cpus:2;gpus:0;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --runtime_dir="/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_oKHzwo" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --systemd_enable_support="true" --systemd_runtime_directory="/run/systemd/system" --version="false" --work_dir="/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_qLSUL2"
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.056419 24216 slave.cpp:229] Moving agent process into its own cgroup for subsystem: memory
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.056812 24202 sched.cpp:226] Version: 1.1.0
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.056942 24219 sched.cpp:330] New master detected at master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.056972 24219 sched.cpp:396] Authenticating with master master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.056980 24219 sched.cpp:403] Using default CRAM-MD5 authenticatee
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057080 24217 authenticatee.cpp:121] Creating new client SASL connection
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057257 24217 master.cpp:6234] Authenticating scheduler-336ae5ed-4e94-4788-8599-9c9e9f6f2217@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057312 24218 authenticator.cpp:414] Starting authentication session for crammd5-authenticatee(756)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057374 24223 authenticator.cpp:98] Creating new server SASL connection
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057533 24223 authenticatee.cpp:213] Received SASL authentication mechanisms: CRAM-MD5
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057546 24223 authenticatee.cpp:239] Attempting to authenticate with mechanism 'CRAM-MD5'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057585 24223 authenticator.cpp:204] Received SASL authentication start
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057621 24223 authenticator.cpp:326] Authentication requires more steps
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057652 24223 authenticatee.cpp:259] Received SASL authentication step
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057695 24223 authenticator.cpp:232] Received SASL authentication step
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057713 24223 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: 'ip-172-30-2-23.mesosphere.io' server FQDN: 'ip-172-30-2-23.mesosphere.io' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057724 24223 auxprop.cpp:181] Looking up auxiliary property '*userPassword'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057732 24223 auxprop.cpp:181] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057739 24223 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: 'ip-172-30-2-23.mesosphere.io' server FQDN: 'ip-172-30-2-23.mesosphere.io' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057742 24223 auxprop.cpp:131] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057746 24223 auxprop.cpp:131] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057754 24223 authenticator.cpp:318] Authentication success
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057806 24218 authenticatee.cpp:299] Authentication success
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057832 24220 authenticator.cpp:432] Authentication session cleanup for crammd5-authenticatee(756)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057849 24223 master.cpp:6264] Successfully authenticated principal 'test-principal' at scheduler-336ae5ed-4e94-4788-8599-9c9e9f6f2217@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057891 24218 sched.cpp:502] Successfully authenticated with master master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057901 24218 sched.cpp:820] Sending SUBSCRIBE call to master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057940 24218 sched.cpp:853] Will retry registration in 1.912153812secs if necessary
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057976 24223 master.cpp:2429] Received SUBSCRIBE call for framework 'default' at scheduler-336ae5ed-4e94-4788-8599-9c9e9f6f2217@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.057991 24223 master.cpp:1891] Authorizing framework principal 'test-principal' to receive offers for role '*'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.058095 24223 master.cpp:2505] Subscribing framework default with checkpointing enabled and capabilities [  ]
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.058231 24220 hierarchical.cpp:269] Added framework 53a45a7f-84a0-4c1d-bde1-78f372407a97-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.058253 24220 hierarchical.cpp:1675] No allocations performed
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.058259 24220 hierarchical.cpp:1770] No inverse offers to send out!
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.058260 24218 sched.cpp:743] Framework registered with 53a45a7f-84a0-4c1d-bde1-78f372407a97-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.058266 24220 hierarchical.cpp:1271] Performed allocation for 0 agents in 22146ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.058281 24218 sched.cpp:757] Scheduler::registered took 8368ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.061391 24216 slave.cpp:229] Moving agent process into its own cgroup for subsystem: cpuacct
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.064374 24216 credentials.hpp:86] Loading credential for authentication from '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_oKHzwo/credential'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.064422 24216 slave.cpp:346] Agent using credential for: test-principal
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.064429 24216 credentials.hpp:37] Loading credentials for authentication from '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_oKHzwo/http_credentials'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.064484 24216 http.cpp:883] Using default 'basic' HTTP authenticator for realm 'mesos-agent-readonly'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.064519 24216 http.cpp:883] Using default 'basic' HTTP authenticator for realm 'mesos-agent-readwrite'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.064772 24216 slave.cpp:529] Agent resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.064796 24216 slave.cpp:537] Agent attributes: [  ]
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.064800 24216 slave.cpp:542] Agent hostname: ip-172-30-2-23.mesosphere.io
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.065109 24216 state.cpp:57] Recovering state from '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_qLSUL2/meta'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.065227 24221 status_update_manager.cpp:203] Recovering status update manager
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.065271 24221 containerizer.cpp:578] Recovering containerizer
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.066896 24223 provisioner.cpp:253] Provisioner recovery complete
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067045 24223 slave.cpp:5197] Finished recovery
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067189 24223 slave.cpp:5369] Querying resource estimator for oversubscribable resources
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067289 24218 slave.cpp:911] New master detected at master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067298 24219 status_update_manager.cpp:177] Pausing sending status updates
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067304 24218 slave.cpp:970] Authenticating with master master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067318 24218 slave.cpp:981] Using default CRAM-MD5 authenticatee
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067373 24218 slave.cpp:943] Detecting new master
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067390 24216 authenticatee.cpp:121] Creating new client SASL connection
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067412 24218 slave.cpp:5383] Received oversubscribable resources  from the resource estimator
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067558 24216 master.cpp:6234] Authenticating agent@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067608 24217 authenticator.cpp:414] Starting authentication session for crammd5-authenticatee(757)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067675 24216 authenticator.cpp:98] Creating new server SASL connection
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067809 24216 authenticatee.cpp:213] Received SASL authentication mechanisms: CRAM-MD5
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067826 24216 authenticatee.cpp:239] Attempting to authenticate with mechanism 'CRAM-MD5'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067865 24216 authenticator.cpp:204] Received SASL authentication start
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067893 24216 authenticator.cpp:326] Authentication requires more steps
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067924 24216 authenticatee.cpp:259] Received SASL authentication step
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067982 24218 authenticator.cpp:232] Received SASL authentication step
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.067996 24218 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: 'ip-172-30-2-23.mesosphere.io' server FQDN: 'ip-172-30-2-23.mesosphere.io' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068001 24218 auxprop.cpp:181] Looking up auxiliary property '*userPassword'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068007 24218 auxprop.cpp:181] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068012 24218 auxprop.cpp:109] Request to lookup properties for user: 'test-principal' realm: 'ip-172-30-2-23.mesosphere.io' server FQDN: 'ip-172-30-2-23.mesosphere.io' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068017 24218 auxprop.cpp:131] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068020 24218 auxprop.cpp:131] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068027 24218 authenticator.cpp:318] Authentication success
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068075 24218 authenticatee.cpp:299] Authentication success
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068078 24216 authenticator.cpp:432] Authentication session cleanup for crammd5-authenticatee(757)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068099 24221 master.cpp:6264] Successfully authenticated principal 'test-principal' at agent@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068181 24218 slave.cpp:1065] Successfully authenticated with master master@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068229 24218 slave.cpp:1471] Will retry registration in 2.488364ms if necessary
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068291 24220 master.cpp:4886] Registering agent at agent@172.30.2.23:32968 (ip-172-30-2-23.mesosphere.io) with id 53a45a7f-84a0-4c1d-bde1-78f372407a97-S0
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068377 24221 registrar.cpp:464] Applied 1 operations in 10678ns; attempting to update the registry
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068559 24216 log.cpp:577] Attempting to append 390 bytes to the log
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068596 24217 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 3
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.068840 24217 replica.cpp:537] Replica received write request for position 3 from __req_res__(4593)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.069675 24217 leveldb.cpp:341] Persisting action (409 bytes) to leveldb took 817978ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.069687 24217 replica.cpp:708] Persisted action APPEND at position 3
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.069950 24218 replica.cpp:691] Replica received learned notice for position 3 from @0.0.0.0:0
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.071473 24222 slave.cpp:1471] Will retry registration in 6.766388ms if necessary
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.071511 24219 master.cpp:4874] Ignoring register agent message from agent@172.30.2.23:32968 (ip-172-30-2-23.mesosphere.io) as admission is already in progress
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.072458 24218 leveldb.cpp:341] Persisting action (411 bytes) to leveldb took 2.492646ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.072474 24218 replica.cpp:708] Persisted action APPEND at position 3
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.072746 24221 registrar.cpp:509] Successfully updated the registry in 4.345856ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.072773 24223 log.cpp:596] Attempting to truncate the log to 3
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.072880 24221 coordinator.cpp:348] Coordinator attempting to write TRUNCATE action at position 4
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.072932 24216 master.cpp:4956] Registered agent 53a45a7f-84a0-4c1d-bde1-78f372407a97-S0 at agent@172.30.2.23:32968 (ip-172-30-2-23.mesosphere.io) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.072981 24221 slave.cpp:4064] Received ping from slave-observer(338)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.072993 24223 hierarchical.cpp:476] Added agent 53a45a7f-84a0-4c1d-bde1-78f372407a97-S0 (ip-172-30-2-23.mesosphere.io) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (allocated: )
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073035 24221 slave.cpp:1111] Registered with master master@172.30.2.23:32968; given agent ID 53a45a7f-84a0-4c1d-bde1-78f372407a97-S0
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073045 24221 fetcher.cpp:86] Clearing fetcher cache
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073117 24218 replica.cpp:537] Replica received write request for position 4 from __req_res__(4594)@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073122 24216 status_update_manager.cpp:184] Resuming sending status updates
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073195 24221 slave.cpp:1134] Checkpointing SlaveInfo to '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_qLSUL2/meta/slaves/53a45a7f-84a0-4c1d-bde1-78f372407a97-S0/slave.info'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073199 24223 hierarchical.cpp:1770] No inverse offers to send out!
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073220 24223 hierarchical.cpp:1294] Performed allocation for agent 53a45a7f-84a0-4c1d-bde1-78f372407a97-S0 in 202186ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073297 24221 slave.cpp:1171] Forwarding total oversubscribed resources
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073297 24217 master.cpp:6063] Sending 1 offers to framework 53a45a7f-84a0-4c1d-bde1-78f372407a97-0000 (default) at scheduler-336ae5ed-4e94-4788-8599-9c9e9f6f2217@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073364 24217 master.cpp:5340] Received update of agent 53a45a7f-84a0-4c1d-bde1-78f372407a97-S0 at agent@172.30.2.23:32968 (ip-172-30-2-23.mesosphere.io) with total oversubscribed resources
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073463 24222 sched.cpp:917] Scheduler::resourceOffers took 49413ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073456 24219 hierarchical.cpp:540] Agent 53a45a7f-84a0-4c1d-bde1-78f372407a97-S0 (ip-172-30-2-23.mesosphere.io) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073504 24219 hierarchical.cpp:1675] No allocations performed
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073513 24219 hierarchical.cpp:1770] No inverse offers to send out!
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073519 24219 hierarchical.cpp:1294] Performed allocation for agent 53a45a7f-84a0-4c1d-bde1-78f372407a97-S0 in 34507ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073812 24221 master.cpp:3363] Processing ACCEPT call for offers: [ 53a45a7f-84a0-4c1d-bde1-78f372407a97-O0 ] on agent 53a45a7f-84a0-4c1d-bde1-78f372407a97-S0 at agent@172.30.2.23:32968 (ip-172-30-2-23.mesosphere.io) for framework 53a45a7f-84a0-4c1d-bde1-78f372407a97-0000 (default) at scheduler-336ae5ed-4e94-4788-8599-9c9e9f6f2217@172.30.2.23:32968
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.073837 24221 master.cpp:2985] Authorizing framework principal 'test-principal' to launch task c1ba3f0b-2f6a-46a1-b752-592394c6d726
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.074189 24223 master.cpp:7809] Adding task c1ba3f0b-2f6a-46a1-b752-592394c6d726 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on agent 53a45a7f-84a0-4c1d-bde1-78f372407a97-S0 (ip-172-30-2-23.mesosphere.io)
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.074235 24223 master.cpp:3963] Launching task c1ba3f0b-2f6a-46a1-b752-592394c6d726 of framework 53a45a7f-84a0-4c1d-bde1-78f372407a97-0000 (default) at scheduler-336ae5ed-4e94-4788-8599-9c9e9f6f2217@172.30.2.23:32968 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on agent 53a45a7f-84a0-4c1d-bde1-78f372407a97-S0 at agent@172.30.2.23:32968 (ip-172-30-2-23.mesosphere.io)
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.074400 24220 slave.cpp:1535] Got assigned task 'c1ba3f0b-2f6a-46a1-b752-592394c6d726' for framework 53a45a7f-84a0-4c1d-bde1-78f372407a97-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.074450 24220 slave.cpp:6009] Checkpointing FrameworkInfo to '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_qLSUL2/meta/slaves/53a45a7f-84a0-4c1d-bde1-78f372407a97-S0/frameworks/53a45a7f-84a0-4c1d-bde1-78f372407a97-0000/framework.info'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.074579 24220 slave.cpp:6020] Checkpointing framework pid 'scheduler-336ae5ed-4e94-4788-8599-9c9e9f6f2217@172.30.2.23:32968' to '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_qLSUL2/meta/slaves/53a45a7f-84a0-4c1d-bde1-78f372407a97-S0/frameworks/53a45a7f-84a0-4c1d-bde1-78f372407a97-0000/framework.pid'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.074764 24220 slave.cpp:1692] Launching task 'c1ba3f0b-2f6a-46a1-b752-592394c6d726' for framework 53a45a7f-84a0-4c1d-bde1-78f372407a97-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.074960 24220 paths.cpp:536] Trying to chown '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_qLSUL2/slaves/53a45a7f-84a0-4c1d-bde1-78f372407a97-S0/frameworks/53a45a7f-84a0-4c1d-bde1-78f372407a97-0000/executors/c1ba3f0b-2f6a-46a1-b752-592394c6d726/runs/5c483d99-350a-4776-817b-f482ef332842' to user 'root'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.076668 24218 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 3.370024ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.076715 24218 replica.cpp:708] Persisted action TRUNCATE at position 4
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.077392 24216 replica.cpp:691] Replica received learned notice for position 4 from @0.0.0.0:0
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.079028 24220 slave.cpp:6474] Checkpointing ExecutorInfo to '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_qLSUL2/meta/slaves/53a45a7f-84a0-4c1d-bde1-78f372407a97-S0/frameworks/53a45a7f-84a0-4c1d-bde1-78f372407a97-0000/executors/c1ba3f0b-2f6a-46a1-b752-592394c6d726/executor.info'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.079258 24220 slave.cpp:6089] Launching executor 'c1ba3f0b-2f6a-46a1-b752-592394c6d726' of framework 53a45a7f-84a0-4c1d-bde1-78f372407a97-0000 with resources cpus(*):0.1; mem(*):32 in work directory '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_qLSUL2/slaves/53a45a7f-84a0-4c1d-bde1-78f372407a97-S0/frameworks/53a45a7f-84a0-4c1d-bde1-78f372407a97-0000/executors/c1ba3f0b-2f6a-46a1-b752-592394c6d726/runs/5c483d99-350a-4776-817b-f482ef332842'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.079458 24220 slave.cpp:6497] Checkpointing TaskInfo to '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_qLSUL2/meta/slaves/53a45a7f-84a0-4c1d-bde1-78f372407a97-S0/frameworks/53a45a7f-84a0-4c1d-bde1-78f372407a97-0000/executors/c1ba3f0b-2f6a-46a1-b752-592394c6d726/runs/5c483d99-350a-4776-817b-f482ef332842/tasks/c1ba3f0b-2f6a-46a1-b752-592394c6d726/task.info'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.079462 24221 containerizer.cpp:846] Starting container 5c483d99-350a-4776-817b-f482ef332842 for executor 'c1ba3f0b-2f6a-46a1-b752-592394c6d726' of framework 53a45a7f-84a0-4c1d-bde1-78f372407a97-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.079591 24220 slave.cpp:1978] Queued task 'c1ba3f0b-2f6a-46a1-b752-592394c6d726' for executor 'c1ba3f0b-2f6a-46a1-b752-592394c6d726' of framework 53a45a7f-84a0-4c1d-bde1-78f372407a97-0000
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.079623 24220 slave.cpp:864] Successfully attached file '/mnt/teamcity/temp/buildTmp/SlaveRecoveryTest_0_ReconnectHTTPExecutor_qLSUL2/slaves/53a45a7f-84a0-4c1d-bde1-78f372407a97-S0/frameworks/53a45a7f-84a0-4c1d-bde1-78f372407a97-0000/executors/c1ba3f0b-2f6a-46a1-b752-592394c6d726/runs/5c483d99-350a-4776-817b-f482ef332842'
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.079816 24216 leveldb.cpp:341] Persisting action (18 bytes) to leveldb took 2.40696ms
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.079841 24216 leveldb.cpp:399] Deleting ~2 keys from leveldb took 12061ns
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.079849 24216 replica.cpp:708] Persisted action TRUNCATE at position 4
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.079861 24221 cgroups.cpp:375] Creating cgroup at '/sys/fs/cgroup/cpu/mesos_test_cca37eb1-1444-4a3d-9b7e-a1bcac9c782c/5c483d99-350a-4776-817b-f482ef332842' for container 5c483d99-350a-4776-817b-f482ef332842
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.093528 24221 cgroups.cpp:431] Chown the cgroup at '/sys/fs/cgroup/cpu/mesos_test_cca37eb1-1444-4a3d-9b7e-a1bcac9c782c/5c483d99-350a-4776-817b-f482ef332842' to user 'root' for container 5c483d99-350a-4776-817b-f482ef332842
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.093565 24221 cgroups.cpp:375] Creating cgroup at '/sys/fs/cgroup/cpuacct/mesos_test_cca37eb1-1444-4a3d-9b7e-a1bcac9c782c/5c483d99-350a-4776-817b-f482ef332842' for container 5c483d99-350a-4776-817b-f482ef332842
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.094154 24221 cgroups.cpp:431] Chown the cgroup at '/sys/fs/cgroup/cpuacct/mesos_test_cca37eb1-1444-4a3d-9b7e-a1bcac9c782c/5c483d99-350a-4776-817b-f482ef332842' to user 'root' for container 5c483d99-350a-4776-817b-f482ef332842
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.094184 24221 cgroups.cpp:375] Creating cgroup at '/sys/fs/cgroup/memory/mesos_test_cca37eb1-1444-4a3d-9b7e-a1bcac9c782c/5c483d99-350a-4776-817b-f482ef332842' for container 5c483d99-350a-4776-817b-f482ef332842
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.094791 24221 cgroups.cpp:431] Chown the cgroup at '/sys/fs/cgroup/memory/mesos_test_cca37eb1-1444-4a3d-9b7e-a1bcac9c782c/5c483d99-350a-4776-817b-f482ef332842' to user 'root' for container 5c483d99-350a-4776-817b-f482ef332842
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.095093 24221 memory.cpp:447] Started listening for OOM events for container 5c483d99-350a-4776-817b-f482ef332842
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.095438 24221 memory.cpp:564] Started listening on 'low' memory pressure events for container 5c483d99-350a-4776-817b-f482ef332842
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.095751 24221 memory.cpp:564] Started listening on 'medium' memory pressure events for container 5c483d99-350a-4776-817b-f482ef332842
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.096076 24221 memory.cpp:564] Started listening on 'critical' memory pressure events for container 5c483d99-350a-4776-817b-f482ef332842
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.096633 24216 memory.cpp:193] Updated 'memory.soft_limit_in_bytes' to 1056MB for container 5c483d99-350a-4776-817b-f482ef332842
[02:59:18]W:	 [Step 10/10] I0915 02:57:43.097168 24216 memory.cpp:246] Updated 'memory.limit_in_bytes' to 1056MB for container 5c483d99-350a-4776-817b-f482ef332842
{code}

Looking at `CGROUPS_ROOT_PidNamespaceForward` the TASK_LOST is expected because the test doesn't wait for TASK_RUNNING update before terminating the agent.

{quote}
  Future<Message> registerExecutorMessage =
    FUTURE_MESSAGE(Eq(RegisterExecutorMessage().GetTypeName()), _, _);

  driver.launchTasks(offers1.get()[0].id(), {task1});

  AWAIT_READY(registerExecutorMessage);

  Future<hashset<ContainerID>> containers = containerizer->containers();
  AWAIT_READY(containers);
  EXPECT_EQ(1u, containers.get().size());

  ContainerID containerId = *(containers.get().begin());

  // Stop the slave.
  slave.get()->terminate();

{quote}

Thanks for the patch to address the mount leak [~jieyu]! (https://reviews.apache.org/r/51963/)

I ran {{sudo MESOS_VERBOSE=1 GLOG_v=2 GTEST_REPEAT=-1 GTEST_BREAK_ON_FAILURE=1 GTEST_FILTER="\*MesosContainerizerSlaveRecoveryTest.CGROUPS_ROOT_PidNamespace\*" bin/mesos-tests.sh}} and stressed my machine with {{stress -c N -i N -m N -d 1}}, where {{N}} is number of cores, and I was able to reproduce a couple of these offer future timeout failures after a few tens of repetitions. I attached logs above as {{flaky-containerizer-pid-namespace-forward.txt}} and {{flaky-containerizer-pid-namespace-backward.txt}}.

We can see the master beginning agent registration, but we never see the line {{Registered agent ...}} from {{Master::_registerSlave()}}, which indicates that registration is complete and the registered message has been sent to the agent:
{code}
I0917 01:35:17.184216   480 master.cpp:4886] Registering agent at slave(11)@172.31.1.104:57341 (ip-172-31-1-104.us-west-2.compute.internal) with id fa7a42d0-5d0c-4799-b19f-2a85b43039f3-S0
I0917 01:35:17.184232   474 process.cpp:2707] Resuming __reaper__(1)@172.31.1.104:57341 at 2016-09-17 01:35:17.184222976+00:00
I0917 01:35:17.184377   474 process.cpp:2707] Resuming registrar(6)@172.31.1.104:57341 at 2016-09-17 01:35:17.184371968+00:00
I0917 01:35:17.184554   474 registrar.cpp:464] Applied 1 operations in 79217ns; attempting to update the registry
I0917 01:35:17.184953   474 process.cpp:2697] Spawned process __latch__(141)@172.31.1.104:57341
I0917 01:35:17.184990   485 process.cpp:2707] Resuming log-storage(6)@172.31.1.104:57341 at 2016-09-17 01:35:17.184982016+00:00
I0917 01:35:17.185561   485 process.cpp:2707] Resuming log-writer(6)@172.31.1.104:57341 at 2016-09-17 01:35:17.185552896+00:00
I0917 01:35:17.185609   485 log.cpp:577] Attempting to append 434 bytes to the log
I0917 01:35:17.185804   485 process.cpp:2707] Resuming log-coordinator(6)@172.31.1.104:57341 at 2016-09-17 01:35:17.185797888+00:00
I0917 01:35:17.185863   485 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 3
I0917 01:35:17.185998   485 process.cpp:2697] Spawned process log-write(29)@172.31.1.104:57341
I0917 01:35:17.186030   475 process.cpp:2707] Resuming log-write(29)@172.31.1.104:57341 at 2016-09-17 01:35:17.186021888+00:00
I0917 01:35:17.186189   475 process.cpp:2707] Resuming log-network(6)@172.31.1.104:57341 at 2016-09-17 01:35:17.186182912+00:00
I0917 01:35:17.186275   475 process.cpp:2707] Resuming log-write(29)@172.31.1.104:57341 at 2016-09-17 01:35:17.186267904+00:00
I0917 01:35:17.186424   475 process.cpp:2707] Resuming log-network(6)@172.31.1.104:57341 at 2016-09-17 01:35:17.186416896+00:00
I0917 01:35:17.186575   475 process.cpp:2697] Spawned process __req_res__(55)@172.31.1.104:57341
I0917 01:35:17.186724   475 process.cpp:2707] Resuming log-write(29)@172.31.1.104:57341 at 2016-09-17 01:35:17.186717952+00:00
I0917 01:35:17.186609   485 process.cpp:2707] Resuming __req_res__(55)@172.31.1.104:57341 at 2016-09-17 01:35:17.186601984+00:00
I0917 01:35:17.186898   485 process.cpp:2707] Resuming log-replica(6)@172.31.1.104:57341 at 2016-09-17 01:35:17.186892032+00:00
I0917 01:35:17.186962   485 replica.cpp:537] Replica received write request for position 3 from __req_res__(55)@172.31.1.104:57341
I0917 01:35:17.185014   471 process.cpp:2707] Resuming __gc__@172.31.1.104:57341 at 2016-09-17 01:35:17.185008896+00:00
I0917 01:35:17.185036   480 process.cpp:2707] Resuming __latch__(141)@172.31.1.104:57341 at 2016-09-17 01:35:17.185029120+00:00
I0917 01:35:17.196358   482 process.cpp:2707] Resuming slave(11)@172.31.1.104:57341 at 2016-09-17 01:35:17.196335104+00:00
I0917 01:35:17.196900   482 slave.cpp:1471] Will retry registration in 25.224033ms if necessary
I0917 01:35:17.197029   482 process.cpp:2707] Resuming master@172.31.1.104:57341 at 2016-09-17 01:35:17.197024000+00:00
I0917 01:35:17.197157   482 master.cpp:4874] Ignoring register agent message from slave(11)@172.31.1.104:57341 (ip-172-31-1-104.us-west-2.compute.internal) as admission is already in progress
I0917 01:35:17.224309   482 process.cpp:2707] Resuming slave(11)@172.31.1.104:57341 at 2016-09-17 01:35:17.224284928+00:00
I0917 01:35:17.224845   482 slave.cpp:1471] Will retry registration in 63.510932ms if necessary
I0917 01:35:17.224900   475 process.cpp:2707] Resuming master@172.31.1.104:57341 at 2016-09-17 01:35:17.224888064+00:00
I0917 01:35:17.225109   475 master.cpp:4874] Ignoring register agent message from slave(11)@172.31.1.104:57341 (ip-172-31-1-104.us-west-2.compute.internal) as admission is already in progress
{code}

It looks like it blocked at {{ReplicaProcess::write}} which need to read from leveldb. I have not yet reproduced with stress after 3000 iterations at both physical machine (4 cpus, 32 gb mem, Ubuntu 14.04) and my local virtualbox vm (4 cpus, 8 gb mem). 



| Waited for agent finish registering in test case. | https://reviews.apache.org/r/51985/ |

Try to reproduce with stress in an aws instance (16 cpus, 30 gb mem, Ubuntu 14.04, c4.4xlarge), but could not reproduce after 5429 iterations as well.

Highly appreciate [~greggomann] to help reproduce in my AWS instance!!! The reason why I couldn't reproduce before is I run {{stress}} and {{mesos-tests}} in the separate disk which different with the root disk. So the {{stress}} didn't affect the root filesystem Linux used. If I run {{stress}} in the root disk and run {{mesos-test}} in the separate disk, then it could reproduce in few test iterations.

A workaround for this is to use {{flags.registry = "in_memory"}} when run tests which I have not reproduce the errors after use it.  But now I think the test cases failure should be expected because the root filesystem could not work as normal. Do you think we should use {{flags.registry = "in_memory"}} or just ignore these failures? cc [~jieyu] [~vinodkone] [~kaysoky]

Another common error seen when this issue manifests is:
{code}
Recovery failed: Failed to recover registrar: Failed to perform fetch within 1mins
{code}
See the file {{RoleTest.ImplicitRoleRegister.txt}} for the full test log.

[~haosdent@gmail.com], there is a review [here|https://reviews.apache.org/r/41665/] proposing the {{in_memory}} registry for tests. I'm currently trying to figure out whether this is a legitimate bug or simply the result of an unreasonable load put on the machine.

Awesome! Thanks a lot for your helps!

AFAICT, these errors are due to performance issues on the AWS instances we're using for our CI. I'm closing this ticket and the linked tickets for now.

Thanks a lot for [~greggomann]'s helps!

