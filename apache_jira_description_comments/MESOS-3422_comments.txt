I test on Ubuntu and works well. [~vinod@twitter.com] does this related to platform? Thansk.

{code}
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from MasterSlaveReconciliationTest
[ RUN      ] MasterSlaveReconciliationTest.ReconcileLostTask
Using temporary directory '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_2tUQZn'
I0915 22:28:40.800787  3733 leveldb.cpp:176] Opened db in 252.206266ms
I0915 22:28:40.851069  3733 leveldb.cpp:183] Compacted db in 50.197346ms
I0915 22:28:40.851210  3733 leveldb.cpp:198] Created db iterator in 63324ns
I0915 22:28:40.851256  3733 leveldb.cpp:204] Seeked to beginning of db in 4562ns
I0915 22:28:40.851286  3733 leveldb.cpp:273] Iterated through 0 keys in the db in 322ns
I0915 22:28:40.871953  3733 replica.cpp:744] Replica recovered with log positions 0 -> 0 with 1 holes and 0 unlearned
I0915 22:28:40.886368  3756 recover.cpp:449] Starting replica recovery
I0915 22:28:40.903333  3756 recover.cpp:475] Replica is in EMPTY status
I0915 22:28:40.916332  3759 replica.cpp:641] Replica in EMPTY status received a broadcasted recover request
I0915 22:28:40.917351  3756 recover.cpp:195] Received a recover response from a replica in EMPTY status
I0915 22:28:40.918557  3755 recover.cpp:566] Updating replica status to STARTING
I0915 22:28:40.928189  3759 master.cpp:380] Master 20150915-222840-16842879-54960-3733 (devstack007.cn.ibm.com) started on 127.0.1.1:54960
I0915 22:28:40.928261  3759 master.cpp:382] Flags at startup: --acls="" --allocation_interval="1secs" --allocator="HierarchicalDRF" --authenticate="true" --authenticate_slaves="true" --authenticators="crammd5" --authorizers="local" --credentials="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_2tUQZn/credentials" --framework_sorter="drf" --help="false" --initialize_driver_logging="true" --log_auto_initialize="true" --logbufsecs="0" --logging_level="INFO" --max_slave_ping_timeouts="5" --quiet="false" --recovery_slave_removal_limit="100%" --registry="replicated_log" --registry_fetch_timeout="1mins" --registry_store_timeout="25secs" --registry_strict="true" --root_submissions="true" --slave_ping_timeout="15secs" --slave_reregister_timeout="10mins" --user_sorter="drf" --version="false" --webui_dir="/usr/local/share/mesos/webui" --work_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_2tUQZn/master" --zk_session_timeout="10secs"
I0915 22:28:40.993895  3759 master.cpp:427] Master only allowing authenticated frameworks to register
I0915 22:28:40.993962  3759 master.cpp:432] Master only allowing authenticated slaves to register
I0915 22:28:40.994010  3759 credentials.hpp:37] Loading credentials for authentication from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_2tUQZn/credentials'
I0915 22:28:40.994776  3759 master.cpp:471] Using default 'crammd5' authenticator
I0915 22:28:40.995053  3759 authenticator.cpp:512] Initializing server SASL
I0915 22:28:41.009496  3757 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 90.341573ms
I0915 22:28:41.009570  3757 replica.cpp:323] Persisted replica status to STARTING
I0915 22:28:41.010040  3756 recover.cpp:475] Replica is in STARTING status
I0915 22:28:41.011255  3757 replica.cpp:641] Replica in STARTING status received a broadcasted recover request
I0915 22:28:41.011551  3752 recover.cpp:195] Received a recover response from a replica in STARTING status
I0915 22:28:41.012073  3756 recover.cpp:566] Updating replica status to VOTING
I0915 22:28:41.084720  3753 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 72.469042ms
I0915 22:28:41.084803  3753 replica.cpp:323] Persisted replica status to VOTING
I0915 22:28:41.084935  3752 recover.cpp:580] Successfully joined the Paxos group
I0915 22:28:41.085227  3752 recover.cpp:464] Recover process terminated
I0915 22:28:41.191287  3759 auxprop.cpp:66] Initialized in-memory auxiliary property plugin
I0915 22:28:41.191455  3759 master.cpp:508] Authorization enabled
I0915 22:28:41.192039  3758 hierarchical.hpp:408] Initialized hierarchical allocator process
I0915 22:28:41.210978  3752 whitelist_watcher.cpp:79] No whitelist given
I0915 22:28:41.226894  3757 master.cpp:1605] The newly elected leader is master@127.0.1.1:54960 with id 20150915-222840-16842879-54960-3733
I0915 22:28:41.227022  3757 master.cpp:1618] Elected as the leading master!
I0915 22:28:41.227073  3757 master.cpp:1378] Recovering from registrar
I0915 22:28:41.227442  3756 registrar.cpp:309] Recovering registrar
I0915 22:28:41.228864  3759 log.cpp:661] Attempting to start the writer
I0915 22:28:41.231155  3754 replica.cpp:477] Replica received implicit promise request with proposal 1
I0915 22:28:41.276180  3754 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 44.960628ms
I0915 22:28:41.276265  3754 replica.cpp:345] Persisted promised to 1
I0915 22:28:41.277185  3755 coordinator.cpp:231] Coordinator attemping to fill missing position
I0915 22:28:41.279559  3755 replica.cpp:378] Replica received explicit promise request for position 0 with proposal 2
I0915 22:28:41.317904  3755 leveldb.cpp:343] Persisting action (8 bytes) to leveldb took 38.28625ms
I0915 22:28:41.317952  3755 replica.cpp:679] Persisted action at 0
I0915 22:28:41.318975  3756 replica.cpp:511] Replica received write request for position 0
I0915 22:28:41.319077  3756 leveldb.cpp:438] Reading position from leveldb took 48432ns
I0915 22:28:41.351290  3756 leveldb.cpp:343] Persisting action (14 bytes) to leveldb took 32.131668ms
I0915 22:28:41.351372  3756 replica.cpp:679] Persisted action at 0
I0915 22:28:41.352147  3755 replica.cpp:658] Replica received learned notice for position 0
I0915 22:28:41.384781  3755 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 32.568205ms
I0915 22:28:41.384858  3755 replica.cpp:679] Persisted action at 0
I0915 22:28:41.384902  3755 replica.cpp:664] Replica learned NOP action at position 0
I0915 22:28:41.385823  3753 log.cpp:677] Writer started with ending position 0
I0915 22:28:41.388413  3754 leveldb.cpp:438] Reading position from leveldb took 41960ns
I0915 22:28:41.391221  3759 registrar.cpp:342] Successfully fetched the registry (0B) in 163.655936ms
I0915 22:28:41.391530  3759 registrar.cpp:441] Applied 1 operations in 83084ns; attempting to update the 'registry'
I0915 22:28:41.395333  3752 log.cpp:685] Attempting to append 188 bytes to the log
I0915 22:28:41.395625  3757 coordinator.cpp:341] Coordinator attempting to write APPEND action at position 1
I0915 22:28:41.396404  3753 replica.cpp:511] Replica received write request for position 1
I0915 22:28:41.434862  3753 leveldb.cpp:343] Persisting action (207 bytes) to leveldb took 38.376695ms
I0915 22:28:41.434942  3753 replica.cpp:679] Persisted action at 1
I0915 22:28:41.435797  3758 replica.cpp:658] Replica received learned notice for position 1
I0915 22:28:41.484905  3758 leveldb.cpp:343] Persisting action (209 bytes) to leveldb took 49.03218ms
I0915 22:28:41.484977  3758 replica.cpp:679] Persisted action at 1
I0915 22:28:41.485021  3758 replica.cpp:664] Replica learned APPEND action at position 1
I0915 22:28:41.486634  3759 registrar.cpp:486] Successfully updated the 'registry' in 94.96704ms
I0915 22:28:41.486788  3759 registrar.cpp:372] Successfully recovered registrar
I0915 22:28:41.486871  3752 log.cpp:704] Attempting to truncate the log to 1
I0915 22:28:41.487041  3753 coordinator.cpp:341] Coordinator attempting to write TRUNCATE action at position 2
I0915 22:28:41.487397  3758 master.cpp:1415] Recovered 0 slaves from the Registry (149B) ; allowing 10mins for slaves to re-register
I0915 22:28:41.488390  3754 replica.cpp:511] Replica received write request for position 2
I0915 22:28:41.518287  3754 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 29.818009ms
I0915 22:28:41.518383  3754 replica.cpp:679] Persisted action at 2
I0915 22:28:41.519301  3753 replica.cpp:658] Replica received learned notice for position 2
I0915 22:28:41.551661  3753 leveldb.cpp:343] Persisting action (18 bytes) to leveldb took 32.172645ms
I0915 22:28:41.551758  3753 leveldb.cpp:401] Deleting ~1 keys from leveldb took 45547ns
I0915 22:28:41.551798  3753 replica.cpp:679] Persisted action at 2
I0915 22:28:41.551862  3753 replica.cpp:664] Replica learned TRUNCATE action at position 2
I0915 22:28:41.582856  3733 containerizer.cpp:160] Using isolation: posix/cpu,posix/mem,filesystem/posix
I0915 22:28:41.612773  3752 slave.cpp:190] Slave started on 1)@127.0.1.1:54960
I0915 22:28:41.612828  3752 slave.cpp:191] Flags at startup: --appc_provisioner_backend="copy" --appc_store_dir="/tmp/mesos/store/appc" --authenticatee="crammd5" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_tymaz7/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_kill_orphans="true" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_tymaz7/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="false" --initialize_driver_logging="true" --isolation="posix/cpu,posix/mem" --launcher_dir="/home/gyliu/src/mesos/bug-fix/mesos/build/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resource_monitoring_interval="1secs" --resources="cpus:2;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --version="false" --work_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_tymaz7"
I0915 22:28:41.613301  3752 credentials.hpp:85] Loading credential for authentication from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_tymaz7/credential'
I0915 22:28:41.613534  3752 slave.cpp:321] Slave using credential for: test-principal
I0915 22:28:41.614586  3752 slave.cpp:354] Slave resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0915 22:28:41.614718  3752 slave.cpp:384] Slave hostname: devstack007.cn.ibm.com
I0915 22:28:41.614749  3752 slave.cpp:389] Slave checkpoint: true
I0915 22:28:41.616605  3756 state.cpp:54] Recovering state from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_tymaz7/meta'
I0915 22:28:41.617005  3756 status_update_manager.cpp:202] Recovering status update manager
I0915 22:28:41.617219  3756 containerizer.cpp:396] Recovering containerizer
I0915 22:28:41.618137  3733 sched.cpp:164] Version: 0.25.0
I0915 22:28:41.620059  3752 sched.cpp:262] New master detected at master@127.0.1.1:54960
I0915 22:28:41.620291  3752 sched.cpp:318] Authenticating with master master@127.0.1.1:54960
I0915 22:28:41.620337  3752 sched.cpp:325] Using default CRAM-MD5 authenticatee
I0915 22:28:41.620400  3758 slave.cpp:4077] Finished recovery
I0915 22:28:41.620708  3759 authenticatee.cpp:91] Initializing client SASL
I0915 22:28:41.620842  3758 slave.cpp:4234] Querying resource estimator for oversubscribable resources
I0915 22:28:41.620873  3759 authenticatee.cpp:115] Creating new client SASL connection
I0915 22:28:41.621410  3752 master.cpp:5089] Authenticating scheduler-a3a7c440-fbcb-496b-8934-ac7410bcbacc@127.0.1.1:54960
I0915 22:28:41.621544  3757 authenticator.cpp:407] Starting authentication session for crammd5_authenticatee(1)@127.0.1.1:54960
I0915 22:28:41.621572  3758 slave.cpp:692] New master detected at master@127.0.1.1:54960
I0915 22:28:41.621656  3758 slave.cpp:755] Authenticating with master master@127.0.1.1:54960
I0915 22:28:41.621686  3758 slave.cpp:760] Using default CRAM-MD5 authenticatee
I0915 22:28:41.621772  3752 status_update_manager.cpp:176] Pausing sending status updates
I0915 22:28:41.621888  3755 authenticatee.cpp:115] Creating new client SASL connection
I0915 22:28:41.621942  3758 slave.cpp:728] Detecting new master
I0915 22:28:41.622141  3758 slave.cpp:4248] Received oversubscribable resources  from the resource estimator
I0915 22:28:41.621975  3753 authenticator.cpp:92] Creating new server SASL connection
I0915 22:28:41.622253  3754 master.cpp:5089] Authenticating slave(1)@127.0.1.1:54960
I0915 22:28:41.622418  3756 authenticator.cpp:407] Starting authentication session for crammd5_authenticatee(2)@127.0.1.1:54960
I0915 22:28:41.622560  3757 authenticator.cpp:92] Creating new server SASL connection
I0915 22:28:41.624449  3759 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0915 22:28:41.624451  3755 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0915 22:28:41.624485  3759 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0915 22:28:41.624511  3755 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0915 22:28:41.624595  3759 authenticator.cpp:197] Received SASL authentication start
I0915 22:28:41.624606  3755 authenticator.cpp:197] Received SASL authentication start
I0915 22:28:41.624666  3759 authenticator.cpp:319] Authentication requires more steps
I0915 22:28:41.624698  3755 authenticator.cpp:319] Authentication requires more steps
I0915 22:28:41.624742  3759 authenticatee.cpp:252] Received SASL authentication step
I0915 22:28:41.624788  3755 authenticatee.cpp:252] Received SASL authentication step
I0915 22:28:41.624846  3759 authenticator.cpp:225] Received SASL authentication step
I0915 22:28:41.624876  3759 auxprop.cpp:102] Request to lookup properties for user: 'test-principal' realm: 'devstack007.cn.ibm.com' server FQDN: 'devstack007.cn.ibm.com' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false 
I0915 22:28:41.624879  3755 authenticator.cpp:225] Received SASL authentication step
I0915 22:28:41.624898  3759 auxprop.cpp:174] Looking up auxiliary property '*userPassword'
I0915 22:28:41.624927  3755 auxprop.cpp:102] Request to lookup properties for user: 'test-principal' realm: 'devstack007.cn.ibm.com' server FQDN: 'devstack007.cn.ibm.com' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false 
I0915 22:28:41.624956  3755 auxprop.cpp:174] Looking up auxiliary property '*userPassword'
I0915 22:28:41.625015  3759 auxprop.cpp:174] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
I0915 22:28:41.625020  3755 auxprop.cpp:174] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
I0915 22:28:41.625049  3759 auxprop.cpp:102] Request to lookup properties for user: 'test-principal' realm: 'devstack007.cn.ibm.com' server FQDN: 'devstack007.cn.ibm.com' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true 
I0915 22:28:41.625067  3759 auxprop.cpp:124] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
I0915 22:28:41.625071  3755 auxprop.cpp:102] Request to lookup properties for user: 'test-principal' realm: 'devstack007.cn.ibm.com' server FQDN: 'devstack007.cn.ibm.com' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true 
I0915 22:28:41.625080  3759 auxprop.cpp:124] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
I0915 22:28:41.625102  3755 auxprop.cpp:124] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
I0915 22:28:41.625118  3759 authenticator.cpp:311] Authentication success
I0915 22:28:41.625123  3755 auxprop.cpp:124] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
I0915 22:28:41.625154  3755 authenticator.cpp:311] Authentication success
I0915 22:28:41.625191  3754 authenticatee.cpp:292] Authentication success
I0915 22:28:41.625288  3753 authenticatee.cpp:292] Authentication success
I0915 22:28:41.625375  3752 master.cpp:5119] Successfully authenticated principal 'test-principal' at scheduler-a3a7c440-fbcb-496b-8934-ac7410bcbacc@127.0.1.1:54960
I0915 22:28:41.625401  3759 authenticator.cpp:425] Authentication session cleanup for crammd5_authenticatee(1)@127.0.1.1:54960
I0915 22:28:41.625497  3754 sched.cpp:407] Successfully authenticated with master master@127.0.1.1:54960
I0915 22:28:41.625535  3754 sched.cpp:714] Sending SUBSCRIBE call to master@127.0.1.1:54960
I0915 22:28:41.625500  3752 master.cpp:5119] Successfully authenticated principal 'test-principal' at slave(1)@127.0.1.1:54960
I0915 22:28:41.625704  3759 authenticator.cpp:425] Authentication session cleanup for crammd5_authenticatee(2)@127.0.1.1:54960
I0915 22:28:41.625695  3754 sched.cpp:747] Will retry registration in 810.177326ms if necessary
I0915 22:28:41.625833  3755 master.cpp:2174] Received SUBSCRIBE call for framework 'default' at scheduler-a3a7c440-fbcb-496b-8934-ac7410bcbacc@127.0.1.1:54960
I0915 22:28:41.625833  3758 slave.cpp:823] Successfully authenticated with master master@127.0.1.1:54960
I0915 22:28:41.625954  3755 master.cpp:1644] Authorizing framework principal 'test-principal' to receive offers for role '*'
I0915 22:28:41.626005  3758 slave.cpp:1217] Will retry registration in 1.558741ms if necessary
I0915 22:28:41.628494  3758 slave.cpp:1217] Will retry registration in 4.690825ms if necessary
I0915 22:28:41.634006  3756 slave.cpp:1217] Will retry registration in 12.908225ms if necessary
I0915 22:28:41.636726  3755 master.cpp:3816] Registering slave at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com) with id 20150915-222840-16842879-54960-3733-S0
I0915 22:28:41.637073  3755 master.cpp:2244] Subscribing framework default with checkpointing disabled and capabilities [  ]
I0915 22:28:41.637322  3753 registrar.cpp:441] Applied 1 operations in 55510ns; attempting to update the 'registry'
I0915 22:28:41.637547  3752 hierarchical.hpp:453] Added framework 20150915-222840-16842879-54960-3733-0000
I0915 22:28:41.637742  3755 master.cpp:3804] Ignoring register slave message from slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com) as admission is already in progress
I0915 22:28:41.637774  3759 sched.cpp:641] Framework registered with 20150915-222840-16842879-54960-3733-0000
I0915 22:28:41.637926  3752 hierarchical.hpp:1147] No resources available to allocate!
I0915 22:28:41.638077  3752 hierarchical.hpp:1230] No inverse offers to send out!
I0915 22:28:41.638087  3755 master.cpp:3804] Ignoring register slave message from slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com) as admission is already in progress
I0915 22:28:41.638108  3752 hierarchical.hpp:1047] Performed allocation for 0 slaves in 202137ns
I0915 22:28:41.638044  3759 sched.cpp:655] Scheduler::registered took 39399ns
I0915 22:28:41.640064  3754 log.cpp:685] Attempting to append 366 bytes to the log
I0915 22:28:41.640266  3755 coordinator.cpp:341] Coordinator attempting to write APPEND action at position 3
I0915 22:28:41.640923  3756 replica.cpp:511] Replica received write request for position 3
I0915 22:28:41.647588  3752 slave.cpp:1217] Will retry registration in 148.576472ms if necessary
I0915 22:28:41.647784  3758 master.cpp:3804] Ignoring register slave message from slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com) as admission is already in progress
I0915 22:28:41.693835  3756 leveldb.cpp:343] Persisting action (385 bytes) to leveldb took 52.865341ms
I0915 22:28:41.693887  3756 replica.cpp:679] Persisted action at 3
I0915 22:28:41.694504  3752 replica.cpp:658] Replica received learned notice for position 3
I0915 22:28:41.727273  3752 leveldb.cpp:343] Persisting action (387 bytes) to leveldb took 32.694232ms
I0915 22:28:41.727345  3752 replica.cpp:679] Persisted action at 3
I0915 22:28:41.727392  3752 replica.cpp:664] Replica learned APPEND action at position 3
I0915 22:28:41.728603  3754 registrar.cpp:486] Successfully updated the 'registry' in 91.195136ms
I0915 22:28:41.728809  3755 log.cpp:704] Attempting to truncate the log to 3
I0915 22:28:41.728914  3754 coordinator.cpp:341] Coordinator attempting to write TRUNCATE action at position 4
I0915 22:28:41.729423  3753 replica.cpp:511] Replica received write request for position 4
I0915 22:28:41.729729  3755 slave.cpp:3105] Received ping from slave-observer(1)@127.0.1.1:54960
I0915 22:28:41.729907  3758 master.cpp:3884] Registered slave 20150915-222840-16842879-54960-3733-S0 at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0915 22:28:41.730042  3755 hierarchical.hpp:612] Added slave 20150915-222840-16842879-54960-3733-S0 (devstack007.cn.ibm.com) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (allocated: )
I0915 22:28:41.730104  3754 slave.cpp:867] Registered with master master@127.0.1.1:54960; given slave ID 20150915-222840-16842879-54960-3733-S0
I0915 22:28:41.730140  3754 fetcher.cpp:77] Clearing fetcher cache
I0915 22:28:41.730262  3757 status_update_manager.cpp:183] Resuming sending status updates
I0915 22:28:41.730599  3755 hierarchical.hpp:1230] No inverse offers to send out!
I0915 22:28:41.730633  3755 hierarchical.hpp:1065] Performed allocation for slave 20150915-222840-16842879-54960-3733-S0 in 548692ns
I0915 22:28:41.731081  3759 master.cpp:4918] Sending 1 offers to framework 20150915-222840-16842879-54960-3733-0000 (default) at scheduler-a3a7c440-fbcb-496b-8934-ac7410bcbacc@127.0.1.1:54960
I0915 22:28:41.731506  3759 sched.cpp:811] Scheduler::resourceOffers took 76181ns
I0915 22:28:41.733994  3758 master.cpp:2878] Processing ACCEPT call for offers: [ 20150915-222840-16842879-54960-3733-O0 ] on slave 20150915-222840-16842879-54960-3733-S0 at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com) for framework 20150915-222840-16842879-54960-3733-0000 (default) at scheduler-a3a7c440-fbcb-496b-8934-ac7410bcbacc@127.0.1.1:54960
I0915 22:28:41.734100  3758 master.cpp:2682] Authorizing framework principal 'test-principal' to launch task 1 as user 'gyliu'
W0915 22:28:41.736322  3758 validation.cpp:419] Executor default for task 1 uses less CPUs (None) than the minimum required (0.01). Please update your executor, as this will be mandatory in future releases.
W0915 22:28:41.736408  3758 validation.cpp:431] Executor default for task 1 uses less memory (None) than the minimum required (32MB). Please update your executor, as this will be mandatory in future releases.
I0915 22:28:41.737035  3758 master.hpp:176] Adding task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 20150915-222840-16842879-54960-3733-S0 (devstack007.cn.ibm.com)
I0915 22:28:41.737259  3758 master.cpp:3208] Launching task 1 of framework 20150915-222840-16842879-54960-3733-0000 (default) at scheduler-a3a7c440-fbcb-496b-8934-ac7410bcbacc@127.0.1.1:54960 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 20150915-222840-16842879-54960-3733-S0 at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com)
I0915 22:28:41.820271  3754 slave.cpp:890] Checkpointing SlaveInfo to '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_tymaz7/meta/slaves/20150915-222840-16842879-54960-3733-S0/slave.info'
I0915 22:28:41.820550  3754 slave.cpp:926] Forwarding total oversubscribed resources 
I0915 22:28:41.821171  3756 master.cpp:4226] Received update of slave 20150915-222840-16842879-54960-3733-S0 at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com) with total oversubscribed resources 
I0915 22:28:41.821429  3755 hierarchical.hpp:672] Slave 20150915-222840-16842879-54960-3733-S0 (devstack007.cn.ibm.com) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
I0915 22:28:41.821674  3755 hierarchical.hpp:1147] No resources available to allocate!
I0915 22:28:41.821709  3755 hierarchical.hpp:1230] No inverse offers to send out!
I0915 22:28:41.821738  3755 hierarchical.hpp:1065] Performed allocation for slave 20150915-222840-16842879-54960-3733-S0 in 264094ns
I0915 22:28:41.822713  3756 status_update_manager.cpp:176] Pausing sending status updates
I0915 22:28:41.822727  3758 slave.cpp:692] New master detected at master@127.0.1.1:54960
I0915 22:28:41.822803  3758 slave.cpp:755] Authenticating with master master@127.0.1.1:54960
I0915 22:28:41.822823  3758 slave.cpp:760] Using default CRAM-MD5 authenticatee
I0915 22:28:41.822923  3758 slave.cpp:728] Detecting new master
I0915 22:28:41.823016  3752 authenticatee.cpp:115] Creating new client SASL connection
I0915 22:28:41.823370  3754 master.cpp:5089] Authenticating slave(1)@127.0.1.1:54960
I0915 22:28:41.823542  3758 authenticator.cpp:407] Starting authentication session for crammd5_authenticatee(3)@127.0.1.1:54960
I0915 22:28:41.823711  3752 authenticator.cpp:92] Creating new server SASL connection
I0915 22:28:41.823891  3756 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0915 22:28:41.823927  3756 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0915 22:28:41.824025  3758 authenticator.cpp:197] Received SASL authentication start
I0915 22:28:41.824177  3758 authenticator.cpp:319] Authentication requires more steps
I0915 22:28:41.824311  3758 authenticatee.cpp:252] Received SASL authentication step
I0915 22:28:41.824445  3758 authenticator.cpp:225] Received SASL authentication step
I0915 22:28:41.824507  3758 auxprop.cpp:102] Request to lookup properties for user: 'test-principal' realm: 'devstack007.cn.ibm.com' server FQDN: 'devstack007.cn.ibm.com' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false 
I0915 22:28:41.824544  3758 auxprop.cpp:174] Looking up auxiliary property '*userPassword'
I0915 22:28:41.824609  3758 auxprop.cpp:174] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
I0915 22:28:41.824658  3758 auxprop.cpp:102] Request to lookup properties for user: 'test-principal' realm: 'devstack007.cn.ibm.com' server FQDN: 'devstack007.cn.ibm.com' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true 
I0915 22:28:41.824692  3758 auxprop.cpp:124] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
I0915 22:28:41.824717  3758 auxprop.cpp:124] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
I0915 22:28:41.824753  3758 authenticator.cpp:311] Authentication success
I0915 22:28:41.824874  3756 authenticatee.cpp:292] Authentication success
I0915 22:28:41.824914  3757 master.cpp:5119] Successfully authenticated principal 'test-principal' at slave(1)@127.0.1.1:54960
I0915 22:28:41.825027  3759 authenticator.cpp:425] Authentication session cleanup for crammd5_authenticatee(3)@127.0.1.1:54960
I0915 22:28:41.825168  3758 slave.cpp:823] Successfully authenticated with master master@127.0.1.1:54960
I0915 22:28:41.825443  3758 slave.cpp:1217] Will retry registration in 13.419746ms if necessary
I0915 22:28:41.825734  3752 master.cpp:3976] Re-registering slave 20150915-222840-16842879-54960-3733-S0 at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com)
W0915 22:28:41.826159  3752 master.cpp:5186] Task 1 of framework 20150915-222840-16842879-54960-3733-0000 unknown to the slave 20150915-222840-16842879-54960-3733-S0 at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com) during re-registration: reconciling with the slave
W0915 22:28:41.826668  3752 master.cpp:5268] Executor default of framework 20150915-222840-16842879-54960-3733-0000 possibly unknown to the slave 20150915-222840-16842879-54960-3733-S0 at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com)
I0915 22:28:41.826745  3756 slave.cpp:967] Re-registered with master master@127.0.1.1:54960
I0915 22:28:41.826797  3752 master.cpp:6118] Removing executor 'default' with resources  of framework 20150915-222840-16842879-54960-3733-0000 on slave 20150915-222840-16842879-54960-3733-S0 at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com)
I0915 22:28:41.826820  3757 status_update_manager.cpp:183] Resuming sending status updates
I0915 22:28:41.826843  3756 slave.cpp:1003] Forwarding total oversubscribed resources 
W0915 22:28:41.827033  3756 slave.cpp:1043] Slave reconciling task 1 of framework 20150915-222840-16842879-54960-3733-0000 in state TASK_LOST: task unknown to the slave
I0915 22:28:41.827244  3752 master.cpp:4164] Sending updated checkpointed resources  to slave 20150915-222840-16842879-54960-3733-S0 at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com)
I0915 22:28:41.827461  3752 master.cpp:4226] Received update of slave 20150915-222840-16842879-54960-3733-S0 at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com) with total oversubscribed resources 
I0915 22:28:41.827873  3757 hierarchical.hpp:672] Slave 20150915-222840-16842879-54960-3733-S0 (devstack007.cn.ibm.com) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
I0915 22:28:41.828115  3757 hierarchical.hpp:1147] No resources available to allocate!
I0915 22:28:41.828151  3757 hierarchical.hpp:1230] No inverse offers to send out!
I0915 22:28:41.828176  3757 hierarchical.hpp:1065] Performed allocation for slave 20150915-222840-16842879-54960-3733-S0 in 260424ns
I0915 22:28:41.828800  3752 status_update_manager.cpp:322] Received status update TASK_LOST (UUID: 6a8c03f0-509f-48e6-8fd5-ed7b47eb44df) for task 1 of framework 20150915-222840-16842879-54960-3733-0000
I0915 22:28:41.828882  3752 status_update_manager.cpp:499] Creating StatusUpdate stream for task 1 of framework 20150915-222840-16842879-54960-3733-0000
I0915 22:28:41.829025  3756 slave.cpp:2235] Updated checkpointed resources from  to 
I0915 22:28:41.829366  3752 status_update_manager.cpp:376] Forwarding update TASK_LOST (UUID: 6a8c03f0-509f-48e6-8fd5-ed7b47eb44df) for task 1 of framework 20150915-222840-16842879-54960-3733-0000 to the slave
I0915 22:28:41.829633  3755 slave.cpp:2983] Forwarding the update TASK_LOST (UUID: 6a8c03f0-509f-48e6-8fd5-ed7b47eb44df) for task 1 of framework 20150915-222840-16842879-54960-3733-0000 to master@127.0.1.1:54960
I0915 22:28:41.829941  3755 slave.cpp:2907] Status update manager successfully handled status update TASK_LOST (UUID: 6a8c03f0-509f-48e6-8fd5-ed7b47eb44df) for task 1 of framework 20150915-222840-16842879-54960-3733-0000
I0915 22:28:41.830066  3758 master.cpp:4366] Status update TASK_LOST (UUID: 6a8c03f0-509f-48e6-8fd5-ed7b47eb44df) for task 1 of framework 20150915-222840-16842879-54960-3733-0000 from slave 20150915-222840-16842879-54960-3733-S0 at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com)
I0915 22:28:41.830114  3758 master.cpp:4405] Forwarding status update TASK_LOST (UUID: 6a8c03f0-509f-48e6-8fd5-ed7b47eb44df) for task 1 of framework 20150915-222840-16842879-54960-3733-0000
I0915 22:28:41.830272  3758 master.cpp:6021] Updating the latest state of task 1 of framework 20150915-222840-16842879-54960-3733-0000 to TASK_LOST
I0915 22:28:41.830363  3759 sched.cpp:918] Scheduler::statusUpdate took 54887ns
I0915 22:28:41.830675  3757 hierarchical.hpp:954] Recovered cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: ) on slave 20150915-222840-16842879-54960-3733-S0 from framework 20150915-222840-16842879-54960-3733-0000
I0915 22:28:41.835749  3753 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 106.276892ms
I0915 22:28:41.835824  3753 replica.cpp:679] Persisted action at 4
I0915 22:28:41.836457  3753 replica.cpp:658] Replica received learned notice for position 4
I0915 22:28:41.836736  3758 master.cpp:6089] Removing task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] of framework 20150915-222840-16842879-54960-3733-0000 on slave 20150915-222840-16842879-54960-3733-S0 at slave(1)@127.0.1.1:54960 (devstack007.cn.ibm.com)
I0915 22:28:41.836931  3758 master.cpp:3560] Processing ACKNOWLEDGE call 6a8c03f0-509f-48e6-8fd5-ed7b47eb44df for task 1 of framework 20150915-222840-16842879-54960-3733-0000 (default) at scheduler-a3a7c440-fbcb-496b-8934-ac7410bcbacc@127.0.1.1:54960 on slave 20150915-222840-16842879-54960-3733-S0
I0915 22:28:41.837369  3758 status_update_manager.cpp:394] Received status update acknowledgement (UUID: 6a8c03f0-509f-48e6-8fd5-ed7b47eb44df) for task 1 of framework 20150915-222840-16842879-54960-3733-0000
I0915 22:28:41.837505  3758 status_update_manager.cpp:530] Cleaning up status update stream for task 1 of framework 20150915-222840-16842879-54960-3733-0000
I0915 22:28:41.837813  3758 slave.cpp:2306] Status update manager successfully handled status update acknowledgement (UUID: 6a8c03f0-509f-48e6-8fd5-ed7b47eb44df) for task 1 of framework 20150915-222840-16842879-54960-3733-0000
E0915 22:28:41.837849  3758 slave.cpp:2317] Status update acknowledgement (UUID: 6a8c03f0-509f-48e6-8fd5-ed7b47eb44df) for task 1 of unknown framework 20150915-222840-16842879-54960-3733-0000
I0915 22:28:41.877821  3753 leveldb.cpp:343] Persisting action (18 bytes) to leveldb took 41.327821ms
I0915 22:28:41.877909  3753 leveldb.cpp:401] Deleting ~2 keys from leveldb took 47279ns
I0915 22:28:41.877940  3753 replica.cpp:679] Persisted action at 4
I0915 22:28:41.877981  3753 replica.cpp:664] Replica learned TRUNCATE action at position 4
I0915 22:28:41.906275  3754 process.cpp:3021] Handling HTTP event for process 'metrics' with path: '/metrics/snapshot'
I0915 22:28:41.918052  3733 sched.cpp:1754] Asked to stop the driver
I0915 22:28:41.918167  3754 sched.cpp:1040] Stopping framework '20150915-222840-16842879-54960-3733-0000'
I0915 22:28:41.918184  3752 master.cpp:921] Master terminating
I0915 22:28:41.918462  3755 hierarchical.hpp:643] Removed slave 20150915-222840-16842879-54960-3733-S0
I0915 22:28:41.918792  3755 hierarchical.hpp:490] Removed framework 20150915-222840-16842879-54960-3733-0000
I0915 22:28:41.919427  3756 slave.cpp:3151] master@127.0.1.1:54960 exited
W0915 22:28:41.919839  3756 slave.cpp:3154] Master disconnected! Waiting for a new master to be elected
I0915 22:28:41.923146  3753 slave.cpp:572] Slave terminating
[       OK ] MasterSlaveReconciliationTest.ReconcileLostTask (1443 ms)
[----------] 1 test from MasterSlaveReconciliationTest (1443 ms total)
 
[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (1780 ms total)
[  PASSED  ] 1 test.
make[3]: Leaving directory `/home/gyliu/src/mesos/bug-fix/mesos/build/src'
make[2]: Leaving directory `/home/gyliu/src/mesos/bug-fix/mesos/build/src'
make[1]: Leaving directory `/home/gyliu/src/mesos/bug-fix/mesos/build/src'
{code}

Tested HEAD on centos5 without error.

{code}
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from MasterSlaveReconciliationTest
[ RUN      ] MasterSlaveReconciliationTest.ReconcileLostTask
Using temporary directory '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_WBMrPv'
I0918 22:20:44.704393 52360 leveldb.cpp:176] Opened db in 189.020165ms
I0918 22:20:44.727799 52360 leveldb.cpp:183] Compacted db in 23.306607ms
I0918 22:20:44.727943 52360 leveldb.cpp:198] Created db iterator in 81877ns
I0918 22:20:44.727984 52360 leveldb.cpp:204] Seeked to beginning of db in 7867ns
I0918 22:20:44.728003 52360 leveldb.cpp:273] Iterated through 0 keys in the db in 2663ns
I0918 22:20:44.728169 52360 replica.cpp:744] Replica recovered with log positions 0 -> 0 with 1 holes and 0 unlearned
I0918 22:20:44.729832 52371 recover.cpp:449] Starting replica recovery
I0918 22:20:44.730511 52371 recover.cpp:475] Replica is in EMPTY status
I0918 22:20:44.734364 52383 replica.cpp:641] Replica in EMPTY status received a broadcasted recover request
I0918 22:20:44.734827 52374 master.cpp:380] Master 20150918-222044-1740121354-58052-52360 (smfd-bkq-03-sr4.devel.twitter.com) started on 10.37.184.103:58052
I0918 22:20:44.734904 52374 master.cpp:382] Flags at startup: --acls="" --allocation_interval="1secs" --allocator="HierarchicalDRF" --authenticate="true" --authenticate_slaves="true" --authenticators="crammd5" --authorizers="local" --credentials="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_WBMrPv/credentials" --framework_sorter="drf" --help="false" --initialize_driver_logging="true" --log_auto_initialize="true" --logbufsecs="0" --logging_level="INFO" --max_slave_ping_timeouts="5" --quiet="false" --recovery_slave_removal_limit="100%" --registry="replicated_log" --registry_fetch_timeout="1mins" --registry_store_timeout="25secs" --registry_strict="true" --root_submissions="true" --slave_ping_timeout="15secs" --slave_reregister_timeout="10mins" --user_sorter="drf" --version="false" --webui_dir="/usr/local/share/mesos/webui" --work_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_WBMrPv/master" --zk_session_timeout="10secs"
I0918 22:20:44.735714 52374 master.cpp:427] Master only allowing authenticated frameworks to register
I0918 22:20:44.735740 52374 master.cpp:432] Master only allowing authenticated slaves to register
I0918 22:20:44.735766 52374 credentials.hpp:37] Loading credentials for authentication from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_WBMrPv/credentials'
I0918 22:20:44.735842 52380 recover.cpp:195] Received a recover response from a replica in EMPTY status
I0918 22:20:44.736321 52374 master.cpp:471] Using default 'crammd5' authenticator
I0918 22:20:44.736505 52374 authenticator.cpp:512] Initializing server SASL
I0918 22:20:44.736618 52367 recover.cpp:566] Updating replica status to STARTING
I0918 22:20:44.739025 52374 master.cpp:508] Authorization enabled
I0918 22:20:44.745616 52380 master.cpp:1607] The newly elected leader is master@10.37.184.103:58052 with id 20150918-222044-1740121354-58052-52360
I0918 22:20:44.745654 52380 master.cpp:1620] Elected as the leading master!
I0918 22:20:44.745687 52380 master.cpp:1380] Recovering from registrar
I0918 22:20:44.745949 52367 registrar.cpp:309] Recovering registrar
I0918 22:20:44.779386 52366 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 42.319867ms
I0918 22:20:44.779470 52366 replica.cpp:323] Persisted replica status to STARTING
I0918 22:20:44.779749 52366 recover.cpp:475] Replica is in STARTING status
I0918 22:20:44.783020 52381 replica.cpp:641] Replica in STARTING status received a broadcasted recover request
I0918 22:20:44.783403 52382 recover.cpp:195] Received a recover response from a replica in STARTING status
I0918 22:20:44.783987 52371 recover.cpp:566] Updating replica status to VOTING
I0918 22:20:44.803232 52365 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 18.593212ms
I0918 22:20:44.803315 52365 replica.cpp:323] Persisted replica status to VOTING
I0918 22:20:44.803407 52365 recover.cpp:580] Successfully joined the Paxos group
I0918 22:20:44.804296 52365 recover.cpp:464] Recover process terminated
I0918 22:20:44.804987 52369 log.cpp:661] Attempting to start the writer
I0918 22:20:44.808370 52384 replica.cpp:477] Replica received implicit promise request with proposal 1
I0918 22:20:44.811528 52384 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 3.125107ms
I0918 22:20:44.811566 52384 replica.cpp:345] Persisted promised to 1
I0918 22:20:44.813977 52368 coordinator.cpp:231] Coordinator attemping to fill missing position
I0918 22:20:44.817291 52383 replica.cpp:378] Replica received explicit promise request for position 0 with proposal 2
I0918 22:20:44.828184 52383 leveldb.cpp:343] Persisting action (8 bytes) to leveldb took 10.840125ms
I0918 22:20:44.828228 52383 replica.cpp:679] Persisted action at 0
I0918 22:20:44.831761 52376 replica.cpp:511] Replica received write request for position 0
I0918 22:20:44.831868 52376 leveldb.cpp:438] Reading position from leveldb took 63801ns
I0918 22:20:44.836539 52376 leveldb.cpp:343] Persisting action (14 bytes) to leveldb took 4.580366ms
I0918 22:20:44.836577 52376 replica.cpp:679] Persisted action at 0
I0918 22:20:44.837771 52373 replica.cpp:658] Replica received learned notice for position 0
I0918 22:20:44.844876 52373 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 7.046482ms
I0918 22:20:44.844992 52373 replica.cpp:679] Persisted action at 0
I0918 22:20:44.845016 52373 replica.cpp:664] Replica learned NOP action at position 0
I0918 22:20:44.846305 52361 log.cpp:677] Writer started with ending position 0
I0918 22:20:44.848880 52382 leveldb.cpp:438] Reading position from leveldb took 27731ns
I0918 22:20:44.852102 52363 registrar.cpp:342] Successfully fetched the registry (0B) in 106.071808ms
I0918 22:20:44.852339 52363 registrar.cpp:441] Applied 1 operations in 68368ns; attempting to update the 'registry'
I0918 22:20:44.855504 52378 log.cpp:685] Attempting to append 222 bytes to the log
I0918 22:20:44.855690 52377 coordinator.cpp:341] Coordinator attempting to write APPEND action at position 1
I0918 22:20:44.857149 52362 replica.cpp:511] Replica received write request for position 1
I0918 22:20:44.861531 52362 leveldb.cpp:343] Persisting action (241 bytes) to leveldb took 4.338494ms
I0918 22:20:44.861634 52362 replica.cpp:679] Persisted action at 1
I0918 22:20:44.862962 52375 replica.cpp:658] Replica received learned notice for position 1
I0918 22:20:44.869879 52375 leveldb.cpp:343] Persisting action (243 bytes) to leveldb took 6.874282ms
I0918 22:20:44.869987 52375 replica.cpp:679] Persisted action at 1
I0918 22:20:44.870009 52375 replica.cpp:664] Replica learned APPEND action at position 1
I0918 22:20:44.872153 52375 registrar.cpp:486] Successfully updated the 'registry' in 19.600896ms
I0918 22:20:44.872371 52375 registrar.cpp:372] Successfully recovered registrar
I0918 22:20:44.872426 52369 log.cpp:704] Attempting to truncate the log to 1
I0918 22:20:44.872745 52370 coordinator.cpp:341] Coordinator attempting to write TRUNCATE action at position 2
I0918 22:20:44.873543 52378 master.cpp:1417] Recovered 0 slaves from the Registry (183B) ; allowing 10mins for slaves to re-register
I0918 22:20:44.874157 52384 replica.cpp:511] Replica received write request for position 2
I0918 22:20:44.878165 52384 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 3.905542ms
I0918 22:20:44.878275 52384 replica.cpp:679] Persisted action at 2
I0918 22:20:44.880193 52377 replica.cpp:658] Replica received learned notice for position 2
I0918 22:20:44.886489 52377 leveldb.cpp:343] Persisting action (18 bytes) to leveldb took 6.255367ms
I0918 22:20:44.886620 52377 leveldb.cpp:401] Deleting ~1 keys from leveldb took 25046ns
I0918 22:20:44.886644 52377 replica.cpp:679] Persisted action at 2
I0918 22:20:44.886667 52377 replica.cpp:664] Replica learned TRUNCATE action at position 2
I0918 22:20:44.898887 52360 containerizer.cpp:143] Using isolation: posix/cpu,posix/mem,filesystem/posix
W0918 22:20:44.899674 52360 backend.cpp:50] Failed to create 'bind' backend: BindBackend requires root privileges
I0918 22:20:44.902760 52362 slave.cpp:190] Slave started on 1)@10.37.184.103:58052
I0918 22:20:44.902875 52362 slave.cpp:191] Flags at startup: --appc_store_dir="/tmp/mesos/store/appc" --authenticatee="crammd5" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_CaEB2i/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_kill_orphans="true" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_CaEB2i/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="false" --image_provisioner_backend="copy" --initialize_driver_logging="true" --isolation="posix/cpu,posix/mem" --launcher_dir="/home/pbrett/sandbox/ReconcileLostTask/build/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resource_monitoring_interval="1secs" --resources="cpus:2;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --version="false" --work_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_CaEB2i"
I0918 22:20:44.903291 52362 credentials.hpp:85] Loading credential for authentication from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_CaEB2i/credential'
I0918 22:20:44.903483 52362 slave.cpp:321] Slave using credential for: test-principal
I0918 22:20:44.904093 52362 slave.cpp:354] Slave resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0918 22:20:44.904633 52362 slave.cpp:384] Slave hostname: smfd-bkq-03-sr4.devel.twitter.com
I0918 22:20:44.904707 52362 slave.cpp:389] Slave checkpoint: true
I0918 22:20:44.906013 52360 sched.cpp:164] Version: 0.25.0
I0918 22:20:44.906929 52368 state.cpp:54] Recovering state from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_CaEB2i/meta'
I0918 22:20:44.907274 52377 sched.cpp:262] New master detected at master@10.37.184.103:58052
I0918 22:20:44.907505 52377 sched.cpp:318] Authenticating with master master@10.37.184.103:58052
I0918 22:20:44.907390 52384 status_update_manager.cpp:202] Recovering status update manager
I0918 22:20:44.907531 52377 sched.cpp:325] Using default CRAM-MD5 authenticatee
I0918 22:20:44.908000 52381 containerizer.cpp:371] Recovering containerizer
I0918 22:20:44.908030 52384 authenticatee.cpp:91] Initializing client SASL
I0918 22:20:44.908512 52384 authenticatee.cpp:115] Creating new client SASL connection
I0918 22:20:44.908855 52365 master.cpp:5093] Authenticating scheduler-4806d03c-5062-4b50-b801-4393d3519b4c@10.37.184.103:58052
I0918 22:20:44.909461 52373 authenticator.cpp:92] Creating new server SASL connection
I0918 22:20:44.909838 52376 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0918 22:20:44.909943 52376 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0918 22:20:44.910049 52376 authenticator.cpp:197] Received SASL authentication start
I0918 22:20:44.910061 52381 slave.cpp:4097] Finished recovery
I0918 22:20:44.910171 52376 authenticator.cpp:319] Authentication requires more steps
I0918 22:20:44.910431 52362 authenticatee.cpp:252] Received SASL authentication step
I0918 22:20:44.910598 52372 authenticator.cpp:225] Received SASL authentication step
I0918 22:20:44.910897 52372 authenticator.cpp:311] Authentication success
I0918 22:20:44.911613 52377 authenticatee.cpp:292] Authentication success
I0918 22:20:44.911861 52367 master.cpp:5123] Successfully authenticated principal 'test-principal' at scheduler-4806d03c-5062-4b50-b801-4393d3519b4c@10.37.184.103:58052
I0918 22:20:44.912569 52371 status_update_manager.cpp:176] Pausing sending status updates
I0918 22:20:44.912567 52381 slave.cpp:692] New master detected at master@10.37.184.103:58052
I0918 22:20:44.912933 52365 sched.cpp:407] Successfully authenticated with master master@10.37.184.103:58052
I0918 22:20:44.912894 52381 slave.cpp:755] Authenticating with master master@10.37.184.103:58052
I0918 22:20:44.913095 52381 slave.cpp:760] Using default CRAM-MD5 authenticatee
I0918 22:20:44.913250 52381 slave.cpp:728] Detecting new master
I0918 22:20:44.913266 52375 authenticatee.cpp:115] Creating new client SASL connection
I0918 22:20:44.913313 52362 master.cpp:2176] Received SUBSCRIBE call for framework 'default' at scheduler-4806d03c-5062-4b50-b801-4393d3519b4c@10.37.184.103:58052
I0918 22:20:44.913455 52362 master.cpp:1646] Authorizing framework principal 'test-principal' to receive offers for role '*'
I0918 22:20:44.913833 52362 master.cpp:5093] Authenticating slave(1)@10.37.184.103:58052
I0918 22:20:44.914021 52362 master.cpp:2246] Subscribing framework default with checkpointing disabled and capabilities [  ]
I0918 22:20:44.914209 52375 authenticator.cpp:92] Creating new server SASL connection
I0918 22:20:44.914439 52373 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0918 22:20:44.914487 52373 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0918 22:20:44.914568 52373 authenticator.cpp:197] Received SASL authentication start
I0918 22:20:44.914640 52373 authenticator.cpp:319] Authentication requires more steps
I0918 22:20:44.914700 52373 authenticatee.cpp:252] Received SASL authentication step
I0918 22:20:44.914813 52384 hierarchical.hpp:453] Added framework 20150918-222044-1740121354-58052-52360-0000
I0918 22:20:44.914839 52369 authenticator.cpp:225] Received SASL authentication step
I0918 22:20:44.914908 52369 authenticator.cpp:311] Authentication success
I0918 22:20:44.915030 52369 authenticatee.cpp:292] Authentication success
I0918 22:20:44.915537 52369 slave.cpp:823] Successfully authenticated with master master@10.37.184.103:58052
I0918 22:20:44.915665 52362 master.cpp:5123] Successfully authenticated principal 'test-principal' at slave(1)@10.37.184.103:58052
I0918 22:20:44.915807 52375 sched.cpp:641] Framework registered with 20150918-222044-1740121354-58052-52360-0000
I0918 22:20:44.916044 52362 master.cpp:3820] Registering slave at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com) with id 20150918-222044-1740121354-58052-52360-S0
I0918 22:20:44.916842 52381 registrar.cpp:441] Applied 1 operations in 101270ns; attempting to update the 'registry'
I0918 22:20:44.919000 52372 log.cpp:685] Attempting to append 414 bytes to the log
I0918 22:20:44.919178 52380 coordinator.cpp:341] Coordinator attempting to write APPEND action at position 3
I0918 22:20:44.920032 52380 replica.cpp:511] Replica received write request for position 3
I0918 22:20:44.933576 52362 master.cpp:3808] Ignoring register slave message from slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com) as admission is already in progress
I0918 22:20:44.943189 52370 master.cpp:3808] Ignoring register slave message from slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com) as admission is already in progress
I0918 22:20:44.953141 52380 leveldb.cpp:343] Persisting action (433 bytes) to leveldb took 33.05196ms
I0918 22:20:44.953244 52380 replica.cpp:679] Persisted action at 3
I0918 22:20:44.954200 52382 replica.cpp:658] Replica received learned notice for position 3
I0918 22:20:44.961508 52382 leveldb.cpp:343] Persisting action (435 bytes) to leveldb took 7.260554ms
I0918 22:20:44.961606 52382 replica.cpp:679] Persisted action at 3
I0918 22:20:44.961629 52382 replica.cpp:664] Replica learned APPEND action at position 3
I0918 22:20:44.963131 52368 registrar.cpp:486] Successfully updated the 'registry' in 46.188032ms
I0918 22:20:44.963274 52381 log.cpp:704] Attempting to truncate the log to 3
I0918 22:20:44.963397 52381 coordinator.cpp:341] Coordinator attempting to write TRUNCATE action at position 4
I0918 22:20:44.964776 52364 master.cpp:3888] Registered slave 20150918-222044-1740121354-58052-52360-S0 at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0918 22:20:44.965095 52384 hierarchical.hpp:612] Added slave 20150918-222044-1740121354-58052-52360-S0 (smfd-bkq-03-sr4.devel.twitter.com) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (allocated: )
I0918 22:20:44.965302 52371 replica.cpp:511] Replica received write request for position 4
I0918 22:20:44.965127 52376 slave.cpp:867] Registered with master master@10.37.184.103:58052; given slave ID 20150918-222044-1740121354-58052-52360-S0
I0918 22:20:44.965550 52369 status_update_manager.cpp:183] Resuming sending status updates
I0918 22:20:44.966028 52376 slave.cpp:926] Forwarding total oversubscribed resources 
I0918 22:20:44.966423 52367 master.cpp:4922] Sending 1 offers to framework 20150918-222044-1740121354-58052-52360-0000 (default) at scheduler-4806d03c-5062-4b50-b801-4393d3519b4c@10.37.184.103:58052
I0918 22:20:44.967005 52367 master.cpp:4230] Received update of slave 20150918-222044-1740121354-58052-52360-S0 at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com) with total oversubscribed resources 
I0918 22:20:44.967291 52367 hierarchical.hpp:672] Slave 20150918-222044-1740121354-58052-52360-S0 (smfd-bkq-03-sr4.devel.twitter.com) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
I0918 22:20:44.969511 52365 master.cpp:2882] Processing ACCEPT call for offers: [ 20150918-222044-1740121354-58052-52360-O0 ] on slave 20150918-222044-1740121354-58052-52360-S0 at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com) for framework 20150918-222044-1740121354-58052-52360-0000 (default) at scheduler-4806d03c-5062-4b50-b801-4393d3519b4c@10.37.184.103:58052
I0918 22:20:44.969631 52365 master.cpp:2684] Authorizing framework principal 'test-principal' to launch task 1 as user 'pbrett'
I0918 22:20:44.969915 52371 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 4.561227ms
I0918 22:20:44.969970 52371 replica.cpp:679] Persisted action at 4
I0918 22:20:44.971097 52377 replica.cpp:658] Replica received learned notice for position 4
W0918 22:20:44.971703 52365 validation.cpp:419] Executor default for task 1 uses less CPUs (None) than the minimum required (0.01). Please update your executor, as this will be mandatory in future releases.
W0918 22:20:44.971788 52365 validation.cpp:431] Executor default for task 1 uses less memory (None) than the minimum required (32MB). Please update your executor, as this will be mandatory in future releases.
I0918 22:20:44.972196 52365 master.hpp:176] Adding task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 20150918-222044-1740121354-58052-52360-S0 (smfd-bkq-03-sr4.devel.twitter.com)
I0918 22:20:44.972336 52365 master.cpp:3212] Launching task 1 of framework 20150918-222044-1740121354-58052-52360-0000 (default) at scheduler-4806d03c-5062-4b50-b801-4393d3519b4c@10.37.184.103:58052 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 20150918-222044-1740121354-58052-52360-S0 at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com)
I0918 22:20:44.974261 52384 status_update_manager.cpp:176] Pausing sending status updates
I0918 22:20:44.974258 52362 slave.cpp:692] New master detected at master@10.37.184.103:58052
I0918 22:20:44.974468 52362 slave.cpp:755] Authenticating with master master@10.37.184.103:58052
I0918 22:20:44.974537 52362 slave.cpp:760] Using default CRAM-MD5 authenticatee
I0918 22:20:44.974704 52362 slave.cpp:728] Detecting new master
I0918 22:20:44.974730 52366 authenticatee.cpp:115] Creating new client SASL connection
I0918 22:20:44.975159 52361 master.cpp:5093] Authenticating slave(1)@10.37.184.103:58052
I0918 22:20:44.975584 52384 authenticator.cpp:92] Creating new server SASL connection
I0918 22:20:44.975742 52384 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0918 22:20:44.975844 52384 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0918 22:20:44.975911 52384 authenticator.cpp:197] Received SASL authentication start
I0918 22:20:44.976025 52384 authenticator.cpp:319] Authentication requires more steps
I0918 22:20:44.976131 52384 authenticatee.cpp:252] Received SASL authentication step
I0918 22:20:44.976477 52365 authenticator.cpp:225] Received SASL authentication step
I0918 22:20:44.976542 52365 authenticator.cpp:311] Authentication success
I0918 22:20:44.976666 52383 authenticatee.cpp:292] Authentication success
I0918 22:20:44.976704 52382 master.cpp:5123] Successfully authenticated principal 'test-principal' at slave(1)@10.37.184.103:58052
I0918 22:20:44.977035 52384 slave.cpp:823] Successfully authenticated with master master@10.37.184.103:58052
I0918 22:20:44.977457 52376 master.cpp:3980] Re-registering slave 20150918-222044-1740121354-58052-52360-S0 at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com)
W0918 22:20:44.977857 52376 master.cpp:5190] Task 1 of framework 20150918-222044-1740121354-58052-52360-0000 unknown to the slave 20150918-222044-1740121354-58052-52360-S0 at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com) during re-registration: reconciling with the slave
I0918 22:20:44.978147 52377 leveldb.cpp:343] Persisting action (18 bytes) to leveldb took 6.961993ms
I0918 22:20:44.978262 52377 leveldb.cpp:401] Deleting ~2 keys from leveldb took 26959ns
I0918 22:20:44.978287 52377 replica.cpp:679] Persisted action at 4
I0918 22:20:44.978309 52377 replica.cpp:664] Replica learned TRUNCATE action at position 4
W0918 22:20:44.978338 52376 master.cpp:5272] Executor default of framework 20150918-222044-1740121354-58052-52360-0000 possibly unknown to the slave 20150918-222044-1740121354-58052-52360-S0 at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com)
I0918 22:20:44.978355 52369 slave.cpp:967] Re-registered with master master@10.37.184.103:58052
I0918 22:20:44.978458 52376 master.cpp:6122] Removing executor 'default' with resources  of framework 20150918-222044-1740121354-58052-52360-0000 on slave 20150918-222044-1740121354-58052-52360-S0 at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com)
I0918 22:20:44.978967 52364 status_update_manager.cpp:183] Resuming sending status updates
I0918 22:20:44.979017 52369 slave.cpp:1003] Forwarding total oversubscribed resources 
W0918 22:20:44.979184 52369 slave.cpp:1043] Slave reconciling task 1 of framework 20150918-222044-1740121354-58052-52360-0000 in state TASK_LOST: task unknown to the slave
I0918 22:20:44.979348 52376 master.cpp:4168] Sending updated checkpointed resources  to slave 20150918-222044-1740121354-58052-52360-S0 at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com)
I0918 22:20:44.979504 52376 master.cpp:4230] Received update of slave 20150918-222044-1740121354-58052-52360-S0 at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com) with total oversubscribed resources 
I0918 22:20:44.979703 52376 hierarchical.hpp:672] Slave 20150918-222044-1740121354-58052-52360-S0 (smfd-bkq-03-sr4.devel.twitter.com) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
I0918 22:20:44.981292 52372 status_update_manager.cpp:322] Received status update TASK_LOST (UUID: dafe369e-8871-4e72-af38-244f401a7cc5) for task 1 of framework 20150918-222044-1740121354-58052-52360-0000
I0918 22:20:44.981485 52369 slave.cpp:2235] Updated checkpointed resources from  to 
I0918 22:20:44.981972 52364 slave.cpp:3003] Forwarding the update TASK_LOST (UUID: dafe369e-8871-4e72-af38-244f401a7cc5) for task 1 of framework 20150918-222044-1740121354-58052-52360-0000 to master@10.37.184.103:58052
I0918 22:20:44.982866 52369 master.cpp:4370] Status update TASK_LOST (UUID: dafe369e-8871-4e72-af38-244f401a7cc5) for task 1 of framework 20150918-222044-1740121354-58052-52360-0000 from slave 20150918-222044-1740121354-58052-52360-S0 at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com)
I0918 22:20:44.983003 52369 master.cpp:4409] Forwarding status update TASK_LOST (UUID: dafe369e-8871-4e72-af38-244f401a7cc5) for task 1 of framework 20150918-222044-1740121354-58052-52360-0000
I0918 22:20:44.983652 52369 master.cpp:6025] Updating the latest state of task 1 of framework 20150918-222044-1740121354-58052-52360-0000 to TASK_LOST
I0918 22:20:44.984040 52383 hierarchical.hpp:954] Recovered cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: ) on slave 20150918-222044-1740121354-58052-52360-S0 from framework 20150918-222044-1740121354-58052-52360-0000
I0918 22:20:44.984571 52369 master.cpp:6093] Removing task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] of framework 20150918-222044-1740121354-58052-52360-0000 on slave 20150918-222044-1740121354-58052-52360-S0 at slave(1)@10.37.184.103:58052 (smfd-bkq-03-sr4.devel.twitter.com)
I0918 22:20:44.984779 52369 master.cpp:3564] Processing ACKNOWLEDGE call dafe369e-8871-4e72-af38-244f401a7cc5 for task 1 of framework 20150918-222044-1740121354-58052-52360-0000 (default) at scheduler-4806d03c-5062-4b50-b801-4393d3519b4c@10.37.184.103:58052 on slave 20150918-222044-1740121354-58052-52360-S0
I0918 22:20:44.985316 52369 status_update_manager.cpp:394] Received status update acknowledgement (UUID: dafe369e-8871-4e72-af38-244f401a7cc5) for task 1 of framework 20150918-222044-1740121354-58052-52360-0000
E0918 22:20:44.985707 52380 slave.cpp:2317] Status update acknowledgement (UUID: dafe369e-8871-4e72-af38-244f401a7cc5) for task 1 of unknown framework 20150918-222044-1740121354-58052-52360-0000
I0918 22:20:45.011001 52360 sched.cpp:1754] Asked to stop the driver
I0918 22:20:45.011126 52360 master.cpp:923] Master terminating
I0918 22:20:45.011196 52375 sched.cpp:1040] Stopping framework '20150918-222044-1740121354-58052-52360-0000'
I0918 22:20:45.011323 52367 hierarchical.hpp:643] Removed slave 20150918-222044-1740121354-58052-52360-S0
I0918 22:20:45.011409 52367 hierarchical.hpp:490] Removed framework 20150918-222044-1740121354-58052-52360-0000
I0918 22:20:45.012255 52368 slave.cpp:3171] master@10.37.184.103:58052 exited
W0918 22:20:45.012415 52368 slave.cpp:3174] Master disconnected! Waiting for a new master to be elected
I0918 22:20:45.019243 52382 slave.cpp:572] Slave terminating
[       OK ] MasterSlaveReconciliationTest.ReconcileLostTask (513 ms)
[----------] 1 test from MasterSlaveReconciliationTest (513 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (532 ms total)
[  PASSED  ] 1 test.

{code}

Tested HEAD on Centos6 (original reporting platform) with no errors.  

{code}
[----------] 1 test from MasterSlaveReconciliationTest
[ RUN      ] MasterSlaveReconciliationTest.ReconcileLostTask
Using temporary directory '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_i61HPI'
I0921 16:38:36.016902 51925 leveldb.cpp:176] Opened db in 73.30966ms
I0921 16:38:36.023943 51925 leveldb.cpp:183] Compacted db in 6.963667ms
I0921 16:38:36.024034 51925 leveldb.cpp:198] Created db iterator in 48856ns
I0921 16:38:36.024061 51925 leveldb.cpp:204] Seeked to beginning of db in 3684ns
I0921 16:38:36.024077 51925 leveldb.cpp:273] Iterated through 0 keys in the db in 337ns
I0921 16:38:36.024189 51925 replica.cpp:744] Replica recovered with log positions 0 -> 0 with 1 holes and 0 unlearned
I0921 16:38:36.025542 51935 recover.cpp:449] Starting replica recovery
I0921 16:38:36.026080 51935 recover.cpp:475] Replica is in EMPTY status
I0921 16:38:36.028053 51930 master.cpp:380] Master 20150921-163836-2081170186-40941-51925 (smfd-aki-27-sr1.devel.twitter.com) started on 10.35.12.124:40941
I0921 16:38:36.028286 51934 replica.cpp:641] Replica in EMPTY status received a broadcasted recover request
I0921 16:38:36.028094 51930 master.cpp:382] Flags at startup: --acls="" --allocation_interval="1secs" --allocator="HierarchicalDRF" --authenticate="true" --authenticate_slaves="true" --authenticators="crammd5" --authorizers="local" --credentials="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_i61HPI/credentials" --framework_sorter="drf" --help="false" --initialize_driver_logging="true" --log_auto_initialize="true" --logbufsecs="0" --logging_level="INFO" --max_slave_ping_timeouts="5" --quiet="false" --recovery_slave_removal_limit="100%" --registry="replicated_log" --registry_fetch_timeout="1mins" --registry_store_timeout="25secs" --registry_strict="true" --root_submissions="true" --slave_ping_timeout="15secs" --slave_reregister_timeout="10mins" --user_sorter="drf" --version="false" --webui_dir="/usr/local/share/mesos/webui" --work_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_i61HPI/master" --zk_session_timeout="10secs"
I0921 16:38:36.029104 51930 master.cpp:427] Master only allowing authenticated frameworks to register
I0921 16:38:36.029132 51930 master.cpp:432] Master only allowing authenticated slaves to register
I0921 16:38:36.029155 51930 credentials.hpp:37] Loading credentials for authentication from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_i61HPI/credentials'
I0921 16:38:36.029250 51936 recover.cpp:195] Received a recover response from a replica in EMPTY status
I0921 16:38:36.029738 51930 master.cpp:471] Using default 'crammd5' authenticator
I0921 16:38:36.029908 51930 authenticator.cpp:512] Initializing server SASL
I0921 16:38:36.029947 51940 recover.cpp:566] Updating replica status to STARTING
I0921 16:38:36.030782 51930 master.cpp:508] Authorization enabled
I0921 16:38:36.036074 51926 master.cpp:1607] The newly elected leader is master@10.35.12.124:40941 with id 20150921-163836-2081170186-40941-51925
I0921 16:38:36.036110 51926 master.cpp:1620] Elected as the leading master!
I0921 16:38:36.036145 51926 master.cpp:1380] Recovering from registrar
I0921 16:38:36.036335 51930 registrar.cpp:309] Recovering registrar
I0921 16:38:36.067191 51938 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 36.988836ms
I0921 16:38:36.067246 51938 replica.cpp:323] Persisted replica status to STARTING
I0921 16:38:36.067517 51938 recover.cpp:475] Replica is in STARTING status
I0921 16:38:36.068230 51936 replica.cpp:641] Replica in STARTING status received a broadcasted recover request
I0921 16:38:36.068429 51928 recover.cpp:195] Received a recover response from a replica in STARTING status
I0921 16:38:36.068729 51927 recover.cpp:566] Updating replica status to VOTING
I0921 16:38:36.074915 51940 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 6.095154ms
I0921 16:38:36.074942 51940 replica.cpp:323] Persisted replica status to VOTING
I0921 16:38:36.075021 51936 recover.cpp:580] Successfully joined the Paxos group
I0921 16:38:36.075228 51936 recover.cpp:464] Recover process terminated
I0921 16:38:36.075657 51926 log.cpp:661] Attempting to start the writer
I0921 16:38:36.077828 51927 replica.cpp:477] Replica received implicit promise request with proposal 1
I0921 16:38:36.091645 51927 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 13.779849ms
I0921 16:38:36.091686 51927 replica.cpp:345] Persisted promised to 1
I0921 16:38:36.092543 51934 coordinator.cpp:231] Coordinator attemping to fill missing position
I0921 16:38:36.094199 51939 replica.cpp:378] Replica received explicit promise request for position 0 with proposal 2
I0921 16:38:36.108326 51939 leveldb.cpp:343] Persisting action (8 bytes) to leveldb took 14.047785ms
I0921 16:38:36.108397 51939 replica.cpp:679] Persisted action at 0
I0921 16:38:36.109861 51939 replica.cpp:511] Replica received write request for position 0
I0921 16:38:36.109940 51939 leveldb.cpp:438] Reading position from leveldb took 43334ns
I0921 16:38:36.124960 51939 leveldb.cpp:343] Persisting action (14 bytes) to leveldb took 14.940454ms
I0921 16:38:36.125012 51939 replica.cpp:679] Persisted action at 0
I0921 16:38:36.125648 51931 replica.cpp:658] Replica received learned notice for position 0
I0921 16:38:36.133239 51931 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 7.54664ms
I0921 16:38:36.133275 51931 replica.cpp:679] Persisted action at 0
I0921 16:38:36.133297 51931 replica.cpp:664] Replica learned NOP action at position 0
I0921 16:38:36.133939 51928 log.cpp:677] Writer started with ending position 0
I0921 16:38:36.136015 51937 leveldb.cpp:438] Reading position from leveldb took 23416ns
I0921 16:38:36.138980 51930 registrar.cpp:342] Successfully fetched the registry (0B) in 102.578944ms
I0921 16:38:36.139200 51930 registrar.cpp:441] Applied 1 operations in 66844ns; attempting to update the 'registry'
I0921 16:38:36.141839 51929 log.cpp:685] Attempting to append 220 bytes to the log
I0921 16:38:36.141976 51935 coordinator.cpp:341] Coordinator attempting to write APPEND action at position 1
I0921 16:38:36.142660 51931 replica.cpp:511] Replica received write request for position 1
I0921 16:38:36.149888 51931 leveldb.cpp:343] Persisting action (239 bytes) to leveldb took 7.193497ms
I0921 16:38:36.149919 51931 replica.cpp:679] Persisted action at 1
I0921 16:38:36.150519 51928 replica.cpp:658] Replica received learned notice for position 1
I0921 16:38:36.158231 51928 leveldb.cpp:343] Persisting action (241 bytes) to leveldb took 7.652904ms
I0921 16:38:36.158263 51928 replica.cpp:679] Persisted action at 1
I0921 16:38:36.158284 51928 replica.cpp:664] Replica learned APPEND action at position 1
I0921 16:38:36.159554 51932 registrar.cpp:486] Successfully updated the 'registry' in 20.20864ms
I0921 16:38:36.159734 51932 registrar.cpp:372] Successfully recovered registrar
I0921 16:38:36.159831 51935 log.cpp:704] Attempting to truncate the log to 1
I0921 16:38:36.159970 51930 coordinator.cpp:341] Coordinator attempting to write TRUNCATE action at position 2
I0921 16:38:36.160154 51935 master.cpp:1417] Recovered 0 slaves from the Registry (181B) ; allowing 10mins for slaves to re-register
I0921 16:38:36.160848 51940 replica.cpp:511] Replica received write request for position 2
I0921 16:38:36.174944 51940 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 14.053198ms
I0921 16:38:36.174983 51940 replica.cpp:679] Persisted action at 2
I0921 16:38:36.175683 51934 replica.cpp:658] Replica received learned notice for position 2
I0921 16:38:36.183202 51934 leveldb.cpp:343] Persisting action (18 bytes) to leveldb took 7.474068ms
I0921 16:38:36.183270 51934 leveldb.cpp:401] Deleting ~1 keys from leveldb took 34790ns
I0921 16:38:36.183295 51934 replica.cpp:679] Persisted action at 2
I0921 16:38:36.183320 51934 replica.cpp:664] Replica learned TRUNCATE action at position 2
I0921 16:38:36.195276 51925 containerizer.cpp:143] Using isolation: posix/cpu,posix/mem,filesystem/posix
W0921 16:38:36.195854 51925 backend.cpp:50] Failed to create 'bind' backend: BindBackend requires root privileges
I0921 16:38:36.198113 51928 slave.cpp:190] Slave started on 1)@10.35.12.124:40941
I0921 16:38:36.198137 51928 slave.cpp:191] Flags at startup: --appc_store_dir="/tmp/mesos/store/appc" --authenticatee="crammd5" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_kill_orphans="true" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="false" --image_provisioner_backend="copy" --initialize_driver_logging="true" --isolation="posix/cpu,posix/mem" --launcher_dir="/home/pbrett/sandbox/ReconcileLostTask/build/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resource_monitoring_interval="1secs" --resources="cpus:2;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --version="false" --work_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d"
I0921 16:38:36.198485 51928 credentials.hpp:85] Loading credential for authentication from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d/credential'
I0921 16:38:36.198698 51928 slave.cpp:321] Slave using credential for: test-principal
I0921 16:38:36.199193 51928 slave.cpp:354] Slave resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0921 16:38:36.199586 51928 slave.cpp:384] Slave hostname: smfd-aki-27-sr1.devel.twitter.com
I0921 16:38:36.199605 51928 slave.cpp:389] Slave checkpoint: true
I0921 16:38:36.200530 51925 sched.cpp:164] Version: 0.25.0
I0921 16:38:36.201567 51930 state.cpp:54] Recovering state from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d/meta'
I0921 16:38:36.201756 51928 sched.cpp:262] New master detected at master@10.35.12.124:40941
I0921 16:38:36.201882 51928 sched.cpp:318] Authenticating with master master@10.35.12.124:40941
I0921 16:38:36.201908 51928 sched.cpp:325] Using default CRAM-MD5 authenticatee
I0921 16:38:36.201999 51931 status_update_manager.cpp:202] Recovering status update manager
I0921 16:38:36.202199 51929 containerizer.cpp:371] Recovering containerizer
I0921 16:38:36.202282 51937 authenticatee.cpp:91] Initializing client SASL
I0921 16:38:36.202446 51937 authenticatee.cpp:115] Creating new client SASL connection
I0921 16:38:36.202755 51941 master.cpp:5093] Authenticating scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.203155 51930 authenticator.cpp:92] Creating new server SASL connection
I0921 16:38:36.203384 51927 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0921 16:38:36.203423 51927 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0921 16:38:36.203476 51934 slave.cpp:4097] Finished recovery
I0921 16:38:36.203538 51940 authenticator.cpp:197] Received SASL authentication start
I0921 16:38:36.203615 51940 authenticator.cpp:319] Authentication requires more steps
I0921 16:38:36.203709 51940 authenticatee.cpp:252] Received SASL authentication step
I0921 16:38:36.203856 51936 authenticator.cpp:225] Received SASL authentication step
I0921 16:38:36.204020 51936 authenticator.cpp:311] Authentication success
I0921 16:38:36.204104 51935 authenticatee.cpp:292] Authentication success
I0921 16:38:36.204229 51930 master.cpp:5123] Successfully authenticated principal 'test-principal' at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.204304 51926 status_update_manager.cpp:176] Pausing sending status updates
I0921 16:38:36.204331 51934 slave.cpp:692] New master detected at master@10.35.12.124:40941
I0921 16:38:36.204391 51934 slave.cpp:755] Authenticating with master master@10.35.12.124:40941
I0921 16:38:36.204401 51931 sched.cpp:407] Successfully authenticated with master master@10.35.12.124:40941
I0921 16:38:36.204440 51934 slave.cpp:760] Using default CRAM-MD5 authenticatee
I0921 16:38:36.204586 51939 authenticatee.cpp:115] Creating new client SASL connection
I0921 16:38:36.204587 51934 slave.cpp:728] Detecting new master
I0921 16:38:36.204762 51933 master.cpp:2176] Received SUBSCRIBE call for framework 'default' at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.204862 51933 master.cpp:1646] Authorizing framework principal 'test-principal' to receive offers for role '*'
I0921 16:38:36.205073 51933 master.cpp:5093] Authenticating slave(1)@10.35.12.124:40941
I0921 16:38:36.205240 51934 master.cpp:2246] Subscribing framework default with checkpointing disabled and capabilities [  ]
I0921 16:38:36.205256 51932 authenticator.cpp:92] Creating new server SASL connection
I0921 16:38:36.205390 51939 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0921 16:38:36.205416 51939 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0921 16:38:36.205481 51939 authenticator.cpp:197] Received SASL authentication start
I0921 16:38:36.205530 51939 authenticator.cpp:319] Authentication requires more steps
I0921 16:38:36.205584 51939 authenticatee.cpp:252] Received SASL authentication step
I0921 16:38:36.205663 51940 authenticator.cpp:225] Received SASL authentication step
I0921 16:38:36.205727 51935 hierarchical.hpp:453] Added framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.205732 51940 authenticator.cpp:311] Authentication success
I0921 16:38:36.205821 51935 authenticatee.cpp:292] Authentication success
I0921 16:38:36.205967 51934 master.cpp:5123] Successfully authenticated principal 'test-principal' at slave(1)@10.35.12.124:40941
I0921 16:38:36.206037 51928 sched.cpp:641] Framework registered with 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.206204 51926 slave.cpp:823] Successfully authenticated with master master@10.35.12.124:40941
I0921 16:38:36.206598 51932 master.cpp:3820] Registering slave at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) with id 20150921-163836-2081170186-40941-51925-S0
I0921 16:38:36.207165 51927 registrar.cpp:441] Applied 1 operations in 50275ns; attempting to update the 'registry'
I0921 16:38:36.209272 51932 log.cpp:685] Attempting to append 412 bytes to the log
I0921 16:38:36.209419 51935 coordinator.cpp:341] Coordinator attempting to write APPEND action at position 3
I0921 16:38:36.210120 51930 replica.cpp:511] Replica received write request for position 3
I0921 16:38:36.223966 51927 master.cpp:3808] Ignoring register slave message from slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) as admission is already in progress
I0921 16:38:36.224921 51930 leveldb.cpp:343] Persisting action (431 bytes) to leveldb took 14.753445ms
I0921 16:38:36.224973 51930 replica.cpp:679] Persisted action at 3
I0921 16:38:36.225810 51930 replica.cpp:658] Replica received learned notice for position 3
I0921 16:38:36.233645 51934 master.cpp:3808] Ignoring register slave message from slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) as admission is already in progress
I0921 16:38:36.241570 51930 leveldb.cpp:343] Persisting action (433 bytes) to leveldb took 15.721842ms
I0921 16:38:36.241621 51930 replica.cpp:679] Persisted action at 3
I0921 16:38:36.241652 51930 replica.cpp:664] Replica learned APPEND action at position 3
I0921 16:38:36.242514 51939 registrar.cpp:486] Successfully updated the 'registry' in 35.27296ms
I0921 16:38:36.242655 51931 log.cpp:704] Attempting to truncate the log to 3
I0921 16:38:36.242764 51927 coordinator.cpp:341] Coordinator attempting to write TRUNCATE action at position 4
I0921 16:38:36.243228 51932 replica.cpp:511] Replica received write request for position 4
I0921 16:38:36.243573 51935 master.cpp:3888] Registered slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0921 16:38:36.243643 51939 slave.cpp:867] Registered with master master@10.35.12.124:40941; given slave ID 20150921-163836-2081170186-40941-51925-S0
I0921 16:38:36.243677 51928 hierarchical.hpp:612] Added slave 20150921-163836-2081170186-40941-51925-S0 (smfd-aki-27-sr1.devel.twitter.com) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (allocated: )
I0921 16:38:36.243784 51936 status_update_manager.cpp:183] Resuming sending status updates
I0921 16:38:36.244145 51939 slave.cpp:926] Forwarding total oversubscribed resources 
I0921 16:38:36.244601 51934 master.cpp:4922] Sending 1 offers to framework 20150921-163836-2081170186-40941-51925-0000 (default) at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.244801 51934 master.cpp:4230] Received update of slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) with total oversubscribed resources 
I0921 16:38:36.245054 51934 hierarchical.hpp:672] Slave 20150921-163836-2081170186-40941-51925-S0 (smfd-aki-27-sr1.devel.twitter.com) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
I0921 16:38:36.246901 51930 master.cpp:2882] Processing ACCEPT call for offers: [ 20150921-163836-2081170186-40941-51925-O0 ] on slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) for framework 20150921-163836-2081170186-40941-51925-0000 (default) at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.246953 51930 master.cpp:2684] Authorizing framework principal 'test-principal' to launch task 1 as user 'pbrett'
W0921 16:38:36.248419 51930 validation.cpp:419] Executor default for task 1 uses less CPUs (None) than the minimum required (0.01). Please update your executor, as this will be mandatory in future releases.
W0921 16:38:36.248462 51930 validation.cpp:431] Executor default for task 1 uses less memory (None) than the minimum required (32MB). Please update your executor, as this will be mandatory in future releases.
I0921 16:38:36.248839 51930 master.hpp:176] Adding task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 20150921-163836-2081170186-40941-51925-S0 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.248945 51930 master.cpp:3212] Launching task 1 of framework 20150921-163836-2081170186-40941-51925-0000 (default) at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.250377 51939 status_update_manager.cpp:176] Pausing sending status updates
I0921 16:38:36.250411 51938 slave.cpp:692] New master detected at master@10.35.12.124:40941
I0921 16:38:36.250484 51938 slave.cpp:755] Authenticating with master master@10.35.12.124:40941
I0921 16:38:36.250572 51938 slave.cpp:760] Using default CRAM-MD5 authenticatee
I0921 16:38:36.250666 51938 slave.cpp:728] Detecting new master
I0921 16:38:36.250751 51935 authenticatee.cpp:115] Creating new client SASL connection
I0921 16:38:36.250994 51936 master.cpp:5093] Authenticating slave(1)@10.35.12.124:40941
I0921 16:38:36.251257 51933 authenticator.cpp:92] Creating new server SASL connection
I0921 16:38:36.251384 51933 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0921 16:38:36.251402 51933 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0921 16:38:36.251456 51933 authenticator.cpp:197] Received SASL authentication start
I0921 16:38:36.251539 51933 authenticator.cpp:319] Authentication requires more steps
I0921 16:38:36.251909 51941 authenticatee.cpp:252] Received SASL authentication step
I0921 16:38:36.252017 51930 authenticator.cpp:225] Received SASL authentication step
I0921 16:38:36.252068 51930 authenticator.cpp:311] Authentication success
I0921 16:38:36.252164 51936 authenticatee.cpp:292] Authentication success
I0921 16:38:36.252238 51930 master.cpp:5123] Successfully authenticated principal 'test-principal' at slave(1)@10.35.12.124:40941
I0921 16:38:36.252478 51928 slave.cpp:823] Successfully authenticated with master master@10.35.12.124:40941
I0921 16:38:36.252840 51928 master.cpp:3980] Re-registering slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
W0921 16:38:36.253078 51928 master.cpp:5190] Task 1 of framework 20150921-163836-2081170186-40941-51925-0000 unknown to the slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) during re-registration: reconciling with the slave
W0921 16:38:36.253456 51928 master.cpp:5272] Executor default of framework 20150921-163836-2081170186-40941-51925-0000 possibly unknown to the slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.253540 51928 master.cpp:6122] Removing executor 'default' with resources  of framework 20150921-163836-2081170186-40941-51925-0000 on slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.253597 51926 slave.cpp:967] Re-registered with master master@10.35.12.124:40941
I0921 16:38:36.253846 51930 status_update_manager.cpp:183] Resuming sending status updates
I0921 16:38:36.253854 51926 slave.cpp:1003] Forwarding total oversubscribed resources 
W0921 16:38:36.253988 51926 slave.cpp:1043] Slave reconciling task 1 of framework 20150921-163836-2081170186-40941-51925-0000 in state TASK_LOST: task unknown to the slave
I0921 16:38:36.254001 51928 master.cpp:4168] Sending updated checkpointed resources  to slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.254112 51928 master.cpp:4230] Received update of slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) with total oversubscribed resources 
I0921 16:38:36.254277 51928 hierarchical.hpp:672] Slave 20150921-163836-2081170186-40941-51925-S0 (smfd-aki-27-sr1.devel.twitter.com) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
I0921 16:38:36.255731 51930 status_update_manager.cpp:322] Received status update TASK_LOST (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.255939 51926 slave.cpp:2235] Updated checkpointed resources from  to 
I0921 16:38:36.256299 51941 slave.cpp:3003] Forwarding the update TASK_LOST (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000 to master@10.35.12.124:40941
I0921 16:38:36.256809 51937 master.cpp:4370] Status update TASK_LOST (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000 from slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.256863 51937 master.cpp:4409] Forwarding status update TASK_LOST (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.256978 51937 master.cpp:6025] Updating the latest state of task 1 of framework 20150921-163836-2081170186-40941-51925-0000 to TASK_LOST
I0921 16:38:36.257249 51930 hierarchical.hpp:954] Recovered cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: ) on slave 20150921-163836-2081170186-40941-51925-S0 from framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.257642 51937 master.cpp:6093] Removing task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] of framework 20150921-163836-2081170186-40941-51925-0000 on slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.257802 51937 master.cpp:3564] Processing ACKNOWLEDGE call a26af6b1-436e-49ef-93c2-fcd5aa7b43f1 for task 1 of framework 20150921-163836-2081170186-40941-51925-0000 (default) at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941 on slave 20150921-163836-2081170186-40941-51925-S0
I0921 16:38:36.258133 51930 status_update_manager.cpp:394] Received status update acknowledgement (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.258214 51932 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 14.936782ms
I0921 16:38:36.258255 51932 replica.cpp:679] Persisted action at 4
E0921 16:38:36.258563 51940 slave.cpp:2317] Status update acknowledgement (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of unknown framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.258725 51926 replica.cpp:658] Replica received learned notice for position 4
I0921 16:38:36.266546 51926 leveldb.cpp:343] Persisting action (18 bytes) to leveldb took 7.772502ms
I0921 16:38:36.266620 51926 leveldb.cpp:401] Deleting ~2 keys from leveldb took 33037ns
I0921 16:38:36.266646 51926 replica.cpp:679] Persisted action at 4
I0921 16:38:36.266669 51926 replica.cpp:664] Replica learned TRUNCATE action at position 4
I0921 16:38:36.280352 51925 sched.cpp:1754] Asked to stop the driver
I0921 16:38:36.280436 51925 master.cpp:923] Master terminating
I0921 16:38:36.280484 51928 sched.cpp:1040] Stopping framework '20150921-163836-2081170186-40941-51925-0000'
I0921 16:38:36.280661 51937 hierarchical.hpp:643] Removed slave 20150921-163836-2081170186-40941-51925-S0
I0921 16:38:36.280894 51927 hierarchical.hpp:490] Removed framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.281198 51927 slave.cpp:3171] master@10.35.12.124:40941 exited
W0921 16:38:36.281231 51927 slave.cpp:3174] Master disconnected! Waiting for a new master to be elected
I0921 16:38:36.285024 51926 slave.cpp:572] Slave terminating
[       OK ] MasterSlaveReconciliationTest.ReconcileLostTask (350 ms)
[----------] 1 test from MasterSlaveReconciliationTest (350 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (366 ms total)
[  PASSED  ] 1 test.
{code}

Tested HEAD on Centos6 (original reporting platform) with no errors.  

{code}
[----------] 1 test from MasterSlaveReconciliationTest
[ RUN      ] MasterSlaveReconciliationTest.ReconcileLostTask
Using temporary directory '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_i61HPI'
I0921 16:38:36.016902 51925 leveldb.cpp:176] Opened db in 73.30966ms
I0921 16:38:36.023943 51925 leveldb.cpp:183] Compacted db in 6.963667ms
I0921 16:38:36.024034 51925 leveldb.cpp:198] Created db iterator in 48856ns
I0921 16:38:36.024061 51925 leveldb.cpp:204] Seeked to beginning of db in 3684ns
I0921 16:38:36.024077 51925 leveldb.cpp:273] Iterated through 0 keys in the db in 337ns
I0921 16:38:36.024189 51925 replica.cpp:744] Replica recovered with log positions 0 -> 0 with 1 holes and 0 unlearned
I0921 16:38:36.025542 51935 recover.cpp:449] Starting replica recovery
I0921 16:38:36.026080 51935 recover.cpp:475] Replica is in EMPTY status
I0921 16:38:36.028053 51930 master.cpp:380] Master 20150921-163836-2081170186-40941-51925 (smfd-aki-27-sr1.devel.twitter.com) started on 10.35.12.124:40941
I0921 16:38:36.028286 51934 replica.cpp:641] Replica in EMPTY status received a broadcasted recover request
I0921 16:38:36.028094 51930 master.cpp:382] Flags at startup: --acls="" --allocation_interval="1secs" --allocator="HierarchicalDRF" --authenticate="true" --authenticate_slaves="true" --authenticators="crammd5" --authorizers="local" --credentials="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_i61HPI/credentials" --framework_sorter="drf" --help="false" --initialize_driver_logging="true" --log_auto_initialize="true" --logbufsecs="0" --logging_level="INFO" --max_slave_ping_timeouts="5" --quiet="false" --recovery_slave_removal_limit="100%" --registry="replicated_log" --registry_fetch_timeout="1mins" --registry_store_timeout="25secs" --registry_strict="true" --root_submissions="true" --slave_ping_timeout="15secs" --slave_reregister_timeout="10mins" --user_sorter="drf" --version="false" --webui_dir="/usr/local/share/mesos/webui" --work_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_i61HPI/master" --zk_session_timeout="10secs"
I0921 16:38:36.029104 51930 master.cpp:427] Master only allowing authenticated frameworks to register
I0921 16:38:36.029132 51930 master.cpp:432] Master only allowing authenticated slaves to register
I0921 16:38:36.029155 51930 credentials.hpp:37] Loading credentials for authentication from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_i61HPI/credentials'
I0921 16:38:36.029250 51936 recover.cpp:195] Received a recover response from a replica in EMPTY status
I0921 16:38:36.029738 51930 master.cpp:471] Using default 'crammd5' authenticator
I0921 16:38:36.029908 51930 authenticator.cpp:512] Initializing server SASL
I0921 16:38:36.029947 51940 recover.cpp:566] Updating replica status to STARTING
I0921 16:38:36.030782 51930 master.cpp:508] Authorization enabled
I0921 16:38:36.036074 51926 master.cpp:1607] The newly elected leader is master@10.35.12.124:40941 with id 20150921-163836-2081170186-40941-51925
I0921 16:38:36.036110 51926 master.cpp:1620] Elected as the leading master!
I0921 16:38:36.036145 51926 master.cpp:1380] Recovering from registrar
I0921 16:38:36.036335 51930 registrar.cpp:309] Recovering registrar
I0921 16:38:36.067191 51938 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 36.988836ms
I0921 16:38:36.067246 51938 replica.cpp:323] Persisted replica status to STARTING
I0921 16:38:36.067517 51938 recover.cpp:475] Replica is in STARTING status
I0921 16:38:36.068230 51936 replica.cpp:641] Replica in STARTING status received a broadcasted recover request
I0921 16:38:36.068429 51928 recover.cpp:195] Received a recover response from a replica in STARTING status
I0921 16:38:36.068729 51927 recover.cpp:566] Updating replica status to VOTING
I0921 16:38:36.074915 51940 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 6.095154ms
I0921 16:38:36.074942 51940 replica.cpp:323] Persisted replica status to VOTING
I0921 16:38:36.075021 51936 recover.cpp:580] Successfully joined the Paxos group
I0921 16:38:36.075228 51936 recover.cpp:464] Recover process terminated
I0921 16:38:36.075657 51926 log.cpp:661] Attempting to start the writer
I0921 16:38:36.077828 51927 replica.cpp:477] Replica received implicit promise request with proposal 1
I0921 16:38:36.091645 51927 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 13.779849ms
I0921 16:38:36.091686 51927 replica.cpp:345] Persisted promised to 1
I0921 16:38:36.092543 51934 coordinator.cpp:231] Coordinator attemping to fill missing position
I0921 16:38:36.094199 51939 replica.cpp:378] Replica received explicit promise request for position 0 with proposal 2
I0921 16:38:36.108326 51939 leveldb.cpp:343] Persisting action (8 bytes) to leveldb took 14.047785ms
I0921 16:38:36.108397 51939 replica.cpp:679] Persisted action at 0
I0921 16:38:36.109861 51939 replica.cpp:511] Replica received write request for position 0
I0921 16:38:36.109940 51939 leveldb.cpp:438] Reading position from leveldb took 43334ns
I0921 16:38:36.124960 51939 leveldb.cpp:343] Persisting action (14 bytes) to leveldb took 14.940454ms
I0921 16:38:36.125012 51939 replica.cpp:679] Persisted action at 0
I0921 16:38:36.125648 51931 replica.cpp:658] Replica received learned notice for position 0
I0921 16:38:36.133239 51931 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 7.54664ms
I0921 16:38:36.133275 51931 replica.cpp:679] Persisted action at 0
I0921 16:38:36.133297 51931 replica.cpp:664] Replica learned NOP action at position 0
I0921 16:38:36.133939 51928 log.cpp:677] Writer started with ending position 0
I0921 16:38:36.136015 51937 leveldb.cpp:438] Reading position from leveldb took 23416ns
I0921 16:38:36.138980 51930 registrar.cpp:342] Successfully fetched the registry (0B) in 102.578944ms
I0921 16:38:36.139200 51930 registrar.cpp:441] Applied 1 operations in 66844ns; attempting to update the 'registry'
I0921 16:38:36.141839 51929 log.cpp:685] Attempting to append 220 bytes to the log
I0921 16:38:36.141976 51935 coordinator.cpp:341] Coordinator attempting to write APPEND action at position 1
I0921 16:38:36.142660 51931 replica.cpp:511] Replica received write request for position 1
I0921 16:38:36.149888 51931 leveldb.cpp:343] Persisting action (239 bytes) to leveldb took 7.193497ms
I0921 16:38:36.149919 51931 replica.cpp:679] Persisted action at 1
I0921 16:38:36.150519 51928 replica.cpp:658] Replica received learned notice for position 1
I0921 16:38:36.158231 51928 leveldb.cpp:343] Persisting action (241 bytes) to leveldb took 7.652904ms
I0921 16:38:36.158263 51928 replica.cpp:679] Persisted action at 1
I0921 16:38:36.158284 51928 replica.cpp:664] Replica learned APPEND action at position 1
I0921 16:38:36.159554 51932 registrar.cpp:486] Successfully updated the 'registry' in 20.20864ms
I0921 16:38:36.159734 51932 registrar.cpp:372] Successfully recovered registrar
I0921 16:38:36.159831 51935 log.cpp:704] Attempting to truncate the log to 1
I0921 16:38:36.159970 51930 coordinator.cpp:341] Coordinator attempting to write TRUNCATE action at position 2
I0921 16:38:36.160154 51935 master.cpp:1417] Recovered 0 slaves from the Registry (181B) ; allowing 10mins for slaves to re-register
I0921 16:38:36.160848 51940 replica.cpp:511] Replica received write request for position 2
I0921 16:38:36.174944 51940 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 14.053198ms
I0921 16:38:36.174983 51940 replica.cpp:679] Persisted action at 2
I0921 16:38:36.175683 51934 replica.cpp:658] Replica received learned notice for position 2
I0921 16:38:36.183202 51934 leveldb.cpp:343] Persisting action (18 bytes) to leveldb took 7.474068ms
I0921 16:38:36.183270 51934 leveldb.cpp:401] Deleting ~1 keys from leveldb took 34790ns
I0921 16:38:36.183295 51934 replica.cpp:679] Persisted action at 2
I0921 16:38:36.183320 51934 replica.cpp:664] Replica learned TRUNCATE action at position 2
I0921 16:38:36.195276 51925 containerizer.cpp:143] Using isolation: posix/cpu,posix/mem,filesystem/posix
W0921 16:38:36.195854 51925 backend.cpp:50] Failed to create 'bind' backend: BindBackend requires root privileges
I0921 16:38:36.198113 51928 slave.cpp:190] Slave started on 1)@10.35.12.124:40941
I0921 16:38:36.198137 51928 slave.cpp:191] Flags at startup: --appc_store_dir="/tmp/mesos/store/appc" --authenticatee="crammd5" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_kill_orphans="true" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="false" --image_provisioner_backend="copy" --initialize_driver_logging="true" --isolation="posix/cpu,posix/mem" --launcher_dir="/home/pbrett/sandbox/ReconcileLostTask/build/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resource_monitoring_interval="1secs" --resources="cpus:2;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --version="false" --work_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d"
I0921 16:38:36.198485 51928 credentials.hpp:85] Loading credential for authentication from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d/credential'
I0921 16:38:36.198698 51928 slave.cpp:321] Slave using credential for: test-principal
I0921 16:38:36.199193 51928 slave.cpp:354] Slave resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0921 16:38:36.199586 51928 slave.cpp:384] Slave hostname: smfd-aki-27-sr1.devel.twitter.com
I0921 16:38:36.199605 51928 slave.cpp:389] Slave checkpoint: true
I0921 16:38:36.200530 51925 sched.cpp:164] Version: 0.25.0
I0921 16:38:36.201567 51930 state.cpp:54] Recovering state from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d/meta'
I0921 16:38:36.201756 51928 sched.cpp:262] New master detected at master@10.35.12.124:40941
I0921 16:38:36.201882 51928 sched.cpp:318] Authenticating with master master@10.35.12.124:40941
I0921 16:38:36.201908 51928 sched.cpp:325] Using default CRAM-MD5 authenticatee
I0921 16:38:36.201999 51931 status_update_manager.cpp:202] Recovering status update manager
I0921 16:38:36.202199 51929 containerizer.cpp:371] Recovering containerizer
I0921 16:38:36.202282 51937 authenticatee.cpp:91] Initializing client SASL
I0921 16:38:36.202446 51937 authenticatee.cpp:115] Creating new client SASL connection
I0921 16:38:36.202755 51941 master.cpp:5093] Authenticating scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.203155 51930 authenticator.cpp:92] Creating new server SASL connection
I0921 16:38:36.203384 51927 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0921 16:38:36.203423 51927 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0921 16:38:36.203476 51934 slave.cpp:4097] Finished recovery
I0921 16:38:36.203538 51940 authenticator.cpp:197] Received SASL authentication start
I0921 16:38:36.203615 51940 authenticator.cpp:319] Authentication requires more steps
I0921 16:38:36.203709 51940 authenticatee.cpp:252] Received SASL authentication step
I0921 16:38:36.203856 51936 authenticator.cpp:225] Received SASL authentication step
I0921 16:38:36.204020 51936 authenticator.cpp:311] Authentication success
I0921 16:38:36.204104 51935 authenticatee.cpp:292] Authentication success
I0921 16:38:36.204229 51930 master.cpp:5123] Successfully authenticated principal 'test-principal' at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.204304 51926 status_update_manager.cpp:176] Pausing sending status updates
I0921 16:38:36.204331 51934 slave.cpp:692] New master detected at master@10.35.12.124:40941
I0921 16:38:36.204391 51934 slave.cpp:755] Authenticating with master master@10.35.12.124:40941
I0921 16:38:36.204401 51931 sched.cpp:407] Successfully authenticated with master master@10.35.12.124:40941
I0921 16:38:36.204440 51934 slave.cpp:760] Using default CRAM-MD5 authenticatee
I0921 16:38:36.204586 51939 authenticatee.cpp:115] Creating new client SASL connection
I0921 16:38:36.204587 51934 slave.cpp:728] Detecting new master
I0921 16:38:36.204762 51933 master.cpp:2176] Received SUBSCRIBE call for framework 'default' at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.204862 51933 master.cpp:1646] Authorizing framework principal 'test-principal' to receive offers for role '*'
I0921 16:38:36.205073 51933 master.cpp:5093] Authenticating slave(1)@10.35.12.124:40941
I0921 16:38:36.205240 51934 master.cpp:2246] Subscribing framework default with checkpointing disabled and capabilities [  ]
I0921 16:38:36.205256 51932 authenticator.cpp:92] Creating new server SASL connection
I0921 16:38:36.205390 51939 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0921 16:38:36.205416 51939 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0921 16:38:36.205481 51939 authenticator.cpp:197] Received SASL authentication start
I0921 16:38:36.205530 51939 authenticator.cpp:319] Authentication requires more steps
I0921 16:38:36.205584 51939 authenticatee.cpp:252] Received SASL authentication step
I0921 16:38:36.205663 51940 authenticator.cpp:225] Received SASL authentication step
I0921 16:38:36.205727 51935 hierarchical.hpp:453] Added framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.205732 51940 authenticator.cpp:311] Authentication success
I0921 16:38:36.205821 51935 authenticatee.cpp:292] Authentication success
I0921 16:38:36.205967 51934 master.cpp:5123] Successfully authenticated principal 'test-principal' at slave(1)@10.35.12.124:40941
I0921 16:38:36.206037 51928 sched.cpp:641] Framework registered with 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.206204 51926 slave.cpp:823] Successfully authenticated with master master@10.35.12.124:40941
I0921 16:38:36.206598 51932 master.cpp:3820] Registering slave at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) with id 20150921-163836-2081170186-40941-51925-S0
I0921 16:38:36.207165 51927 registrar.cpp:441] Applied 1 operations in 50275ns; attempting to update the 'registry'
I0921 16:38:36.209272 51932 log.cpp:685] Attempting to append 412 bytes to the log
I0921 16:38:36.209419 51935 coordinator.cpp:341] Coordinator attempting to write APPEND action at position 3
I0921 16:38:36.210120 51930 replica.cpp:511] Replica received write request for position 3
I0921 16:38:36.223966 51927 master.cpp:3808] Ignoring register slave message from slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) as admission is already in progress
I0921 16:38:36.224921 51930 leveldb.cpp:343] Persisting action (431 bytes) to leveldb took 14.753445ms
I0921 16:38:36.224973 51930 replica.cpp:679] Persisted action at 3
I0921 16:38:36.225810 51930 replica.cpp:658] Replica received learned notice for position 3
I0921 16:38:36.233645 51934 master.cpp:3808] Ignoring register slave message from slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) as admission is already in progress
I0921 16:38:36.241570 51930 leveldb.cpp:343] Persisting action (433 bytes) to leveldb took 15.721842ms
I0921 16:38:36.241621 51930 replica.cpp:679] Persisted action at 3
I0921 16:38:36.241652 51930 replica.cpp:664] Replica learned APPEND action at position 3
I0921 16:38:36.242514 51939 registrar.cpp:486] Successfully updated the 'registry' in 35.27296ms
I0921 16:38:36.242655 51931 log.cpp:704] Attempting to truncate the log to 3
I0921 16:38:36.242764 51927 coordinator.cpp:341] Coordinator attempting to write TRUNCATE action at position 4
I0921 16:38:36.243228 51932 replica.cpp:511] Replica received write request for position 4
I0921 16:38:36.243573 51935 master.cpp:3888] Registered slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0921 16:38:36.243643 51939 slave.cpp:867] Registered with master master@10.35.12.124:40941; given slave ID 20150921-163836-2081170186-40941-51925-S0
I0921 16:38:36.243677 51928 hierarchical.hpp:612] Added slave 20150921-163836-2081170186-40941-51925-S0 (smfd-aki-27-sr1.devel.twitter.com) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (allocated: )
I0921 16:38:36.243784 51936 status_update_manager.cpp:183] Resuming sending status updates
I0921 16:38:36.244145 51939 slave.cpp:926] Forwarding total oversubscribed resources 
I0921 16:38:36.244601 51934 master.cpp:4922] Sending 1 offers to framework 20150921-163836-2081170186-40941-51925-0000 (default) at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.244801 51934 master.cpp:4230] Received update of slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) with total oversubscribed resources 
I0921 16:38:36.245054 51934 hierarchical.hpp:672] Slave 20150921-163836-2081170186-40941-51925-S0 (smfd-aki-27-sr1.devel.twitter.com) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
I0921 16:38:36.246901 51930 master.cpp:2882] Processing ACCEPT call for offers: [ 20150921-163836-2081170186-40941-51925-O0 ] on slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) for framework 20150921-163836-2081170186-40941-51925-0000 (default) at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.246953 51930 master.cpp:2684] Authorizing framework principal 'test-principal' to launch task 1 as user 'pbrett'
W0921 16:38:36.248419 51930 validation.cpp:419] Executor default for task 1 uses less CPUs (None) than the minimum required (0.01). Please update your executor, as this will be mandatory in future releases.
W0921 16:38:36.248462 51930 validation.cpp:431] Executor default for task 1 uses less memory (None) than the minimum required (32MB). Please update your executor, as this will be mandatory in future releases.
I0921 16:38:36.248839 51930 master.hpp:176] Adding task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 20150921-163836-2081170186-40941-51925-S0 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.248945 51930 master.cpp:3212] Launching task 1 of framework 20150921-163836-2081170186-40941-51925-0000 (default) at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.250377 51939 status_update_manager.cpp:176] Pausing sending status updates
I0921 16:38:36.250411 51938 slave.cpp:692] New master detected at master@10.35.12.124:40941
I0921 16:38:36.250484 51938 slave.cpp:755] Authenticating with master master@10.35.12.124:40941
I0921 16:38:36.250572 51938 slave.cpp:760] Using default CRAM-MD5 authenticatee
I0921 16:38:36.250666 51938 slave.cpp:728] Detecting new master
I0921 16:38:36.250751 51935 authenticatee.cpp:115] Creating new client SASL connection
I0921 16:38:36.250994 51936 master.cpp:5093] Authenticating slave(1)@10.35.12.124:40941
I0921 16:38:36.251257 51933 authenticator.cpp:92] Creating new server SASL connection
I0921 16:38:36.251384 51933 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0921 16:38:36.251402 51933 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0921 16:38:36.251456 51933 authenticator.cpp:197] Received SASL authentication start
I0921 16:38:36.251539 51933 authenticator.cpp:319] Authentication requires more steps
I0921 16:38:36.251909 51941 authenticatee.cpp:252] Received SASL authentication step
I0921 16:38:36.252017 51930 authenticator.cpp:225] Received SASL authentication step
I0921 16:38:36.252068 51930 authenticator.cpp:311] Authentication success
I0921 16:38:36.252164 51936 authenticatee.cpp:292] Authentication success
I0921 16:38:36.252238 51930 master.cpp:5123] Successfully authenticated principal 'test-principal' at slave(1)@10.35.12.124:40941
I0921 16:38:36.252478 51928 slave.cpp:823] Successfully authenticated with master master@10.35.12.124:40941
I0921 16:38:36.252840 51928 master.cpp:3980] Re-registering slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
W0921 16:38:36.253078 51928 master.cpp:5190] Task 1 of framework 20150921-163836-2081170186-40941-51925-0000 unknown to the slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) during re-registration: reconciling with the slave
W0921 16:38:36.253456 51928 master.cpp:5272] Executor default of framework 20150921-163836-2081170186-40941-51925-0000 possibly unknown to the slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.253540 51928 master.cpp:6122] Removing executor 'default' with resources  of framework 20150921-163836-2081170186-40941-51925-0000 on slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.253597 51926 slave.cpp:967] Re-registered with master master@10.35.12.124:40941
I0921 16:38:36.253846 51930 status_update_manager.cpp:183] Resuming sending status updates
I0921 16:38:36.253854 51926 slave.cpp:1003] Forwarding total oversubscribed resources 
W0921 16:38:36.253988 51926 slave.cpp:1043] Slave reconciling task 1 of framework 20150921-163836-2081170186-40941-51925-0000 in state TASK_LOST: task unknown to the slave
I0921 16:38:36.254001 51928 master.cpp:4168] Sending updated checkpointed resources  to slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.254112 51928 master.cpp:4230] Received update of slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) with total oversubscribed resources 
I0921 16:38:36.254277 51928 hierarchical.hpp:672] Slave 20150921-163836-2081170186-40941-51925-S0 (smfd-aki-27-sr1.devel.twitter.com) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
I0921 16:38:36.255731 51930 status_update_manager.cpp:322] Received status update TASK_LOST (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.255939 51926 slave.cpp:2235] Updated checkpointed resources from  to 
I0921 16:38:36.256299 51941 slave.cpp:3003] Forwarding the update TASK_LOST (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000 to master@10.35.12.124:40941
I0921 16:38:36.256809 51937 master.cpp:4370] Status update TASK_LOST (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000 from slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.256863 51937 master.cpp:4409] Forwarding status update TASK_LOST (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.256978 51937 master.cpp:6025] Updating the latest state of task 1 of framework 20150921-163836-2081170186-40941-51925-0000 to TASK_LOST
I0921 16:38:36.257249 51930 hierarchical.hpp:954] Recovered cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: ) on slave 20150921-163836-2081170186-40941-51925-S0 from framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.257642 51937 master.cpp:6093] Removing task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] of framework 20150921-163836-2081170186-40941-51925-0000 on slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.257802 51937 master.cpp:3564] Processing ACKNOWLEDGE call a26af6b1-436e-49ef-93c2-fcd5aa7b43f1 for task 1 of framework 20150921-163836-2081170186-40941-51925-0000 (default) at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941 on slave 20150921-163836-2081170186-40941-51925-S0
I0921 16:38:36.258133 51930 status_update_manager.cpp:394] Received status update acknowledgement (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.258214 51932 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 14.936782ms
I0921 16:38:36.258255 51932 replica.cpp:679] Persisted action at 4
E0921 16:38:36.258563 51940 slave.cpp:2317] Status update acknowledgement (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of unknown framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.258725 51926 replica.cpp:658] Replica received learned notice for position 4
I0921 16:38:36.266546 51926 leveldb.cpp:343] Persisting action (18 bytes) to leveldb took 7.772502ms
I0921 16:38:36.266620 51926 leveldb.cpp:401] Deleting ~2 keys from leveldb took 33037ns
I0921 16:38:36.266646 51926 replica.cpp:679] Persisted action at 4
I0921 16:38:36.266669 51926 replica.cpp:664] Replica learned TRUNCATE action at position 4
I0921 16:38:36.280352 51925 sched.cpp:1754] Asked to stop the driver
I0921 16:38:36.280436 51925 master.cpp:923] Master terminating
I0921 16:38:36.280484 51928 sched.cpp:1040] Stopping framework '20150921-163836-2081170186-40941-51925-0000'
I0921 16:38:36.280661 51937 hierarchical.hpp:643] Removed slave 20150921-163836-2081170186-40941-51925-S0
I0921 16:38:36.280894 51927 hierarchical.hpp:490] Removed framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.281198 51927 slave.cpp:3171] master@10.35.12.124:40941 exited
W0921 16:38:36.281231 51927 slave.cpp:3174] Master disconnected! Waiting for a new master to be elected
I0921 16:38:36.285024 51926 slave.cpp:572] Slave terminating
[       OK ] MasterSlaveReconciliationTest.ReconcileLostTask (350 ms)
[----------] 1 test from MasterSlaveReconciliationTest (350 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (366 ms total)
[  PASSED  ] 1 test.
{code}

Tested HEAD on Centos6 (original reporting platform) with no errors.  

{code}
[----------] 1 test from MasterSlaveReconciliationTest
[ RUN      ] MasterSlaveReconciliationTest.ReconcileLostTask
Using temporary directory '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_i61HPI'
I0921 16:38:36.016902 51925 leveldb.cpp:176] Opened db in 73.30966ms
I0921 16:38:36.023943 51925 leveldb.cpp:183] Compacted db in 6.963667ms
I0921 16:38:36.024034 51925 leveldb.cpp:198] Created db iterator in 48856ns
I0921 16:38:36.024061 51925 leveldb.cpp:204] Seeked to beginning of db in 3684ns
I0921 16:38:36.024077 51925 leveldb.cpp:273] Iterated through 0 keys in the db in 337ns
I0921 16:38:36.024189 51925 replica.cpp:744] Replica recovered with log positions 0 -> 0 with 1 holes and 0 unlearned
I0921 16:38:36.025542 51935 recover.cpp:449] Starting replica recovery
I0921 16:38:36.026080 51935 recover.cpp:475] Replica is in EMPTY status
I0921 16:38:36.028053 51930 master.cpp:380] Master 20150921-163836-2081170186-40941-51925 (smfd-aki-27-sr1.devel.twitter.com) started on 10.35.12.124:40941
I0921 16:38:36.028286 51934 replica.cpp:641] Replica in EMPTY status received a broadcasted recover request
I0921 16:38:36.028094 51930 master.cpp:382] Flags at startup: --acls="" --allocation_interval="1secs" --allocator="HierarchicalDRF" --authenticate="true" --authenticate_slaves="true" --authenticators="crammd5" --authorizers="local" --credentials="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_i61HPI/credentials" --framework_sorter="drf" --help="false" --initialize_driver_logging="true" --log_auto_initialize="true" --logbufsecs="0" --logging_level="INFO" --max_slave_ping_timeouts="5" --quiet="false" --recovery_slave_removal_limit="100%" --registry="replicated_log" --registry_fetch_timeout="1mins" --registry_store_timeout="25secs" --registry_strict="true" --root_submissions="true" --slave_ping_timeout="15secs" --slave_reregister_timeout="10mins" --user_sorter="drf" --version="false" --webui_dir="/usr/local/share/mesos/webui" --work_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_i61HPI/master" --zk_session_timeout="10secs"
I0921 16:38:36.029104 51930 master.cpp:427] Master only allowing authenticated frameworks to register
I0921 16:38:36.029132 51930 master.cpp:432] Master only allowing authenticated slaves to register
I0921 16:38:36.029155 51930 credentials.hpp:37] Loading credentials for authentication from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_i61HPI/credentials'
I0921 16:38:36.029250 51936 recover.cpp:195] Received a recover response from a replica in EMPTY status
I0921 16:38:36.029738 51930 master.cpp:471] Using default 'crammd5' authenticator
I0921 16:38:36.029908 51930 authenticator.cpp:512] Initializing server SASL
I0921 16:38:36.029947 51940 recover.cpp:566] Updating replica status to STARTING
I0921 16:38:36.030782 51930 master.cpp:508] Authorization enabled
I0921 16:38:36.036074 51926 master.cpp:1607] The newly elected leader is master@10.35.12.124:40941 with id 20150921-163836-2081170186-40941-51925
I0921 16:38:36.036110 51926 master.cpp:1620] Elected as the leading master!
I0921 16:38:36.036145 51926 master.cpp:1380] Recovering from registrar
I0921 16:38:36.036335 51930 registrar.cpp:309] Recovering registrar
I0921 16:38:36.067191 51938 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 36.988836ms
I0921 16:38:36.067246 51938 replica.cpp:323] Persisted replica status to STARTING
I0921 16:38:36.067517 51938 recover.cpp:475] Replica is in STARTING status
I0921 16:38:36.068230 51936 replica.cpp:641] Replica in STARTING status received a broadcasted recover request
I0921 16:38:36.068429 51928 recover.cpp:195] Received a recover response from a replica in STARTING status
I0921 16:38:36.068729 51927 recover.cpp:566] Updating replica status to VOTING
I0921 16:38:36.074915 51940 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 6.095154ms
I0921 16:38:36.074942 51940 replica.cpp:323] Persisted replica status to VOTING
I0921 16:38:36.075021 51936 recover.cpp:580] Successfully joined the Paxos group
I0921 16:38:36.075228 51936 recover.cpp:464] Recover process terminated
I0921 16:38:36.075657 51926 log.cpp:661] Attempting to start the writer
I0921 16:38:36.077828 51927 replica.cpp:477] Replica received implicit promise request with proposal 1
I0921 16:38:36.091645 51927 leveldb.cpp:306] Persisting metadata (8 bytes) to leveldb took 13.779849ms
I0921 16:38:36.091686 51927 replica.cpp:345] Persisted promised to 1
I0921 16:38:36.092543 51934 coordinator.cpp:231] Coordinator attemping to fill missing position
I0921 16:38:36.094199 51939 replica.cpp:378] Replica received explicit promise request for position 0 with proposal 2
I0921 16:38:36.108326 51939 leveldb.cpp:343] Persisting action (8 bytes) to leveldb took 14.047785ms
I0921 16:38:36.108397 51939 replica.cpp:679] Persisted action at 0
I0921 16:38:36.109861 51939 replica.cpp:511] Replica received write request for position 0
I0921 16:38:36.109940 51939 leveldb.cpp:438] Reading position from leveldb took 43334ns
I0921 16:38:36.124960 51939 leveldb.cpp:343] Persisting action (14 bytes) to leveldb took 14.940454ms
I0921 16:38:36.125012 51939 replica.cpp:679] Persisted action at 0
I0921 16:38:36.125648 51931 replica.cpp:658] Replica received learned notice for position 0
I0921 16:38:36.133239 51931 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 7.54664ms
I0921 16:38:36.133275 51931 replica.cpp:679] Persisted action at 0
I0921 16:38:36.133297 51931 replica.cpp:664] Replica learned NOP action at position 0
I0921 16:38:36.133939 51928 log.cpp:677] Writer started with ending position 0
I0921 16:38:36.136015 51937 leveldb.cpp:438] Reading position from leveldb took 23416ns
I0921 16:38:36.138980 51930 registrar.cpp:342] Successfully fetched the registry (0B) in 102.578944ms
I0921 16:38:36.139200 51930 registrar.cpp:441] Applied 1 operations in 66844ns; attempting to update the 'registry'
I0921 16:38:36.141839 51929 log.cpp:685] Attempting to append 220 bytes to the log
I0921 16:38:36.141976 51935 coordinator.cpp:341] Coordinator attempting to write APPEND action at position 1
I0921 16:38:36.142660 51931 replica.cpp:511] Replica received write request for position 1
I0921 16:38:36.149888 51931 leveldb.cpp:343] Persisting action (239 bytes) to leveldb took 7.193497ms
I0921 16:38:36.149919 51931 replica.cpp:679] Persisted action at 1
I0921 16:38:36.150519 51928 replica.cpp:658] Replica received learned notice for position 1
I0921 16:38:36.158231 51928 leveldb.cpp:343] Persisting action (241 bytes) to leveldb took 7.652904ms
I0921 16:38:36.158263 51928 replica.cpp:679] Persisted action at 1
I0921 16:38:36.158284 51928 replica.cpp:664] Replica learned APPEND action at position 1
I0921 16:38:36.159554 51932 registrar.cpp:486] Successfully updated the 'registry' in 20.20864ms
I0921 16:38:36.159734 51932 registrar.cpp:372] Successfully recovered registrar
I0921 16:38:36.159831 51935 log.cpp:704] Attempting to truncate the log to 1
I0921 16:38:36.159970 51930 coordinator.cpp:341] Coordinator attempting to write TRUNCATE action at position 2
I0921 16:38:36.160154 51935 master.cpp:1417] Recovered 0 slaves from the Registry (181B) ; allowing 10mins for slaves to re-register
I0921 16:38:36.160848 51940 replica.cpp:511] Replica received write request for position 2
I0921 16:38:36.174944 51940 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 14.053198ms
I0921 16:38:36.174983 51940 replica.cpp:679] Persisted action at 2
I0921 16:38:36.175683 51934 replica.cpp:658] Replica received learned notice for position 2
I0921 16:38:36.183202 51934 leveldb.cpp:343] Persisting action (18 bytes) to leveldb took 7.474068ms
I0921 16:38:36.183270 51934 leveldb.cpp:401] Deleting ~1 keys from leveldb took 34790ns
I0921 16:38:36.183295 51934 replica.cpp:679] Persisted action at 2
I0921 16:38:36.183320 51934 replica.cpp:664] Replica learned TRUNCATE action at position 2
I0921 16:38:36.195276 51925 containerizer.cpp:143] Using isolation: posix/cpu,posix/mem,filesystem/posix
W0921 16:38:36.195854 51925 backend.cpp:50] Failed to create 'bind' backend: BindBackend requires root privileges
I0921 16:38:36.198113 51928 slave.cpp:190] Slave started on 1)@10.35.12.124:40941
I0921 16:38:36.198137 51928 slave.cpp:191] Flags at startup: --appc_store_dir="/tmp/mesos/store/appc" --authenticatee="crammd5" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_kill_orphans="true" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="false" --image_provisioner_backend="copy" --initialize_driver_logging="true" --isolation="posix/cpu,posix/mem" --launcher_dir="/home/pbrett/sandbox/ReconcileLostTask/build/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resource_monitoring_interval="1secs" --resources="cpus:2;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --version="false" --work_dir="/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d"
I0921 16:38:36.198485 51928 credentials.hpp:85] Loading credential for authentication from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d/credential'
I0921 16:38:36.198698 51928 slave.cpp:321] Slave using credential for: test-principal
I0921 16:38:36.199193 51928 slave.cpp:354] Slave resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0921 16:38:36.199586 51928 slave.cpp:384] Slave hostname: smfd-aki-27-sr1.devel.twitter.com
I0921 16:38:36.199605 51928 slave.cpp:389] Slave checkpoint: true
I0921 16:38:36.200530 51925 sched.cpp:164] Version: 0.25.0
I0921 16:38:36.201567 51930 state.cpp:54] Recovering state from '/tmp/MasterSlaveReconciliationTest_ReconcileLostTask_B3934d/meta'
I0921 16:38:36.201756 51928 sched.cpp:262] New master detected at master@10.35.12.124:40941
I0921 16:38:36.201882 51928 sched.cpp:318] Authenticating with master master@10.35.12.124:40941
I0921 16:38:36.201908 51928 sched.cpp:325] Using default CRAM-MD5 authenticatee
I0921 16:38:36.201999 51931 status_update_manager.cpp:202] Recovering status update manager
I0921 16:38:36.202199 51929 containerizer.cpp:371] Recovering containerizer
I0921 16:38:36.202282 51937 authenticatee.cpp:91] Initializing client SASL
I0921 16:38:36.202446 51937 authenticatee.cpp:115] Creating new client SASL connection
I0921 16:38:36.202755 51941 master.cpp:5093] Authenticating scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.203155 51930 authenticator.cpp:92] Creating new server SASL connection
I0921 16:38:36.203384 51927 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0921 16:38:36.203423 51927 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0921 16:38:36.203476 51934 slave.cpp:4097] Finished recovery
I0921 16:38:36.203538 51940 authenticator.cpp:197] Received SASL authentication start
I0921 16:38:36.203615 51940 authenticator.cpp:319] Authentication requires more steps
I0921 16:38:36.203709 51940 authenticatee.cpp:252] Received SASL authentication step
I0921 16:38:36.203856 51936 authenticator.cpp:225] Received SASL authentication step
I0921 16:38:36.204020 51936 authenticator.cpp:311] Authentication success
I0921 16:38:36.204104 51935 authenticatee.cpp:292] Authentication success
I0921 16:38:36.204229 51930 master.cpp:5123] Successfully authenticated principal 'test-principal' at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.204304 51926 status_update_manager.cpp:176] Pausing sending status updates
I0921 16:38:36.204331 51934 slave.cpp:692] New master detected at master@10.35.12.124:40941
I0921 16:38:36.204391 51934 slave.cpp:755] Authenticating with master master@10.35.12.124:40941
I0921 16:38:36.204401 51931 sched.cpp:407] Successfully authenticated with master master@10.35.12.124:40941
I0921 16:38:36.204440 51934 slave.cpp:760] Using default CRAM-MD5 authenticatee
I0921 16:38:36.204586 51939 authenticatee.cpp:115] Creating new client SASL connection
I0921 16:38:36.204587 51934 slave.cpp:728] Detecting new master
I0921 16:38:36.204762 51933 master.cpp:2176] Received SUBSCRIBE call for framework 'default' at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.204862 51933 master.cpp:1646] Authorizing framework principal 'test-principal' to receive offers for role '*'
I0921 16:38:36.205073 51933 master.cpp:5093] Authenticating slave(1)@10.35.12.124:40941
I0921 16:38:36.205240 51934 master.cpp:2246] Subscribing framework default with checkpointing disabled and capabilities [  ]
I0921 16:38:36.205256 51932 authenticator.cpp:92] Creating new server SASL connection
I0921 16:38:36.205390 51939 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0921 16:38:36.205416 51939 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0921 16:38:36.205481 51939 authenticator.cpp:197] Received SASL authentication start
I0921 16:38:36.205530 51939 authenticator.cpp:319] Authentication requires more steps
I0921 16:38:36.205584 51939 authenticatee.cpp:252] Received SASL authentication step
I0921 16:38:36.205663 51940 authenticator.cpp:225] Received SASL authentication step
I0921 16:38:36.205727 51935 hierarchical.hpp:453] Added framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.205732 51940 authenticator.cpp:311] Authentication success
I0921 16:38:36.205821 51935 authenticatee.cpp:292] Authentication success
I0921 16:38:36.205967 51934 master.cpp:5123] Successfully authenticated principal 'test-principal' at slave(1)@10.35.12.124:40941
I0921 16:38:36.206037 51928 sched.cpp:641] Framework registered with 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.206204 51926 slave.cpp:823] Successfully authenticated with master master@10.35.12.124:40941
I0921 16:38:36.206598 51932 master.cpp:3820] Registering slave at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) with id 20150921-163836-2081170186-40941-51925-S0
I0921 16:38:36.207165 51927 registrar.cpp:441] Applied 1 operations in 50275ns; attempting to update the 'registry'
I0921 16:38:36.209272 51932 log.cpp:685] Attempting to append 412 bytes to the log
I0921 16:38:36.209419 51935 coordinator.cpp:341] Coordinator attempting to write APPEND action at position 3
I0921 16:38:36.210120 51930 replica.cpp:511] Replica received write request for position 3
I0921 16:38:36.223966 51927 master.cpp:3808] Ignoring register slave message from slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) as admission is already in progress
I0921 16:38:36.224921 51930 leveldb.cpp:343] Persisting action (431 bytes) to leveldb took 14.753445ms
I0921 16:38:36.224973 51930 replica.cpp:679] Persisted action at 3
I0921 16:38:36.225810 51930 replica.cpp:658] Replica received learned notice for position 3
I0921 16:38:36.233645 51934 master.cpp:3808] Ignoring register slave message from slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) as admission is already in progress
I0921 16:38:36.241570 51930 leveldb.cpp:343] Persisting action (433 bytes) to leveldb took 15.721842ms
I0921 16:38:36.241621 51930 replica.cpp:679] Persisted action at 3
I0921 16:38:36.241652 51930 replica.cpp:664] Replica learned APPEND action at position 3
I0921 16:38:36.242514 51939 registrar.cpp:486] Successfully updated the 'registry' in 35.27296ms
I0921 16:38:36.242655 51931 log.cpp:704] Attempting to truncate the log to 3
I0921 16:38:36.242764 51927 coordinator.cpp:341] Coordinator attempting to write TRUNCATE action at position 4
I0921 16:38:36.243228 51932 replica.cpp:511] Replica received write request for position 4
I0921 16:38:36.243573 51935 master.cpp:3888] Registered slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I0921 16:38:36.243643 51939 slave.cpp:867] Registered with master master@10.35.12.124:40941; given slave ID 20150921-163836-2081170186-40941-51925-S0
I0921 16:38:36.243677 51928 hierarchical.hpp:612] Added slave 20150921-163836-2081170186-40941-51925-S0 (smfd-aki-27-sr1.devel.twitter.com) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (allocated: )
I0921 16:38:36.243784 51936 status_update_manager.cpp:183] Resuming sending status updates
I0921 16:38:36.244145 51939 slave.cpp:926] Forwarding total oversubscribed resources 
I0921 16:38:36.244601 51934 master.cpp:4922] Sending 1 offers to framework 20150921-163836-2081170186-40941-51925-0000 (default) at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.244801 51934 master.cpp:4230] Received update of slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) with total oversubscribed resources 
I0921 16:38:36.245054 51934 hierarchical.hpp:672] Slave 20150921-163836-2081170186-40941-51925-S0 (smfd-aki-27-sr1.devel.twitter.com) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
I0921 16:38:36.246901 51930 master.cpp:2882] Processing ACCEPT call for offers: [ 20150921-163836-2081170186-40941-51925-O0 ] on slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) for framework 20150921-163836-2081170186-40941-51925-0000 (default) at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941
I0921 16:38:36.246953 51930 master.cpp:2684] Authorizing framework principal 'test-principal' to launch task 1 as user 'pbrett'
W0921 16:38:36.248419 51930 validation.cpp:419] Executor default for task 1 uses less CPUs (None) than the minimum required (0.01). Please update your executor, as this will be mandatory in future releases.
W0921 16:38:36.248462 51930 validation.cpp:431] Executor default for task 1 uses less memory (None) than the minimum required (32MB). Please update your executor, as this will be mandatory in future releases.
I0921 16:38:36.248839 51930 master.hpp:176] Adding task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 20150921-163836-2081170186-40941-51925-S0 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.248945 51930 master.cpp:3212] Launching task 1 of framework 20150921-163836-2081170186-40941-51925-0000 (default) at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.250377 51939 status_update_manager.cpp:176] Pausing sending status updates
I0921 16:38:36.250411 51938 slave.cpp:692] New master detected at master@10.35.12.124:40941
I0921 16:38:36.250484 51938 slave.cpp:755] Authenticating with master master@10.35.12.124:40941
I0921 16:38:36.250572 51938 slave.cpp:760] Using default CRAM-MD5 authenticatee
I0921 16:38:36.250666 51938 slave.cpp:728] Detecting new master
I0921 16:38:36.250751 51935 authenticatee.cpp:115] Creating new client SASL connection
I0921 16:38:36.250994 51936 master.cpp:5093] Authenticating slave(1)@10.35.12.124:40941
I0921 16:38:36.251257 51933 authenticator.cpp:92] Creating new server SASL connection
I0921 16:38:36.251384 51933 authenticatee.cpp:206] Received SASL authentication mechanisms: CRAM-MD5
I0921 16:38:36.251402 51933 authenticatee.cpp:232] Attempting to authenticate with mechanism 'CRAM-MD5'
I0921 16:38:36.251456 51933 authenticator.cpp:197] Received SASL authentication start
I0921 16:38:36.251539 51933 authenticator.cpp:319] Authentication requires more steps
I0921 16:38:36.251909 51941 authenticatee.cpp:252] Received SASL authentication step
I0921 16:38:36.252017 51930 authenticator.cpp:225] Received SASL authentication step
I0921 16:38:36.252068 51930 authenticator.cpp:311] Authentication success
I0921 16:38:36.252164 51936 authenticatee.cpp:292] Authentication success
I0921 16:38:36.252238 51930 master.cpp:5123] Successfully authenticated principal 'test-principal' at slave(1)@10.35.12.124:40941
I0921 16:38:36.252478 51928 slave.cpp:823] Successfully authenticated with master master@10.35.12.124:40941
I0921 16:38:36.252840 51928 master.cpp:3980] Re-registering slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
W0921 16:38:36.253078 51928 master.cpp:5190] Task 1 of framework 20150921-163836-2081170186-40941-51925-0000 unknown to the slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) during re-registration: reconciling with the slave
W0921 16:38:36.253456 51928 master.cpp:5272] Executor default of framework 20150921-163836-2081170186-40941-51925-0000 possibly unknown to the slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.253540 51928 master.cpp:6122] Removing executor 'default' with resources  of framework 20150921-163836-2081170186-40941-51925-0000 on slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.253597 51926 slave.cpp:967] Re-registered with master master@10.35.12.124:40941
I0921 16:38:36.253846 51930 status_update_manager.cpp:183] Resuming sending status updates
I0921 16:38:36.253854 51926 slave.cpp:1003] Forwarding total oversubscribed resources 
W0921 16:38:36.253988 51926 slave.cpp:1043] Slave reconciling task 1 of framework 20150921-163836-2081170186-40941-51925-0000 in state TASK_LOST: task unknown to the slave
I0921 16:38:36.254001 51928 master.cpp:4168] Sending updated checkpointed resources  to slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.254112 51928 master.cpp:4230] Received update of slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com) with total oversubscribed resources 
I0921 16:38:36.254277 51928 hierarchical.hpp:672] Slave 20150921-163836-2081170186-40941-51925-S0 (smfd-aki-27-sr1.devel.twitter.com) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000])
I0921 16:38:36.255731 51930 status_update_manager.cpp:322] Received status update TASK_LOST (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.255939 51926 slave.cpp:2235] Updated checkpointed resources from  to 
I0921 16:38:36.256299 51941 slave.cpp:3003] Forwarding the update TASK_LOST (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000 to master@10.35.12.124:40941
I0921 16:38:36.256809 51937 master.cpp:4370] Status update TASK_LOST (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000 from slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.256863 51937 master.cpp:4409] Forwarding status update TASK_LOST (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.256978 51937 master.cpp:6025] Updating the latest state of task 1 of framework 20150921-163836-2081170186-40941-51925-0000 to TASK_LOST
I0921 16:38:36.257249 51930 hierarchical.hpp:954] Recovered cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: ) on slave 20150921-163836-2081170186-40941-51925-S0 from framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.257642 51937 master.cpp:6093] Removing task 1 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] of framework 20150921-163836-2081170186-40941-51925-0000 on slave 20150921-163836-2081170186-40941-51925-S0 at slave(1)@10.35.12.124:40941 (smfd-aki-27-sr1.devel.twitter.com)
I0921 16:38:36.257802 51937 master.cpp:3564] Processing ACKNOWLEDGE call a26af6b1-436e-49ef-93c2-fcd5aa7b43f1 for task 1 of framework 20150921-163836-2081170186-40941-51925-0000 (default) at scheduler-85b55951-47cb-4341-a79d-c788f7b6e50c@10.35.12.124:40941 on slave 20150921-163836-2081170186-40941-51925-S0
I0921 16:38:36.258133 51930 status_update_manager.cpp:394] Received status update acknowledgement (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.258214 51932 leveldb.cpp:343] Persisting action (16 bytes) to leveldb took 14.936782ms
I0921 16:38:36.258255 51932 replica.cpp:679] Persisted action at 4
E0921 16:38:36.258563 51940 slave.cpp:2317] Status update acknowledgement (UUID: a26af6b1-436e-49ef-93c2-fcd5aa7b43f1) for task 1 of unknown framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.258725 51926 replica.cpp:658] Replica received learned notice for position 4
I0921 16:38:36.266546 51926 leveldb.cpp:343] Persisting action (18 bytes) to leveldb took 7.772502ms
I0921 16:38:36.266620 51926 leveldb.cpp:401] Deleting ~2 keys from leveldb took 33037ns
I0921 16:38:36.266646 51926 replica.cpp:679] Persisted action at 4
I0921 16:38:36.266669 51926 replica.cpp:664] Replica learned TRUNCATE action at position 4
I0921 16:38:36.280352 51925 sched.cpp:1754] Asked to stop the driver
I0921 16:38:36.280436 51925 master.cpp:923] Master terminating
I0921 16:38:36.280484 51928 sched.cpp:1040] Stopping framework '20150921-163836-2081170186-40941-51925-0000'
I0921 16:38:36.280661 51937 hierarchical.hpp:643] Removed slave 20150921-163836-2081170186-40941-51925-S0
I0921 16:38:36.280894 51927 hierarchical.hpp:490] Removed framework 20150921-163836-2081170186-40941-51925-0000
I0921 16:38:36.281198 51927 slave.cpp:3171] master@10.35.12.124:40941 exited
W0921 16:38:36.281231 51927 slave.cpp:3174] Master disconnected! Waiting for a new master to be elected
I0921 16:38:36.285024 51926 slave.cpp:572] Slave terminating
[       OK ] MasterSlaveReconciliationTest.ReconcileLostTask (350 ms)
[----------] 1 test from MasterSlaveReconciliationTest (350 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (366 ms total)
[  PASSED  ] 1 test.
{code}

