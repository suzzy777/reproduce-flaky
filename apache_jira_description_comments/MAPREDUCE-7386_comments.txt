I was able to replicate regularly
 * a race condition in maven assembly where there were errors related to "missing artifacts", which were built as part of the build process.Â  Adding these JAR dependencies to the plugin made these dependencies explicit and addressed this issue
 * a race condition resulting in missing native dependencies during the distribution

ayushtkn commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1206059801

   I tried with -T1C, and first it failed with:
   ```
   [ERROR] Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.11.2:yarn (yarn install) on project hadoop-yarn-applications-catalog-webapp: Failed to run task: 'yarn ' failed. org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1) -> [Help 1]
   [ERROR] 
   [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
   [ERROR] Re-run Maven using the -X switch to enable full debug logging.
   [ERROR] 
   [ERROR] For more information about the errors and possible solutions, please read the following articles:
   [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
   [ERROR] 
   [ERROR] After correcting the problems, you can resume the build with the command
   [ERROR]   mvn <args> -rf :hadoop-yarn-applications-catalog-webapp
   ```
   
   This is yarn stuff and when I do a normal build it passes.
   
   Second time it got hung here:
   ```
   [INFO] -

steveloughran commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1206275892

   unfortunate. how about making that focus on parallel test running for a speedup. that's fairly painful to do if anything is making assumptions about exclusive paths or ports, but once working is wonderful for anyone working on a single module, as well as jenkins builds




snmvaughan commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1206331264

   I've been focusing on speeding up the build process in order to aid in development.  There are several reasons why the tests can't safely run in parallel, which is why I've started looking into short-term opportunities for speedup in the meantime.  My plan of attack has been to do the following:
   
   1. Build the distribution in parallel (this pull request).   Some time savings
   2. Distribute the tests to run in parallel (each in their own containers, but running sequentially within that container).  More time savings, but flaky tests are still an issue.  This requires some tweaks to a few tests, which I'll be submitting back in other pull requests.
   3. Fix tests that break basic conventions that can lead to impacts between tests.  Example: Tests that require write access to shared resources (such as files in the classpath).
   4. Fix flaky test classes that fail to run consistently even in their own containers.  More time savings since you don't have to wait for tests to time out.  This is iterative, but once this is completed you can develop knowing that a failure is actually caused by a change.
   5. Based on lessons learned, consider additional improvements.  Example: Switching to using JUnit support for temporary directories to help with parallel execution
   
   In addition, I've been starting small by limiting the test runs to a focused subset.  Currently I execute tests for `hadoop-hdfs-client` and `hadoop-hdfs` along with their dependencies with every build.




ndimiduk commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1207925526

   > i do a mvn -T 1C build by parallel by default and it always seems to work (spark builds hang, fwiw). maybe the 2C option, by doubling the parallelism, triggers these.
   
   @steveloughran Are we all building in the same environment? I.e., differences in maven version or maven dependency plugin version or maven assembly plugin version?




ndimiduk commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1207931102

   > I was just worried like why are we adding dependecies for the build sake, maven should take care right?
   > @saintstack if you are convinced nothing blocking from my side, Please go ahead
   
   Pardon @ayushtkn are you satisfied with the above justification? Do you have further changes you'd like to see or are you satisfied? If the latter, mind updating your vote accordingly?
   
   I agree that ideally there's an automated audit that correctly resolves and hardens the dependency graph. I've tried using various features of the dependency plugin for this in the past, but found it too unreliably to use for static build-time checking.




ayushtkn commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1208525858

   @ndimiduk I pose no objections to this. Can be merged if others are convinced
   +0




snmvaughan commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1209280016

   @ayushtkn What other random behavior did your see?




steveloughran commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1214851440

   @ndimiduk my setup
   ```
   Maven home: /opt/homebrew/Cellar/maven/3.8.6/libexec
   Java version: 1.8.0_322, vendor: Azul Systems, Inc., runtime: /Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre
   Default locale: en_GB, platform encoding: UTF-8
   OS name: "mac os x", version: "12.3.1", arch: "aarch64", family: "mac"
   ```
   




ndimiduk commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1215023860

   > my setup
   
   @steveloughran maven version matches my own, which is where I expected to find the difference.




snmvaughan commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1215685147

   Testing refactoring of `hadoop-mapreduce-project` that is patterned after `hadoop-yarn-project`.  All 3rd party dependencies are removed, leaving the dependencies to apply just to packaging.  This moves all my additions out of the assembly plugin.




steveloughran commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1215697705

   @ndimiduk just general race conditions then




hadoop-yetus commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1216137263

   :broken_heart: **-1 overall**
   
   
   
   
   
   
   | Vote | Subsystem | Runtime |  Logfile | Comment |
   |:----:|----------:|--------:|:--------:|:-------:|
   | +0 :ok: |  reexec  |   0m 59s |  |  Docker mode activated.  |
   |||| _ Prechecks _ |
   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |
   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |
   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |
   | +0 :ok: |  xmllint  |   0m  0s |  |  xmllint was not available.  |
   | +1 :green_heart: |  @author  |   0m  1s |  |  The patch does not contain any @author tags.  |
   | -1 :x: |  test4tests  |   0m  0s |  |  The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch.  |
   |||| _ trunk Compile Tests _ |
   | +0 :ok: |  mvndep  |  14m 51s |  |  Maven dependency ordering for branch  |
   | +1 :green_heart: |  mvninstall  |  25m 15s |  |  trunk passed  |
   | +1 :green_heart: |  compile  |  23m 34s |  |  trunk passed with JDK Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1  |
   | +1 :green_heart: |  compile  |  20m 57s |  |  trunk passed with JDK Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  mvnsite  |  10m  4s |  |  trunk passed  |
   | +1 :green_heart: |  javadoc  |   6m 28s |  |  trunk passed with JDK Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1  |
   | +1 :green_heart: |  javadoc  |   5m 32s |  |  trunk passed with JDK Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  shadedclient  | 127m  6s |  |  branch has no errors when building and testing our client artifacts.  |
   |||| _ Patch Compile Tests _ |
   | +0 :ok: |  mvndep  |   0m 33s |  |  Maven dependency ordering for patch  |
   | +1 :green_heart: |  mvninstall  |   7m 31s |  |  the patch passed  |
   | +1 :green_heart: |  compile  |  22m 49s |  |  the patch passed with JDK Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1  |
   | +1 :green_heart: |  javac  |  22m 49s |  |  the patch passed  |
   | +1 :green_heart: |  compile  |  21m  6s |  |  the patch passed with JDK Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  javac  |  21m  6s |  |  the patch passed  |
   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |
   | +1 :green_heart: |  mvnsite  |  10m 29s |  |  the patch passed  |
   | +1 :green_heart: |  javadoc  |   6m 23s |  |  the patch passed with JDK Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1  |
   | +1 :green_heart: |  javadoc  |   5m 35s |  |  the patch passed with JDK Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  shadedclient  |  45m  4s |  |  patch has no errors when building and testing our client artifacts.  |
   |||| _ Other Tests _ |
   | +1 :green_heart: |  unit  |   0m 42s |  |  hadoop-project in the patch passed.  |
   | -1 :x: |  unit  |  36m 15s | [/patch-unit-hadoop-yarn-project.txt](https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/3/artifact/out/patch-unit-hadoop-yarn-project.txt) |  hadoop-yarn-project in the patch failed.  |
   | +1 :green_heart: |  unit  | 169m  9s |  |  hadoop-mapreduce-project in the patch passed.  |
   | +1 :green_heart: |  unit  |   1m 27s |  |  hadoop-dist in the patch passed.  |
   | +1 :green_heart: |  asflicense  |   1m 44s |  |  The patch does not generate ASF License warnings.  |
   |  |   | 436m 40s |  |  |
   
   
   | Subsystem | Report/Notes |
   |----------:|:-------------|
   | Docker | ClientAPI=1.41 ServerAPI=1.41 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/3/artifact/out/Dockerfile |
   | GITHUB PR | https://github.com/apache/hadoop/pull/4415 |
   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient codespell detsecrets xmllint |
   | uname | Linux 9ee440053183 4.15.0-65-generic #74-Ubuntu SMP Tue Sep 17 17:06:04 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux |
   | Build tool | maven |
   | Personality | dev-support/bin/hadoop.sh |
   | git revision | trunk / 720c191f42785b0ef79d809a22e2662f89871e56 |
   | Default Java | Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07 |
   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07 |
   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/3/testReport/ |
   | Max. process+thread count | 1558 (vs. ulimit of 5500) |
   | modules | C: hadoop-project hadoop-yarn-project hadoop-mapreduce-project hadoop-dist U: . |
   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/3/console |
   | versions | git=2.25.1 maven=3.6.3 |
   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |
   
   
   This message was automatically generated.
   
   




steveloughran commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1216500786

   looks good; some duplicate declarations in yarn tho'. related?
   ```
   [WARNING] Some problems were encountered while building the effective model for org.apache.hadoop:hadoop-yarn-server-nodemanager:jar:3.4.0-SNAPSHOT
   [WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.apache.hadoop:hadoop-minikdc:jar -> duplicate declaration of version (?) @ line 208, column 17
   [WARNING] 
   ```
   




snmvaughan commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1216760479

   The dependency issue in `hadoop-yarn-server-nodemanager` is coming from `trunk`.  I'll rebase my pull request and address it.




hadoop-yetus commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1217301639

   :broken_heart: **-1 overall**
   
   
   
   
   
   
   | Vote | Subsystem | Runtime |  Logfile | Comment |
   |:----:|----------:|--------:|:--------:|:-------:|
   | +0 :ok: |  reexec  |   1m 20s |  |  Docker mode activated.  |
   |||| _ Prechecks _ |
   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |
   | +0 :ok: |  codespell  |   0m  1s |  |  codespell was not available.  |
   | +0 :ok: |  detsecrets  |   0m  1s |  |  detect-secrets was not available.  |
   | +0 :ok: |  xmllint  |   0m  1s |  |  xmllint was not available.  |
   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |
   | -1 :x: |  test4tests  |   0m  0s |  |  The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch.  |
   |||| _ trunk Compile Tests _ |
   | +0 :ok: |  mvndep  |   6m  1s |  |  Maven dependency ordering for branch  |
   | +1 :green_heart: |  mvninstall  |  38m  4s |  |  trunk passed  |
   | +1 :green_heart: |  compile  |  25m 17s |  |  trunk passed with JDK Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1  |
   | +1 :green_heart: |  compile  |  21m 52s |  |  trunk passed with JDK Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  mvnsite  |  10m 52s |  |  trunk passed  |
   | +1 :green_heart: |  javadoc  |   6m 48s |  |  trunk passed with JDK Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1  |
   | +1 :green_heart: |  javadoc  |   5m 46s |  |  trunk passed with JDK Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  shadedclient  | 137m 59s |  |  branch has no errors when building and testing our client artifacts.  |
   |||| _ Patch Compile Tests _ |
   | +0 :ok: |  mvndep  |   0m 29s |  |  Maven dependency ordering for patch  |
   | +1 :green_heart: |  mvninstall  |   7m 58s |  |  the patch passed  |
   | +1 :green_heart: |  compile  |  24m 36s |  |  the patch passed with JDK Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1  |
   | +1 :green_heart: |  javac  |  24m 36s |  |  the patch passed  |
   | +1 :green_heart: |  compile  |  21m 47s |  |  the patch passed with JDK Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  javac  |  21m 47s |  |  the patch passed  |
   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |
   | +1 :green_heart: |  mvnsite  |  10m 11s |  |  the patch passed  |
   | +1 :green_heart: |  javadoc  |   6m 48s |  |  the patch passed with JDK Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1  |
   | +1 :green_heart: |  javadoc  |   5m 41s |  |  the patch passed with JDK Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  shadedclient  |  47m 45s |  |  patch has no errors when building and testing our client artifacts.  |
   |||| _ Other Tests _ |
   | +1 :green_heart: |  unit  |   0m 31s |  |  hadoop-project in the patch passed.  |
   | +1 :green_heart: |  unit  |  23m 22s |  |  hadoop-yarn-server-nodemanager in the patch passed.  |
   | -1 :x: |  unit  |  35m 29s | [/patch-unit-hadoop-yarn-project.txt](https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/4/artifact/out/patch-unit-hadoop-yarn-project.txt) |  hadoop-yarn-project in the patch failed.  |
   | +1 :green_heart: |  unit  | 163m 59s |  |  hadoop-mapreduce-project in the patch passed.  |
   | +1 :green_heart: |  unit  |   1m  9s |  |  hadoop-dist in the patch passed.  |
   | +1 :green_heart: |  asflicense  |   1m 23s |  |  The patch does not generate ASF License warnings.  |
   |  |   | 469m 57s |  |  |
   
   
   | Subsystem | Report/Notes |
   |----------:|:-------------|
   | Docker | ClientAPI=1.41 ServerAPI=1.41 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/4/artifact/out/Dockerfile |
   | GITHUB PR | https://github.com/apache/hadoop/pull/4415 |
   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient codespell detsecrets xmllint |
   | uname | Linux c741dd2ef262 4.15.0-175-generic #184-Ubuntu SMP Thu Mar 24 17:48:36 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux |
   | Build tool | maven |
   | Personality | dev-support/bin/hadoop.sh |
   | git revision | trunk / 2227bb084e60649af1ebe57013afaacaa4e5507b |
   | Default Java | Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07 |
   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07 |
   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/4/testReport/ |
   | Max. process+thread count | 1239 (vs. ulimit of 5500) |
   | modules | C: hadoop-project hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager hadoop-yarn-project hadoop-mapreduce-project hadoop-dist U: . |
   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/4/console |
   | versions | git=2.25.1 maven=3.6.3 |
   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |
   
   
   This message was automatically generated.
   
   




hadoop-yetus commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1219014046

   :broken_heart: **-1 overall**
   
   
   
   
   
   
   | Vote | Subsystem | Runtime |  Logfile | Comment |
   |:----:|----------:|--------:|:--------:|:-------:|
   | +0 :ok: |  reexec  |   1m 13s |  |  Docker mode activated.  |
   |||| _ Prechecks _ |
   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |
   | +0 :ok: |  codespell  |   0m  1s |  |  codespell was not available.  |
   | +0 :ok: |  detsecrets  |   0m  1s |  |  detect-secrets was not available.  |
   | +0 :ok: |  xmllint  |   0m  1s |  |  xmllint was not available.  |
   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |
   | -1 :x: |  test4tests  |   0m  0s |  |  The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch.  |
   |||| _ trunk Compile Tests _ |
   | +0 :ok: |  mvndep  |  15m 23s |  |  Maven dependency ordering for branch  |
   | +1 :green_heart: |  mvninstall  |  30m 16s |  |  trunk passed  |
   | +1 :green_heart: |  compile  |  27m 27s |  |  trunk passed with JDK Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1  |
   | +1 :green_heart: |  compile  |  23m 43s |  |  trunk passed with JDK Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  mvnsite  |  10m 30s |  |  trunk passed  |
   | +1 :green_heart: |  javadoc  |   6m 55s |  |  trunk passed with JDK Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1  |
   | +1 :green_heart: |  javadoc  |   6m  0s |  |  trunk passed with JDK Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  shadedclient  | 143m 54s |  |  branch has no errors when building and testing our client artifacts.  |
   |||| _ Patch Compile Tests _ |
   | +0 :ok: |  mvndep  |   0m 25s |  |  Maven dependency ordering for patch  |
   | +1 :green_heart: |  mvninstall  |   8m  1s |  |  the patch passed  |
   | +1 :green_heart: |  compile  |  24m 48s |  |  the patch passed with JDK Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1  |
   | +1 :green_heart: |  javac  |  24m 48s |  |  the patch passed  |
   | +1 :green_heart: |  compile  |  22m  5s |  |  the patch passed with JDK Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  javac  |  22m  5s |  |  the patch passed  |
   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |
   | +1 :green_heart: |  mvnsite  |  10m 23s |  |  the patch passed  |
   | +1 :green_heart: |  javadoc  |   6m 49s |  |  the patch passed with JDK Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1  |
   | +1 :green_heart: |  javadoc  |   5m 47s |  |  the patch passed with JDK Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  shadedclient  |  47m 56s |  |  patch has no errors when building and testing our client artifacts.  |
   |||| _ Other Tests _ |
   | +1 :green_heart: |  unit  |   0m 32s |  |  hadoop-project in the patch passed.  |
   | +1 :green_heart: |  unit  |  23m 46s |  |  hadoop-yarn-server-nodemanager in the patch passed.  |
   | -1 :x: |  unit  |  35m 48s | [/patch-unit-hadoop-yarn-project.txt](https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/5/artifact/out/patch-unit-hadoop-yarn-project.txt) |  hadoop-yarn-project in the patch failed.  |
   | +1 :green_heart: |  unit  | 168m  3s |  |  hadoop-mapreduce-project in the patch passed.  |
   | +1 :green_heart: |  unit  |   1m 23s |  |  hadoop-dist in the patch passed.  |
   | +1 :green_heart: |  asflicense  |   1m 29s |  |  The patch does not generate ASF License warnings.  |
   |  |   | 481m 40s |  |  |
   
   
   | Subsystem | Report/Notes |
   |----------:|:-------------|
   | Docker | ClientAPI=1.41 ServerAPI=1.41 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/5/artifact/out/Dockerfile |
   | GITHUB PR | https://github.com/apache/hadoop/pull/4415 |
   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient codespell detsecrets xmllint |
   | uname | Linux 1f6451056285 4.15.0-191-generic #202-Ubuntu SMP Thu Aug 4 01:49:29 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux |
   | Build tool | maven |
   | Personality | dev-support/bin/hadoop.sh |
   | git revision | trunk / b4d622b5e7b1ccb6bb3d00004be79734df776a40 |
   | Default Java | Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07 |
   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Private Build-11.0.15+10-Ubuntu-0ubuntu0.20.04.1 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_312-8u312-b07-0ubuntu1~20.04-b07 |
   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/5/testReport/ |
   | Max. process+thread count | 1240 (vs. ulimit of 5500) |
   | modules | C: hadoop-project hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager hadoop-yarn-project hadoop-mapreduce-project hadoop-dist U: . |
   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/5/console |
   | versions | git=2.25.1 maven=3.6.3 |
   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |
   
   
   This message was automatically generated.
   
   




saintstack commented on code in PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#discussion_r951842158


##########
hadoop-project/pom.xml:
##########
@@ -167,7 +167,7 @@
 
     <!

snmvaughan commented on code in PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#discussion_r951926355


##########
hadoop-project/pom.xml:
##########
@@ -167,7 +167,7 @@
 
     <!

steveloughran commented on code in PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#discussion_r952564659


##########
hadoop-project/pom.xml:
##########
@@ -167,7 +167,7 @@
 
     <!

snmvaughan commented on code in PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#discussion_r953020342


##########
hadoop-project/pom.xml:
##########
@@ -167,7 +167,7 @@
 
     <!

snmvaughan commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1225834697

   I've rebased this pull request to pick-up the Surefire upgrade to 3.0.0-M7 from [HADOOP-18417](https://issues.apache.org/jira/browse/HADOOP-18417)




snmvaughan commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1280041475

   Rebased and re-running tests.




hadoop-yetus commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1280351523

   :broken_heart: **-1 overall**
   
   
   
   
   
   
   | Vote | Subsystem | Runtime |  Logfile | Comment |
   |:----:|----------:|--------:|:--------:|:-------:|
   | +0 :ok: |  reexec  |   0m 58s |  |  Docker mode activated.  |
   |||| _ Prechecks _ |
   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |
   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |
   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |
   | +0 :ok: |  xmllint  |   0m  0s |  |  xmllint was not available.  |
   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |
   | -1 :x: |  test4tests  |   0m  0s |  |  The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch.  |
   |||| _ trunk Compile Tests _ |
   | +0 :ok: |  mvndep  |  15m 40s |  |  Maven dependency ordering for branch  |
   | +1 :green_heart: |  mvninstall  |  25m 32s |  |  trunk passed  |
   | +1 :green_heart: |  compile  |  23m 35s |  |  trunk passed with JDK Ubuntu-11.0.16+8-post-Ubuntu-0ubuntu120.04  |
   | +1 :green_heart: |  compile  |  20m 51s |  |  trunk passed with JDK Private Build-1.8.0_342-8u342-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  mvnsite  |   9m 39s |  |  trunk passed  |
   | +1 :green_heart: |  javadoc  |   5m 51s |  |  trunk passed with JDK Ubuntu-11.0.16+8-post-Ubuntu-0ubuntu120.04  |
   | +1 :green_heart: |  javadoc  |   5m 17s |  |  trunk passed with JDK Private Build-1.8.0_342-8u342-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  shadedclient  | 126m 44s |  |  branch has no errors when building and testing our client artifacts.  |
   |||| _ Patch Compile Tests _ |
   | +0 :ok: |  mvndep  |   0m 29s |  |  Maven dependency ordering for patch  |
   | +1 :green_heart: |  mvninstall  |   7m 18s |  |  the patch passed  |
   | +1 :green_heart: |  compile  |  22m 42s |  |  the patch passed with JDK Ubuntu-11.0.16+8-post-Ubuntu-0ubuntu120.04  |
   | +1 :green_heart: |  javac  |  22m 42s |  |  the patch passed  |
   | +1 :green_heart: |  compile  |  20m 56s |  |  the patch passed with JDK Private Build-1.8.0_342-8u342-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  javac  |  20m 56s |  |  the patch passed  |
   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |
   | +1 :green_heart: |  mvnsite  |   8m 59s |  |  the patch passed  |
   | +1 :green_heart: |  javadoc  |   5m 55s |  |  the patch passed with JDK Ubuntu-11.0.16+8-post-Ubuntu-0ubuntu120.04  |
   | +1 :green_heart: |  javadoc  |   5m  2s |  |  the patch passed with JDK Private Build-1.8.0_342-8u342-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  shadedclient  |  42m 18s |  |  patch has no errors when building and testing our client artifacts.  |
   |||| _ Other Tests _ |
   | +1 :green_heart: |  unit  |   0m 31s |  |  hadoop-project in the patch passed.  |
   | +1 :green_heart: |  unit  | 248m 12s |  |  hadoop-yarn-project in the patch passed.  |
   | +1 :green_heart: |  unit  | 168m  7s |  |  hadoop-mapreduce-project in the patch passed.  |
   | +1 :green_heart: |  unit  |   1m 30s |  |  hadoop-dist in the patch passed.  |
   | +1 :green_heart: |  asflicense  |   1m 50s |  |  The patch does not generate ASF License warnings.  |
   |  |   | 643m 44s |  |  |
   
   
   | Subsystem | Report/Notes |
   |----------:|:-------------|
   | Docker | ClientAPI=1.41 ServerAPI=1.41 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/8/artifact/out/Dockerfile |
   | GITHUB PR | https://github.com/apache/hadoop/pull/4415 |
   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient codespell detsecrets xmllint |
   | uname | Linux 34ff1d73d2a3 4.15.0-191-generic #202-Ubuntu SMP Thu Aug 4 01:49:29 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux |
   | Build tool | maven |
   | Personality | dev-support/bin/hadoop.sh |
   | git revision | trunk / 26e04a61d7d853637435a4963d965c5facd4ca6e |
   | Default Java | Private Build-1.8.0_342-8u342-b07-0ubuntu1~20.04-b07 |
   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.16+8-post-Ubuntu-0ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_342-8u342-b07-0ubuntu1~20.04-b07 |
   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/8/testReport/ |
   | Max. process+thread count | 2775 (vs. ulimit of 5500) |
   | modules | C: hadoop-project hadoop-yarn-project hadoop-mapreduce-project hadoop-dist U: . |
   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/8/console |
   | versions | git=2.25.1 maven=3.6.3 |
   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |
   
   
   This message was automatically generated.
   
   




hadoop-yetus commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1302827666

   :broken_heart: **-1 overall**
   
   
   
   
   
   
   | Vote | Subsystem | Runtime |  Logfile | Comment |
   |:----:|----------:|--------:|:--------:|:-------:|
   | +0 :ok: |  reexec  |   0m 59s |  |  Docker mode activated.  |
   |||| _ Prechecks _ |
   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |
   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |
   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |
   | +0 :ok: |  xmllint  |   0m  0s |  |  xmllint was not available.  |
   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |
   | -1 :x: |  test4tests  |   0m  0s |  |  The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch.  |
   |||| _ trunk Compile Tests _ |
   | +0 :ok: |  mvndep  |  15m 30s |  |  Maven dependency ordering for branch  |
   | +1 :green_heart: |  mvninstall  |  25m 41s |  |  trunk passed  |
   | +1 :green_heart: |  compile  |  23m 32s |  |  trunk passed with JDK Ubuntu-11.0.16+8-post-Ubuntu-0ubuntu120.04  |
   | +1 :green_heart: |  compile  |  20m 47s |  |  trunk passed with JDK Private Build-1.8.0_342-8u342-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  mvnsite  |   9m 12s |  |  trunk passed  |
   | +1 :green_heart: |  javadoc  |   5m 49s |  |  trunk passed with JDK Ubuntu-11.0.16+8-post-Ubuntu-0ubuntu120.04  |
   | +1 :green_heart: |  javadoc  |   5m  2s |  |  trunk passed with JDK Private Build-1.8.0_342-8u342-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  shadedclient  | 125m 42s |  |  branch has no errors when building and testing our client artifacts.  |
   |||| _ Patch Compile Tests _ |
   | +0 :ok: |  mvndep  |   0m 32s |  |  Maven dependency ordering for patch  |
   | +1 :green_heart: |  mvninstall  |   7m 25s |  |  the patch passed  |
   | +1 :green_heart: |  compile  |  22m 50s |  |  the patch passed with JDK Ubuntu-11.0.16+8-post-Ubuntu-0ubuntu120.04  |
   | +1 :green_heart: |  javac  |  22m 50s |  |  the patch passed  |
   | +1 :green_heart: |  compile  |  20m 46s |  |  the patch passed with JDK Private Build-1.8.0_342-8u342-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  javac  |  20m 46s |  |  the patch passed  |
   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |
   | +1 :green_heart: |  mvnsite  |   9m  0s |  |  the patch passed  |
   | +1 :green_heart: |  javadoc  |   6m  4s |  |  the patch passed with JDK Ubuntu-11.0.16+8-post-Ubuntu-0ubuntu120.04  |
   | +1 :green_heart: |  javadoc  |   5m  0s |  |  the patch passed with JDK Private Build-1.8.0_342-8u342-b07-0ubuntu1~20.04-b07  |
   | +1 :green_heart: |  shadedclient  |  42m  4s |  |  patch has no errors when building and testing our client artifacts.  |
   |||| _ Other Tests _ |
   | +1 :green_heart: |  unit  |   0m 40s |  |  hadoop-project in the patch passed.  |
   | +1 :green_heart: |  unit  | 248m 10s |  |  hadoop-yarn-project in the patch passed.  |
   | +1 :green_heart: |  unit  | 167m 46s |  |  hadoop-mapreduce-project in the patch passed.  |
   | +1 :green_heart: |  unit  |   1m 22s |  |  hadoop-dist in the patch passed.  |
   | +1 :green_heart: |  asflicense  |   1m 37s |  |  The patch does not generate ASF License warnings.  |
   |  |   | 641m 49s |  |  |
   
   
   | Subsystem | Report/Notes |
   |----------:|:-------------|
   | Docker | ClientAPI=1.41 ServerAPI=1.41 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/9/artifact/out/Dockerfile |
   | GITHUB PR | https://github.com/apache/hadoop/pull/4415 |
   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient codespell detsecrets xmllint |
   | uname | Linux 60d706790f22 4.15.0-191-generic #202-Ubuntu SMP Thu Aug 4 01:49:29 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux |
   | Build tool | maven |
   | Personality | dev-support/bin/hadoop.sh |
   | git revision | trunk / ebcd845988f18b68bbfd8f86a33b8d80c134c6db |
   | Default Java | Private Build-1.8.0_342-8u342-b07-0ubuntu1~20.04-b07 |
   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.16+8-post-Ubuntu-0ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_342-8u342-b07-0ubuntu1~20.04-b07 |
   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/9/testReport/ |
   | Max. process+thread count | 2717 (vs. ulimit of 5500) |
   | modules | C: hadoop-project hadoop-yarn-project hadoop-mapreduce-project hadoop-dist U: . |
   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-4415/9/console |
   | versions | git=2.25.1 maven=3.6.3 |
   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |
   
   
   This message was automatically generated.
   
   




steveloughran merged PR #4415:
URL: https://github.com/apache/hadoop/pull/4415




in trunk, backport once we are happy that it is stable

snmvaughan opened a new pull request, #5337:
URL: https://github.com/apache/hadoop/pull/5337

   
   ### Description of PR
   
   Backport from trunk.  This matches the changes made to trunk that allow for parallel building of a distribution, and has been in use since November of last year.
   
   ### How was this patch tested?
   
   The patch was tested using the Hadoop development environment docker image.  In addition to verifying the distribution, I've compared the published dependencies to verify that the changes are limited to the modified modules.  The changes allow Maven to determine a correct build graph for safely performing parallel builds.
   
   ### For code changes:
   
   - [X] Does the title or this PR starts with the corresponding JIRA issue id (e.g. 'HADOOP-17799. Your PR title ...')?
   - [ ] Object storage: have the integration tests been executed and the endpoint declared according to the connector-specific documentation?
   - [ ] If adding new dependencies to the code, are these dependencies licensed in a way that is compatible for inclusion under [ASF 2.0](http://www.apache.org/legal/resolved.html#category-a)?
   - [ ] If applicable, have you updated the `LICENSE`, `LICENSE-binary`, `NOTICE-binary` files?
   
   




ndimiduk commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1413593119

   Woo!




steveloughran commented on PR #4415:
URL: https://github.com/apache/hadoop/pull/4415#issuecomment-1413611054

   @ndimiduk woo?




hadoop-yetus commented on PR #5337:
URL: https://github.com/apache/hadoop/pull/5337#issuecomment-1439513930

   :broken_heart: **-1 overall**
   
   
   
   
   
   
   | Vote | Subsystem | Runtime |  Logfile | Comment |
   |:----:|----------:|--------:|:--------:|:-------:|
   | +0 :ok: |  reexec  |   1m 17s |  |  Docker mode activated.  |
   |||| _ Prechecks _ |
   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |
   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |
   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |
   | +0 :ok: |  xmllint  |   0m  0s |  |  xmllint was not available.  |
   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |
   | -1 :x: |  test4tests  |   0m  0s |  |  The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch.  |
   |||| _ branch-3.3 Compile Tests _ |
   | +0 :ok: |  mvndep  |  15m  0s |  |  Maven dependency ordering for branch  |
   | -1 :x: |  mvninstall  |  27m 15s | [/branch-mvninstall-root.txt](https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-5337/2/artifact/out/branch-mvninstall-root.txt) |  root in branch-3.3 failed.  |
   | +1 :green_heart: |  compile  |  18m 15s |  |  branch-3.3 passed  |
   | +1 :green_heart: |  mvnsite  |   8m  7s |  |  branch-3.3 passed  |
   | +1 :green_heart: |  javadoc  |   4m 24s |  |  branch-3.3 passed  |
   | +1 :green_heart: |  shadedclient  |  99m  4s |  |  branch has no errors when building and testing our client artifacts.  |
   |||| _ Patch Compile Tests _ |
   | +0 :ok: |  mvndep  |   0m 29s |  |  Maven dependency ordering for patch  |
   | +1 :green_heart: |  mvninstall  |  10m  9s |  |  the patch passed  |
   | +1 :green_heart: |  compile  |  17m 17s |  |  the patch passed  |
   | +1 :green_heart: |  javac  |  17m 17s |  |  the patch passed  |
   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |
   | +1 :green_heart: |  mvnsite  |   7m 45s |  |  the patch passed  |
   | +1 :green_heart: |  javadoc  |   4m 27s |  |  the patch passed  |
   | +1 :green_heart: |  shadedclient  |  38m 54s |  |  patch has no errors when building and testing our client artifacts.  |
   |||| _ Other Tests _ |
   | +1 :green_heart: |  unit  |   0m 22s |  |  hadoop-project in the patch passed.  |
   | -1 :x: |  unit  | 217m 34s | [/patch-unit-hadoop-yarn-project.txt](https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-5337/2/artifact/out/patch-unit-hadoop-yarn-project.txt) |  hadoop-yarn-project in the patch passed.  |
   | +1 :green_heart: |  unit  | 156m 58s |  |  hadoop-mapreduce-project in the patch passed.  |
   | +1 :green_heart: |  unit  |   0m 50s |  |  hadoop-dist in the patch passed.  |
   | +1 :green_heart: |  asflicense  |   1m 15s |  |  The patch does not generate ASF License warnings.  |
   |  |   | 546m 22s |  |  |
   
   
   | Reason | Tests |
   |-------:|:------|
   | Failed junit tests | hadoop.yarn.server.nodemanager.amrmproxy.TestFederationInterceptor |
   
   
   | Subsystem | Report/Notes |
   |----------:|:-------------|
   | Docker | ClientAPI=1.42 ServerAPI=1.42 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-5337/2/artifact/out/Dockerfile |
   | GITHUB PR | https://github.com/apache/hadoop/pull/5337 |
   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient codespell detsecrets xmllint |
   | uname | Linux be470f3535b4 4.15.0-200-generic #211-Ubuntu SMP Thu Nov 24 18:16:04 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux |
   | Build tool | maven |
   | Personality | dev-support/bin/hadoop.sh |
   | git revision | branch-3.3 / f548c36c44b2bdd27d2084001216487da970db1d |
   | Default Java | Private Build-1.8.0_352-8u352-ga-1~18.04-b08 |
   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-5337/2/testReport/ |
   | Max. process+thread count | 1641 (vs. ulimit of 5500) |
   | modules | C: hadoop-project hadoop-yarn-project hadoop-mapreduce-project hadoop-dist U: . |
   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-5337/2/console |
   | versions | git=2.17.1 maven=3.6.0 |
   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |
   
   
   This message was automatically generated.
   
   




