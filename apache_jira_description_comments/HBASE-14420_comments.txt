Of note, adding timeouts on sessions or doing it at the test class level using junit Rules converts some zombies into test failures but timeouts do not apply to failures during setup and takedown. Other test types 'finish' but leave behind hanging threads (Our [~nkeywal]'s dumping of left-over threads is a real help here).

Over w/e, after the TestFastFail* and balancer changes, my test runs have settled and mostly pass now without making zombies. This latter is odd because I was seeing zombies being dropped on friday. There is an issue where the scala test are failing silently and surefire is crapping out half-way through the hbase-server build (but hopefully 2.18.1 fixes the latter). Will keep on with the runs.

Looking at recent zombie run on apache, I see these failures in https://builds.apache.org/view/H-L/view/HBase/job/PreCommit-HBASE-Build/15577/

{code}
Hanging test : org.apache.hadoop.hbase.security.access.TestWithDisabledAuthorization
Hanging test : org.apache.hadoop.hbase.snapshot.TestSnapshotClientRetries
Hanging test : org.apache.hadoop.hbase.security.access.TestScanEarlyTermination
Hanging test : org.apache.hadoop.hbase.replication.regionserver.TestRegionReplicaReplicationEndpoint
Hanging test : org.apache.hadoop.hbase.security.visibility.TestVisibilityLablesWithGroups
Hanging test : org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite
Hanging test : org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat
Hanging test : org.apache.hadoop.hbase.replication.regionserver.TestRegionReplicaReplicationEndpointNoMaster
Hanging test : org.apache.hadoop.hbase.security.access.TestAccessController2
Hanging test : org.apache.hadoop.hbase.replication.regionserver.TestReplicationWALReaderManager
Hanging test : org.apache.hadoop.hbase.mapreduce.TestSyncTable
Hanging test : org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithACL
Hanging test : org.apache.hadoop.hbase.mapreduce.TestTableMapReduce
Hanging test : org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFiles
Hanging test : org.apache.hadoop.hbase.TestZooKeeper
{code}

On survey, it is a mix of unable to connect to server hosting hbase:meta, master is missing, jmxcachebuster is still running...and other logs with no apparent problems as to what is going on. Let me see if I can get some zombies to reproduce locally. Meantime going to up the priority handlers to default. It 'might' help with some of the failures above.

On my test rig, got these failures in recent runs:

Failed tests:
  TestStochasticLoadBalancer2.testRegionReplicasOnMidClusterHighReplication:73->BalancerTestBase.testWithCluster:422->BalancerTestBase.testWithCluster:450->BalancerTestBase.assertRegionReplicaPlacement:225 Two or more region replicas are hosted on the same host after balance

Got this again too...

TestHttpServerLifecycle.testStoppedServerIsNotAlive:97->HttpServerFunctionalTest.stop:195 Â» TestTimedOut

Otherwise stuff is generally passing.

bq. Otherwise stuff is generally passing....

So, now focus moves back to apache build.

Looking at recent builds, not bad but then this on ubuntu-1 doing HBASE-14407 NotServingRegion: hbase region closed forever against branch-1.2.

kalashnikov:hbase.git stack$ python ./dev-support/findHangingTests.py https://builds.apache.org/view/H-L/view/HBase/job/PreCommit-HBASE-Build/15635/consoleFull
Fetching the console output from the URL
Printing hanging tests
Hanging test : org.apache.hadoop.hbase.security.access.TestWithDisabledAuthorization
Hanging test : org.apache.hadoop.hbase.security.access.TestAccessController2
Hanging test : org.apache.hadoop.hbase.security.access.TestScanEarlyTermination
Hanging test : org.apache.hadoop.hbase.master.balancer.TestStochasticLoadBalancer
Printing Failing tests
Failing test : org.apache.hadoop.hbase.client.TestSnapshotCloneIndependence



So, after some git bisecting on branch-1, I see that HBASE-14290 "Spin up less threads in tests" made it so TestWithDisabledAuthorization took 15minutes to complete where it usually completed in seconds... also left around a zombie trying to do setup against cluster. The test is fine in trunk w/ same patch applied. The patch in HBASE-14378 Get TestAccessController* passing again on branch-1 actually addresses TestWithDisabledAuthorization trying to give it more resources but I tried just that portion of the patch and it doesn't help. Looking more at what HBASE-14290 wrought



Oh, there are two tests named TestWithDisabledAuthorization -- one in visibilty and the other in access. My earlier patch addressed one only. If I up handlers on both, no more zombies on branch-1 for TestWithDisabledAuthorization... Let me look at the other zombie makers... maybe they are doubled toooooooo.

Reopening HBASE-14378 to apply a version of the patch that was over there. I'd closed it because wasn't sure there a benefit. Now I am. Should help w/ branch-1 zombie attack.

Committing this linked issue should help w/ branch-1 zombies.

Back to my rig running against master, this has failed twice for me:

Failed tests:
  TestRegionPlacement.testRegionPlacement:163->killRandomServerAndVerifyAssignment:240 Region {ENCODED => 811be453eeaac4c1a0c3f079addbf14e, NAME => 'testRegionAssignment,\x01\x01\x01,1443049910229.811be453eeaac4c1a0c3f079addbf14e.', STARTKEY => '\x01\x01\x01', ENDKEY => '\x02\x02\x02'} not present on any of the expected servers


This is for a feature that does not work, favored nodes. Let me turn off the test. Can be reenabled when it gets finished off.

Rig is running smooth now. Passes all the time (6 servers building master).

TestVisibilityLabelsWithACL failed here https://builds.apache.org/job/PreCommit-HBASE-Build/15754//console

Master runs on my rig are stable now. On to branch-1 runs.

Just saw these over in https://issues.apache.org/jira/browse/HBASE-14515

kalashnikov:hbase.git.commit stack$ python ./dev-support/findHangingTests.py https://builds.apache.org/job/PreCommit-HBASE-Build/15821//consoleText
Fetching the console output from the URL
Printing hanging tests
Hanging test : org.apache.hadoop.hbase.mapreduce.TestTableSnapshotInputFormat
Hanging test : org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat
Hanging test : org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFiles
Printing Failing tests


These seem to spin up loads of threads and processes:

Hanging test : org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelReplicationWithExpAsString
Hanging test : org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithDistributedLogReplay


Little report on last 20 patch runs created by doing:

{code}
 for i in `seq 15839 15859`; do python ./dev-support/findHangingTests.py https://builds.apache.org/view/H-L/view/HBase/job/PreCommit-HBASE-Build/$i/consoleText >> /tmp/report.txt ; done
{code}

4 of 20 passed
1 failed because patch did not apply
1 was a 0.98 build that failed a DLR test
4 had hanging tests/zombies.
Others were test failures... Flakies

Hanger incidence is falling but not cured yet.

Master and branch-1 pass on my internal rig reliably without leaving zombies.

I'm now into a new phase of zombie stomping. I am just going to just disable hangers from here on out if I can't find anything obvious inside a few minutes (spent a good while on TestHFileOutputFormat2 yesterday..... )


Going over the last 40 patch builds:

TestReplicationShell hangs three times. Was added to master only. HBASE-13084 adds it by running all shell commands again plus the new replication_admin_test.rb command. I'm going to disable it for now.  HBASE-14561.

TestHFileOutputFormat2 failed 5 times in last 40 runs. I spent time on it yesterday. Seems to be a reliance on test order but was having networking issues which complicated my being able to do diagnosis....  It seems like an ambitious amount of work to get done in a unit test:

{code}
 * Simple test for {@link CellSortReducer} and {@link HFileOutputFormat2}.
 * Sets up and runs a mapreduce job that writes hfile output.
 * Creates a few inner classes to implement splits and an inputformat that
 * emits keys and values like those of {@link PerformanceEvaluation}.
{code}

Was added a good while ago, here:

commit e4f8a7419fb4bd0102eaf91e9747de6261e0b5c5
Author: jxiang <jxiang@unknown>
Date:   Fri Feb 21 20:39:21 2014 +0000

    HBASE-10526 Using Cell instead of KeyValue in HFileOutputFormat

    git-svn-id: https://svn.apache.org/repos/asf/hbase/trunk@1570702 13f79535-47bb-0310-9956-ffa450edef68

I'm just going to disable it until someone wants to work on it.

Here is the list of all test failures and their counts:

   2 Hanging test : org.apache.hadoop.hbase.TestNodeHealthCheckChore
   1 Hanging test : org.apache.hadoop.hbase.TestPartialResultsFromClientSide
   2 Hanging test : org.apache.hadoop.hbase.client.TestFromClientSide
   1 Hanging test : org.apache.hadoop.hbase.client.TestFromClientSideWithCoprocessor
   1 Hanging test : org.apache.hadoop.hbase.client.TestReplicasClient
   3 Hanging test : org.apache.hadoop.hbase.client.TestReplicationShell
   1 Hanging test : org.apache.hadoop.hbase.constraint.TestConstraint
   1 Hanging test : org.apache.hadoop.hbase.filter.TestFuzzyRowFilterEndToEnd
   1 Hanging test : org.apache.hadoop.hbase.io.hfile.TestCacheOnWrite
   2 Hanging test : org.apache.hadoop.hbase.mapreduce.TestCopyTable
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat
   5 Hanging test : org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat2
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestMultiTableInputFormat
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestTableInputFormat
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestTableInputFormatScan2
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestTableMapReduce
   1 Hanging test : org.apache.hadoop.hbase.replication.TestMasterReplication
   1 Hanging test : org.apache.hadoop.hbase.replication.TestReplicationKillMasterRSCompressed
   1 Hanging test : org.apache.hadoop.hbase.replication.regionserver.TestRegionReplicaReplicationEndpoint
   1 Hanging test : org.apache.hadoop.hbase.replication.regionserver.TestRegionReplicaReplicationEndpointNoMaster
   1 Hanging test : org.apache.hadoop.hbase.replication.regionserver.TestReplicationWALReaderManager
   1 Hanging test : org.apache.hadoop.hbase.security.access.TestAccessController
   1 Hanging test : org.apache.hadoop.hbase.security.access.TestCellACLs
   1 Hanging test : org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelReplicationWithExpAsString
   1 Hanging test : org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithDeletes
   1 Hanging test : org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithDistributedLogReplay
   1 Hanging test : org.apache.hadoop.hbase.snapshot.TestExportSnapshot
   1 Hanging test : org.apache.hadoop.hbase.snapshot.TestMobExportSnapshot
   1 Hanging test : org.apache.hadoop.hbase.snapshot.TestMobFlushSnapshotFromClient
   1 Hanging test : org.apache.hadoop.hbase.snapshot.TestMobSecureExportSnapshot
   1 Hanging test : org.apache.hadoop.hbase.snapshot.TestSecureExportSnapshot




A non-fix just to see how patch build is doing. It is currently quiet.

Submitting a non-patch

Looking at trunk builds, I see these failures in last twenty builds:

{code}
   2 Hanging test : org.apache.hadoop.hbase.TestMovedRegionsCleaner
   2 Hanging test : org.apache.hadoop.hbase.TestMultiVersions
   2 Hanging test : org.apache.hadoop.hbase.TestPartialResultsFromClientSide
   2 Hanging test : org.apache.hadoop.hbase.backup.TestHFileArchiving
  10 Hanging test : org.apache.hadoop.hbase.client.TestFromClientSide
   8 Hanging test : org.apache.hadoop.hbase.client.TestFromClientSideWithCoprocessor
   2 Hanging test : org.apache.hadoop.hbase.client.TestReplicasClient
   2 Hanging test : org.apache.hadoop.hbase.http.TestHttpServer
   2 Hanging test : org.apache.hadoop.hbase.mapred.TestMultiTableSnapshotInputFormat
   4 Hanging test : org.apache.hadoop.hbase.mapred.TestTableSnapshotInputFormat
   2 Hanging test : org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat
   4 Hanging test : org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat2
   2 Hanging test : org.apache.hadoop.hbase.mapreduce.TestImportExport
   2 Hanging test : org.apache.hadoop.hbase.mapreduce.TestSecureLoadIncrementalHFilesSplitRecovery
   2 Hanging test : org.apache.hadoop.hbase.master.TestDistributedLogSplitting
   4 Hanging test : org.apache.hadoop.hbase.master.TestSplitLogManager
   2 Hanging test : org.apache.hadoop.hbase.master.TestTableLockManager
   2 Hanging test : org.apache.hadoop.hbase.master.TestWarmupRegion
   2 Hanging test : org.apache.hadoop.hbase.master.balancer.TestStochasticLoadBalancer
   2 Hanging test : org.apache.hadoop.hbase.master.balancer.TestStochasticLoadBalancer2
   4 Hanging test : org.apache.hadoop.hbase.master.procedure.TestMasterFailoverWithProcedures
   1 Hanging test : org.apache.hadoop.hbase.regionserver.TestDefaultCompactSelection
   2 Hanging test : org.apache.hadoop.hbase.regionserver.TestMobStoreScanner
   2 Hanging test : org.apache.hadoop.hbase.replication.regionserver.TestRegionReplicaReplicationEndpoint
   2 Hanging test : org.apache.hadoop.hbase.replication.regionserver.TestReplicationWALReaderManager
   2 Hanging test : org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithDeletes
   2 Hanging test : org.apache.hadoop.hbase.util.TestHBaseFsck
   2 Hanging test : org.apache.hadoop.hbase.util.TestMiniClusterLoadEncoded
   2 Hanging test : org.apache.hadoop.hbase.util.TestMiniClusterLoadParallel
   2 Hanging test : org.apache.hadoop.hbase.util.TestRegionSplitter
   2 Hanging test : org.apache.hadoop.hbase.wal.TestWALFiltering
   2 Hanging test : org.apache.hadoop.hbase.wal.TestWALSplit
   2 Hanging test : org.apache.hadoop.hbase.zookeeper.TestHQuorumPeer
{code}

Here is branch-1.1 builds:

{code}
   1 Hanging test : org.apache.hadoop.hbase.TestPartialResultsFromClientSide
   1 Hanging test : org.apache.hadoop.hbase.client.TestAdmin1
   1 Hanging test : org.apache.hadoop.hbase.client.TestCloneSnapshotFromClient
   1 Hanging test : org.apache.hadoop.hbase.client.TestFromClientSideWithCoprocessor
   1 Hanging test : org.apache.hadoop.hbase.client.TestHCM
   1 Hanging test : org.apache.hadoop.hbase.client.TestRestoreSnapshotFromClient
   1 Hanging test : org.apache.hadoop.hbase.mapred.TestTableSnapshotInputFormat
   1 Hanging test : org.apache.hadoop.hbase.quotas.TestQuotaAdmin
   1 Hanging test : org.apache.hadoop.hbase.quotas.TestQuotaThrottle
   1 Hanging test : org.apache.hadoop.hbase.regionserver.TestJoinedScanners
   1 Hanging test : org.apache.hadoop.hbase.regionserver.TestTags
   1 Hanging test : org.apache.hadoop.hbase.regionserver.TestZKLessSplitOnCluster
   1 Hanging test : org.apache.hadoop.hbase.regionserver.wal.TestLogRolling
   1 Hanging test : org.apache.hadoop.hbase.replication.TestMasterReplication
   1 Hanging test : org.apache.hadoop.hbase.replication.TestReplicationSmallTests
   1 Hanging test : org.apache.hadoop.hbase.replication.regionserver.TestRegionReplicaReplicationEndpoint
   1 Hanging test : org.apache.hadoop.hbase.replication.regionserver.TestReplicationWALReaderManager
   1 Hanging test : org.apache.hadoop.hbase.security.access.TestAccessController
   1 Hanging test : org.apache.hadoop.hbase.security.access.TestAccessController2
   1 Hanging test : org.apache.hadoop.hbase.security.access.TestTablePermissions
   1 Hanging test : org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsReplication
   1 Hanging test : org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithDefaultVisLabelService
   2 Hanging test : org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithDeletes
   1 Hanging test : org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithDistributedLogReplay
{code}



{color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12765252/none_fix.txt
  against master branch at commit 0ea1f8122709302ee19279aaa438b37dac30c25b.
  ATTACHMENT ID: 12765252

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/15886//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15886//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/15886//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/15886//console

This message is automatically generated.

Looks like we are getting somewhere with my no-change patch. Let me rerun.

{color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12765316/none_fix.txt
  against master branch at commit 8fd2d6507019f157427c388928d850a65076b9c0.
  ATTACHMENT ID: 12765316

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/15895//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15895//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/15895//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/15895//console

This message is automatically generated.

Two green runs in a row. Try for another.

So patch build is tending blue now (it shows red on some recent runs because no test was included but all tests passed). Trunk build just passed. Am running a new one. Will now look to the 1.2 builds.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12765406/none_fix%20%281%29.txt
  against master branch at commit d80c7e95ec7ef4811b83224a87ee6883f67f2d62.
  ATTACHMENT ID: 12765406

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

     {color:red}-1 core zombie tests{color}.  There are 1 zombie test(s): 	at org.apache.activemq.broker.BrokerTest.testTransactedSend(BrokerTest.java:425)

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/15900//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15900//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/15900//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/15900//console

This message is automatically generated.

Says:

Fetching https://builds.apache.org/job/PreCommit-HBASE-Build/15900//consoleText
Building remotely on ubuntu-1 (docker Ubuntu ubuntu ubuntu1) in workspace /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build
Testing patch for HBASE-14420.
Testing patch on branch master.
[INFO] Apache HBase ...................................... SUCCESS [2.872s]
[INFO] Apache HBase - Checkstyle ......................... SUCCESS [0.447s]
[INFO] Apache HBase - Resource Bundle .................... SUCCESS [0.141s]
[INFO] Apache HBase - Annotations ........................ SUCCESS [0.760s]
[INFO] Apache HBase - Protocol ........................... SUCCESS [11.245s]
[INFO] Apache HBase - Common ............................. SUCCESS [1:30.837s]
[INFO] Apache HBase - Procedure .......................... SUCCESS [1:55.004s]
[INFO] Apache HBase - Client ............................. SUCCESS [1:22.926s]
[INFO] Apache HBase - Hadoop Compatibility ............... SUCCESS [7.387s]
[INFO] Apache HBase - Hadoop Two Compatibility ........... SUCCESS [7.517s]
[INFO] Apache HBase - Prefix Tree ........................ SUCCESS [10.202s]
[INFO] Apache HBase - Server ............................. SUCCESS [1:52:57.190s]
[INFO] Apache HBase - Testing Util ....................... SUCCESS [1.140s]
[INFO] Apache HBase - Thrift ............................. SUCCESS [3:24.378s]
[INFO] Apache HBase - Shell .............................. SUCCESS [4:10.394s]
[INFO] Apache HBase - Integration Tests .................. SUCCESS [1.717s]
[INFO] Apache HBase - Examples ........................... SUCCESS [10.251s]
[INFO] Apache HBase - Rest ............................... SUCCESS [9:11.046s]
[INFO] Apache HBase - External Block Cache ............... SUCCESS [0.906s]
[INFO] Apache HBase - Assembly ........................... SUCCESS [1.704s]
[INFO] Apache HBase - Shaded ............................. SUCCESS [0.087s]
[INFO] Apache HBase - Shaded - Client .................... SUCCESS [0.334s]
[INFO] Apache HBase - Shaded - Server .................... SUCCESS [0.564s]
[INFO] Apache HBase - Spark .............................. SUCCESS [1:20.126s]
Printing hanging tests
Printing Failing tests

Activemq is the zombie. Need to figure how to report on our own zombies (another issue).

Retry

Report on last 10 runs of 1.2 hanging tests with 1.7 jvm:

   1 Hanging test : org.apache.hadoop.hbase.client.TestShell
   1 Hanging test : org.apache.hadoop.hbase.mapred.TestMultiTableSnapshotInputFormat
   1 Hanging test : org.apache.hadoop.hbase.mapred.TestTableMapReduce
   1 Hanging test : org.apache.hadoop.hbase.mapred.TestTableSnapshotInputFormat
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestCopyTable
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestImportTSVWithVisibilityLabels
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestTableSnapshotInputFormat
   2 Hanging test : org.apache.hadoop.hbase.security.access.TestCellACLs





{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12765453/none_fix.txt
  against master branch at commit e1fd3526b130d669ad02e2c55a91299f0bd4c15d.
  ATTACHMENT ID: 12765453

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

     {color:red}-1 core zombie tests{color}.  There are 1 zombie test(s): 	at org.apache.activemq.artemis.tests.util.ActiveMQTestBase.sendMessages(ActiveMQTestBase.java:1558)
	at org.apache.activemq.artemis.tests.integration.cluster.failover.BackupSyncJournalTest.testReserveFileIdValuesOnBackup(BackupSyncJournalTest.java:96)

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/15905//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15905//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/15905//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/15905//console

This message is automatically generated.

Retry. It looks like my test-patch.sh zombie finding didn't work...

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12765638/none_fix.txt
  against master branch at commit 7e30436e3fa84525b85b05b9e23cb01b2ada7c12.
  ATTACHMENT ID: 12765638

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

     {color:red}-1 core zombie tests{color}.  There are 2 zombie test(s): 	at org.apache.camel.test.junit4.CamelTestSupport.assertMockEndpointsSatisfied(CamelTestSupport.java:742)
	at org.apache.camel.component.file.remote.FileToFtpsImplicitSSLWithoutClientAuthTest.testFromFileToFtp(FileToFtpsImplicitSSLWithoutClientAuthTest.java:45)
	at org.apache.camel.component.jetty.jettyproducer.HttpJettyProducerRecipientListCustomThreadPoolTest.testRecipientList(HttpJettyProducerRecipientListCustomThreadPoolTest.java:40)

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/15919//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15919//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/15919//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/15919//console

This message is automatically generated.

TestSnapshotCloneIndependence fails pretty regularly: https://builds.apache.org/job/HBase-TRUNK/6887/testReport/org.apache.hadoop.hbase.client/TestSnapshotCloneIndependence/testOfflineSnapshotDeleteIndependent/history/

Want me to take a look ? I've got a little bit of time.

Thanks [~eclark]... I pinged the fellows responsible but they might take their time. I've not spent time on it. Its a fat test. Do we need it at all?

Yeah I think it's a decent test ( though looking at it there are some issues. )

Retrying the no fix patch.

Here is report on what  failed in last ten hadoopqa runs:

   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestImportExport
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestWALPlayer
   1 Hanging test : org.apache.hadoop.hbase.regionserver.TestHRegionFileSystem
   1 Hanging test : org.apache.hadoop.hbase.util.TestHBaseFsck
   1 Hanging test : org.apache.hadoop.hbase.wal.TestWALFiltering
   1 Hanging test : org.apache.hadoop.hbase.wal.TestWALSplit
   1 Hanging test : org.apache.hadoop.hbase.wal.TestWALSplitCompressed

   2 Failing test : org.apache.hadoop.hbase.client.TestMobSnapshotCloneIndependence
   1 Failing test : org.apache.hadoop.hbase.client.TestReplicaWithCluster
   1 Failing test : org.apache.hadoop.hbase.client.TestSnapshotCloneIndependence
   1 Failing test : org.apache.hadoop.hbase.master.TestZKLessAMOnCluster
   1 Failing test : org.apache.hadoop.hbase.mob.mapreduce.TestMobSweeper
   1 Failing test : org.apache.hadoop.hbase.security.token.TestGenerateDelegationToken

Elliott is did work to tighten up TestSnapshotCloneIndependence which should help TestMobSnapshotCloneIndependence (because Matteo did refactor so one is a subclass of the other).  [~jingcheng.du@intel.com] just did work on TestMobSweeper so that should help... TestImportExport should be better after a recent commit. Let me look at the others.

TestReplicaWithCluster#testReplicaAndReplication timedout here:

    Waiter.waitFor(HTU.getConfiguration(), 1000, new Waiter.Predicate<Exception>() {
      @Override
      public boolean evaluate() throws Exception {
        try {
          SlowMeCopro.cdl.set(new CountDownLatch(1));
          Get g = new Get(row);
          g.setConsistency(Consistency.TIMELINE);
          Result r = table.get(g);
          Assert.assertTrue(r.isStale());
          return  !r.isEmpty();
        } finally {
          SlowMeCopro.cdl.get().countDown();
          SlowMeCopro.sleepTime.set(0);
        }
      }});
    table.close();

Edit doesn't show up on remote cluster in time... would have to dig more.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12765870/none_fix.txt
  against master branch at commit c7efd14726e932235dff52bd73f76cb861b5b1b3.
  ATTACHMENT ID: 12765870

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
                       org.apache.hadoop.hbase.client.TestSnapshotCloneIndependence

     {color:red}-1 core zombie tests{color}.  There are 10 zombie test(s): 	at org.apache.hadoop.hbase.io.encoding.TestDataBlockEncoders.testSeekingOnSample(TestDataBlockEncoders.java:217)
	at org.apache.hadoop.hbase.mob.compactions.TestMobCompactor.testCompactionFromAdmin(TestMobCompactor.java:544)
	at org.apache.hadoop.hbase.mob.mapreduce.TestMobSweeper.testCompactionDelaySweeperInternal(TestMobSweeper.java:264)
	at org.apache.hadoop.hbase.mob.mapreduce.TestMobSweeper.testCompactionDelaySweeperWithNamespace(TestMobSweeper.java:362)
	at org.apache.hadoop.hbase.io.encoding.TestChangingEncoding.testChangingEncoding(TestChangingEncoding.java:202)
	at org.apache.hadoop.hbase.master.TestMasterRestartAfterDisablingTable.testForCheckingIfEnableAndDisableWorksFineAfterSwitch(TestMasterRestartAfterDisablingTable.java:64)
	at org.apache.hadoop.hbase.filter.TestFuzzyRowFilterEndToEnd.testEndToEnd(TestFuzzyRowFilterEndToEnd.java:143)
	at org.apache.hadoop.hbase.master.TestOpenedRegionHandler.testOpenedRegionHandlerOnMasterRestart(TestOpenedRegionHandler.java:93)
	at org.apache.hadoop.hbase.master.TestAssignmentManagerOnCluster.testOpenCloseRacing(TestAssignmentManagerOnCluster.java:849)

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/15930//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15930//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/15930//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/15930//console

This message is automatically generated.

Looking at last 30 hadoop qa runs, these are which hung and failed:

   1 Hanging test : org.apache.hadoop.hbase.client.TestMobSnapshotCloneIndependence
   2 Hanging test : org.apache.hadoop.hbase.client.TestShell
   1 Hanging test : org.apache.hadoop.hbase.client.TestSnapshotCloneIndependence
   1 Hanging test : org.apache.hadoop.hbase.filter.TestFuzzyRowFilterEndToEnd
   2 Hanging test : org.apache.hadoop.hbase.io.encoding.TestDataBlockEncoders
   2 Hanging test : org.apache.hadoop.hbase.mapreduce.TestCellCounter
   2 Hanging test : org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestHashTable
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestImportExport
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFilesUseSecurityEndPoint
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestMultiTableInputFormat
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestTableInputFormatScan1
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestWALPlayer
   1 Hanging test : org.apache.hadoop.hbase.mob.compactions.TestMobCompactor
   1 Hanging test : org.apache.hadoop.hbase.mob.mapreduce.TestMobSweeper
   1 Hanging test : org.apache.hadoop.hbase.regionserver.TestClusterId
   1 Hanging test : org.apache.hadoop.hbase.regionserver.TestHRegion
   1 Hanging test : org.apache.hadoop.hbase.regionserver.TestHRegionFileSystem
   1 Hanging test : org.apache.hadoop.hbase.regionserver.TestMultiColumnScanner
   1 Hanging test : org.apache.hadoop.hbase.regionserver.TestPerColumnFamilyFlush
   1 Hanging test : org.apache.hadoop.hbase.regionserver.compactions.TestCompactionWithThroughputController
   1 Hanging test : org.apache.hadoop.hbase.replication.TestMasterReplication
   1 Hanging test : org.apache.hadoop.hbase.replication.TestPerTableCFReplication
   1 Hanging test : org.apache.hadoop.hbase.replication.multiwal.TestReplicationSyncUpToolWithMultipleWAL
   1 Hanging test : org.apache.hadoop.hbase.replication.regionserver.TestReplicationWALReaderManager
   1 Hanging test : org.apache.hadoop.hbase.thrift.TestThriftServer
   1 Hanging test : org.apache.hadoop.hbase.util.TestHBaseFsck
   1 Hanging test : org.apache.hadoop.hbase.wal.TestWALFiltering
   1 Hanging test : org.apache.hadoop.hbase.wal.TestWALSplit
   1 Hanging test : org.apache.hadoop.hbase.wal.TestWALSplitCompressed

   2 Failing test : org.apache.hadoop.hbase.client.TestMobSnapshotCloneIndependence
   4 Failing test : org.apache.hadoop.hbase.client.TestSnapshotCloneIndependence
   2 Failing test : org.apache.hadoop.hbase.master.TestZKLessAMOnCluster
   1 Failing test : org.apache.hadoop.hbase.master.procedure.TestMasterFailoverWithProcedures
   1 Failing test : org.apache.hadoop.hbase.mob.mapreduce.TestMobSweeper
   1 Failing test : org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster
   1 Failing test : org.apache.hadoop.hbase.security.token.TestGenerateDelegationToken

Try

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12766065/none_fix.txt
  against master branch at commit 587f5bc11f9d5d37557baf36c7df110af860a95c.
  ATTACHMENT ID: 12766065

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/15962//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15962//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/15962//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/15962//console

This message is automatically generated.

This failure was odd:

{code}
kalashnikov:hbase.git stack$ python ./dev-support/findHangingTests.py  https://builds.apache.org/job/PreCommit-HBASE-Build/15962//consoleText
Fetching https://builds.apache.org/job/PreCommit-HBASE-Build/15962//consoleText
Building remotely on ubuntu-1 (docker Ubuntu ubuntu ubuntu1) in workspace /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build@2
Testing patch for HBASE-14420.
Testing patch on branch master.
Printing hanging tests
Printing Failing tests
{code}

No hangs and no fails.

It did this:
{code}
[INFO] Rat check: Summary of files. Unapproved: 0 unknown: 0 generated: 0 approved: 36 licence.
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Apache HBase ...................................... SUCCESS [1.820s]
[INFO] Apache HBase - Checkstyle ......................... SUCCESS [0.062s]
[INFO] Apache HBase - Resource Bundle .................... SUCCESS [0.054s]
[INFO] Apache HBase - Annotations ........................ SUCCESS [0.077s]
[INFO] Apache HBase - Protocol ........................... SUCCESS [0.113s]
[INFO] Apache HBase - Common ............................. SUCCESS [0.256s]
[INFO] Apache HBase - Procedure .......................... SUCCESS [0.070s]
[INFO] Apache HBase - Client ............................. SUCCESS [0.297s]
[INFO] Apache HBase - Hadoop Compatibility ............... SUCCESS [0.088s]
[INFO] Apache HBase - Hadoop Two Compatibility ........... SUCCESS [0.153s]
[INFO] Apache HBase - Prefix Tree ........................ SUCCESS [0.108s]
[INFO] Apache HBase - Server ............................. SUCCESS [1.095s]
[INFO] Apache HBase - Testing Util ....................... SUCCESS [0.038s]
[INFO] Apache HBase - Thrift ............................. SUCCESS [0.104s]
[INFO] Apache HBase - Shell .............................. SUCCESS [0.191s]
[INFO] Apache HBase - Integration Tests .................. SUCCESS [0.101s]
[INFO] Apache HBase - Examples ........................... SUCCESS [0.066s]
[INFO] Apache HBase - Rest ............................... SUCCESS [0.114s]
[INFO] Apache HBase - External Block Cache ............... SUCCESS [0.035s]
[INFO] Apache HBase - Assembly ........................... SUCCESS [0.058s]
[INFO] Apache HBase - Shaded ............................. SUCCESS [0.034s]
[INFO] Apache HBase - Shaded - Client .................... SUCCESS [0.031s]
[INFO] Apache HBase - Shaded - Server .................... SUCCESS [0.033s]
[INFO] Apache HBase - Spark .............................. SUCCESS [0.120s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 8.447s
[INFO] Finished at: Mon Oct 12 05:58:01 UTC 2015
[INFO] Final Memory: 39M/1290M
[INFO] ------------------------------------------------------------------------
{code}

... all passed.

Mostly awesome.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12766171/none_fix.txt
  against master branch at commit df9ff9f1e9b62897224f84c0da24036783b6a09c.
  ATTACHMENT ID: 12766171

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/15973//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15973//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/15973//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/15973//console

This message is automatically generated.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12766179/none_fix.txt
  against master branch at commit 397bc555e300b6c528008e6122d489792786b559.
  ATTACHMENT ID: 12766179

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

     {color:red}-1 core zombie tests{color}.  There are 1 zombie test(s): 

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/15976//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15976//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/15976//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/15976//console

This message is automatically generated.

Retry. The last run said zombies but none showing. Lets see if the recent comment to test-patch.sh so show more on what the jps -v is seeing will give us a clue

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12766263/none_fix.txt
  against master branch at commit 2ff6d0fe4789857ab51685949711d755dedd459a.
  ATTACHMENT ID: 12766263

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

     {color:red}-1 core zombie tests{color}.  There are 1 zombie test(s): 	at org.apache.lens.server.query.TestQueryEndEmailNotifier.testSuccessfulQuery(TestQueryEndEmailNotifier.java:250)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
	at org.testng.TestRunner.privateRun(TestRunner.java:767)
	at org.testng.TestRunner.run(TestRunner.java:617)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
	at org.testng.SuiteRunner.run(SuiteRunner.java:240)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1123)
	at org.testng.TestNG.run(TestNG.java:1031)
	at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:69)
	at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.executeMulti(TestNGDirectoryTestSuite.java:181)
	at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:99)
	at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:113)

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/15982//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15982//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/15982//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/15982//console

This message is automatically generated.

We are picking up others as our zombies. Added debug into test-patch.sh. Lets see what it shows.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12766343/none_fix.txt
  against master branch at commit 6323cd95442bf6c2617b7e8267e0c0b76e4c47eb.
  ATTACHMENT ID: 12766343

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:red}-1 javadoc{color}.  The javadoc tool appears to have generated 1 warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

     {color:red}-1 core zombie tests{color}.  There are 5 zombie test(s): 	at org.apache.hadoop.hbase.snapshot.TestFlushSnapshotFromClient.testSnapshotStateAfterMerge(TestFlushSnapshotFromClient.java:348)
	at org.apache.hadoop.hbase.snapshot.TestExportSnapshot.testExportFileSystemState(TestExportSnapshot.java:292)
	at org.apache.hadoop.hbase.snapshot.TestExportSnapshot.testExportFileSystemState(TestExportSnapshot.java:266)
	at org.apache.hadoop.hbase.snapshot.TestExportSnapshot.testExportWithTargetName(TestExportSnapshot.java:223)

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/15986//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15986//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/15986//artifact/patchprocess/checkstyle-aggregate.html

  Javadoc warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15986//artifact/patchprocess/patchJavadocWarnings.txt
Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/15986//console

This message is automatically generated.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12766481/none_fix.txt
  against master branch at commit e5580c247c06d8c708b92e96a5622853ec06a77d.
  ATTACHMENT ID: 12766481

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:red}-1 javadoc{color}.  The javadoc tool appears to have generated 1 warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

    {color:red}-1 site{color}.  The patch appears to cause mvn post-site goal to fail.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

     {color:red}-1 core zombie tests{color}.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.namespace.TestNamespaceAuditor.testRegionOperations(TestNamespaceAuditor.java:469)

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/15999//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15999//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/15999//artifact/patchprocess/checkstyle-aggregate.html

  Javadoc warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/15999//artifact/patchprocess/patchJavadocWarnings.txt
Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/15999//console

This message is automatically generated.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12766493/none_fix.txt
  against master branch at commit 94bfe909aff9fd74cb1a5d0c3f9209a19704c6cf.
  ATTACHMENT ID: 12766493

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:red}-1 javadoc{color}.  The javadoc tool appears to have generated 1 warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16002//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16002//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16002//artifact/patchprocess/checkstyle-aggregate.html

  Javadoc warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16002//artifact/patchprocess/patchJavadocWarnings.txt
Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16002//console

This message is automatically generated.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12766597/none_fix.txt
  against master branch at commit ba3d474f8aee5d59638feb5c370cf0da04dfdc9d.
  ATTACHMENT ID: 12766597

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16012//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16012//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16012//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16012//console

This message is automatically generated.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12766653/none_fix.txt
  against master branch at commit ad5d02c360dcd2482d6ded87f738986cdd135050.
  ATTACHMENT ID: 12766653

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:red}-1 release audit{color}.  The applied patch generated 1 release audit warnings (more than the master's current 0 warnings).

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

     {color:red}-1 core zombie tests{color}.  There are 2 zombie test(s): 	at org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFiles.testRegionCrossingRowBloom(TestLoadIncrementalHFiles.java:128)
	at org.apache.hadoop.hbase.TestChoreService.testForceTrigger(TestChoreService.java:398)

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16018//testReport/
Release audit warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16018//artifact/patchprocess/patchReleaseAuditWarnings.txt
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16018//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16018//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16018//console

This message is automatically generated.

Report on last 10 hanging tests:
{code}
   1 Hanging test : org.apache.hadoop.hbase.TestAcidGuarantees
   1 Hanging test : org.apache.hadoop.hbase.TestChoreService
   1 Hanging test : org.apache.hadoop.hbase.TestZooKeeper
   1 Hanging test : org.apache.hadoop.hbase.backup.TestHFileArchiving
   1 Hanging test : org.apache.hadoop.hbase.client.TestMobSnapshotFromClient
   1 Hanging test : org.apache.hadoop.hbase.client.TestMultiParallel
   1 Hanging test : org.apache.hadoop.hbase.client.TestRestoreSnapshotFromClient
   1 Hanging test : org.apache.hadoop.hbase.client.TestSnapshotCloneIndependence
   1 Hanging test : org.apache.hadoop.hbase.io.encoding.TestChangingEncoding
   2 Hanging test : org.apache.hadoop.hbase.io.encoding.TestDataBlockEncoders
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat2
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestSecureLoadIncrementalHFilesSplitRecovery
   1 Hanging test : org.apache.hadoop.hbase.mapreduce.TestTableInputFormat
   1 Hanging test : org.apache.hadoop.hbase.master.procedure.TestAddColumnFamilyProcedure
   1 Hanging test : org.apache.hadoop.hbase.namespace.TestNamespaceAuditor
   1 Hanging test : org.apache.hadoop.hbase.regionserver.TestEndToEndSplitTransaction
   1 Hanging test : org.apache.hadoop.hbase.replication.TestReplicationSmallTests
   1 Hanging test : org.apache.hadoop.hbase.replication.multiwal.TestReplicationSyncUpToolWithMultipleWAL
   1 Hanging test : org.apache.hadoop.hbase.replication.regionserver.TestReplicationWALReaderManager
   1 Hanging test : org.apache.hadoop.hbase.util.TestBytes
{code}

Last failing tests:
{code}
   1 Failing test : org.apache.hadoop.hbase.client.TestFromClientSide3
   1 Failing test : org.apache.hadoop.hbase.master.cleaner.TestSnapshotFromMaster
   1 Failing test : org.apache.hadoop.hbase.regionserver.TestCompaction
   1 Failing test : org.apache.hadoop.hbase.regionserver.TestCompactionState
   1 Failing test : org.apache.hadoop.hbase.regionserver.TestCompactionWithCoprocessor
   1 Failing test : org.apache.hadoop.hbase.regionserver.TestHRegionReplayEvents
   1 Failing test : org.apache.hadoop.hbase.regionserver.TestMobStoreCompaction
   1 Failing test : org.apache.hadoop.hbase.regionserver.TestRegionMergeTransactionOnCluster
   1 Failing test : org.apache.hadoop.hbase.regionserver.TestStore
   1 Failing test : org.apache.hadoop.hbase.regionserver.compactions.TestCompactionWithThroughputController
   1 Failing test : org.apache.hadoop.hbase.regionserver.wal.TestLogRolling
   1 Failing test : org.apache.hadoop.hbase.util.TestMergeTable
   1 Failing test : org.apache.hadoop.hbase.util.TestMergeTool
{code}

TestBytes is a small test that doesn't even start another thread ( I think ). That really points to infra.


bq. TestBytes is a small test that doesn't even start another thread ( I think ). That really points to infra.

Let me get to bottom of what is killing our builds... I've seen incidence where we get killed and then report the tests that were running at the time as 'hanging'.... 

On the TestBytes fail...


{code}
Fetching https://builds.apache.org/view/H-L/view/HBase/job/PreCommit-HBASE-Build/16023/consoleText

...
[INFO] Apache HBase ...................................... SUCCESS [2.616s]
[INFO] Apache HBase - Checkstyle ......................... SUCCESS [0.525s]
[INFO] Apache HBase - Resource Bundle .................... SUCCESS [0.143s]
[INFO] Apache HBase - Annotations ........................ SUCCESS [0.879s]
[INFO] Apache HBase - Common ............................. FAILURE [1:02.516s]
[INFO] Apache HBase - Protocol ........................... SKIPPED
[INFO] Apache HBase - Client ............................. SKIPPED
[INFO] Apache HBase - Hadoop Compatibility ............... SKIPPED
[INFO] Apache HBase - Hadoop Two Compatibility ........... SKIPPED
[INFO] Apache HBase - Prefix Tree ........................ SKIPPED
[INFO] Apache HBase - Server ............................. SKIPPED
[INFO] Apache HBase - Testing Util ....................... SKIPPED
[INFO] Apache HBase - Thrift ............................. SKIPPED
[INFO] Apache HBase - Rest ............................... SKIPPED
[INFO] Apache HBase - Shell .............................. SKIPPED
[INFO] Apache HBase - Integration Tests .................. SKIPPED
[INFO] Apache HBase - Examples ........................... SKIPPED
[INFO] Apache HBase - Assembly ........................... SKIPPED
Printing hanging tests
Hanging test : org.apache.hadoop.hbase.util.TestBytes
{code}

There is this in the output:


[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.18:test (default-test) on project hbase-common: ExecutionException: java.lang.RuntimeException: The forked VM terminated without properly saying goodbye. VM crash or System.exit called?


We were killed.

My changes to test-patch.sh are only going up this evening. Main change was removing killing of 'found' processes. Hopefully this is cause of such as the above. I'm a bit disturbed by your reports that you are starting to see hbase-server timeout... let me try over here on my little rig again....

So far once out of four today.
I saw this on the failed run:
{code}Tests run: 1398, Failures: 0, Errors: 0, Skipped: 9{code}

Good passing runs on the same set up pass with:
{code}Tests run: 1416, Failures: 0, Errors: 0, Skipped: 9{code}

So there were quite a few hanging tests on the failed run.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12766976/none_fix.txt
  against master branch at commit d5ed46bc9f9285f75d2d906ec9c120cb408827df.
  ATTACHMENT ID: 12766976

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16055//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16055//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16055//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16055//console

This message is automatically generated.

{color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12767001/none_fix.txt
  against master branch at commit d5ed46bc9f9285f75d2d906ec9c120cb408827df.
  ATTACHMENT ID: 12767001

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16059//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16059//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16059//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16059//console

This message is automatically generated.

FYI [~dimaspivak] ... You are trying to follow along... see above where my reporting is failing... The issue is that we run the zombie detection even when the build is killed and we 'find' zombies though its just stuff that was running at kill-time.  Just FYI. I'll try and fix zombie detector...

[~dimaspivak] What to do about flakies? In patch build, we retry flakies and they usually pass on second run. We don't fail build if a flaky but the report shows a 'failed' test. FYI.

Hm, interesting, [~stack]. Jenkins has a [flaky test handler plugin|https://wiki.jenkins-ci.org/display/JENKINS/Flaky+Test+Handler+Plugin] that should differentiate between failed tests and flaky ones, so maybe we need to push on the infra team to give it a shot?

[~dimaspivak] That plugin looks nice. We've done the first part, enabling flakes in surefire. The issue is more my report... I'm finding the first run of a flake and reporting it as a FAILED test... maybe it should be reported as a FLAKY test... just something for you to consider perhaps doing up your fancy stuff.

{color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12767092/none_fix.txt
  against master branch at commit 30cf4e3761e95f3cceaf8c1aa154695e18198cd6.
  ATTACHMENT ID: 12767092

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16068//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16068//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16068//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16068//console

This message is automatically generated.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12767188/none_fix.txt
  against master branch at commit 6774f223a4a1cfd3cd81a17861ac94faad3b2916.
  ATTACHMENT ID: 12767188

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16076//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16076//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16076//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16076//console

This message is automatically generated.

Says:

{code}
laked tests: 
org.apache.hadoop.hbase.client.TestSnapshotCloneIndependence.testOnlineSnapshotDeleteIndependent(org.apache.hadoop.hbase.client.TestSnapshotCloneIndependence)
  Run 1: TestSnapshotCloneIndependence.testOnlineSnapshotDeleteIndependent:191->runTestSnapshotDeleteIndependent:459 expected:<17576> but was:<14046>
  Run 2: TestSnapshotCloneIndependence.testOnlineSnapshotDeleteIndependent:191->runTestSnapshotDeleteIndependent:459 expected:<17576> but was:<14046>
  Run 3: PASS

org.apache.hadoop.hbase.master.balancer.TestStochasticLoadBalancer.testRegionReplicationOnMidClusterSameHosts(org.apache.hadoop.hbase.master.balancer.TestStochasticLoadBalancer)
  Run 1: TestStochasticLoadBalancer.testRegionReplicationOnMidClusterSameHosts:454->BalancerTestBase.testWithCluster:444->BalancerTestBase.assertClusterAsBalanced:203 null
  Run 2: PASS

org.apache.hadoop.hbase.regionserver.TestWALLockup.testLockupWhenSyncInMiddleOfZigZagSetup(org.apache.hadoop.hbase.regionserver.TestWALLockup)
  Run 1: TestWALLockup.testLockupWhenSyncInMiddleOfZigZagSetup:245 ï¿½ TestTimedOut test ...
  Run 2: PASS
{code}

TestSnapshotCloneIndependence#testOnlineSnapshotDeleteIndependent was disabled last night.

Load balancer is showing up from time to time still.

I see this: ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.18.1:test (secondPartTestsExecution) on project hbase-server: There was a timeout or other error in the fork -> [Help 1]

org.apache.hadoop.hbase.TestChoreService does not show up in list above. The test that failed is all timer based... let me just disable it.

Let me put timeout on the encoding failure.

TestDataBlockEncoders was doing 10k random seeks... cut it down to 1k.

{color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12767232/none_fix.txt
  against master branch at commit 71b38d60bbd26ff80ac23c53149d8da85976f39b.
  ATTACHMENT ID: 12767232

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16080//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16080//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16080//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16080//console

This message is automatically generated.

{color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12767283/none_fix.txt
  against master branch at commit f1b6355fc546888816c08480c0f1b0965a244252.
  ATTACHMENT ID: 12767283

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16085//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16085//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16085//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16085//console

This message is automatically generated.

{color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12767392/none_fix.txt
  against master branch at commit c1f0442045f44fcbb3935f9244794929a5d0caea.
  ATTACHMENT ID: 12767392

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16097//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16097//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16097//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16097//console

This message is automatically generated.

{color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12767480/none_fix.txt
  against master branch at commit c1f0442045f44fcbb3935f9244794929a5d0caea.
  ATTACHMENT ID: 12767480

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16098//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16098//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16098//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16098//console

This message is automatically generated.

Trunk is looking good now reliably building all green if patch is good.

branch-1 and branch-1.2 are suffering from build exiting unexpectedly... some test is not hanging nor failing but exiting.... Trying to track it down.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12767603/none_fix.txt
  against master branch at commit 60465964039acd05f43f268cdb4f909a150a0f41.
  ATTACHMENT ID: 12767603

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16120//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16120//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16120//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16120//console

This message is automatically generated.

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12768563/none_fix.txt
  against master branch at commit f8528f66ec253fbb3c08d2c3352dd73d9832a43b.
  ATTACHMENT ID: 12768563

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16216//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16216//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16216//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16216//console

This message is automatically generated.

{color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12768743/none_fix.txt
  against master branch at commit 899857609c7c2c2b0fd3fa72d3bd585cb2703e0a.
  ATTACHMENT ID: 12768743

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16231//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16231//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16231//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16231//console

This message is automatically generated.

Have to refine our zombie terminology. There are zombies, tests that stick around after the test suite has finished.... these are mostly gone now, fixed or removed, and then there are tests that did not complete because they were killed by surefire or they completed after they were supposed to but before the test suite finished and zombie detector had chance to find them.

{color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12769694/none_fix.txt
  against master branch at commit bdf11be6af046e99cff9985968903d983d7ff10f.
  ATTACHMENT ID: 12769694

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16298//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16298//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16298//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16298//console

This message is automatically generated.

{color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12770034/none_fix.txt
  against master branch at commit 9c37239f582d51cb99718f5445f64b273c2251ed.
  ATTACHMENT ID: 12770034

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16342//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16342//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16342//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16342//console

This message is automatically generated.

Here are the longest running tests:
{code}
$ grep -h "<testcase" `find . -iname "TEST-*.xml"` | sed 's/<testcase name="\(.*\)" classname="\(.*\)" time="\(.*\)".*/\3\t\2 \1/' |sort -rn |head -100
  177.358	org.apache.hadoop.hbase.client.TestReplicasClient testSmallScanWithReplicas
  158.826	org.apache.hadoop.hbase.regionserver.TestRemoveRegionMetrics testMoveRegion
  146.995	org.apache.hadoop.hbase.filter.TestFuzzyRowFilterEndToEnd testEndToEnd
  106.28	org.apache.hadoop.hbase.regionserver.wal.TestLogRolling testLogRolling
  103.126	org.apache.hadoop.hbase.mapred.TestTableSnapshotInputFormat testWithMapReduceMultiRegion
  100.889	org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat testMRIncrementalLoadWithSplit
  97.4	org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat testExcludeMinorCompaction
...
{code}
Tests with most threads:

{code}
[stack@c2021 hbase.git]$ grep -h "after: " `find . -iname "*-output.txt"` | sed 's/.*: after: \(.*\) Thread=\([0-9]*\).*/\2\t\1/'|sort -rn|head -100
1010	replication.TestReplicationKillSlaveRS#killOneSlaveRS
964	replication.multiwal.TestReplicationKillMasterRSCompressedWithMultipleWAL#killOneMasterRS
942	replication.TestReplicationKillMasterRS#killOneMasterRS
930	replication.TestReplicationKillMasterRSCompressed#killOneMasterRS
834	snapshot.TestSecureExportSnapshot#testExportRetry
834	snapshot.TestSecureExportSnapshot#testExportFailure
832	snapshot.TestSecureExportSnapshot#testExportFileSystemStateWithSkipTmp
830	snapshot.TestSecureExportSnapshot#testSnapshotWithRefsExportFileSystemState
830	snapshot.TestExportSnapshot#testExportRetry
826	snapshot.TestSecureExportSnapshot#testEmptyExportFileSystemState
826	snapshot.TestExportSnapshot#testExportFileSystemStateWithSkipTmp
826	snapshot.TestExportSnapshot#testExportFailure
823	snapshot.TestExportSnapshot#testSnapshotWithRefsExportFileSystemState
820	snapshot.TestSecureExportSnapshot#testConsecutiveExports
818	snapshot.TestExportSnapshot#testEmptyExportFileSystemState
818	replication.TestReplicationSmallTests#testSmallBatch
815	snapshot.TestExportSnapshot#testConsecutiveExports
811	snapshot.TestSecureExportSnapshot#testExportFileSystemState
800	snapshot.TestExportSnapshot#testExportFileSystemState
800	mapreduce.TestCopyTable#testCopyTableWithBulkload
798	snapshot.TestSecureExportSnapshot#testExportWithTargetName
791	snapshot.TestExportSnapshot#testExportWithTargetName
788	mapreduce.TestCopyTable#testMainMethod
787	snapshot.TestSecureExportSnapshot#testBalanceSplit
787	mapreduce.TestCopyTable#testStartStopRow
785	mapred.TestMultiTableSnapshotInputFormat#testScanEmptyToAPP
784	mapreduce.TestMultiTableSnapshotInputFormat#testScanEmptyToAPP
783	mapreduce.TestCopyTable#testRenameFamily
781	snapshot.TestExportSnapshot#testBalanceSplit
779	mapreduce.TestMultiTableSnapshotInputFormat#testScanEmptyToEmpty
778	replication.TestReplicationSmallTests#testReplicationStatus
776	mapreduce.TestTableInputFormatScan1#testGetSplits
774	replication.TestReplicationSmallTests#testSimplePutDelete
774	mapreduce.TestMultiTableSnapshotInputFormat#testScanYZYToEmpty
773	mapreduce.TestTableInputFormatScan2#testScanYZYToEmpty
773	mapreduce.TestMultiTableInputFormat#testScanEmptyToAPP
773	mapred.TestMultiTableSnapshotInputFormat#testScanYZYToEmpty
772	mapreduce.TestTableInputFormatScan2#testScanYYXToEmpty
772	mapreduce.TestMultiTableSnapshotInputFormat#testScanOBBToOPP
770	mapreduce.TestMultiTableInputFormat#testScanEmptyToEmpty
770	mapreduce.TestCopyTable#testCopyTable
769	mapreduce.TestTableInputFormatScan1#testScanEmptyToAPP
768	mapreduce.TestTableInputFormatScan2#testScanYYYToEmpty
767	mapreduce.TestTableInputFormatScan2#testScanOPPToEmpty
767	mapreduce.TestMultiTableInputFormat#testScanYZYToEmpty
767	mapred.TestMultiTableSnapshotInputFormat#testScanOBBToOPP
767	mapred.TestMultiTableSnapshotInputFormat#testScanEmptyToEmpty
765	mapreduce.TestTableInputFormatScan1#testScanEmptyToEmpty
765	mapreduce.TestTableInputFormatScan1#testGetSplitsPoint
764	mapreduce.TestTableInputFormatScan2#testScanOBBToOPP
764	mapreduce.TestTableInputFormatScan2#testScanFromConfiguration
763	mapreduce.TestTableInputFormatScan2#testScanOBBToQPP
762	mapreduce.TestTableInputFormatScan1#testScanEmptyToOPP
762	mapreduce.TestMultiTableInputFormat#testScanOBBToOPP
761	mapreduce.TestTableInputFormatScan1#testScanEmptyToBBB
759	replication.TestReplicationSmallTests#testLoading
757	mapreduce.TestTableInputFormatScan1#testScanEmptyToBBA
720	regionserver.TestRegionFavoredNodes#testFavoredNodes
717	replication.TestReplicationSmallTests#testCompactionWALEdits
...
{code}

Tests using lots of file descriptors:

{code}
[stack@c2021 hbase.git]$ grep -h "after: " `find . -iname "*-output.txt"` | sed 's/.*: after: \([^ ]*\).*OpenFileDescriptor=\([0-9]*\).*/\2\t\1/'|grep -v 'after: '|sort -rn|head -100
1010	ipc.TestAsyncIPC#testRTEDuringAsyncConnectionSetup[3]
1010	ipc.TestAsyncIPC#testRpcScheduler[2]
978	ipc.TestAsyncIPC#testCompressCellBlock[2]
947	mapred.TestMultiTableSnapshotInputFormat#testScanYZYToEmpty
946	ipc.TestAsyncIPC#testNoCodec[2]
943	mapreduce.TestMultiTableSnapshotInputFormat#testScanEmptyToAPP
943	mapred.TestMultiTableSnapshotInputFormat#testScanEmptyToAPP
942	mapreduce.TestMultiTableSnapshotInputFormat#testScanYZYToEmpty
935	snapshot.TestSecureExportSnapshot#testExportFailure
933	mapreduce.TestCopyTable#testRenameFamily
931	client.replication.TestReplicationAdminWithClusters#testEnableReplicationWhenSlaveClusterDoesntHaveTable
926	mapreduce.TestTableInputFormatScan2#testScanOPPToEmpty
926	mapreduce.TestMultiTableInputFormat#testScanYZYToEmpty
923	snapshot.TestExportSnapshot#testExportFailure
921	mapreduce.TestCopyTable#testMainMethod
921	ipc.TestAsyncIPC#testAsyncConnectionSetup[3]
920	mapreduce.TestTableInputFormatScan1#testScanEmptyToBBA
919	mapred.TestMultiTableSnapshotInputFormat#testScanEmptyToEmpty
917	mapreduce.TestMultiTableSnapshotInputFormat#testScanOBBToOPP
916	client.TestMultiParallel#testBatchWithMixedActions
914	mapred.TestMultiTableSnapshotInputFormat#testScanOBBToOPP
912	client.TestMultiParallel#testNonceCollision
909	client.TestMultiParallel#testBatchWithDelete
904	mapreduce.TestMultiTableInputFormat#testScanOBBToOPP
904	client.TestMultiParallel#testHTableDeleteWithList
904	client.TestMultiParallel#testBadFam
903	mapreduce.TestTableInputFormatScan2#testScanOBBToQPP
903	mapreduce.TestTableInputFormatScan1#testGetSplitsPoint
902	client.TestMultiParallel#testFlushCommitsNoAbort
900	mapreduce.TestTableInputFormatScan2#testScanOBBToOPP
893	client.TestMultiParallel#testBatchWithManyColsInOneRowGetAndPut
891	master.TestRegionPlacement2#testFavoredNodesPresentForRoundRobinAssignment
891	master.TestRegionPlacement2#testFavoredNodesPresentForRandomAssignment
880	client.TestFromClientSide#testJiraTest861
878	client.TestFromClientSideWithCoprocessor#testJiraTest861
861	client.replication.TestReplicationAdminWithClusters#testEnableReplicationForNonExistingTable
860	replication.TestReplicationSmallTests#testSmallBatch
860	replication.TestReplicationSmallTests#testSimplePutDelete
860	replication.TestReplicationSmallTests#testDisableEnable
860	replication.TestReplicationSmallTests#testCompactionWALEdits
855	replication.TestReplicationSmallTests#testVerifyRepJob
855	client.TestFromClientSide#testNullWithReverseScan
854	client.TestFromClientSideWithCoprocessor#testSimpleMissing
852	client.TestFromClientSide#testJiraTest867
851	client.TestFromClientSide#testMultiRowMutation
850	client.TestFromClientSideWithCoprocessor#testNullWithReverseScan
850	client.TestFromClientSideWithCoprocessor#testJiraTest867
849	client.TestFromClientSideWithCoprocessor#testMultiRowMutation
849	client.TestFromClientSide#testSimpleMissing
835	client.TestMultiParallel#testBatchWithIncrementAndAppend
835	client.TestMultiParallel#testBatchWithGet
834	replication.TestReplicationSmallTests#testReplicationStatus
834	client.TestFromClientSideWithCoprocessor#testGetStartEndKeysWithRegionReplicas
832	client.TestFromClientSide#testGetStartEndKeysWithRegionReplicas
830	client.TestFromClientSideWithCoprocessor#testFilterAllRecords
828	client.TestFromClientSideWithCoprocessor#testScan_NullQualifier
....
{code}

Trigger a bad build

Latest is that we were still killing legit tests as zombies. See HBASE-14589. Surefire "ExecutionException: java.lang.RuntimeException..." does not seem to be about over-consumption of resources, at least in some instances.

Try a patch build w/ zombie-detector.sh slotted in

{color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12771259/none_fix.txt
  against master branch at commit 1cbcf1175e6ce497936f12c60fb2e897833ace39.
  ATTACHMENT ID: 12771259

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
                       org.apache.hadoop.hbase.regionserver.TestWALLockup

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16452//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16452//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16452//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16452//console

This message is automatically generated.

{color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12771299/none_fix.txt
  against master branch at commit 4c2e0d95dc62ee42b3da820d751a11eb52ce0069.
  ATTACHMENT ID: 12771299

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+0 tests included{color}.  The patch appears to be a documentation, build,
                        or dev-support patch that doesn't require tests.

    {color:green}+1 hadoop versions{color}. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 protoc{color}.  The applied patch does not increase the total number of protoc compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn post-site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16457//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16457//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16457//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16457//console

This message is automatically generated.

Just saw this over in branch-1.3, a hang on these:

kalashnikov:hbase.git stack$ python ./dev-support/findHangingTests.py https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.3/391/jdk=latest1.8,label=Hadoop/consoleText
Fetching the console output from the URL
Printing hanging tests
Hanging test : org.apache.hadoop.hbase.mapreduce.TestImportExport
Hanging test : org.apache.hadoop.hbase.mapreduce.TestImportTsv
Printing Failing tests
Failing test : org.apache.hadoop.hbase.regionserver.TestAtomicOperation
Failing test : org.apache.hadoop.hbase.mapreduce.TestRowCounter



In 1.3 build, saw this just now in https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.3/jdk=latest1.8,label=Hadoop/393/consoleText

kalashnikov:hbase.git stack$ python ./dev-support/findHangingTests.py https://builds.apache.org/view/H-L/view/HBase/job/HBase-1.3/jdk=latest1.8,label=Hadoop/393/consoleText

Fetching the console output from the URL

Printing hanging tests
Hanging test : org.apache.hadoop.hbase.mapreduce.TestImportTSVWithOperationAttributes
Hanging test : org.apache.hadoop.hbase.mapreduce.TestTimeRangeMapRed
...

Looks like stuff not being shutdown if I look in the output. Wonder why zombie detector not finding these? Because they die out before end of test? It seems to be the test mapreduce.TestImportTSVWithOperationAttributes#testMROnTableWithInvalidOperationAttr  that is problematic.... we stop reporting from this test in the output.


Retry to see if i broke hadoopqa

Retry (I'd broken test-patch.sh)

{color:green}+1 overall{color}.  
        {color:green}+1 core zombie tests -- no zombies!{color}.

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/16745//testReport/
Release Findbugs (version 2.0.3) 	warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/16745//artifact/patchprocess/newFindbugsWarnings.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/16745//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/16745//console

This message is automatically generated.

Link to set of flaky tests.

Resolving this project as done for now.

It was about figuring the zombies and fixing the detector script. We've done that much (and a bit more). We are now into a new area of stomping out flakies and hangers, a new domain. I opened umbrella issues for each of these types and hung remaining tests there.

As part of this project, some tests were turned off. The reenabling project has been let float free of this issue as a critical to do.

Otherwise, we're sort of done here.

Great stuff Stack.

