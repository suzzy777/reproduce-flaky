Verbose test output on Ubuntu wily64.

Looks like we have a race:
{code}
I1113 16:44:01.695679  8744 master.cpp:5069] Sending 1 inverse offers to framework d59449fc-5462-43c5-b935-e05563fdd4b6-0000 (default)
I1113 16:44:01.701465  8743 http.cpp:338] HTTP POST for /master/api/v1/scheduler from 10.0.2.15:32768
I1113 16:44:01.701598  8743 master.cpp:3297] Processing DECLINE call for offers: [ d59449fc-5462-43c5-b935-e05563fdd4b6-O4 ] for framework d59449fc-5462-43c5-b935-e05563fdd4b6-0000 (default)
I1113 16:44:02.767982  8742 master.cpp:5069] Sending 2 inverse offers to framework d59449fc-5462-43c5-b935-e05563fdd4b6-0000 (default)
/mesos/src/tests/master_maintenance_tests.cpp:1594: Failure
Value of: event.get().offers().inverse_offers().size()
  Actual: 2
Expected: 1
{code}

I'm guessing this isn't OS-specific (it would be weird if it was), but I haven't seen it on any other OS.

It also happens on Fedora 23.
Compiled with {{--enable-optimized --enable-libevent --enable-ssl}}

Just observed this on Debian 8.

{noformat}
[ RUN      ] MasterMaintenanceTest.InverseOffersFilters
../../src/tests/master_maintenance_tests.cpp:1594: Failure
Value of: event.get().offers().inverse_offers().size()
  Actual: 2
Expected: 1
*** Aborted at 1448189831 (unix time) try "date -d @1448189831" if you are using GNU date ***
PC: @          0x141baaa testing::UnitTest::AddTestPartResult()
*** SIGSEGV (@0x0) received by PID 24094 (TID 0x7f2e361827c0) from PID 0; stack trace: ***
    @     0x7f2e2f1a08d0 (unknown)
    @          0x141baaa testing::UnitTest::AddTestPartResult()
    @          0x14104e3 testing::internal::AssertHelper::operator=()
    @           0xe2bf78 mesos::internal::tests::MasterMaintenanceTest_InverseOffersFilters_Test::TestBody()
    @          0x1439638 testing::internal::HandleSehExceptionsInMethodIfSupported<>()
    @          0x1434544 testing::internal::HandleExceptionsInMethodIfSupported<>()
    @          0x1415883 testing::Test::Run()
    @          0x1416011 testing::TestInfo::Run()
    @          0x141664c testing::TestCase::Run()
    @          0x141cf9b testing::internal::UnitTestImpl::RunAllTests()
    @          0x143a2c7 testing::internal::HandleSehExceptionsInMethodIfSupported<>()
    @          0x14350d0 testing::internal::HandleExceptionsInMethodIfSupported<>()
    @          0x141bccb testing::UnitTest::Run()
    @           0xd324ac RUN_ALL_TESTS()
    @           0xd3208a main
    @     0x7f2e2ee09b45 (unknown)
    @           0x92ae59 (unknown)
Segmentation fault
{noformat}


Here is my Vagrant generator:

{noformat}
export VAGRANT_CPUS=8
export VAGRANT_MEM=9182

cat << EOF > Vagrantfile
# -*- mode: ruby -*-" >
# vi: set ft=ruby :
Vagrant.configure(2) do |config|

  # Disable shared folder to prevent certain kernel module dependencies.
  config.vm.synced_folder ".", "/vagrant", disabled: true

  config.vm.hostname = "debian82"

  config.vm.box = "bento/debian-8.2"

  config.vm.provider "virtualbox" do |vb|
    vb.memory = ENV['VAGRANT_MEM']
    vb.cpus = ENV['VAGRANT_CPUS']
  end

  config.vm.provider "vmware_fusion" do |vb|
    vb.memory = ENV['VAGRANT_MEM']
    vb.cpus = ENV['VAGRANT_CPUS']
  end

  config.vm.provision "shell", inline: <<-SHELL

    # Update the entire system.
    sudo apt-get update

    # Install Mesos dependecies.
    sudo apt-get install -y openjdk-7-jdk autoconf libtool
    sudo apt-get install -y build-essential python-dev python-boto libcurl4-nss-dev libsasl2-dev maven libapr1-dev libsvn-dev

    # Install latest Docker.
    sudo wget -qO- https://get.docker.com/ | sh

    # Enable memory and swap cgroups.
    sudo echo "GRUB_CMDLINE_LINUX_DEFAULT=\"cgroup_enable=memory swapaccount=1\"" >>/etc/default/grub
    sudo grub-mkconfig -o /boot/grub/grub.cfg "$@"
  SHELL
end
EOF

vagrant up
vagrant reload

vagrant ssh -c "
sudo docker info

git clone  https://github.com/apache/mesos.git mesos
cd mesos
git checkout -b 0.26.0-rc1 0.26.0-rc1

./bootstrap
mkdir build
cd build

../configure --disable-java --disable-python
GTEST_FILTER="" make check -j$VAGRANT_CPUS
sudo ./bin/mesos-tests.sh
"
{noformat}


[~neilc] Please determine if this is a release blocker (whether this is a feature bug or just a test bug). I'll make it one (setting target version 0.26.0) for now.

Strong suspicion that this is just a test bug -- I should have some time today to look into this though, will update if I learn more.

FYI, this is just a flakey test (not a feature bug), so it shouldn't be a release blocker.

https://reviews.apache.org/r/40672/

After applying the patch, {{./bin/mesos-tests.sh --gtest_filter=*.InverseOffersFilters --gtest_repeat=-1 --gtest_break_on_failure}} fails after > 250 iterations. Before that it failed after ~10 iterations.
Therefore, while the flakiness isn't gone for me, the situation improved significantly.

Here's a verbose log of a failed test after applying the patch:
{noformat}
I1125 10:05:52.969558 29342 leveldb.cpp:174] Opened db in 384512ns
I1125 10:05:52.969916 29342 leveldb.cpp:181] Compacted db in 319730ns
I1125 10:05:52.969949 29342 leveldb.cpp:196] Created db iterator in 3457ns
I1125 10:05:52.969959 29342 leveldb.cpp:202] Seeked to beginning of db in 332ns
I1125 10:05:52.969965 29342 leveldb.cpp:271] Iterated through 0 keys in the db in 318ns
I1125 10:05:52.969979 29342 replica.cpp:778] Replica recovered with log positions 0 -> 0 with 1 holes and 0 unlearned
I1125 10:05:52.970711 29362 recover.cpp:447] Starting replica recovery
I1125 10:05:52.970767 29362 recover.cpp:473] Replica is in EMPTY status
I1125 10:05:52.970935 29362 replica.cpp:674] Replica in EMPTY status received a broadcasted recover request from (3109)@127.0.0.1:42692
I1125 10:05:52.970989 29362 recover.cpp:193] Received a recover response from a replica in EMPTY status
I1125 10:05:52.971045 29362 recover.cpp:564] Updating replica status to STARTING
I1125 10:05:52.971160 29362 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 22591ns
I1125 10:05:52.971174 29362 replica.cpp:321] Persisted replica status to STARTING
I1125 10:05:52.971195 29362 master.cpp:365] Master 932f7d7b-f2d4-42c7-9391-222c19b9d35b (localhost) started on 127.0.0.1:42692
I1125 10:05:52.971204 29362 master.cpp:367] Flags at startup: --acls="" --allocation_interval="1secs" --allocator="HierarchicalDRF" --authenticate="false" --authenticate_slaves="true" --authenticators="crammd5" --authorizers="local" --credentials="/tmp/EruGwl/credentials" --framework_sorter="drf" --help="false" --hostname_lookup="true" --initialize_driver_logging="true" --log_auto_initialize="true" --logbufsecs="0" --logging_level="INFO" --max_slave_ping_timeouts="5" --quiet="false" --recovery_slave_removal_limit="100%" --registry="replicated_log" --registry_fetch_timeout="1mins" --registry_store_timeout="25secs" --registry_strict="true" --root_submissions="true" --slave_ping_timeout="15secs" --slave_reregister_timeout="10mins" --user_sorter="drf" --version="false" --webui_dir="/usr/local/share/mesos/webui" --work_dir="/tmp/EruGwl/master" --zk_session_timeout="10secs"
W1125 10:05:52.971287 29362 master.cpp:370]
**************************************************
Master bound to loopback interface! Cannot communicate with remote schedulers or slaves. You might want to set '--ip' flag to a routable IP address.
**************************************************
I1125 10:05:52.971364 29362 master.cpp:414] Master allowing unauthenticated frameworks to register
I1125 10:05:52.971372 29362 master.cpp:417] Master only allowing authenticated slaves to register
I1125 10:05:52.971298 29363 recover.cpp:473] Replica is in STARTING status
I1125 10:05:52.971379 29362 credentials.hpp:35] Loading credentials for authentication from '/tmp/EruGwl/credentials'
I1125 10:05:52.971544 29362 master.cpp:456] Using default 'crammd5' authenticator
I1125 10:05:52.971573 29363 replica.cpp:674] Replica in STARTING status received a broadcasted recover request from (3110)@127.0.0.1:42692
I1125 10:05:52.971587 29362 master.cpp:493] Authorization enabled
I1125 10:05:52.971709 29358 recover.cpp:193] Received a recover response from a replica in STARTING status
I1125 10:05:52.971807 29359 whitelist_watcher.cpp:77] No whitelist given
I1125 10:05:52.972726 29356 hierarchical.cpp:162] Initialized hierarchical allocator process
I1125 10:05:52.972959 29362 master.cpp:1625] The newly elected leader is master@127.0.0.1:42692 with id 932f7d7b-f2d4-42c7-9391-222c19b9d35b
I1125 10:05:52.972996 29362 master.cpp:1638] Elected as the leading master!
I1125 10:05:52.972998 29358 recover.cpp:564] Updating replica status to VOTING
I1125 10:05:52.973006 29362 master.cpp:1383] Recovering from registrar
I1125 10:05:52.973254 29359 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 13731ns
I1125 10:05:52.973319 29359 replica.cpp:321] Persisted replica status to VOTING
I1125 10:05:52.973356 29358 recover.cpp:578] Successfully joined the Paxos group
I1125 10:05:52.973412 29363 registrar.cpp:307] Recovering registrar
I1125 10:05:52.973435 29358 recover.cpp:462] Recover process terminated
I1125 10:05:52.973695 29358 log.cpp:659] Attempting to start the writer
I1125 10:05:52.973846 29358 replica.cpp:494] Replica received implicit promise request from (3111)@127.0.0.1:42692 with proposal 1
I1125 10:05:52.973898 29358 leveldb.cpp:304] Persisting metadata (8 bytes) to leveldb took 10591ns
I1125 10:05:52.973909 29358 replica.cpp:343] Persisted promised to 1
I1125 10:05:52.974045 29358 coordinator.cpp:238] Coordinator attempting to fill missing positions
I1125 10:05:52.974340 29358 replica.cpp:389] Replica received explicit promise request from (3112)@127.0.0.1:42692 for position 0 with proposal 2
I1125 10:05:52.974434 29358 leveldb.cpp:341] Persisting action (8 bytes) to leveldb took 28875ns
I1125 10:05:52.974454 29358 replica.cpp:713] Persisted action at 0
I1125 10:05:52.974792 29361 replica.cpp:538] Replica received write request for position 0 from (3113)@127.0.0.1:42692
I1125 10:05:52.974830 29361 leveldb.cpp:436] Reading position from leveldb took 7443ns
I1125 10:05:52.974849 29361 leveldb.cpp:341] Persisting action (14 bytes) to leveldb took 7338ns
I1125 10:05:52.974858 29361 replica.cpp:713] Persisted action at 0
I1125 10:05:52.975154 29359 replica.cpp:692] Replica received learned notice for position 0 from @0.0.0.0:0
I1125 10:05:52.975189 29359 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 8175ns
I1125 10:05:52.975199 29359 replica.cpp:713] Persisted action at 0
I1125 10:05:52.975205 29359 replica.cpp:698] Replica learned NOP action at position 0
I1125 10:05:52.975298 29358 log.cpp:675] Writer started with ending position 0
I1125 10:05:52.975400 29358 leveldb.cpp:436] Reading position from leveldb took 4693ns
I1125 10:05:52.975510 29358 registrar.cpp:340] Successfully fetched the registry (0B) in 2.07488ms
I1125 10:05:52.975551 29358 registrar.cpp:439] Applied 1 operations in 2233ns; attempting to update the 'registry'
I1125 10:05:52.975651 29358 log.cpp:683] Attempting to append 160 bytes to the log
I1125 10:05:52.975689 29358 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 1
I1125 10:05:52.975949 29356 replica.cpp:538] Replica received write request for position 1 from (3114)@127.0.0.1:42692
I1125 10:05:52.975991 29356 leveldb.cpp:341] Persisting action (179 bytes) to leveldb took 9611ns
I1125 10:05:52.976002 29356 replica.cpp:713] Persisted action at 1
I1125 10:05:52.976090 29356 replica.cpp:692] Replica received learned notice for position 1 from @0.0.0.0:0
I1125 10:05:52.976178 29356 leveldb.cpp:341] Persisting action (181 bytes) to leveldb took 9583ns
I1125 10:05:52.976189 29356 replica.cpp:713] Persisted action at 1
I1125 10:05:52.976197 29356 replica.cpp:698] Replica learned APPEND action at position 1
I1125 10:05:52.976322 29356 registrar.cpp:484] Successfully updated the 'registry' in 758016ns
I1125 10:05:52.976395 29356 registrar.cpp:370] Successfully recovered registrar
I1125 10:05:52.976371 29362 log.cpp:702] Attempting to truncate the log to 1
I1125 10:05:52.976552 29362 coordinator.cpp:348] Coordinator attempting to write TRUNCATE action at position 2
I1125 10:05:52.976644 29362 replica.cpp:538] Replica received write request for position 2 from (3115)@127.0.0.1:42692
I1125 10:05:52.976681 29362 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 8755ns
I1125 10:05:52.976691 29362 replica.cpp:713] Persisted action at 2
I1125 10:05:52.976760 29362 replica.cpp:692] Replica received learned notice for position 2 from @0.0.0.0:0
I1125 10:05:52.976810 29362 leveldb.cpp:341] Persisting action (18 bytes) to leveldb took 9404ns
I1125 10:05:52.976830 29362 leveldb.cpp:399] Deleting ~1 keys from leveldb took 4684ns
I1125 10:05:52.976846 29362 replica.cpp:713] Persisted action at 2
I1125 10:05:52.976857 29362 replica.cpp:698] Replica learned TRUNCATE action at position 2
I1125 10:05:52.976883 29362 hierarchical.cpp:174] Allocator recovery is not supported yet
I1125 10:05:52.976783 29356 master.cpp:1435] Recovered 0 slaves from the Registry (122B) ; allowing 10mins for slaves to re-register
I1125 10:05:53.018154 29362 slave.cpp:189] Slave started on 231)@127.0.0.1:42692
I1125 10:05:53.018326 29362 slave.cpp:190] Flags at startup: --appc_store_dir="/tmp/mesos/store/appc" --authenticatee="crammd5" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/tmp/MasterMaintenanceTest_InverseOffersFilters_RnacDY/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_auth_server="auth.docker.io" --docker_auth_server_port="443" --docker_kill_orphans="true" --docker_local_archives_dir="/tmp/mesos/images/docker" --docker_puller="local" --docker_puller_timeout="60" --docker_registry="registry-1.docker.io" --docker_registry_port="443" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --docker_store_dir="/tmp/mesos/store/docker" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/tmp/MasterMaintenanceTest_InverseOffersFilters_RnacDY/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="false" --hostname="maintenance-host" --hostname_lookup="true" --image_provisioner_backend="copy" --initialize_driver_logging="true" --isolation="posix/cpu,posix/mem" --launcher_dir="/home/vagrant/build/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resources="cpus:2;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --systemd_runtime_directory="/run/systemd/system" --version="false" --work_dir="/tmp/MasterMaintenanceTest_InverseOffersFilters_RnacDY"
W1125 10:05:53.018476 29362 slave.cpp:193]
**************************************************
Slave bound to loopback interface! Cannot communicate with remote master(s). You might want to set '--ip' flag to a routable IP address.
**************************************************
I1125 10:05:53.018497 29362 credentials.hpp:83] Loading credential for authentication from '/tmp/MasterMaintenanceTest_InverseOffersFilters_RnacDY/credential'
I1125 10:05:53.018635 29362 slave.cpp:320] Slave using credential for: test-principal
I1125 10:05:53.018692 29362 resources.cpp:472] Parsing resources as JSON failed: cpus:2;mem:1024;disk:1024;ports:[31000-32000]
Trying semicolon-delimited string format instead
I1125 10:05:53.019016 29362 slave.cpp:390] Slave resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I1125 10:05:53.019132 29362 slave.cpp:398] Slave attributes: [  ]
I1125 10:05:53.019151 29362 slave.cpp:403] Slave hostname: maintenance-host
I1125 10:05:53.019160 29362 slave.cpp:408] Slave checkpoint: true
I1125 10:05:53.019397 29362 state.cpp:52] Recovering state from '/tmp/MasterMaintenanceTest_InverseOffersFilters_RnacDY/meta'
I1125 10:05:53.019668 29362 status_update_manager.cpp:200] Recovering status update manager
I1125 10:05:53.019843 29362 slave.cpp:4258] Finished recovery
I1125 10:05:53.020084 29362 slave.cpp:4430] Querying resource estimator for oversubscribable resources
I1125 10:05:53.020236 29356 slave.cpp:727] New master detected at master@127.0.0.1:42692
I1125 10:05:53.020336 29356 slave.cpp:790] Authenticating with master master@127.0.0.1:42692
I1125 10:05:53.020364 29356 slave.cpp:795] Using default CRAM-MD5 authenticatee
I1125 10:05:53.020239 29361 status_update_manager.cpp:174] Pausing sending status updates
I1125 10:05:53.020453 29356 slave.cpp:763] Detecting new master
I1125 10:05:53.020498 29356 slave.cpp:4444] Received oversubscribable resources  from the resource estimator
I1125 10:05:53.020603 29359 authenticatee.cpp:121] Creating new client SASL connection
I1125 10:05:53.020824 29363 master.cpp:5169] Authenticating slave(231)@127.0.0.1:42692
I1125 10:05:53.020900 29363 authenticator.cpp:413] Starting authentication session for crammd5_authenticatee(231)@127.0.0.1:42692
I1125 10:05:53.020953 29363 authenticator.cpp:98] Creating new server SASL connection
I1125 10:05:53.022168 29363 authenticatee.cpp:212] Received SASL authentication mechanisms: CRAM-MD5
I1125 10:05:53.022938 29363 authenticatee.cpp:238] Attempting to authenticate with mechanism 'CRAM-MD5'
I1125 10:05:53.023844 29357 authenticator.cpp:203] Received SASL authentication start
I1125 10:05:53.023900 29357 authenticator.cpp:325] Authentication requires more steps
I1125 10:05:53.023927 29357 authenticatee.cpp:258] Received SASL authentication step
I1125 10:05:53.024224 29358 authenticator.cpp:231] Received SASL authentication step
I1125 10:05:53.024242 29358 auxprop.cpp:107] Request to lookup properties for user: 'test-principal' realm: 'localhost.localdomain' server FQDN: 'localhost.localdomain' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false
I1125 10:05:53.024247 29358 auxprop.cpp:179] Looking up auxiliary property '*userPassword'
I1125 10:05:53.024253 29358 auxprop.cpp:179] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
I1125 10:05:53.024257 29358 auxprop.cpp:107] Request to lookup properties for user: 'test-principal' realm: 'localhost.localdomain' server FQDN: 'localhost.localdomain' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true
I1125 10:05:53.024261 29358 auxprop.cpp:129] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
I1125 10:05:53.024263 29358 auxprop.cpp:129] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
I1125 10:05:53.024271 29358 authenticator.cpp:317] Authentication success
I1125 10:05:53.024308 29358 authenticatee.cpp:298] Authentication success
I1125 10:05:53.024343 29356 master.cpp:5199] Successfully authenticated principal 'test-principal' at slave(231)@127.0.0.1:42692
I1125 10:05:53.024361 29358 authenticator.cpp:431] Authentication session cleanup for crammd5_authenticatee(231)@127.0.0.1:42692
I1125 10:05:53.024399 29356 slave.cpp:858] Successfully authenticated with master master@127.0.0.1:42692
I1125 10:05:53.024463 29356 slave.cpp:1252] Will retry registration in 6.248788ms if necessary
I1125 10:05:53.024519 29358 master.cpp:3878] Registering slave at slave(231)@127.0.0.1:42692 (maintenance-host) with id 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0
I1125 10:05:53.024619 29359 registrar.cpp:439] Applied 1 operations in 10716ns; attempting to update the 'registry'
I1125 10:05:53.024888 29360 log.cpp:683] Attempting to append 334 bytes to the log
I1125 10:05:53.025022 29358 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 3
I1125 10:05:53.025449 29362 replica.cpp:538] Replica received write request for position 3 from (3120)@127.0.0.1:42692
I1125 10:05:53.025528 29362 leveldb.cpp:341] Persisting action (353 bytes) to leveldb took 39459ns
I1125 10:05:53.025557 29362 replica.cpp:713] Persisted action at 3
I1125 10:05:53.026142 29362 replica.cpp:692] Replica received learned notice for position 3 from @0.0.0.0:0
I1125 10:05:53.026193 29362 leveldb.cpp:341] Persisting action (355 bytes) to leveldb took 30033ns
I1125 10:05:53.026209 29362 replica.cpp:713] Persisted action at 3
I1125 10:05:53.026217 29362 replica.cpp:698] Replica learned APPEND action at position 3
I1125 10:05:53.026549 29361 registrar.cpp:484] Successfully updated the 'registry' in 1.910016ms
I1125 10:05:53.026626 29362 log.cpp:702] Attempting to truncate the log to 3
I1125 10:05:53.026749 29362 coordinator.cpp:348] Coordinator attempting to write TRUNCATE action at position 4
I1125 10:05:53.026821 29361 master.cpp:3946] Registered slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 at slave(231)@127.0.0.1:42692 (maintenance-host) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I1125 10:05:53.026814 29359 slave.cpp:3197] Received ping from slave-observer(231)@127.0.0.1:42692
I1125 10:05:53.026810 29356 hierarchical.cpp:380] Added slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 (maintenance-host) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (allocated: )
I1125 10:05:53.026984 29356 hierarchical.cpp:1066] No resources available to allocate!
I1125 10:05:53.027029 29356 hierarchical.cpp:1159] No inverse offers to send out!
I1125 10:05:53.027045 29356 hierarchical.cpp:977] Performed allocation for slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 in 81890ns
I1125 10:05:53.027395 29359 slave.cpp:902] Registered with master master@127.0.0.1:42692; given slave ID 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0
I1125 10:05:53.027442 29359 fetcher.cpp:79] Clearing fetcher cache
I1125 10:05:53.027400 29356 replica.cpp:538] Replica received write request for position 4 from (3121)@127.0.0.1:42692
I1125 10:05:53.027504 29356 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 13030ns
I1125 10:05:53.027523 29356 replica.cpp:713] Persisted action at 4
I1125 10:05:53.027540 29362 status_update_manager.cpp:181] Resuming sending status updates
I1125 10:05:53.027519 29359 slave.cpp:925] Checkpointing SlaveInfo to '/tmp/MasterMaintenanceTest_InverseOffersFilters_RnacDY/meta/slaves/932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0/slave.info'
I1125 10:05:53.027691 29359 slave.cpp:961] Forwarding total oversubscribed resources
I1125 10:05:53.029047 29360 replica.cpp:692] Replica received learned notice for position 4 from @0.0.0.0:0
I1125 10:05:53.029089 29360 leveldb.cpp:341] Persisting action (18 bytes) to leveldb took 9456ns
I1125 10:05:53.029103 29360 leveldb.cpp:399] Deleting ~2 keys from leveldb took 3672ns
I1125 10:05:53.029110 29360 replica.cpp:713] Persisted action at 4
I1125 10:05:53.029116 29360 replica.cpp:698] Replica learned TRUNCATE action at position 4
I1125 10:05:53.030750 29356 master.cpp:4288] Received update of slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 at slave(231)@127.0.0.1:42692 (maintenance-host) with total oversubscribed resources
I1125 10:05:53.030921 29356 hierarchical.cpp:436] Slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 (maintenance-host) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: )
I1125 10:05:53.030997 29356 hierarchical.cpp:1066] No resources available to allocate!
I1125 10:05:53.031043 29356 hierarchical.cpp:1159] No inverse offers to send out!
I1125 10:05:53.031082 29356 hierarchical.cpp:977] Performed allocation for slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 in 98222ns
I1125 10:05:53.031096 29362 slave.cpp:189] Slave started on 232)@127.0.0.1:42692
I1125 10:05:53.031189 29362 slave.cpp:190] Flags at startup: --appc_store_dir="/tmp/mesos/store/appc" --authenticatee="crammd5" --cgroups_cpu_enable_pids_and_tids_count="false" --cgroups_enable_cfs="false" --cgroups_hierarchy="/sys/fs/cgroup" --cgroups_limit_swap="false" --cgroups_root="mesos" --container_disk_watch_interval="15secs" --containerizers="mesos" --credential="/tmp/MasterMaintenanceTest_InverseOffersFilters_Lcfe1R/credential" --default_role="*" --disk_watch_interval="1mins" --docker="docker" --docker_auth_server="auth.docker.io" --docker_auth_server_port="443" --docker_kill_orphans="true" --docker_local_archives_dir="/tmp/mesos/images/docker" --docker_puller="local" --docker_puller_timeout="60" --docker_registry="registry-1.docker.io" --docker_registry_port="443" --docker_remove_delay="6hrs" --docker_socket="/var/run/docker.sock" --docker_stop_timeout="0ns" --docker_store_dir="/tmp/mesos/store/docker" --enforce_container_disk_quota="false" --executor_registration_timeout="1mins" --executor_shutdown_grace_period="5secs" --fetcher_cache_dir="/tmp/MasterMaintenanceTest_InverseOffersFilters_Lcfe1R/fetch" --fetcher_cache_size="2GB" --frameworks_home="" --gc_delay="1weeks" --gc_disk_headroom="0.1" --hadoop_home="" --help="false" --hostname="maintenance-host-2" --hostname_lookup="true" --image_provisioner_backend="copy" --initialize_driver_logging="true" --isolation="posix/cpu,posix/mem" --launcher_dir="/home/vagrant/build/src" --logbufsecs="0" --logging_level="INFO" --oversubscribed_resources_interval="15secs" --perf_duration="10secs" --perf_interval="1mins" --qos_correction_interval_min="0ns" --quiet="false" --recover="reconnect" --recovery_timeout="15mins" --registration_backoff_factor="10ms" --resources="cpus:2;mem:1024;disk:1024;ports:[31000-32000]" --revocable_cpu_low_priority="true" --sandbox_directory="/mnt/mesos/sandbox" --strict="true" --switch_user="true" --systemd_runtime_directory="/run/systemd/system" --version="false" --work_dir="/tmp/MasterMaintenanceTest_InverseOffersFilters_Lcfe1R"
W1125 10:05:53.031327 29362 slave.cpp:193]
**************************************************
Slave bound to loopback interface! Cannot communicate with remote master(s). You might want to set '--ip' flag to a routable IP address.
**************************************************
I1125 10:05:53.031342 29362 credentials.hpp:83] Loading credential for authentication from '/tmp/MasterMaintenanceTest_InverseOffersFilters_Lcfe1R/credential'
I1125 10:05:53.031442 29362 slave.cpp:320] Slave using credential for: test-principal
I1125 10:05:53.031491 29362 resources.cpp:472] Parsing resources as JSON failed: cpus:2;mem:1024;disk:1024;ports:[31000-32000]
Trying semicolon-delimited string format instead
I1125 10:05:53.031560 29362 slave.cpp:390] Slave resources: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I1125 10:05:53.031577 29362 slave.cpp:398] Slave attributes: [  ]
I1125 10:05:53.031584 29362 slave.cpp:403] Slave hostname: maintenance-host-2
I1125 10:05:53.031590 29362 slave.cpp:408] Slave checkpoint: true
I1125 10:05:53.031791 29362 state.cpp:52] Recovering state from '/tmp/MasterMaintenanceTest_InverseOffersFilters_Lcfe1R/meta'
I1125 10:05:53.031894 29362 status_update_manager.cpp:200] Recovering status update manager
I1125 10:05:53.031960 29362 slave.cpp:4258] Finished recovery
I1125 10:05:53.032367 29362 slave.cpp:4430] Querying resource estimator for oversubscribable resources
I1125 10:05:53.032542 29362 slave.cpp:727] New master detected at master@127.0.0.1:42692
I1125 10:05:53.032555 29361 status_update_manager.cpp:174] Pausing sending status updates
I1125 10:05:53.032560 29362 slave.cpp:790] Authenticating with master master@127.0.0.1:42692
I1125 10:05:53.032665 29362 slave.cpp:795] Using default CRAM-MD5 authenticatee
I1125 10:05:53.032713 29362 slave.cpp:763] Detecting new master
I1125 10:05:53.032737 29362 slave.cpp:4444] Received oversubscribable resources  from the resource estimator
I1125 10:05:53.032747 29361 authenticatee.cpp:121] Creating new client SASL connection
I1125 10:05:53.032793 29361 master.cpp:5169] Authenticating slave(232)@127.0.0.1:42692
I1125 10:05:53.032912 29362 authenticator.cpp:413] Starting authentication session for crammd5_authenticatee(232)@127.0.0.1:42692
I1125 10:05:53.032994 29362 authenticator.cpp:98] Creating new server SASL connection
I1125 10:05:53.033241 29360 authenticatee.cpp:212] Received SASL authentication mechanisms: CRAM-MD5
I1125 10:05:53.033272 29360 authenticatee.cpp:238] Attempting to authenticate with mechanism 'CRAM-MD5'
I1125 10:05:53.033306 29360 authenticator.cpp:203] Received SASL authentication start
I1125 10:05:53.033359 29360 authenticator.cpp:325] Authentication requires more steps
I1125 10:05:53.033396 29360 authenticatee.cpp:258] Received SASL authentication step
I1125 10:05:53.033452 29360 authenticator.cpp:231] Received SASL authentication step
I1125 10:05:53.033536 29360 auxprop.cpp:107] Request to lookup properties for user: 'test-principal' realm: 'localhost.localdomain' server FQDN: 'localhost.localdomain' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: false
I1125 10:05:53.033587 29360 auxprop.cpp:179] Looking up auxiliary property '*userPassword'
I1125 10:05:53.033601 29360 auxprop.cpp:179] Looking up auxiliary property '*cmusaslsecretCRAM-MD5'
I1125 10:05:53.033614 29360 auxprop.cpp:107] Request to lookup properties for user: 'test-principal' realm: 'localhost.localdomain' server FQDN: 'localhost.localdomain' SASL_AUXPROP_VERIFY_AGAINST_HASH: false SASL_AUXPROP_OVERRIDE: false SASL_AUXPROP_AUTHZID: true
I1125 10:05:53.033624 29360 auxprop.cpp:129] Skipping auxiliary property '*userPassword' since SASL_AUXPROP_AUTHZID == true
I1125 10:05:53.033629 29360 auxprop.cpp:129] Skipping auxiliary property '*cmusaslsecretCRAM-MD5' since SASL_AUXPROP_AUTHZID == true
I1125 10:05:53.033640 29360 authenticator.cpp:317] Authentication success
I1125 10:05:53.033684 29360 authenticatee.cpp:298] Authentication success
I1125 10:05:53.033704 29360 master.cpp:5199] Successfully authenticated principal 'test-principal' at slave(232)@127.0.0.1:42692
I1125 10:05:53.033763 29363 authenticator.cpp:431] Authentication session cleanup for crammd5_authenticatee(232)@127.0.0.1:42692
I1125 10:05:53.034786 29360 slave.cpp:858] Successfully authenticated with master master@127.0.0.1:42692
I1125 10:05:53.034847 29360 slave.cpp:1252] Will retry registration in 16.568353ms if necessary
I1125 10:05:53.034903 29361 master.cpp:3878] Registering slave at slave(232)@127.0.0.1:42692 (maintenance-host-2) with id 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1
I1125 10:05:53.035172 29361 registrar.cpp:439] Applied 1 operations in 9679ns; attempting to update the 'registry'
I1125 10:05:53.035488 29360 log.cpp:683] Attempting to append 506 bytes to the log
I1125 10:05:53.035536 29360 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 5
I1125 10:05:53.036049 29363 replica.cpp:538] Replica received write request for position 5 from (3126)@127.0.0.1:42692
I1125 10:05:53.036125 29363 leveldb.cpp:341] Persisting action (525 bytes) to leveldb took 16163ns
I1125 10:05:53.036135 29363 replica.cpp:713] Persisted action at 5
I1125 10:05:53.036314 29363 replica.cpp:692] Replica received learned notice for position 5 from @0.0.0.0:0
I1125 10:05:53.036345 29363 leveldb.cpp:341] Persisting action (527 bytes) to leveldb took 11228ns
I1125 10:05:53.036353 29363 replica.cpp:713] Persisted action at 5
I1125 10:05:53.036361 29363 replica.cpp:698] Replica learned APPEND action at position 5
I1125 10:05:53.036830 29361 registrar.cpp:484] Successfully updated the 'registry' in 1.615872ms
I1125 10:05:53.036923 29359 log.cpp:702] Attempting to truncate the log to 5
I1125 10:05:53.036994 29363 coordinator.cpp:348] Coordinator attempting to write TRUNCATE action at position 6
I1125 10:05:53.037420 29358 slave.cpp:3197] Received ping from slave-observer(232)@127.0.0.1:42692
I1125 10:05:53.037662 29360 replica.cpp:538] Replica received write request for position 6 from (3127)@127.0.0.1:42692
I1125 10:05:53.037859 29360 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 12675ns
I1125 10:05:53.037876 29360 replica.cpp:713] Persisted action at 6
I1125 10:05:53.037744 29357 master.cpp:3946] Registered slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 at slave(232)@127.0.0.1:42692 (maintenance-host-2) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000]
I1125 10:05:53.037820 29361 hierarchical.cpp:380] Added slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 (maintenance-host-2) with cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] (allocated: )
I1125 10:05:53.037920 29361 hierarchical.cpp:1066] No resources available to allocate!
I1125 10:05:53.037930 29361 hierarchical.cpp:1159] No inverse offers to send out!
I1125 10:05:53.037937 29361 hierarchical.cpp:977] Performed allocation for slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 in 28504ns
I1125 10:05:53.038362 29363 slave.cpp:902] Registered with master master@127.0.0.1:42692; given slave ID 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1
I1125 10:05:53.038379 29363 fetcher.cpp:79] Clearing fetcher cache
I1125 10:05:53.038483 29363 slave.cpp:925] Checkpointing SlaveInfo to '/tmp/MasterMaintenanceTest_InverseOffersFilters_Lcfe1R/meta/slaves/932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1/slave.info'
I1125 10:05:53.038539 29358 status_update_manager.cpp:181] Resuming sending status updates
I1125 10:05:53.038573 29363 slave.cpp:961] Forwarding total oversubscribed resources
I1125 10:05:53.038967 29360 master.cpp:4288] Received update of slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 at slave(232)@127.0.0.1:42692 (maintenance-host-2) with total oversubscribed resources
I1125 10:05:53.039217 29360 hierarchical.cpp:436] Slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 (maintenance-host-2) updated with oversubscribed resources  (total: cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000], allocated: )
I1125 10:05:53.039255 29360 hierarchical.cpp:1066] No resources available to allocate!
I1125 10:05:53.039266 29360 hierarchical.cpp:1159] No inverse offers to send out!
I1125 10:05:53.039276 29360 hierarchical.cpp:977] Performed allocation for slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 in 31974ns
I1125 10:05:53.038652 29361 replica.cpp:692] Replica received learned notice for position 6 from @0.0.0.0:0
I1125 10:05:53.039330 29363 process.cpp:3067] Handling HTTP event for process 'master' with path: '/master/maintenance/schedule'
I1125 10:05:53.039345 29361 leveldb.cpp:341] Persisting action (18 bytes) to leveldb took 14563ns
I1125 10:05:53.039360 29363 http.cpp:336] HTTP POST for /master/maintenance/schedule from 127.0.0.1:48620
I1125 10:05:53.039367 29361 leveldb.cpp:399] Deleting ~2 keys from leveldb took 6122ns
I1125 10:05:53.039423 29361 replica.cpp:713] Persisted action at 6
I1125 10:05:53.039434 29361 replica.cpp:698] Replica learned TRUNCATE action at position 6
I1125 10:05:53.039525 29361 registrar.cpp:439] Applied 1 operations in 22994ns; attempting to update the 'registry'
I1125 10:05:53.039913 29358 log.cpp:683] Attempting to append 721 bytes to the log
I1125 10:05:53.039993 29358 coordinator.cpp:348] Coordinator attempting to write APPEND action at position 7
I1125 10:05:53.040264 29358 replica.cpp:538] Replica received write request for position 7 from (3128)@127.0.0.1:42692
I1125 10:05:53.040309 29358 leveldb.cpp:341] Persisting action (740 bytes) to leveldb took 16218ns
I1125 10:05:53.040323 29358 replica.cpp:713] Persisted action at 7
I1125 10:05:53.040624 29358 replica.cpp:692] Replica received learned notice for position 7 from @0.0.0.0:0
I1125 10:05:53.040701 29358 leveldb.cpp:341] Persisting action (742 bytes) to leveldb took 20656ns
I1125 10:05:53.040712 29358 replica.cpp:713] Persisted action at 7
I1125 10:05:53.040719 29358 replica.cpp:698] Replica learned APPEND action at position 7
I1125 10:05:53.041015 29361 registrar.cpp:484] Successfully updated the 'registry' in 1.456128ms
I1125 10:05:53.041066 29358 log.cpp:702] Attempting to truncate the log to 7
I1125 10:05:53.041152 29358 coordinator.cpp:348] Coordinator attempting to write TRUNCATE action at position 8
I1125 10:05:53.041187 29361 master.cpp:4344] Updating unavailability of slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 at slave(232)@127.0.0.1:42692 (maintenance-host-2), starting at 2394.91792003739weeks
I1125 10:05:53.041216 29361 master.cpp:4344] Updating unavailability of slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 at slave(231)@127.0.0.1:42692 (maintenance-host), starting at 2394.91792003739weeks
I1125 10:05:53.041234 29361 master.cpp:4344] Updating unavailability of slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 at slave(231)@127.0.0.1:42692 (maintenance-host), starting at 2394.91792003739weeks
I1125 10:05:53.041266 29361 master.cpp:4344] Updating unavailability of slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 at slave(232)@127.0.0.1:42692 (maintenance-host-2), starting at 2394.91792003739weeks
I1125 10:05:53.041291 29358 hierarchical.cpp:1066] No resources available to allocate!
I1125 10:05:53.041311 29358 hierarchical.cpp:1159] No inverse offers to send out!
I1125 10:05:53.041319 29358 hierarchical.cpp:977] Performed allocation for slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 in 43379ns
I1125 10:05:53.041436 29358 hierarchical.cpp:1066] No resources available to allocate!
I1125 10:05:53.041460 29358 hierarchical.cpp:1159] No inverse offers to send out!
I1125 10:05:53.041466 29361 replica.cpp:538] Replica received write request for position 8 from (3129)@127.0.0.1:42692
I1125 10:05:53.041472 29358 hierarchical.cpp:977] Performed allocation for slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 in 48964ns
I1125 10:05:53.041744 29361 leveldb.cpp:341] Persisting action (16 bytes) to leveldb took 13682ns
I1125 10:05:53.041798 29358 hierarchical.cpp:1066] No resources available to allocate!
I1125 10:05:53.041875 29358 hierarchical.cpp:1159] No inverse offers to send out!
I1125 10:05:53.041889 29358 hierarchical.cpp:977] Performed allocation for slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 in 100752ns
I1125 10:05:53.041811 29361 replica.cpp:713] Persisted action at 8
I1125 10:05:53.041921 29358 hierarchical.cpp:1066] No resources available to allocate!
I1125 10:05:53.041970 29358 hierarchical.cpp:1159] No inverse offers to send out!
I1125 10:05:53.041977 29358 hierarchical.cpp:977] Performed allocation for slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 in 64834ns
I1125 10:05:53.042208 29361 replica.cpp:692] Replica received learned notice for position 8 from @0.0.0.0:0
I1125 10:05:53.042235 29361 leveldb.cpp:341] Persisting action (18 bytes) to leveldb took 8768ns
I1125 10:05:53.042248 29361 leveldb.cpp:399] Deleting ~2 keys from leveldb took 3427ns
I1125 10:05:53.042255 29361 replica.cpp:713] Persisted action at 8
I1125 10:05:53.042264 29361 replica.cpp:698] Replica learned TRUNCATE action at position 8
W1125 10:05:53.042613 29342 scheduler.cpp:139]
**************************************************
Scheduler driver bound to loopback interface! Cannot communicate with remote master(s). You might want to set 'LIBPROCESS_IP' environment variable to use a routable IP address.
**************************************************
I1125 10:05:53.042637 29342 scheduler.cpp:154] Version: 0.27.0
I1125 10:05:53.042955 29359 scheduler.cpp:236] New master detected at master@127.0.0.1:42692
I1125 10:05:53.053889 29359 scheduler.cpp:298] Sending SUBSCRIBE call to master@127.0.0.1:42692
I1125 10:05:53.055236 29359 process.cpp:3067] Handling HTTP event for process 'master' with path: '/master/api/v1/scheduler'
I1125 10:05:53.055299 29359 http.cpp:336] HTTP POST for /master/api/v1/scheduler from 127.0.0.1:48622
I1125 10:05:53.055353 29359 master.cpp:1887] Received subscription request for HTTP framework 'default'
I1125 10:05:53.055373 29359 master.cpp:1664] Authorizing framework principal 'test-principal' to receive offers for role '*'
I1125 10:05:53.055559 29358 master.cpp:1979] Subscribing framework 'default' with checkpointing disabled and capabilities [  ]
I1125 10:05:53.055771 29359 hierarchical.cpp:220] Added framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.055838 29357 master.hpp:1514] Sending heartbeat to 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.060873 29359 hierarchical.cpp:961] Performed allocation for 2 slaves in 5.06093ms
I1125 10:05:53.061059 29356 master.cpp:4998] Sending 2 offers to framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 (default)
I1125 10:05:53.061591 29360 scheduler.cpp:457] Enqueuing event SUBSCRIBED received from master@127.0.0.1:42692
I1125 10:05:53.061810 29360 scheduler.cpp:457] Enqueuing event HEARTBEAT received from master@127.0.0.1:42692
I1125 10:05:53.061856 29356 master.cpp:5088] Sending 2 inverse offers to framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 (default)
I1125 10:05:53.062460 29363 master_maintenance_tests.cpp:172] Ignoring HEARTBEAT event
I1125 10:05:53.062867 29360 scheduler.cpp:457] Enqueuing event OFFERS received from master@127.0.0.1:42692
I1125 10:05:53.064837 29359 scheduler.cpp:457] Enqueuing event OFFERS received from master@127.0.0.1:42692
I1125 10:05:53.076799 29360 hierarchical.cpp:1066] No resources available to allocate!
I1125 10:05:53.076874 29360 hierarchical.cpp:961] Performed allocation for 2 slaves in 141622ns
I1125 10:05:53.088424 29359 scheduler.cpp:298] Sending ACCEPT call to master@127.0.0.1:42692
I1125 10:05:53.089279 29356 process.cpp:3067] Handling HTTP event for process 'master' with path: '/master/api/v1/scheduler'
I1125 10:05:53.089354 29356 http.cpp:336] HTTP POST for /master/api/v1/scheduler from 127.0.0.1:48624
I1125 10:05:53.089478 29356 master.cpp:2934] Processing ACCEPT call for offers: [ 932f7d7b-f2d4-42c7-9391-222c19b9d35b-O0 ] on slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 at slave(232)@127.0.0.1:42692 (maintenance-host-2) for framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 (default)
I1125 10:05:53.089517 29356 master.cpp:2730] Authorizing framework principal 'test-principal' to launch task 4f2e822c-87e6-4759-9de9-232c62f65127 as user 'vagrant'
W1125 10:05:53.090023 29363 validation.cpp:420] Executor executor-1 for task 4f2e822c-87e6-4759-9de9-232c62f65127 uses less CPUs (None) than the minimum required (0.01). Please update your executor, as this will be mandatory in future releases.
W1125 10:05:53.090204 29363 validation.cpp:432] Executor executor-1 for task 4f2e822c-87e6-4759-9de9-232c62f65127 uses less memory (None) than the minimum required (32MB). Please update your executor, as this will be mandatory in future releases.
I1125 10:05:53.090317 29358 scheduler.cpp:298] Sending ACCEPT call to master@127.0.0.1:42692
I1125 10:05:53.090308 29363 master.hpp:176] Adding task 4f2e822c-87e6-4759-9de9-232c62f65127 with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 (maintenance-host-2)
I1125 10:05:53.090571 29363 master.cpp:3264] Launching task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 (default) with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 at slave(232)@127.0.0.1:42692 (maintenance-host-2)
I1125 10:05:53.090739 29363 slave.cpp:1292] Got assigned task 4f2e822c-87e6-4759-9de9-232c62f65127 for framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.090894 29363 slave.cpp:1411] Launching task 4f2e822c-87e6-4759-9de9-232c62f65127 for framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.091028 29363 paths.cpp:434] Trying to chown '/tmp/MasterMaintenanceTest_InverseOffersFilters_Lcfe1R/slaves/932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1/frameworks/932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000/executors/executor-1/runs/c7df7581-0aa5-4d50-9180-f1f694926682' to user 'vagrant'
I1125 10:05:53.093366 29358 process.cpp:3067] Handling HTTP event for process 'master' with path: '/master/api/v1/scheduler'
I1125 10:05:53.093477 29358 http.cpp:336] HTTP POST for /master/api/v1/scheduler from 127.0.0.1:48626
I1125 10:05:53.093636 29358 master.cpp:2934] Processing ACCEPT call for offers: [ 932f7d7b-f2d4-42c7-9391-222c19b9d35b-O1 ] on slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 at slave(231)@127.0.0.1:42692 (maintenance-host) for framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 (default)
I1125 10:05:53.093668 29358 master.cpp:2730] Authorizing framework principal 'test-principal' to launch task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c as user 'vagrant'
W1125 10:05:53.094297 29358 validation.cpp:420] Executor executor-2 for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c uses less CPUs (None) than the minimum required (0.01). Please update your executor, as this will be mandatory in future releases.
W1125 10:05:53.094444 29358 validation.cpp:432] Executor executor-2 for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c uses less memory (None) than the minimum required (32MB). Please update your executor, as this will be mandatory in future releases.
I1125 10:05:53.094928 29358 master.hpp:176] Adding task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 (maintenance-host)
I1125 10:05:53.096168 29358 master.cpp:3264] Launching task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 (default) with resources cpus(*):2; mem(*):1024; disk(*):1024; ports(*):[31000-32000] on slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 at slave(231)@127.0.0.1:42692 (maintenance-host)
I1125 10:05:53.096289 29358 slave.cpp:1292] Got assigned task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c for framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.096395 29358 slave.cpp:1411] Launching task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c for framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.096462 29358 paths.cpp:434] Trying to chown '/tmp/MasterMaintenanceTest_InverseOffersFilters_RnacDY/slaves/932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0/frameworks/932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000/executors/executor-2/runs/48059000-b695-4b92-bcd2-cd20e6a295fb' to user 'vagrant'
I1125 10:05:53.104913 29363 slave.cpp:5043] Launching executor executor-1 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 with resources  in work directory '/tmp/MasterMaintenanceTest_InverseOffersFilters_Lcfe1R/slaves/932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1/frameworks/932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000/executors/executor-1/runs/c7df7581-0aa5-4d50-9180-f1f694926682'
I1125 10:05:53.105962 29363 exec.cpp:134] Version: 0.27.0
I1125 10:05:53.106086 29360 exec.cpp:184] Executor started at: executor(231)@127.0.0.1:42692 with pid 29342
I1125 10:05:53.106086 29363 slave.cpp:1629] Queuing task '4f2e822c-87e6-4759-9de9-232c62f65127' for executor 'executor-1' of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.106173 29363 slave.cpp:2406] Got registration for executor 'executor-1' of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 from executor(231)@127.0.0.1:42692
I1125 10:05:53.106320 29363 slave.cpp:680] Successfully attached file '/tmp/MasterMaintenanceTest_InverseOffersFilters_Lcfe1R/slaves/932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1/frameworks/932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000/executors/executor-1/runs/c7df7581-0aa5-4d50-9180-f1f694926682'
I1125 10:05:53.106381 29360 exec.cpp:208] Executor registered on slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1
I1125 10:05:53.106394 29363 slave.cpp:1794] Sending queued task '4f2e822c-87e6-4759-9de9-232c62f65127' to executor 'executor-1' of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 at executor(231)@127.0.0.1:42692
I1125 10:05:53.106457 29360 exec.cpp:220] Executor::registered took 15459ns
I1125 10:05:53.106720 29356 exec.cpp:295] Executor asked to run task '4f2e822c-87e6-4759-9de9-232c62f65127'
I1125 10:05:53.106765 29356 exec.cpp:304] Executor::launchTask took 20427ns
I1125 10:05:53.106792 29356 exec.cpp:517] Executor sending status update TASK_RUNNING (UUID: 6a5649f3-df48-4fdd-943a-3d89bedba730) for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.106868 29356 slave.cpp:2763] Handling status update TASK_RUNNING (UUID: 6a5649f3-df48-4fdd-943a-3d89bedba730) for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 from executor(231)@127.0.0.1:42692
I1125 10:05:53.107044 29356 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: 6a5649f3-df48-4fdd-943a-3d89bedba730) for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.107065 29356 status_update_manager.cpp:497] Creating StatusUpdate stream for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.107650 29356 status_update_manager.cpp:374] Forwarding update TASK_RUNNING (UUID: 6a5649f3-df48-4fdd-943a-3d89bedba730) for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 to the slave
I1125 10:05:53.107714 29356 slave.cpp:3115] Forwarding the update TASK_RUNNING (UUID: 6a5649f3-df48-4fdd-943a-3d89bedba730) for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 to master@127.0.0.1:42692
I1125 10:05:53.107750 29356 slave.cpp:3009] Status update manager successfully handled status update TASK_RUNNING (UUID: 6a5649f3-df48-4fdd-943a-3d89bedba730) for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.107764 29356 slave.cpp:3025] Sending acknowledgement for status update TASK_RUNNING (UUID: 6a5649f3-df48-4fdd-943a-3d89bedba730) for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 to executor(231)@127.0.0.1:42692
I1125 10:05:53.107805 29356 master.cpp:4433] Status update TASK_RUNNING (UUID: 6a5649f3-df48-4fdd-943a-3d89bedba730) for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 from slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1 at slave(232)@127.0.0.1:42692 (maintenance-host-2)
I1125 10:05:53.107820 29356 master.cpp:4481] Forwarding status update TASK_RUNNING (UUID: 6a5649f3-df48-4fdd-943a-3d89bedba730) for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.107879 29356 master.cpp:6085] Updating the state of task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
I1125 10:05:53.107903 29356 exec.cpp:341] Executor received status update acknowledgement 6a5649f3-df48-4fdd-943a-3d89bedba730 for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.108943 29358 slave.cpp:5043] Launching executor executor-2 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 with resources  in work directory '/tmp/MasterMaintenanceTest_InverseOffersFilters_RnacDY/slaves/932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0/frameworks/932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000/executors/executor-2/runs/48059000-b695-4b92-bcd2-cd20e6a295fb'
I1125 10:05:53.109014 29361 scheduler.cpp:457] Enqueuing event UPDATE received from master@127.0.0.1:42692
I1125 10:05:53.109534 29358 exec.cpp:134] Version: 0.27.0
I1125 10:05:53.109640 29361 exec.cpp:184] Executor started at: executor(232)@127.0.0.1:42692 with pid 29342
I1125 10:05:53.109652 29358 slave.cpp:1629] Queuing task '30a7a7f7-3512-4ac4-9ad6-1ffd935d406c' for executor 'executor-2' of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.109730 29358 slave.cpp:680] Successfully attached file '/tmp/MasterMaintenanceTest_InverseOffersFilters_RnacDY/slaves/932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0/frameworks/932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000/executors/executor-2/runs/48059000-b695-4b92-bcd2-cd20e6a295fb'
I1125 10:05:53.109779 29358 slave.cpp:2406] Got registration for executor 'executor-2' of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 from executor(232)@127.0.0.1:42692
I1125 10:05:53.109904 29363 exec.cpp:208] Executor registered on slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0
I1125 10:05:53.109915 29358 slave.cpp:1794] Sending queued task '30a7a7f7-3512-4ac4-9ad6-1ffd935d406c' to executor 'executor-2' of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 at executor(232)@127.0.0.1:42692
I1125 10:05:53.109936 29363 exec.cpp:220] Executor::registered took 10543ns
I1125 10:05:53.110010 29363 exec.cpp:295] Executor asked to run task '30a7a7f7-3512-4ac4-9ad6-1ffd935d406c'
I1125 10:05:53.110034 29363 exec.cpp:304] Executor::launchTask took 12638ns
I1125 10:05:53.110055 29363 exec.cpp:517] Executor sending status update TASK_RUNNING (UUID: 1b17840a-7fdb-4254-9970-5cfa8cc3da92) for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.110158 29363 slave.cpp:2763] Handling status update TASK_RUNNING (UUID: 1b17840a-7fdb-4254-9970-5cfa8cc3da92) for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 from executor(232)@127.0.0.1:42692
I1125 10:05:53.110261 29358 status_update_manager.cpp:320] Received status update TASK_RUNNING (UUID: 1b17840a-7fdb-4254-9970-5cfa8cc3da92) for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.110290 29358 status_update_manager.cpp:497] Creating StatusUpdate stream for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.110379 29358 status_update_manager.cpp:374] Forwarding update TASK_RUNNING (UUID: 1b17840a-7fdb-4254-9970-5cfa8cc3da92) for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 to the slave
I1125 10:05:53.110517 29358 slave.cpp:3115] Forwarding the update TASK_RUNNING (UUID: 1b17840a-7fdb-4254-9970-5cfa8cc3da92) for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 to master@127.0.0.1:42692
I1125 10:05:53.110708 29358 slave.cpp:3009] Status update manager successfully handled status update TASK_RUNNING (UUID: 1b17840a-7fdb-4254-9970-5cfa8cc3da92) for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.110736 29358 slave.cpp:3025] Sending acknowledgement for status update TASK_RUNNING (UUID: 1b17840a-7fdb-4254-9970-5cfa8cc3da92) for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 to executor(232)@127.0.0.1:42692
I1125 10:05:53.110780 29357 master.cpp:4433] Status update TASK_RUNNING (UUID: 1b17840a-7fdb-4254-9970-5cfa8cc3da92) for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 from slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 at slave(231)@127.0.0.1:42692 (maintenance-host)
I1125 10:05:53.110806 29357 master.cpp:4481] Forwarding status update TASK_RUNNING (UUID: 1b17840a-7fdb-4254-9970-5cfa8cc3da92) for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.110812 29358 exec.cpp:341] Executor received status update acknowledgement 1b17840a-7fdb-4254-9970-5cfa8cc3da92 for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.110913 29357 master.cpp:6085] Updating the state of task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 (latest state: TASK_RUNNING, status update state: TASK_RUNNING)
I1125 10:05:53.112023 29360 scheduler.cpp:457] Enqueuing event UPDATE received from master@127.0.0.1:42692
I1125 10:05:53.127135 29359 scheduler.cpp:298] Sending ACKNOWLEDGE call to master@127.0.0.1:42692
I1125 10:05:53.127933 29363 process.cpp:3067] Handling HTTP event for process 'master' with path: '/master/api/v1/scheduler'
I1125 10:05:53.127984 29363 http.cpp:336] HTTP POST for /master/api/v1/scheduler from 127.0.0.1:48628
I1125 10:05:53.128021 29363 master.cpp:3590] Processing ACKNOWLEDGE call 6a5649f3-df48-4fdd-943a-3d89bedba730 for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 (default) on slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S1
I1125 10:05:53.128406 29359 status_update_manager.cpp:392] Received status update acknowledgement (UUID: 6a5649f3-df48-4fdd-943a-3d89bedba730) for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.128535 29361 slave.cpp:2346] Status update manager successfully handled status update acknowledgement (UUID: 6a5649f3-df48-4fdd-943a-3d89bedba730) for task 4f2e822c-87e6-4759-9de9-232c62f65127 of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.143676 29356 scheduler.cpp:298] Sending ACKNOWLEDGE call to master@127.0.0.1:42692
I1125 10:05:53.145460 29361 process.cpp:3067] Handling HTTP event for process 'master' with path: '/master/api/v1/scheduler'
I1125 10:05:53.145671 29361 http.cpp:336] HTTP POST for /master/api/v1/scheduler from 127.0.0.1:48630
I1125 10:05:53.145764 29361 master.cpp:3590] Processing ACKNOWLEDGE call 1b17840a-7fdb-4254-9970-5cfa8cc3da92 for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 (default) on slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0
I1125 10:05:53.146317 29360 status_update_manager.cpp:392] Received status update acknowledgement (UUID: 1b17840a-7fdb-4254-9970-5cfa8cc3da92) for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.146456 29360 slave.cpp:2346] Status update manager successfully handled status update acknowledgement (UUID: 1b17840a-7fdb-4254-9970-5cfa8cc3da92) for task 30a7a7f7-3512-4ac4-9ad6-1ffd935d406c of framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.150792 29360 scheduler.cpp:298] Sending DECLINE call to master@127.0.0.1:42692
I1125 10:05:53.152930 29359 process.cpp:3067] Handling HTTP event for process 'master' with path: '/master/api/v1/scheduler'
I1125 10:05:53.152971 29359 http.cpp:336] HTTP POST for /master/api/v1/scheduler from 127.0.0.1:48632
I1125 10:05:53.152995 29359 master.cpp:3316] Processing DECLINE call for offers: [ 932f7d7b-f2d4-42c7-9391-222c19b9d35b-O3 ] for framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 (default)
I1125 10:05:53.153069 29359 hierarchical.cpp:701] Framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 filtered inverse offers from slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 for 101secs
I1125 10:05:53.153707 29360 scheduler.cpp:298] Sending ACCEPT call to master@127.0.0.1:42692
I1125 10:05:53.154556 29358 hierarchical.cpp:1066] No resources available to allocate!
I1125 10:05:53.154603 29358 hierarchical.cpp:1276] Filtered unavailability on slave 932f7d7b-f2d4-42c7-9391-222c19b9d35b-S0 for framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000
I1125 10:05:53.154659 29358 hierarchical.cpp:961] Performed allocation for 2 slaves in 160585ns
I1125 10:05:53.154880 29362 process.cpp:3067] Handling HTTP event for process 'master' with path: '/master/api/v1/scheduler'
I1125 10:05:53.154907 29362 http.cpp:336] HTTP POST for /master/api/v1/scheduler from 127.0.0.1:48634
W1125 10:05:53.155109 29362 master.cpp:2897] ACCEPT call used invalid offers '[ 932f7d7b-f2d4-42c7-9391-222c19b9d35b-O2 ]': Offer 932f7d7b-f2d4-42c7-9391-222c19b9d35b-O2 is no longer valid
/mesos/src/tests/master_maintenance_tests.cpp:1559: Failure
Failed to wait 15secs for event
*** Aborted at 1448445968 (unix time) try "date -d @1448445968" if you are using GNU date ***
PC: @           0xdea368 testing::UnitTest::AddTestPartResult()
*** SIGSEGV (@0x0) received by PID 29342 (TID 0x7fe5f7b07880) from PID 0; stack trace: ***
    @     0x7fe5f58ae9f0 (unknown)
    @           0xdea368 testing::UnitTest::AddTestPartResult()
    @           0xdea61e testing::internal::AssertHelper::operator=()
    @           0x887c4c mesos::internal::tests::MasterMaintenanceTest_InverseOffersFilters_Test::TestBody()
    @           0xdf5063 testing::internal::HandleExceptionsInMethodIfSupported<>()
    @           0xded01a testing::Test::Run()
    @           0xded168 testing::TestInfo::Run()
    @           0xded245 testing::TestCase::Run()
    @           0xded4ef testing::internal::UnitTestImpl::RunAllTests()
    @           0xdf54f3 testing::internal::HandleExceptionsInMethodIfSupported<>()
    @           0xded810 testing::UnitTest::Run()
    @           0x4c9110 main
    @     0x7fe5f4856580 __libc_start_main
    @           0x4d8d19 _start
Segmentation fault (core dumped)
{noformat}


Thank you! Will update the target release.

That's a very odd failure.

The first batch of inverse offers are both received by the master:
{code:title=inverseOffer2}
I1125 10:05:53.152995 29359 master.cpp:3316] Processing DECLINE call for offers: [ 932f7d7b-f2d4-42c7-9391-222c19b9d35b-O3 ] for framework 932f7d7b-f2d4-42c7-9391-222c19b9d35b-0000 (default)
{code}

Note: This message shows up regardless, since {{Master::GetOffer}} does not search for inverse offers.  We might want to silence this incorrect warning.
{code:title=inverseOffer1}
W1125 10:05:53.155109 29362 master.cpp:2897] ACCEPT call used invalid offers '[ 932f7d7b-f2d4-42c7-9391-222c19b9d35b-O2 ]': Offer 932f7d7b-f2d4-42c7-9391-222c19b9d35b-O2 is no longer valid
{code}

Somehow, the allocation was not triggered by the subsequent clock advancement in the test.  I'm guessing:
# The clock was settled while the ACCEPT call was still in flight.
# The clock was then advanced before the ACCEPT call reached the master.  [This comment seems relevant](https://github.com/apache/mesos/blob/master/3rdparty/libprocess/src/process.cpp#L2845-L2856)
# The allocation went ahead, meaning the inverse offer had not been filtered to 0 seconds yet.
# Clock is paused, so we don't allocate -> test times out.

{code}
commit f7af250853a4c340016ae8cf2a456f7d0327ddba
Author: Neil Conway <neil.conway@gmail.com>
Date:   Thu Dec 3 10:21:45 2015 -0500

    Fixed flakey test: MasterMaintenanceTest.InverseOffersFilters.
    
    MESOS-3916.
    
    Review: https://reviews.apache.org/r/40672
{code}

Opened MESOS-4059 to track the remaining flakiness here.

