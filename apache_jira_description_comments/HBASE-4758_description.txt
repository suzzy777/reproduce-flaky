Currently TestMasterTransitions is flaky, and one way to hopefully make it more stable is to create a separate MiniHBaseCluster for every test method, and get rid of BeforeClass/AfterClass. So far I have successfully run TestMasterTransitions a few times with the fix, while it was failing without the fix.

TestMasterTransitions in trunk is a different story (most of the test is commented out in the trunk) and is out of scope of this JIRA.